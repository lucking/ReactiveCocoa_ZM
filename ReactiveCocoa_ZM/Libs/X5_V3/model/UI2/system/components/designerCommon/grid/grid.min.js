/*
jQWidgets v3.2.2 (2014-Mar-21)
Copyright (c) 2011-2014 jQWidgets.
License: http://jqwidgets.com/license/
*/

(function(e){e.jqx=e.jqx||{},e.jqx.define=function(e,t,n){e[t]=function(){this.baseType&&(this.base=new e[this.baseType],this.base.defineInstance()),this.defineInstance()},e[t].prototype.defineInstance=function(){},e[t].prototype.base=null,e[t].prototype.baseType=undefined,n&&e[n]&&(e[t].prototype.baseType=n)},e.jqx.invoke=function(t,n){if(n.length==0)return;var r=typeof n==Array||n.length>0?n[0]:n,i=typeof n==Array||n.length>1?Array.prototype.slice.call(n,1):e({}).toArray();while(t[r]==undefined&&t.base!=null){if(t[r]!=undefined&&e.isFunction(t[r]))return t[r].apply(t,i);if(typeof r=="string"){var s=r.toLowerCase();if(t[s]!=undefined&&e.isFunction(t[s]))return t[s].apply(t,i)}t=t.base}if(t[r]!=undefined&&e.isFunction(t[r]))return t[r].apply(t,i);if(typeof r=="string"){var s=r.toLowerCase();if(t[s]!=undefined&&e.isFunction(t[s]))return t[s].apply(t,i)}return},e.jqx.hasProperty=function(e,t){if(typeof t=="object")for(var n in t){var r=e;while(r){if(r.hasOwnProperty(n))return!0;if(r.hasOwnProperty(n.toLowerCase()))return!0;r=r.base}return!1}else while(e){if(e.hasOwnProperty(t))return!0;if(e.hasOwnProperty(t.toLowerCase()))return!0;e=e.base}return!1},e.jqx.hasFunction=function(t,n){if(n.length==0)return!1;if(t==undefined)return!1;var r=typeof n==Array||n.length>0?n[0]:n,i=typeof n==Array||n.length>1?Array.prototype.slice.call(n,1):{};while(t[r]==undefined&&t.base!=null){if(t[r]&&e.isFunction(t[r]))return!0;if(typeof r=="string"){var s=r.toLowerCase();if(t[s]&&e.isFunction(t[s]))return!0}t=t.base}if(t[r]&&e.isFunction(t[r]))return!0;if(typeof r=="string"){var s=r.toLowerCase();if(t[s]&&e.isFunction(t[s]))return!0}return!1},e.jqx.isPropertySetter=function(t,n){return n.length==1&&typeof n[0]=="object"?!0:n.length==2&&typeof n[0]=="string"&&!e.jqx.hasFunction(t,n)?!0:!1},e.jqx.validatePropertySetter=function(t,n,r){if(!e.jqx.propertySetterValidation)return!0;if(n.length==1&&typeof n[0]=="object"){for(var i in n[0]){var s=t;while(!s.hasOwnProperty(i)&&s.base)s=s.base;if(!s||!s.hasOwnProperty(i)){if(!r){var o=s.hasOwnProperty(i.toString().toLowerCase());if(!o)throw"Invalid property: "+i;return!0}return!1}}return!0}if(n.length!=2){if(!r)throw"Invalid property: "+n.length>=0?n[0]:"";return!1}while(!t.hasOwnProperty(n[0])&&t.base)t=t.base;if(!t||!t.hasOwnProperty(n[0])){if(!r)throw"Invalid property: "+n[0];return!1}return!0},e.jqx.set=function(t,n){if(n.length==1&&typeof n[0]=="object")e.each(n[0],function(n,r){var i=t;while(!i.hasOwnProperty(n)&&i.base!=null)i=i.base;if(i.hasOwnProperty(n))e.jqx.setvalueraiseevent(i,n,r);else if(i.hasOwnProperty(n.toLowerCase()))e.jqx.setvalueraiseevent(i,n.toLowerCase(),r);else if(e.jqx.propertySetterValidation)throw"jqxCore: invalid property '"+n+"'"});else if(n.length==2){while(!t.hasOwnProperty(n[0])&&t.base)t=t.base;if(t.hasOwnProperty(n[0]))e.jqx.setvalueraiseevent(t,n[0],n[1]);else if(t.hasOwnProperty(n[0].toLowerCase()))e.jqx.setvalueraiseevent(t,n[0].toLowerCase(),n[1]);else if(e.jqx.propertySetterValidation)throw"jqxCore: invalid property '"+n[0]+"'"}},e.jqx.setvalueraiseevent=function(e,t,n){var r=e[t];e[t]=n;if(!e.isInitialized)return;e.propertyChangedHandler!=undefined&&e.propertyChangedHandler(e,t,r,n),e.propertyChangeMap!=undefined&&e.propertyChangeMap[t]!=undefined&&e.propertyChangeMap[t](e,t,r,n)},e.jqx.get=function(e,t){if(t==undefined||t==null)return undefined;if(e.propertyMap){var n=e.propertyMap(t);if(n!=null)return n}if(e.hasOwnProperty(t))return e[t];if(e.hasOwnProperty(t.toLowerCase()))return e[t.toLowerCase()];var r=undefined;if(typeof t==Array){if(t.length!=1)return undefined;r=t[0]}else typeof t=="string"&&(r=t);while(!e.hasOwnProperty(r)&&e.base)e=e.base;return e?e[r]:undefined},e.jqx.serialize=function(t){var n="";if(e.isArray(t)){n="[";for(var r=0;r<t.length;r++)r>0&&(n+=", "),n+=e.jqx.serialize(t[r]);n+="]"}else if(typeof t=="object"){n="{";var i=0;for(var r in t)i++>0&&(n+=", "),n+=r+": "+e.jqx.serialize(t[r]);n+="}"}else n=t.toString();return n},e.jqx.propertySetterValidation=!0,e.jqx.jqxWidgetProxy=function(t,n,r){var i=e(n),s=e.data(n,t);if(s==undefined)return undefined;var o=s.instance;if(e.jqx.hasFunction(o,r))return e.jqx.invoke(o,r);if(e.jqx.isPropertySetter(o,r)){if(e.jqx.validatePropertySetter(o,r))return e.jqx.set(o,r),undefined}else{if(typeof r=="object"&&r.length==0)return;if(typeof r=="object"&&r.length==1&&e.jqx.hasProperty(o,r[0]))return e.jqx.get(o,r[0]);if(typeof r=="string"&&e.jqx.hasProperty(o,r[0]))return e.jqx.get(o,r)}throw"jqxCore: Invalid parameter '"+e.jqx.serialize(r)+"' does not exist."},e.jqx.applyWidget=function(t,n,r,i){var s=!1;try{s=window.MSApp!=undefined}catch(o){}var u=e(t);i?(i.host=u,i.element=t):i=new e.jqx["_"+n],t.id==""&&(t.id=e.jqx.utilities.createId());var a={host:u,element:t,instance:i};i.widgetName=n,e.data(t,n,a),e.data(t,"jqxWidget",a.instance);var f=new Array,i=a.instance;while(i)i.isInitialized=!1,f.push(i),i=i.base;f.reverse(),f[0].theme=e.jqx.theme||"",e.jqx.jqxWidgetProxy(n,t,r);for(var l in f)i=f[l],l==0&&(i.host=u,i.element=t,i.WinJS=s),i!=undefined&&i.createInstance!=null&&(s?MSApp.execUnsafeLocalFunction(function(){i.createInstance(r)}):i.createInstance(r));for(var l in f)f[l]!=undefined&&(f[l].isInitialized=!0);s?MSApp.execUnsafeLocalFunction(function(){a.instance.refresh(!0)}):a.instance.refresh(!0)},e.jqx.jqxWidget=function(t,n,r){var i=!1;try{jqxArgs=Array.prototype.slice.call(r,0)}catch(s){jqxArgs=""}try{i=window.MSApp!=undefined}catch(s){}var o=t,u="";n&&(u="_"+n),e.jqx.define(e.jqx,"_"+o,u),e.fn[o]=function(){var t=Array.prototype.slice.call(arguments,0);if(t.length==0||t.length==1&&typeof t[0]=="object"){if(this.length==0)throw this.selector?new Error("Invalid jQuery Selector - "+this.selector+"! Please, check whether the used ID or CSS Class name is correct."):new Error("Invalid jQuery Selector! Please, check whether the used ID or CSS Class name is correct.");return this.each(function(){var n=e(this),r=this,i=e.data(r,o);i==null?e.jqx.applyWidget(r,o,t,undefined):e.jqx.jqxWidgetProxy(o,this,t)})}if(this.length==0)throw this.selector?new Error("Invalid jQuery Selector - "+this.selector+"! Please, check whether the used ID or CSS Class name is correct."):new Error("Invalid jQuery Selector! Please, check whether the used ID or CSS Class name is correct.");var n=null,r=0;return this.each(function(){var i=e.jqx.jqxWidgetProxy(o,this,t);if(r==0)n=i,r++;else{if(r==1){var s=[];s.push(n),n=s}n.push(i)}}),n};try{e.extend(e.jqx["_"+o].prototype,Array.prototype.slice.call(r,0)[0])}catch(s){}e.extend(e.jqx["_"+o].prototype,{toThemeProperty:function(e,t){return this.theme==""?e:t!=null&&t?e+"-"+this.theme:e+" "+e+"-"+this.theme}}),e.jqx["_"+o].prototype.refresh=function(){this.base&&this.base.refresh(!0)},e.jqx["_"+o].prototype.createInstance=function(){},e.jqx["_"+o].prototype.applyTo=function(t,n){if(!(n instanceof Array)){var r=[];r.push(n),n=r}e.jqx.applyWidget(t,o,n,this)},e.jqx["_"+o].prototype.getInstance=function(){return this},e.jqx["_"+o].prototype.propertyChangeMap={},e.jqx["_"+o].prototype.addHandler=function(t,n,r,i){switch(n){case"mousewheel":if(window.addEventListener)return e.jqx.browser.mozilla?t[0].addEventListener("DOMMouseScroll",r,!1):t[0].addEventListener("mousewheel",r,!1),!1;break;case"mousemove":if(window.addEventListener&&!i)return t[0].addEventListener("mousemove",r,!1),!1}i==undefined||i==null?t.on?t.on(n,r):t.bind(n,r):t.on?t.on(n,i,r):t.bind(n,i,r)},e.jqx["_"+o].prototype.removeHandler=function(t,n,r){switch(n){case"mousewheel":if(window.removeEventListener)return e.jqx.browser.mozilla?t[0].removeEventListener("DOMMouseScroll",r,!1):t[0].removeEventListener("mousewheel",r,!1),!1;break;case"mousemove":r&&window.removeEventListener&&t[0].removeEventListener("mousemove",r,!1)}if(n==undefined){t.off?t.off():t.unbind();return}r==undefined?t.off?t.off(n):t.unbind(n):t.off?t.off(n,r):t.unbind(n,r)}},e.jqx.theme=e.jqx.theme||"",e.jqx.ready=function(){e(window).trigger("jqxReady")},e.jqx.init=function(){e.each(arguments[0],function(t,n){t=="theme"&&(e.jqx.theme=n),t=="scrollBarSize"&&(e.jqx.utilities.scrollBarSize=n),t=="touchScrollBarSize"&&(e.jqx.utilities.touchScrollBarSize=n),t=="scrollBarButtonsVisibility"&&(e.jqx.utilities.scrollBarButtonsVisibility=n)})},e.jqx.utilities=e.jqx.utilities||{},e.extend(e.jqx.utilities,{scrollBarSize:15,touchScrollBarSize:10,scrollBarButtonsVisibility:"visible",createId:function(){var e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return"jqxWidget"+e()+e()},setTheme:function(t,n,r){if(typeof r=="undefined")return;var i=r[0].className.split(" "),s=[],o=[],u=r.children();for(var a=0;a<i.length;a+=1)i[a].indexOf(t)>=0&&(t.length>0?(s.push(i[a]),o.push(i[a].replace(t,n))):o.push(i[a]+"-"+n));this._removeOldClasses(s,r),this._addNewClasses(o,r);for(var a=0;a<u.length;a+=1)this.setTheme(t,n,e(u[a]))},_removeOldClasses:function(e,t){for(var n=0;n<e.length;n+=1)t.removeClass(e[n])},_addNewClasses:function(e,t){for(var n=0;n<e.length;n+=1)t.addClass(e[n])},getOffset:function(t){var n=e.jqx.mobile.getLeftPos(t[0]),r=e.jqx.mobile.getTopPos(t[0]);return{top:r,left:n}},resize:function(t,n,r,i){i===undefined&&(i=!0);var s=-1,o=this,u=function(e){if(!o.hiddenWidgets)return-1;var t=-1;for(var n=0;n<o.hiddenWidgets.length;n++)if(e.id){if(o.hiddenWidgets[n].id==e.id){t=n;break}}else if(o.hiddenWidgets[n].id==e[0].id){t=n;break}return t};if(this.resizeHandlers){for(var a=0;a<this.resizeHandlers.length;a++)if(t.id){if(this.resizeHandlers[a].id==t.id){s=a;break}}else if(this.resizeHandlers[a].id==t[0].id){s=a;break}if(r===!0){s!=-1&&this.resizeHandlers.splice(s,1);if(this.resizeHandlers.length==0){var f=e(window);f.off?(f.off("resize.jqx"),f.off("orientationchange.jqx"),f.off("orientationchanged.jqx")):(f.unbind("resize.jqx"),f.unbind("orientationchange.jqx"),f.unbind("orientationchanged.jqx")),this.resizeHandlers=null}var l=u(t);l!=-1&&this.hiddenWidgets&&this.hiddenWidgets.splice(l,1);return}}else if(r===!0){var l=u(t);l!=-1&&this.hiddenWidgets&&this.hiddenWidgets.splice(l,1);return}var o=this,c=function(t,n){if(!o.resizeHandlers)return;var r=function(e){var t=-1,n=e.parentNode;while(n)t++,n=n.parentNode;return t},i=function(e,t){if(!e.widget||!t.widget)return 0;var n=r(e.widget[0]),i=r(t.widget[0]);try{if(n<i)return-1;if(n>i)return 1}catch(s){var o=s}return 0};o.hiddenWidgets=new Array,o.resizeHandlers.sort(i);for(var s=0;s<o.resizeHandlers.length;s++){var a=o.resizeHandlers[s],f=a.widget,l=a.data;if(!l)continue;if(!l.jqxWidget)continue;var c=l.jqxWidget.width,h=l.jqxWidget.height;l.jqxWidget.base&&(c==undefined&&(c=l.jqxWidget.base.width),h==undefined&&(h=l.jqxWidget.base.height));var p=!1;c!=null&&c.toString().indexOf("%")!=-1&&(p=!0),h!=null&&h.toString().indexOf("%")!=-1&&(p=!0),e.jqx.isHidden(f)?u(f)===-1&&(p||t===!0)&&a.data.nestedWidget!==!0&&o.hiddenWidgets.push(a):(t===undefined||t!==!0)&&p&&(a.callback(n),o.hiddenWidgets.indexOf(a)>=0&&o.hiddenWidgets.splice(o.hiddenWidgets.indexOf(a),1))}o.hiddenWidgets.length>0&&(o.hiddenWidgets.sort(i),o.__resizeInterval&&clearInterval(o.__resizeInterval),o.__resizeInterval=setInterval(function(){var t=!1,r=new Array;for(var i=0;i<o.hiddenWidgets.length;i++){var s=o.hiddenWidgets[i];e.jqx.isHidden(s.widget)?(t=!0,r.push(s)):s.callback&&s.callback(n)}o.hiddenWidgets=r,t||clearInterval(o.__resizeInterval)},100))};if(!this.resizeHandlers){this.resizeHandlers=new Array;var f=e(window);f.on?(this._resizeTimer=null,f.on("resize.jqx",function(e){o._resizeTimer!=undefined&&clearTimeout(o._resizeTimer),o._resizeTimer=setTimeout(function(){c(null,"resize")},10)}),f.on("orientationchange.jqx",function(e){c(null,"orientationchange")}),f.on("orientationchanged.jqx",function(e){c(null,"orientationchange")})):(f.bind("resize.jqx",function(e){c(null,"orientationchange")}),f.bind("orientationchange.jqx",function(e){c(null,"orientationchange")}),f.bind("orientationchanged.jqx",function(e){c(null,"orientationchange")}))}i&&s===-1&&this.resizeHandlers.push({id:t[0].id,widget:t,callback:n,data:t.data()}),e.jqx.isHidden(t)&&i===!0&&c(!0)},html:function(t,n){if(!e(t).on)return e(t).html(n);try{return jQuery.access(t,function(e){var n=t[0]||{},r=0,i=t.length;if(e===undefined)return n.nodeType===1?n.innerHTML.replace(rinlinejQuery,""):undefined;var s=/<(?:script|style|link)/i,o="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",u=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,a=/<([\w:]+)/,f=/<(?:script|object|embed|option|style)/i,l=new RegExp("<(?:"+o+")[\\s/>]","i"),c=/^\s+/,h={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};if(typeof e=="string"&&!s.test(e)&&(jQuery.support.htmlSerialize||!l.test(e))&&(jQuery.support.leadingWhitespace||!c.test(e))&&!h[(a.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(u,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(jQuery.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(p){}}n&&t.empty().append(e)},null,n,arguments.length)}catch(r){return e(t).html(n)}},hasTransform:function(t){var n="";n=t.css("transform");if(n==""||n=="none"){n=t.parents().css("transform");if(n!=""&&n!="none")return n!=""&&n!="none";var r=e.jqx.utilities.getBrowser();if(r.browser=="msie"){n=t.css("-ms-transform");if(n==""||n=="none")n=t.parents().css("-ms-transform")}else if(r.browser=="chrome"){n=t.css("-webkit-transform");if(n==""||n=="none")n=t.parents().css("-webkit-transform")}else if(r.browser=="opera"){n=t.css("-o-transform");if(n==""||n=="none")n=t.parents().css("-o-transform")}else if(r.browser=="mozilla"){n=t.css("-moz-transform");if(n==""||n=="none")n=t.parents().css("-moz-transform")}}if(n==""||n=="none")n=e(document.body).css("transform");return n!=""&&n!="none"&&n!=null},getBrowser:function(){var e=navigator.userAgent.toLowerCase(),t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n={browser:t[1]||"",version:t[2]||"0"};return e.indexOf("rv:11.0")>=0&&e.indexOf(".net4.0c")>=0&&(n.browser="msie",n.version="11",t[1]="msie"),n[t[1]]=t[1],n}}),e.jqx.browser=e.jqx.utilities.getBrowser(),e.jqx.isHidden=function(e){try{var t=e[0].offsetWidth,n=e[0].offsetHeight;return t===0||n===0?!0:!1}catch(r){return!1}},e.jqx.ariaEnabled=!0,e.jqx.aria=function(t,n,r){if(!e.jqx.ariaEnabled)return;if(n==undefined)e.each(t.aria,function(n,r){var i=t.base?t.base.host.attr(n):t.host.attr(n);if(i!=undefined&&!e.isFunction(i)){var s=i;switch(r.type){case"number":s=new Number(i),isNaN(s)&&(s=i);break;case"boolean":s=i=="true"?!0:!1;break;case"date":s=new Date(i);if(s=="Invalid Date"||isNaN(s))s=i}t[r.name]=s}else{var i=t[r.name];e.isFunction(i)&&(i=t[r.name]()),i==undefined&&(i="");try{t.base?t.base.host.attr(n,i.toString()):t.host.attr(n,i.toString())}catch(o){}}});else try{t.host?t.base?t.base.host?t.base.host.attr(n,r.toString()):t.attr(n,r.toString()):t.host?t.element.setAttribute?t.element.setAttribute(n,r.toString()):t.host.attr(n,r.toString()):t.attr(n,r.toString()):t.setAttribute&&t.setAttribute(n,r.toString())}catch(i){}},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=Number(arguments[1])||0;n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);for(;n<t;n++)if(n in this&&this[n]===e)return n;return-1}),e.jqx.mobile=e.jqx.mobile||{},e.jqx.position=function(t){var n=parseInt(t.pageX),r=parseInt(t.pageY);if(e.jqx.mobile.isTouchDevice()){var i=e.jqx.mobile.getTouches(t),s=i[0];n=parseInt(s.pageX),r=parseInt(s.pageY)}return{left:n,top:r}},e.extend(e.jqx.mobile,{_touchListener:function(e,t){var n=function(e,t){var n=document.createEvent("MouseEvents");return n.initMouseEvent(e,t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),n._pageX=t.pageX,n._pageY=t.pageY,n},r={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},i=n(r[e.type],e);e.target.dispatchEvent(i);var s=e.target["on"+r[e.type]];typeof s=="function"&&s(e)},setMobileSimulator:function(t,n){if(this.isTouchDevice())return;this.simulatetouches=!0,n==0&&(this.simulatetouches=!1);var r={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},i=this;if(window.addEventListener){var s=function(){for(var e in r)t.addEventListener&&(t.removeEventListener(e,i._touchListener),t.addEventListener(e,i._touchListener,!1))};e.jqx.browser.msie?s():s()}},isTouchDevice:function(){if(this.touchDevice!=undefined)return this.touchDevice;var e="Browser CodeName: "+navigator.appCodeName+"";e+="Browser Name: "+navigator.appName+"",e+="Browser Version: "+navigator.appVersion+"",e+="Platform: "+navigator.platform+"",e+="User-agent header: "+navigator.userAgent+"";if(e.indexOf("Android")!=-1)return!0;if(e.indexOf("IEMobile")!=-1)return!0;if(e.indexOf("Windows Phone")!=-1)return!0;if(e.indexOf("WPDesktop")!=-1)return!0;if(e.indexOf("ZuneWP7")!=-1)return!0;if(e.indexOf("BlackBerry")!=-1&&e.indexOf("Mobile Safari")!=-1)return!0;if(e.indexOf("ipod")!=-1)return!0;if(e.indexOf("nokia")!=-1||e.indexOf("Nokia")!=-1)return!0;if(e.indexOf("Chrome/17")!=-1)return!1;if(e.indexOf("CrOS")!=-1)return!1;if(e.indexOf("Opera")!=-1&&e.indexOf("Mobi")==-1&&e.indexOf("Mini")==-1&&e.indexOf("Platform: Win")!=-1)return!1;if(e.indexOf("Opera")!=-1&&e.indexOf("Mobi")!=-1&&e.indexOf("Opera Mobi")!=-1)return!0;var t={ios:"i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ",android:"(Android |HTC_|Silk/)",blackberry:"BlackBerry(?:.*)Version/",rimTablet:"RIM Tablet OS ",webos:"(?:webOS|hpwOS)/",bada:"Bada/"};try{if(this.touchDevice!=undefined)return this.touchDevice;this.touchDevice=!1;for(i in t)if(t.hasOwnProperty(i)){prefix=t[i],match=e.match(new RegExp("(?:"+prefix+")([^\\s;]+)"));if(match)return i.toString()=="blackberry"?(this.touchDevice=!1,!1):(this.touchDevice=!0,!0)}if(navigator.platform.toLowerCase().indexOf("win")!=-1){if(navigator.userAgent.indexOf("Windows Phone")>=0||navigator.userAgent.indexOf("WPDesktop")>=0||navigator.userAgent.indexOf("IEMobile")>=0||navigator.userAgent.indexOf("ZuneWP7")>=0)return this.touchDevice=!0,!0;if(navigator.userAgent.indexOf("Touch")>=0){var n="MSPointerDown"in window;return n?(this.touchDevice=!0,!0):navigator.userAgent.indexOf("ARM")>=0?(this.touchDevice=!0,!0):(this.touchDevice=!1,!1)}}if(navigator.platform.toLowerCase().indexOf("win")!=-1)return this.touchDevice=!1,!1;if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)this.touchDevice=!0;return this.touchDevice}catch(r){return this.touchDevice=!1,!1}},getLeftPos:function(e){var t=e.offsetLeft;while((e=e.offsetParent)!=null)e.tagName!="HTML"&&(t+=e.offsetLeft,document.all&&(t+=e.clientLeft));return t},getTopPos:function(t){var n=t.offsetTop,r=e(t).coord();while((t=t.offsetParent)!=null)t.tagName!="HTML"&&(n+=t.offsetTop-t.scrollTop,document.all&&(n+=t.clientTop));var i=navigator.userAgent.toLowerCase(),s=(i.indexOf("windows phone")!=-1||i.indexOf("WPDesktop")!=-1||i.indexOf("ZuneWP7")!=-1||i.indexOf("msie 9")!=-1||i.indexOf("msie 11")!=-1||i.indexOf("msie 10")!=-1)&&i.indexOf("touch")!=-1;if(s)return r.top;if(this.isSafariMobileBrowser()){if(this.isSafari4MobileBrowser()&&this.isIPadSafariMobileBrowser())return n;if(i.indexOf("version/7")!=-1)return r.top;n+=e(window).scrollTop()}return n},isChromeMobileBrowser:function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("android")!=-1;return t},isOperaMiniMobileBrowser:function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("opera mini")!=-1||e.indexOf("opera mobi")!=-1;return t},isOperaMiniBrowser:function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("opera mini")!=-1;return t},isNewSafariMobileBrowser:function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("ipad")!=-1||e.indexOf("iphone")!=-1||e.indexOf("ipod")!=-1;return t=t&&e.indexOf("version/5")!=-1,t},isSafari4MobileBrowser:function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("ipad")!=-1||e.indexOf("iphone")!=-1||e.indexOf("ipod")!=-1;return t=t&&e.indexOf("version/4")!=-1,t},isWindowsPhone:function(){var e=navigator.userAgent.toLowerCase(),t=(e.indexOf("windows phone")!=-1||e.indexOf("WPDesktop")!=-1||e.indexOf("ZuneWP7")!=-1||e.indexOf("msie 9")!=-1||e.indexOf("msie 11")!=-1||e.indexOf("msie 10")!=-1)&&e.indexOf("touch")!=-1;return t},isSafariMobileBrowser:function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("ipad")!=-1||e.indexOf("iphone")!=-1||e.indexOf("ipod")!=-1;return t},isIPadSafariMobileBrowser:function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("ipad")!=-1;return t},isMobileBrowser:function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("ipad")!=-1||e.indexOf("iphone")!=-1||e.indexOf("android")!=-1;return t},getTouches:function(e){if(e.originalEvent){if(e.originalEvent.touches&&e.originalEvent.touches.length)return e.originalEvent.touches;if(e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length)return e.originalEvent.changedTouches}return e.touches||(e.touches=new Array,e.touches[0]=e.originalEvent!=undefined?e.originalEvent:e,e.originalEvent!=undefined&&e.pageX&&(e.touches[0]=e),e.type=="mousemove"&&(e.touches[0]=e)),e.touches},getTouchEventName:function(e){if(!this.isWindowsPhone())return e;if(e.toLowerCase().indexOf("start")!=-1)return"MSPointerDown";if(e.toLowerCase().indexOf("move")!=-1)return"MSPointerMove";if(e.toLowerCase().indexOf("end")!=-1)return"MSPointerUp"},dispatchMouseEvent:function(e,t,n){if(this.simulatetouches)return;var r=document.createEvent("MouseEvent");r.initMouseEvent(e,!0,!0,t.view,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),n!=null&&n.dispatchEvent(r)},getRootNode:function(e){while(e.nodeType!==1)e=e.parentNode;return e},setTouchScroll:function(e,t){this.enableScrolling||(this.enableScrolling=[]),this.enableScrolling[t]=e},touchScroll:function(t,n,r,i,s,o){if(t==null)return;var u=this,a=0,f=0,l=0,c=0,h=0,p=0;this.scrolling||(this.scrolling=[]),this.scrolling[i]=!1;var d=!1,v=e(t),m=["select","input","textarea"],g=0,y=0;this.enableScrolling||(this.enableScrolling=[]),this.enableScrolling[i]=!0;var i=i,b=this.getTouchEventName("touchstart")+".touchScroll",w=this.getTouchEventName("touchend")+".touchScroll",E=this.getTouchEventName("touchmove")+".touchScroll",g=function(t){if(!u.enableScrolling[i])return!0;if(e.inArray(t.target.tagName.toLowerCase(),m)!==-1)return;var n=u.getTouches(t),r=n[0];return n.length==1&&u.dispatchMouseEvent("mousedown",r,u.getRootNode(r.target)),d=!1,f=r.pageY,h=r.pageX,u.simulatetouches&&(f=r._pageY,h=r._pageX),u.scrolling[i]=!0,a=0,c=0,!0};v.on?v.on(b,g):v.bind(b,g);var S=function(e){if(!u.enableScrolling[i])return!0;if(!u.scrolling[i])return!0;var t=u.getTouches(e);if(t.length>1)return!0;var n=t[0].pageY,v=t[0].pageX;u.simulatetouches&&(n=t[0]._pageY,v=t[0]._pageX);var m=n-f,g=v-h;y=n,touchHorizontalEnd=v,l=m-a,p=g-c,d=!0,a=m,c=g;var b=s!=null?s[0].style.visibility!="hidden":!0,w=o!=null?o[0].style.visibility!="hidden":!0;if(b||w)if(p!==0&&b||l!==0&&w)return r(-p*1,-l*1,g,m,e),e.preventDefault(),e.stopPropagation(),e.preventManipulation&&e.preventManipulation(),!1};v.on?v.on(E,S):v.bind(E,S);if(this.simulatetouches){var x=e(window).on!=undefined||e(window).bind,T=function(e){u.scrolling[i]=!1};e(window).on!=undefined?e(document).on("mouseup.touchScroll",T):e(document).bind("mouseup.touchScroll",T);if(window.frameElement&&window.top!=null){var N=function(e){u.scrolling[i]=!1};window.top.document&&(e(window.top.document).on?e(window.top.document).on("mouseup",N):e(window.top.document).bind("mouseup",N))}var C=e(document).on!=undefined||e(document).bind,k=function(e){if(!u.scrolling[i])return!0;u.scrolling[i]=!1;var t=u.getTouches(e)[0],n=u.getRootNode(t.target);u.dispatchMouseEvent("mouseup",t,n),u.dispatchMouseEvent("click",t,n)};e(document).on!=undefined?e(document).on("touchend",k):e(document).bind("touchend",k)}var L=function(e){if(!u.enableScrolling[i])return!0;var t=u.getTouches(e)[0];if(!u.scrolling[i])return!0;u.scrolling[i]=!1;if(!d){var t=u.getTouches(e)[0],n=u.getRootNode(t.target);return u.dispatchMouseEvent("mouseup",t,n),u.dispatchMouseEvent("click",t,n),!0}u.dispatchMouseEvent("mouseup",t,n)};v.on&&(v.on("dragstart",function(e){e.preventDefault()}),v.on("selectstart",function(e){e.preventDefault()})),v.on?v.on(w+" touchcancel.touchScroll",L):v.bind(w+" touchcancel.touchScroll",L)}}),e.jqx.cookie=e.jqx.cookie||{},e.extend(e.jqx.cookie,{cookie:function(e,t,n){if(arguments.length>1&&String(t)!=="[object Object]"){n=jQuery.extend({},n);if(t===null||t===undefined)n.expires=-1;if(typeof n.expires=="number"){var r=n.expires,i=n.expires=new Date;i.setDate(i.getDate()+r)}return t=String(t),document.cookie=[encodeURIComponent(e),"=",n.raw?t:encodeURIComponent(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=t||{};var s,o=n.raw?function(e){return e}:decodeURIComponent;return(s=(new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)")).exec(document.cookie))?o(s[1]):null}}),e.jqx.string=e.jqx.string||{},e.extend(e.jqx.string,{replace:function(e,t,n){if(t===n)return this;var r=e,i=r.indexOf(t);while(i!=-1)r=r.replace(t,n),i=r.indexOf(t);return r},contains:function(e,t){return e==null||t==null?!1:e.indexOf(t)!=-1},containsIgnoreCase:function(e,t){return e==null||t==null?!1:e.toUpperCase().indexOf(t.toUpperCase())!=-1},equals:function(e,t){return e==null||t==null?!1:(e=this.normalize(e),t.length==e.length?e.slice(0,t.length)==t:!1)},equalsIgnoreCase:function(e,t){return e==null||t==null?!1:(e=this.normalize(e),t.length==e.length?e.toUpperCase().slice(0,t.length)==t.toUpperCase():!1)},startsWith:function(e,t){return e==null||t==null?!1:e.slice(0,t.length)==t},startsWithIgnoreCase:function(e,t){return e==null||t==null?!1:e.toUpperCase().slice(0,t.length)==t.toUpperCase()},normalize:function(e){return e.charCodeAt(e.length-1)==65279&&(e=e.substring(0,e.length-1)),e},endsWith:function(e,t){return e==null||t==null?!1:(e=this.normalize(e),e.slice(-t.length)==t)},endsWithIgnoreCase:function(e,t){return e==null||t==null?!1:(e=this.normalize(e),e.toUpperCase().slice(-t.length)==t.toUpperCase())}}),e.extend(jQuery.easing,{easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n}})})(jQuery),function(e){e.extend(jQuery.event.special,{close:{noBubble:!0},open:{noBubble:!0},cellclick:{noBubble:!0},rowclick:{noBubble:!0},tabclick:{noBubble:!0},selected:{noBubble:!0},expanded:{noBubble:!0},collapsed:{noBubble:!0},valuechanged:{noBubble:!0},expandedItem:{noBubble:!0},collapsedItem:{noBubble:!0},expandingItem:{noBubble:!0},collapsingItem:{noBubble:!0}}),e.fn.extend({ischildof:function(t){var n=e(this).parents().get();for(var r=0;r<n.length;r++)if(typeof t!="string"){var i=n[r];if(t!==undefined&&i==t[0])return!0}else if(t!==undefined&&e(n[r]).is(t))return!0;return!1}}),e.fn.jqxProxy=function(){var t=e(this).data().jqxWidget,n=Array.prototype.slice.call(arguments,0);return e.jqx.jqxWidgetProxy(t.widgetName,t.element,n)};var t=this.originalVal=e.fn.val;e.fn.val=function(n){if(typeof n=="undefined"){if(e(this).hasClass("jqx-widget")){var r=e(this).data().jqxWidget;if(r&&r.val)return r.val()}return t.call(this)}if(e(this).hasClass("jqx-widget")){var r=e(this).data().jqxWidget;if(r&&r.val)return arguments.length!=2?r.val(n):r.val(n,arguments[1])}return t.call(this,n)},e.fn.coord=function(t){var n,r,i={top:0,left:0},s=this[0],o=s&&s.ownerDocument;if(!o)return;n=o.documentElement;if(!jQuery.contains(n,s))return i;typeof s.getBoundingClientRect!==undefined&&(i=s.getBoundingClientRect());var u=function(e){return jQuery.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1};r=u(o);var a=0,f=0,l=navigator.userAgent.toLowerCase(),c=l.indexOf("ipad")!=-1||l.indexOf("iphone")!=-1;c&&(a=2);if(1==t&&e(document.body).css("position")!="static"){var h=e(document.body).coord();a=-h.left,f=-h.top}return{top:f+i.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:a+i.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}}}(jQuery),function(e){function y(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(h),u=0,a=o.length;if(jQuery.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function b(e,t,n,r,i,s){i=i||t.dataTypes[0],s=s||{},s[i]=!0;var o,u=e[i],a=0,f=u?u.length:0,l=e===d;for(;a<f&&(l||!o);a++)o=u[a](t,n,r),typeof o=="string"&&(!l||s[o]?o=undefined:(t.dataTypes.unshift(o),o=b(e,t,n,r,o,s)));return(l||!o)&&!s["*"]&&(o=b(e,t,n,r,"*",s)),o}function w(t,n){var r,i,s=e.jqx.data.ajaxSettings.flatOptions||{};for(r in n)n[r]!==undefined&&((s[r]?t:i||(i={}))[r]=n[r]);i&&jQuery.extend(!0,t,i)}function E(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes,f=e.responseFields;for(i in f)i in n&&(t[f[i]]=n[i]);while(a[0]==="*")a.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("content-type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}if(s)return s!==a[0]&&a.unshift(s),n[s]}function S(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function O(){try{return new window.XMLHttpRequest}catch(e){}}function M(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}e.jqx.dataAdapter=function(t,n){t!=undefined&&(t.dataFields!==undefined&&(t.datafields=t.dataFields),t.dataType!==undefined&&(t.datatype=t.dataType),t.localData!==undefined&&(t.localdata=t.localData),t.sortColumn!==undefined&&(t.sortcolumn=t.sortColumn),t.sortDirection!==undefined&&(t.sortdirection=t.sortDirection),t.sortOrder!==undefined&&(t.sortdirection=t.sortOrder),t.formatData!==undefined&&(t.formatdata=t.formatData),t.processData!==undefined&&(t.processdata=t.processData),t.pageSize!==undefined&&(t.pagesize=t.pageSize),t.pageNum!==undefined&&(t.pagenum=t.pageNum),t.updateRow!==undefined&&(t.updaterow=t.updateRow),t.addRow!==undefined&&(t.addrow=t.addRow),t.deleteRow!==undefined&&(t.deleterow=t.deleteRow),t.contentType!==undefined&&(t.contenttype=t.contentType),t.totalRecords!=undefined&&(t.totalrecords=t.totalRecords),t.loadError!=undefined&&(t.loadError=t.loadError),t.sortComparer!=undefined&&(t.sortcomparer=t.sortComparer)),this._source=t,this._options=n||{},this.records=new Array,this._downloadComplete=new Array,this._bindingUpdate=new Array;if(t!=undefined&&t.localdata!=null&&t.localdata._subscriptions){var r=t.localdata.get();if(r!=null){t._localdata=t.localdata;var i=this;t._localdata.subscribe&&(i._oldlocaldata=[],t._localdata.subscribe(function(t){var n=function(t){return jQuery.isArray(t)?jQuery.makeArray(n(e(t))):jQuery.extend(!0,{},t)};if(i.suspendKO==0||i.suspendKO==undefined||i._oldlocaldata.length==0)i._oldlocaldata=n(t)},t._localdata,"beforeChange"),t._localdata.subscribe(function(e){if(i.suspendKO==0||i.suspendKO==undefined){var n="";i._oldrecords=i.records,i._oldlocaldata.length==0&&(t.localdata=t._localdata.get()),i._oldlocaldata.length==0?n="change":(i._oldlocaldata.length==e.length&&(n="update"),i._oldlocaldata.length>e.length&&(n="remove"),i._oldlocaldata.length<e.length&&(n="add")),i.dataBind(null,n)}},t._localdata,"change"),i._knockoutdatasource=!0),t.localdata=r}}this._options.autoBind==1&&this.dataBind()},e.jqx.dataAdapter.prototype={getrecords:function(){return this.records},beginUpdate:function(){this.isUpdating=!0},endUpdate:function(e){this.isUpdating=!1,e!=0&&(this._changedrecords&&this._changedrecords.length>0?(this.callBindingUpdate("update"),this._changedrecords=[]):this.dataBind(null,""))},formatDate:function(t,n,r){var i=e.jqx.dataFormat.formatdate(t,n,r);return i},formatNumber:function(t,n,r){var i=e.jqx.dataFormat.formatnumber(t,n,r);return i},dataBind:function(t,n){if(this.isUpdating==1)return;var r=this._source;if(!r)return;e.jqx.dataFormat.datescache=new Array,r.dataFields!=null&&(r.datafields=r.dataFields),r.recordstartindex==undefined&&(r.recordstartindex=0),r.recordendindex==undefined&&(r.recordendindex=0),r.loadallrecords==undefined&&(r.loadallrecords=!0),r.sort!=undefined&&(this.sort=r.sort),r.filter!=undefined?this.filter=r.filter:this.filter=null,r.sortcolumn!=undefined&&(this.sortcolumn=r.sortcolumn),r.sortdirection!=undefined&&(this.sortdirection=r.sortdirection),r.sortcomparer!=undefined&&(this.sortcomparer=r.sortcomparer),this.records=new Array;var i=this._options||{};this.virtualmode=i.virtualmode!=undefined?i.virtualmode:!1,this.totalrecords=i.totalrecords!=undefined?i.totalrecords:0,this.pageable=i.pageable!=undefined?i.pageable:!1,this.pagesize=i.pagesize!=undefined?i.pagesize:0,this.pagenum=i.pagenum!=undefined?i.pagenum:0,this.cachedrecords=i.cachedrecords!=undefined?i.cachedrecords:new Array,this.originaldata=new Array,this.recordids=new Array,this.updaterow=i.updaterow!=undefined?i.updaterow:null,this.addrow=i.addrow!=undefined?i.addrow:null,this.deleterow=i.deleterow!=undefined?i.deleterow:null,this.cache=i.cache!=undefined?i.cache:!1,this.unboundmode=!1,r.formatdata!=undefined&&(i.formatData=r.formatdata),r.data!=undefined&&(i.data==undefined&&(i.data={}),e.extend(i.data,r.data)),r.mapchar!=undefined?this.mapChar=r.mapchar?r.mapchar:">":this.mapChar=i.mapChar?i.mapChar:">";if(i.unboundmode||r.unboundmode)this.unboundmode=i.unboundmode||r.unboundmode;r.cache!=undefined&&(this.cache=r.cache);if(this.koSubscriptions)for(var s=0;s<this.koSubscriptions.length;s++)this.koSubscriptions[s].dispose();this.koSubscriptions=new Array,this.pagenum<0&&(this.pagenum=0);var o=this,u=r.datatype;if(r.datatype==="csv"||r.datatype==="tab"||r.datatype==="tsv"||r.datatype=="text")u="text";var a=i.async!=undefined?i.async:!0;r.async!=undefined&&(a=r.async);switch(u){case"local":case"array":case"observablearray":default:if(r.localdata==undefined&&r.length){r.localdata=new Array;for(var f=0;f<r.length;f++)r.localdata[r.localdata.length]=r[f],r[f].uid=f}r.beforeprocessing&&e.isFunction(r.beforeprocessing)&&r.beforeprocessing(r.localdata);var l=r.localdata.length;this.totalrecords=this.virtualmode?r.totalrecords||l:l;if(this.unboundmode){this.totalrecords=this.unboundmode?r.totalrecords||l:l;var c=r.datafields?r.datafields.length:0;if(c>0)for(var f=0;f<this.totalrecords;f++){var h={};for(var p=0;p<c;p++)h[r.datafields[p].name]="";h.uid=f,r.localdata[r.localdata.length]=h}}this.totalrecords==undefined&&(this.totalrecords=0);var c=r.datafields?r.datafields.length:0,d=function(t,n){var i={};for(var s=0;s<n;s++){var u=r.datafields[s],a="";if(undefined==u||u==null)continue;if(u.map){if(e.isFunction(u.map))a=u.map(t);else{var f=u.map.split(o.mapChar);if(f.length>0){var l=t;for(var c=0;c<f.length;c++){if(!l)continue;l=l[f[c]]}a=l}else a=t[u.map]}a!=undefined&&a!=null?a=a.toString():a==undefined&&a!=null&&(a="")}a==""&&(a=t[u.name],a!=undefined&&a!=null&&(r._localdata&&a.subscribe?a=a():a=a.toString())),a=o.getvaluebytype(a,u),u.displayname!=undefined?i[u.displayname]=a:i[u.name]=a}return i};if(r._localdata){this._changedrecords=[],this.records=new Array;var v=r._localdata.get();e.each(v,function(t,i){if(typeof i=="string")o.records.push(i);else{var s={},u=0,a=this;e.each(this.row,function(e,n){var i=null,f="string",l=e;if(c>0){var h=!1,p=!1;for(var d=0;d<c;d++){var v=r.datafields[d];if(v!=undefined&&v.name==e){h=!0,i=v.map,f=v.type,l=v.name;break}if(v!=undefined&&v.map&&v.map.indexOf(e)>=0){h=!0,i=v.map,f=v.type,l=v.name,p=!0;var m=a[e];if(i!=null){var g=i.split(o.mapChar);if(g.length>0){var y=a;for(var b=0;b<g.length;b++)y=y[g[b]];m=y}else m=a[i]}f!="string"&&(m=o.getvaluebytype(m,{type:f})),s[l]=m,s[l]!=undefined&&(u+=s[l].toString().length+s[l].toString().substr(0,1))}}if(!h)return!0;if(p)return!0}var w="function"==typeof a["ref"]&&a.ref(e);if(w){var E=a.ref(e),m=E.get();f!="string"&&(m=o.getvaluebytype(m,{type:f})),s[e]=m;if(E.subscribe){var S=t;o.koSubscriptions[o.koSubscriptions.length]=E.subscribe(function(t){var n=S;s[e]=t;var r={index:n,oldrecord:s,record:s};o._changedrecords.push(r);if(o.isUpdating)return;return o.callBindingUpdate("update"),o._changedrecords=[],!1})}}else{var m=a[e];if(i!=null){var g=i.split(o.mapChar);if(g.length>0){var y=a;for(var b=0;b<g.length;b++)y=y[g[b]];m=y}else m=a[i]}f!="string"&&(m=o.getvaluebytype(m,{type:f})),s[l]=m,s[l]!=undefined&&(u+=s[l].toString().length+s[l].toString().substr(0,1))}});var f=o.getid(r.id,a,t);s.uid=f,o.records.push(s),s._koindex=u;if(o._oldrecords){var l=o.records.length-1;if(n=="update"&&o._oldrecords[l]._koindex!=u){var h={index:l,oldrecord:o._oldrecords[l],record:s};o._changedrecords.push(h)}}}});if(n=="add"){var l=o.records.length;for(var f=0;f<l;f++){var h=o.records[f],m=!1;for(var g=0;g<o._oldrecords.length;g++)if(o._oldrecords[g]._koindex===h._koindex){m=!0;break}m||o._changedrecords.push({index:f,oldrecord:null,record:h,position:f!=0?"last":"first"})}}else if(n=="remove"){var l=o._oldrecords.length;for(var f=0;f<l;f++){var y=o._oldrecords[f];o.records[f]?o.records[f]._koindex!=y._koindex&&o._changedrecords.push({index:f,oldrecord:y,record:null}):o._changedrecords.push({index:f,oldrecord:y,record:null})}}}else e.isArray(r.localdata)?c==0?e.each(r.localdata,function(t,n){var i=e.extend({},this);if(typeof n=="string")return o.records=r.localdata,!1;var s=o.getid(r.id,i,t);typeof s=="object"&&(s=t),i.uid=s,o.records[o.records.length]=i}):e.each(r.localdata,function(t){var n=this,i=d(n,c),s=o.getid(r.id,i,t);typeof s=="object"&&(s=t);var n=e.extend({},i);n.uid=s,o.records[o.records.length]=n}):(this.records=new Array,e.each(r.localdata,function(e){var t=o.getid(r.id,this,e);if(c>0){var n=this,i=d(n,c);i.uid=t,o.records[o.records.length]=i}else this.uid=t,o.records[o.records.length]=this}));this.originaldata=r.localdata,this.cachedrecords=this.records,this.addForeignValues(r);if(i.uniqueDataFields){var b=this.getUniqueRecords(this.records,i.uniqueDataFields);this.records=b,this.cachedrecords=b}if(i.beforeLoadComplete){var w=i.beforeLoadComplete(o.records,this.originaldata);w!=undefined&&(o.records=w,o.cachedrecords=w)}if(i.autoSort&&i.autoSortField){var E=Object.prototype.toString;Object.prototype.toString=typeof field=="function"?field:function(){return this[i.autoSortField]},o.records.sort(function(t,n){t===undefined&&(t=null),n===undefined&&(n=null);if(t===null&&n===null)return 0;if(t===null&&n!==null)return 1;if(t!==null&&n===null)return-1;t=t.toString(),n=n.toString();if(e.jqx.dataFormat.isNumber(t)&&e.jqx.dataFormat.isNumber(n))return t<n?-1:t>n?1:0;if(e.jqx.dataFormat.isDate(t)&&e.jqx.dataFormat.isDate(n))return t<n?-1:t>n?1:0;!e.jqx.dataFormat.isNumber(t)&&!e.jqx.dataFormat.isNumber(n)&&(t=String(t).toLowerCase(),n=String(n).toLowerCase());try{if(t<n)return-1;if(t>n)return 1}catch(r){var i=r}return 0}),Object.prototype.toString=E}o.loadedData=r.localdata,o.buildHierarchy(),e.isFunction(i.loadComplete)&&i.loadComplete(r.localdata,o.records);break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":if(r.localdata!=null){e.isFunction(r.beforeprocessing)&&r.beforeprocessing(r.localdata),r.datatype==="xml"?o.loadxml(r.localdata,r.localdata,r):u==="text"?o.loadtext(r.localdata,r):o.loadjson(r.localdata,r.localdata,r),o.addForeignValues(r);if(i.uniqueDataFields){var b=o.getUniqueRecords(o.records,i.uniqueDataFields);o.records=b,o.cachedrecords=b}if(i.beforeLoadComplete){var w=i.beforeLoadComplete(o.records,this.originaldata);w!=undefined&&(o.records=w,o.cachedrecords=w)}o.loadedData=r.localdata,o.buildHierarchy.call(o),e.isFunction(i.loadComplete)&&i.loadComplete(r.localdata,o.records),o.callBindingUpdate(n);return}var S=i.data!=undefined?i.data:{};r.processdata&&r.processdata(S),e.isFunction(i.processData)&&i.processData(S);if(e.isFunction(i.formatData)){var x=i.formatData(S);x!=undefined&&(S=x)}var T="application/x-www-form-urlencoded";i.contentType&&(T=i.contentType);var N="GET";r.type&&(N=r.type),i.type&&(N=i.type);if(r.url&&r.url.length>0)e.isFunction(i.loadServerData)?o._requestData(S,r,i):this.xhr=e.jqx.data.ajax({dataType:u,cache:this.cache,type:N,url:r.url,async:a,contentType:T,data:S,success:function(t,n,s){if(e.isFunction(r.beforeprocessing)){var a=r.beforeprocessing(t,n,s);a!=undefined&&(t=a)}if(e.isFunction(i.downloadComplete)){var a=i.downloadComplete(t,n,s);a!=undefined&&(t=a)}if(t==null){o.records=new Array,o.cachedrecords=new Array,o.originaldata=new Array,o.callDownloadComplete(),e.isFunction(i.loadComplete)&&i.loadComplete(new Array);return}var f=t;t.records&&(f=t.records),t.totalrecords!=undefined&&(r.totalrecords=t.totalrecords),r.datatype==="xml"?o.loadxml(null,f,r):u==="text"?o.loadtext(f,r):o.loadjson(null,f,r),o.addForeignValues(r);if(i.uniqueDataFields){var l=o.getUniqueRecords(o.records,i.uniqueDataFields);o.records=l,o.cachedrecords=l}if(i.beforeLoadComplete){var c=i.beforeLoadComplete(o.records,t);c!=undefined&&(o.records=c,o.cachedrecords=c)}o.loadedData=t,o.buildHierarchy.call(o),o.callDownloadComplete(),e.isFunction(i.loadComplete)&&i.loadComplete(t,n,s,o.records)},error:function(t,n,s){e.isFunction(r.loaderror)&&r.loaderror(t,n,s),e.isFunction(i.loadError)&&i.loadError(t,n,s),t=null,o.callDownloadComplete()},beforeSend:function(t,n){e.isFunction(i.beforeSend)&&i.beforeSend(t,n),e.isFunction(r.beforesend)&&r.beforesend(t,n)}});else{o.buildHierarchy(new Array),o.callDownloadComplete();if(e.isFunction(i.loadComplete)){if(!C)var C={};i.loadComplete(C)}}}this.callBindingUpdate(n)},buildHierarchy:function(e){var t=this._source,n=new Array;if(!t.datafields)return;if(t.hierarchy&&!t.hierarchy.reservedNames)t.hierarchy.reservedNames={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};else if(t.hierarchy){var r=t.hierarchy.reservedNames;r.leaf||(r.leaf="leaf"),r.parent||(r.parent="parent"),r.expanded||(r.expanded="expanded"),r.checked||(r.checked="checked"),r.selected||(r.selected="selected"),r.level||(r.level="level"),r.data||(r.data="data")}if(!t.hierarchy)return;var i=this,r=t.hierarchy.reservedNames;if(t.hierarchy.root){if(t.dataType=="xml"){var n=this.getRecordsHierarchy("uid","parentuid","records",null,e);return this.hierarchy=n,n}this.hierarchy=this.records;var s=t.hierarchy.root;for(var o=0;o<this.records.length;o++){var u=this.records[o];if(!u)continue;var a=function(e){if(t.hierarchy.record)e.records=e[s][t.hierarchy.record];else{var n=s.split(i.mapChar),o=null;if(n.length>1){var u=e;for(var a=0;a<n.length;a++)u!=undefined&&(u=u[n[a]]);o=u}else o=e[s];e.records=o}if(e.records==null||e.records&&e.records.length==0)e[r.leaf]=!0};a(u),u[r.level]=0;var f=this.getid(t.id,u,o);u.uid=f,u[r.parent]=null,u[r.data]=u,u[r.expanded]===undefined&&(u[r.expanded]=!1);var l=function(e,n){if(!n){e.records=new Array;return}for(var s=0;s<n.length;s++){var o=n[s];if(!o)continue;a(o),o[r.level]=e[r.level]+1,o[r.parent]=e,o[r.data]=o;var u=i.getid(t.id,o,s);u==s&&t.id==null?o.uid=e.uid+"_"+u:o.uid=u,o[r.expanded]===undefined&&(o[r.expanded]=!1),l(o,o.records)}};l(u,u.records)}return this.hierarchy}if(t.hierarchy.keyDataField&&t.hierarchy.parentDataField){var n=this.getRecordsHierarchy(t.hierarchy.keyDataField.name,t.hierarchy.parentDataField.name,"records",null,e);return this.hierarchy=n,n}if(t.hierarchy.groupingDataFields){var c=new Array;for(var o=0;o<t.hierarchy.groupingDataFields.length;o++)c.push(t.hierarchy.groupingDataFields[o].name);var n=this.getGroupedRecords(c,"records","label",null,"data",null,"parent",e);return this.hierarchy=n,n}},addRecord:function(e,t,n,r){var i=this,s=function(){return{leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"}};if(e!=undefined){if(n==undefined){if(this.hierarchy&&this.hierarchy.length>=0&&(this._source.hierarchy||r)){var u=i._source&&i._source.hierarchy?i._source.hierarchy.reservedNames:null;u==null&&(u=s()),e[u.level]=0,t=="last"?this.hierarchy.push(e):typeof t=="number"&&isFinite(t)?this.hierarchy.splice(t,0,e):this.hierarchy.splice(0,0,e)}else t=="last"?this.records.push(e):typeof t=="number"&&isFinite(t)?this.records.splice(t,0,e):this.records.splice(0,0,e);return!0}if(this.hierarchy.length>0){var o=function(r){if(r)for(var u=0;u<r.length;u++){var a=r[u];if(a.uid==n){var f=i._source&&i._source.hierarchy?i._source.hierarchy.reservedNames:null;return f==null&&(f=s()),e[f.parent]=a,e[f.level]=a[f.level]+1,a.records||(a.records=new Array,a[f.leaf]=!1),t=="last"?a.records.push(e):typeof t=="number"&&isFinite(t)?a.records.splice(t,0,e):a.records.splice(0,0,e),i.records.push(e),!0}a.records&&o(a.records)}};o(this.hierarchy)}}return!1},deleteRecord:function(e){var t=this;if(this.hierarchy.length>0){var n=function(r){if(r)for(var i=0;i<r.length;i++){var s=r[i];if(s.uid==e){r.splice(i,1),t.recordids[e]&&delete t.recordids[e];var o=function(e){for(var n=0;n<e.length;n++){var r=e[n].uid;for(var i=0;i<t.records.length;i++){var s=t.records[i];if(s.uid==r){t.records.splice(i,1);break}}e[n].records&&o(e[n].records)}};s.records&&o(s.records);for(var u=0;u<t.records.length;u++){var s=t.records[u];if(s.uid==e){t.records.splice(u,1);break}}return!0}s.records&&n(s.records)}};n(this.hierarchy)}else for(var r=0;r<this.records.length;r++){var i=this.records[r];if(i.uid==e)return this.records.splice(r,1),!0}return!1},addForeignValues:function(e){var t=this,n=e.datafields?e.datafields.length:0;for(var r=0;r<n;r++){var i=e.datafields[r];if(i!=undefined)if(i.values!=undefined){i.value==undefined&&(i.value=i.name),i.values["value"]==undefined&&(i.values.value=i.value);var s=new Array,o,u;t.pageable&&t.virtualmode?(o=t.pagenum*t.pagesize,u=o+t.pagesize,u>t.totalrecords&&(u=t.totalrecords)):t.virtualmode?(o=e.recordstartindex,u=e.recordendindex,u>t.totalrecords&&(u=t.totalrecords)):(o=0,u=t.records.length);for(var a=o;a<u;a++){var f=t.records[a],l=i.name,c=f[i.value];if(s[c]!=undefined)f[l]=s[c];else for(var h=0;h<i.values.source.length;h++){var p=i.values.source[h],d=p[i.values.value];d==undefined&&(d=p.uid);if(d==c){var v=p[i.values.name];f[l]=v,s[c]=v;break}}}}else if(i.value!=undefined)for(var a=0;a<t.records.length;a++){var f=t.records[a];f[i.name]=f[i.value]}}},abort:function(){this.xhr&&this.xhr.readyState!=4&&(this.xhr.abort(),me.callDownloadComplete())},_requestData:function(t,n,r){var i=this,s=function(t){t.totalrecords&&(n.totalrecords=t.totalrecords,i.totalrecords=t.totalrecords),t.records&&(i.records=t.records,i.cachedrecords=t.records),e.isFunction(r.loadComplete)&&r.loadComplete(t),i.callDownloadComplete()};r.loadServerData(t,n,s)},getUniqueRecords:function(e,t){if(e&&t){var n=e.length,r=t.length,i=new Array,s=new Array;for(var o=0;o<n;o++){var u=e[o],a="";if(u==undefined)continue;for(var f=0;f<r;f++){var l=t[f];a+=u[l]+"_"}s[a]||(i[i.length]=u),s[a]=!0}}return i},getAggregatedData:function(t,n,r,i){var s=r;s||(s=this.records);var o={},u=new Array,a=s.length;if(a==0)return;if(a==undefined)return;for(var f=0;f<a;f++){var l=s[f];for(var c=0;c<t.length;c++){var h=t[c],p=l[h.name];if(p===null)continue;if(h.aggregates){o[h.name]=o[h.name]||{},u[h.name]=u[h.name]||0,u[h.name]++;var d=function(t){for(obj in t){var n=o[h.name][obj];n==null&&(o[h.name][obj]=0,n=0),e.isFunction(t[obj])&&(n=t[obj](n,p,h.name,l,i)),o[h.name][obj]=n}},v=parseFloat(p);isNaN(v)?v=!1:v=!0,v&&(p=parseFloat(p)),typeof p=="number"&&isFinite(p)?e.each(h.aggregates,function(){var e=o[h.name][this];e==null&&(e=0,this=="min"&&(e=9999999999999),this=="max"&&(e=-9999999999999));if(this=="sum"||this=="avg"||this=="stdev"||this=="stdevp"||this=="var"||this=="varp")e+=parseFloat(p);else if(this=="product")f==0?e=parseFloat(p):e*=parseFloat(p);else if(this=="min")e=Math.min(e,parseFloat(p));else if(this=="max")e=Math.max(e,parseFloat(p));else if(this=="count")e++;else if(typeof this=="object"){d(this);return}o[h.name][this]=e}):e.each(h.aggregates,function(){if(this=="min"||this=="max"||this=="count"||this=="product"||this=="sum"||this=="avg"||this=="stdev"||this=="stdevp"||this=="var"||this=="varp"){var e=o[h.name][this];return e==null&&(e=0),o[h.name][this]=e,!0}typeof this=="object"&&d(this)})}}}for(var c=0;c<t.length;c++){var h=t[c];o[h.name]||(o[h.name]={},e.each(h.aggregates,function(e){o[h.name][this]=0}));if(o[h.name]["avg"]!=undefined){var p=o[h.name].avg,m=u[h.name];m===0||m==undefined?o[h.name].avg=0:o[h.name].avg=p/m}else o[h.name]["count"]!=undefined&&(o[h.name].count=a);(o[h.name].stdev||o[h.name].stdevp||o[h.name]["var"]||o[h.name].varp)&&e.each(h.aggregates,function(e){if(this=="stdev"||this=="var"||this=="varp"||this=="stdevp"){var t=o[h.name][this],n=a,r=t/a,i=0;for(var u=0;u<a;u++){var f=s[u],l=f[h.name];i+=(l-r)*(l-r)}var c=this=="stdevp"||this=="varp"?n:n-1;c==0&&(c=1);if(this=="var"||this=="varp")o[h.name][this]=i/c;else if(this=="stdevp"||this=="stdev")o[h.name][this]=Math.sqrt(i/c)}}),h.formatStrings&&e.each(h.aggregates,function(t){var r=h.formatStrings[t];if(r)if(this=="min"||this=="max"||this=="count"||this=="product"||this=="sum"||this=="avg"||this=="stdev"||this=="stdevp"||this=="var"||this=="varp"){var i=o[h.name][this];o[h.name][this]=e.jqx.dataFormat.formatnumber(i,r,n)}else if(typeof this=="object")for(obj in this){var i=o[h.name][obj];o[h.name][obj]=e.jqx.dataFormat.formatnumber(i,r,n)}})}return o},bindDownloadComplete:function(e,t){this._downloadComplete[this._downloadComplete.length]={id:e,func:t}},unbindDownloadComplete:function(e){for(var t=0;t<this._downloadComplete.length;t++)if(this._downloadComplete[t].id==e){this._downloadComplete[t].func=null,this._downloadComplete.splice(t,1);break}},callDownloadComplete:function(){for(var e=0;e<this._downloadComplete.length;e++){var t=this._downloadComplete[e];t.func!=null&&t.func()}},setSource:function(e){this._source=e},generatekey:function(){var e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},getGroupedRecords:function(t,n,r,i,s,o,u,a,f){var l=0,c=this;f||(f=0);var h=new Array;for(var p=0;p<t.length;p++)h[p]=c.generatekey();n||(n="items"),r||(r="group"),s||(s="record"),u||(u="parentItem"),undefined===o&&(o="value");var d=new Array,v=0,m=new Array,g=t.length,y=new Array;if(!a)var a=this.records;var b=a.length,w=function(t){var n=t;return i&&e.each(i,function(){this.name&&this.map&&(n[this.map]=n[this.name])}),n};for(var E=0;E<b;E++){var S=w(a[E]);id=S[c.uniqueId];var x=new Array,T=0;for(p=0;p<g;p++){var N=t[p],C=S[N];if(null==C)continue;x[T++]={value:C,hash:h[p]}}if(x.length!=g)break;var k=null,L="",A=-1;for(var O=0;O<x.length;O++){A++;var M=x[O].value,_=x[O].hash;L=L+"_"+_+"_"+M;if(m[L]!=undefined&&m[L]!=null){k=m[L];continue}if(k==null){k={level:0},k[u]=null,k[r]=M,k[s]=S,S.expanded!==undefined?k.expanded=S.expanded:k.expanded=!1,o&&(k[o]=S[o]),k[n]=new Array;var D=d.length+f;if(!this._source.id||typeof S.uid=="number")D="Row"+D;k.uid=D,d[v++]=k}else{var P={level:k.level+1};P[u]=k,P[r]=M,P[n]=new Array,P[s]=S,S.expanded!==undefined?P.expanded=S.expanded:P.expanded=!1,o&&(P[o]=S[o]),P.uid=k.uid+"_"+k[n].length,k[n][k[n].length]=P,k=P}m[L]=k}S&&(S.leaf=!0),k!=null?(this._source.id==null&&(S.uid=k.uid+"_"+k[n].length),S[u]=k,S.level=k.level+1,k[n][k[n].length]=S):S.uid||(S.uid=this.generatekey())}return d},getRecordsHierarchy:function(t,n,r,i,s){var o=new Array,u=this.records;s&&(u=s);if(this.records.length==0)return null;var a=r!=null?r:"items",f=[],l=u,c=l.length,h=this._source&&this._source.hierarchy?this._source.hierarchy.reservedNames:null,p=function(t){var n=t;return i&&e.each(i,function(){this.name&&this.map&&(n[this.map]=n[this.name])}),n};for(var d=0;d<c;d++){var v=e.extend({},l[d]),m=v[n],g=v[t];f[g]={parentid:m,item:v}}for(var d=0;d<c;d++){var v=e.extend({},l[d]),m=v[n],g=v[t];if(f[m]!=undefined){var v={parentid:m,item:f[g].item},y=f[m].item;y[a]||(y[a]=[]);var b=y[a].length,w=v.item;h?w[h.parent]==undefined&&(w[h.parent]=y):w.parent==undefined&&(w.parent=y);var E=p(w);y[a][b]=E,f[m].item=y,f[g]=v}else{var w=f[g].item;h?w[h.parent]==undefined&&(w[h.parent]=null):w.parent==undefined&&(w.parent=null);var E=p(w);h?E[h.level]=0:E.level=0,o[o.length]=E}}if(o.length!=0){var S=function(e,t){for(var n=0;n<t.length;n++){h?t[n][h.level]=e:t[n].level=e;var r=t[n][a];r?r.length>0?S(e+1,r):h?t[n][h.leaf]=!0:t[n].leaf=!0:h?t[n][h.leaf]=!0:t[n].leaf=!0}};S(0,o)}return o},bindBindingUpdate:function(e,t){this._bindingUpdate[this._bindingUpdate.length]={id:e,func:t}},unbindBindingUpdate:function(e){for(var t=0;t<this._bindingUpdate.length;t++)if(this._bindingUpdate[t].id==e){this._bindingUpdate[t].func=null,this._bindingUpdate.splice(t,1);break}},callBindingUpdate:function(e){for(var t=0;t<this._bindingUpdate.length;t++){var n=this._bindingUpdate[t];n.func!=null&&n.func(e)}},getid:function(t,n,r){if(t!=null&&t.name!=undefined&&t.name){var i=e(n).attr(t.name);if(i!=null&&i.toString().length>0)return i;if(t.map)try{var i=e(n).attr(t.map);if(i!=null&&i.toString().length>0)return i;if(e(t.map,n).length>0)return e(t.map,n).text();if(e(t.name,n).length>0)return e(t.name,n).text()}catch(s){return r}return}if(e(t,n).length>0)return e(t,n).text();if(t&&t.toString().length>0){var i=e(n).attr(t);if(i!=null&&i.toString().length>0)return i}return r},loadjson:function(t,n,r){typeof t=="string"&&(t=e.parseJSON(t)),r.root==undefined&&(r.root=""),r.record==undefined&&(r.record="");var t=t||n;t||(t=[]);var i=this;if(r.root!=""){var s=r.root.split(i.mapChar);if(s.length>1){var o=t;for(var u=0;u<s.length;u++)o!=undefined&&(o=o[s[u]]);t=o}else{t[r.root]!=undefined?t=t[r.root]:e.each(t,function(e){var n=this;if(this==r.root)return t=this,!1;this[r.root]!=undefined&&(t=this[r.root])});if(!t){var s=r.root.split(i.mapChar);if(s.length>0){var o=t;for(var u=0;u<s.length;u++)o!=undefined&&(o=o[s[u]]);t=o}}}}else if(!t.length)for(obj in t)if(e.isArray(t[obj])){t=t[obj];break}t!=null&&t.length==undefined&&(t=e.makeArray(t));if(t==null||t.length==undefined){alert("JSON Parse error.");return}if(t.length==0){this.totalrecords=0;return}var a=t.length;this.totalrecords=this.virtualmode?r.totalrecords||a:a,this.records=new Array,this.originaldata=new Array;var f=this.records,l=this.pageable?this.pagesize*this.pagenum:r.recordstartindex;this.recordids=new Array,r.loadallrecords&&(l=0,a=this.totalrecords);var c=0;this.virtualmode&&(l=this.pageable?this.pagesize*this.pagenum:r.recordstartindex,c=l,l=0,a=this.totalrecords);var h=r.datafields?r.datafields.length:0;if(h==0){var p=t[0],d=new Array;for(obj in p){var v=obj;d[d.length]={name:v}}r.datafields=d,h=d.length}var m=l;for(var g=l;g<a;g++){var y=t[g];if(y==undefined)break;if(r.record&&r.record!=""){y=y[r.record];if(y==undefined)continue}var b=this.getid(r.id,y,g);typeof b=="object"&&(b=g);if(!this.recordids[b]){this.recordids[b]=y;var w={};for(var E=0;E<h;E++){var S=r.datafields[E],x="";if(undefined==S||S==null)continue;if(S.map){if(e.isFunction(S.map))x=S.map(y);else{var s=S.map.split(i.mapChar);if(s.length>0){var T=y;for(var u=0;u<s.length;u++)T!=undefined&&(T=T[s[u]]);x=T}else x=y[S.map]}x!=undefined&&x!=null?x=this.getvaluebytype(x,S):x==undefined&&x!=null&&(x="")}if(x==""&&!S.map){x=y[S.name],x==undefined&&x!=null&&(x="");if(S.value!=undefined&&x!=undefined){var N=x[S.value];N!=undefined&&(x=N)}}x=this.getvaluebytype(x,S),S.displayname!=undefined?w[S.displayname]=x:w[S.name]=x;if(S.type==="array"){var C=function(t){if(!t)return;for(var n=0;n<t.length;n++){var s=t[n];if(!s)continue;for(var o=0;o<h;o++){var u=r.datafields[o],a="";if(undefined==u||u==null)continue;if(u.map){if(e.isFunction(u.map))a=u.map(s);else{var f=u.map.split(i.mapChar);if(f.length>0){var l=s;for(var c=0;c<f.length;c++)l!=undefined&&(l=l[f[c]]);a=l}else a=s[u.map]}a!=undefined&&a!=null?a=this.getvaluebytype(a,u):a==undefined&&a!=null&&(a="")}if(a==""&&!u.map){a=s[u.name],a==undefined&&a!=null&&(a="");if(u.value!=undefined&&a!=undefined){var p=a[u.value];p!=undefined&&(a=p)}}a=this.getvaluebytype(a,u),u.displayname!=undefined?s[u.displayname]=a:s[u.name]=a,u.type==="array"&&C.call(this,a)}}};C.call(this,x)}}if(r.recordendindex<=0||l<r.recordendindex)f[c+m]=e.extend({},w),f[c+m].uid=b,this.originaldata[c+m]=e.extend({},f[g]),m++}}this.records=f,this.cachedrecords=this.records},loadxml:function(t,n,r){typeof t=="string"&&(t=n=e(e.parseXML(t)),t=null),r.root==undefined&&(r.root=""),r.record==undefined&&(r.record="");var t;e.jqx.browser.msie&&n?n.xml!=undefined?t=e(r.root+" "+r.record,e.parseXML(n.xml)):t=t||e(r.root+" "+r.record,n):t=t||e(r.root+" "+r.record,n),t||(t=[]);var i=t.length;if(t.length==0)return;this.totalrecords=this.virtualmode?r.totalrecords||i:i,this.records=new Array,this.originaldata=new Array;var s=this.records,o=this.pageable?this.pagesize*this.pagenum:r.recordstartindex;this.recordids=new Array,r.loadallrecords&&(o=0,i=this.totalrecords);var u=0;this.virtualmode&&(o=this.pageable?this.pagesize*this.pagenum:r.recordstartindex,u=o,o=0,i=this.totalrecords);var a=r.datafields?r.datafields.length:0;if(a==0){var f=t[0],l=new Array;for(obj in f){var c=obj;l[l.length]={name:c}}r.datafields=l,a=l.length}var h=o,p=!1;for(var d=o;d<i;d++){var v=t[d];if(v==undefined)break;var m=this.getid(r.id,v,d);if(!this.recordids[m]){this.recordids[m]=v;var g={},y=!1;r.hierarchy&&r.hierarchy.root&&(y=!0);for(var b=0;b<a;b++){var w=r.datafields[b],E="";if(undefined==w||w==null)continue;if(w.map)if(e.isFunction(w.map))E=w.map(v);else{var S=w.map.indexOf("[");if(S<0){E=e(w.map,v);if(E.length==1)E=E.text();else{p=!0;var x=new Array;for(var T=0;T<E.length;T++)x.push(e(E[T]).text());E=x,y&&x.length>0&&(E=x[0])}}else{var N=w.map.substring(0,S-1),C=w.map.indexOf("]"),k=w.map.substring(S+1,C);E=e(N,v).attr(k),E==undefined&&(E=e(v).attr(k)),E==undefined&&(E="")}E==""&&(E=e(v).attr(w.map),E==undefined&&(E=""))}if(E==""){E=e(w.name,v);if(E.length==1)E=E.text();else{var x=new Array;for(var T=0;T<E.length;T++)x.push(e(E[T]).text());E=x,y&&x.length>0&&(E=x[0])}E==""&&(E=e(v).attr(w.name),E==undefined&&(E="")),E==""&&v.nodeName&&v.nodeName==w.name&&v.firstChild&&(E=e(v.firstChild).text())}var L=E;E=this.getvaluebytype(E,w),w.displayname!=undefined?g[w.displayname]=E:g[w.name]=E}if(r.recordendindex<=0||o<r.recordendindex)s[u+h]=e.extend({},g),s[u+h].uid=m,this.originaldata[u+h]=e.extend({},s[d]),h++}}if(r.hierarchy&&r.hierarchy.root)for(var d=o;d<i;d++){var v=t[d],A=s[d];if(e(v).parent().length>0){var m=this.getid(r.id,e(v).parents(r.hierarchy.record+":first"));A.parentuid=m}else A.parentuid=null}this.records=s,this.cachedrecords=this.records},loadtext:function(t,n){if(t==null)return;var r=n.rowDelimiter||this.rowDelimiter||"\n",i=t.split(r),s=i.length;this.totalrecords=this.virtualmode?n.totalrecords||s:s,this.records=new Array,this.originaldata=new Array;var o=this.records,u=this.pageable?this.pagesize*this.pagenum:n.recordstartindex;this.recordids=new Array,n.loadallrecords&&(u=0,s=this.totalrecords);var a=0;this.virtualmode&&(u=this.pageable?this.pagesize*this.pagenum:n.recordstartindex,a=u,u=0,s=this.totalrecords);var f=n.datafields.length,l=n.columnDelimiter||this.columnDelimiter;l||(l=n.datatype==="tab"||n.datatype==="tsv"?"	":",");for(var c=u;c<s;c++){var h=i[c],p=null;if(!this.recordids[p]){n.id==null&&(p=c,this.recordids[p]=h);var d={},v=i[c].split(l);for(var m=0;m<f;m++){if(m>=v.length)continue;var g=n.datafields[m],y=v[m];g.map&&e.isFunction(g.map)&&(y=g.map(h)),g.type&&(y=this.getvaluebytype(y,g));var b=g.map||g.name||m.toString();d[b]=y,n.id!=null&&n.id===g.name&&(p=y,this.recordids[p]=h)}p==null&&(p=c),o[a+c]=e.extend({},d),o[a+c].uid=p,this.originaldata[a+c]=e.extend({},o[c])}}this.records=o,this.cachedrecords=this.records},getvaluebytype:function(t,n){var r=t;if(t==null)return t;if(e.isArray(t)&&n.type!="array"){for(var i=0;i<t.length;i++)t[i]=this.getvaluebytype(t[i],n);return t}if(n.type=="date")if(t=="NaN")t="";else{var s=new Date(t);if(typeof t=="string"&&n.format){var o=e.jqx.dataFormat.parsedate(t,n.format);o!=null&&(s=o)}s.toString()=="NaN"||s.toString()=="Invalid Date"?e.jqx.dataFormat?t=e.jqx.dataFormat.tryparsedate(t):t=s:t=s,t==null&&(t=r)}else if(n.type=="float"||n.type=="number"||n.type=="decimal")if(t=="NaN")t="";else{var t=parseFloat(t);isNaN(t)&&(t=r)}else if(n.type=="int"||n.type=="integer"){var t=parseInt(t);isNaN(t)&&(t=r)}else if(n.type=="bool"||n.type=="boolean")t!=null&&t.toLowerCase!=undefined&&(t.toLowerCase()=="false"?t=!1:t.toLowerCase()=="true"&&(t=!0)),t==1?t=!0:t==0&&t!==""?t=!1:t="";return t}},e.jqx.dataFormat={},e.extend(e.jqx.dataFormat,{regexTrim:/^\s+|\s+$/g,regexInfinity:/^[+-]?infinity$/i,regexHex:/^0x[a-f0-9]+$/i,regexParseFloat:/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,toString:Object.prototype.toString,isBoolean:function(e){return typeof e=="boolean"},isObject:function(t){return t&&(typeof t=="object"||e.isFunction(t))||!1},isDate:function(e){return e instanceof Date},arrayIndexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},isString:function(e){return typeof e=="string"},isNumber:function(e){return typeof e=="number"&&isFinite(e)},isNull:function(e){return e===null},isUndefined:function(e){return typeof e=="undefined"},isValue:function(e){return this.isObject(e)||this.isString(e)||this.isNumber(e)||this.isBoolean(e)},isEmpty:function(t){return!this.isString(t)&&this.isValue(t)?!1:this.isValue(t)?(t=e.trim(t).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,""),t===""):!0},startsWith:function(e,t){return e.indexOf(t)===0},endsWith:function(e,t){return e.substr(e.length-t.length)===t},trim:function(e){return(e+"").replace(this.regexTrim,"")},isArray:function(e){return this.toString.call(e)==="[object Array]"},defaultcalendar:function(){var e={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","};return e},expandFormat:function(e,t){t=t||"F";var n,r=e.patterns,i=t.length;if(i===1){n=r[t];if(!n)throw"Invalid date format string '"+t+"'.";t=n}else i===2&&t.charAt(0)==="%"&&(t=t.charAt(1));return t},getEra:function(e,t){if(!t)return 0;if(typeof e=="string")return 0;var n,r=e.getTime();for(var i=0,s=t.length;i<s;i++){n=t[i].start;if(n===null||r>=n)return i}return 0},toUpper:function(e){return e.split(" ").join(" ").toUpperCase()},toUpperArray:function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t[n]=this.toUpper(e[n]);return t},getEraYear:function(e,t,n,r){var i=e.getFullYear();return!r&&t.eras&&(i-=t.eras[n].offset),i},toUpper:function(e){return e?e.toUpperCase():""},getDayIndex:function(e,t,n){var r,i=e.days,s=e._upperDays;return s||(e._upperDays=s=[this.toUpperArray(i.names),this.toUpperArray(i.namesAbbr),this.toUpperArray(i.namesShort)]),t=t.toUpperCase(),n?(r=this.arrayIndexOf(s[1],t),r===-1&&(r=this.arrayIndexOf(s[2],t))):r=this.arrayIndexOf(s[0],t),r},getMonthIndex:function(e,t,n){var r=e.months,i=e.monthsGenitive||e.months,s=e._upperMonths,o=e._upperMonthsGen;s||(e._upperMonths=s=[this.toUpperArray(r.names),this.toUpperArray(r.namesAbbr)],e._upperMonthsGen=o=[this.toUpperArray(i.names),this.toUpperArray(i.namesAbbr)]),t=this.toUpper(t);var u=this.arrayIndexOf(n?s[1]:s[0],t);return u<0&&(u=this.arrayIndexOf(n?o[1]:o[0],t)),u},appendPreOrPostMatch:function(e,t){var n=0,r=!1;for(var i=0,s=e.length;i<s;i++){var o=e.charAt(i);switch(o){case"'":r?t.push("'"):n++,r=!1;break;case"\\":r&&t.push("\\"),r=!r;break;default:t.push(o),r=!1}}return n},getTokenRegExp:function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},formatlink:function(e,t){var n="";return t&&t.target&&(n="target="+t.target),n!=""?"<a "+n+' href="'+e+'">'+e+"</a>":'<a href="'+e+'">'+e+"</a>"},formatemail:function(e){return'<a href="mailto:'+e+'">'+e+"</a>"},formatNumber:function(e,t,n){return this.formatnumber(e,t,n)},formatnumber:function(e,t,n){if(n==undefined||n==null||n=="")n=this.defaultcalendar();if(t===""||t===null)return e;this.isNumber(e)||(e*=1);var r;t.length>1&&(r=parseInt(t.slice(1),10));var i={},s=t.charAt(0).toUpperCase();i.thousandsSeparator=n.thousandsseparator,i.decimalSeparator=n.decimalseparator;switch(s){case"D":case"d":case"F":case"f":i.decimalPlaces=r;break;case"N":case"n":i.decimalPlaces=0;break;case"C":case"c":i.decimalPlaces=r,n.currencysymbolposition=="before"?i.prefix=n.currencysymbol:i.suffix=n.currencysymbol;break;case"P":case"p":i.suffix=n.percentsymbol,i.decimalPlaces=r;break;default:throw"Bad number format specifier: "+s}if(this.isNumber(e)){var o=e<0,u=e+"",a=i.decimalSeparator?i.decimalSeparator:".",f;if(this.isNumber(i.decimalPlaces)){var l=i.decimalPlaces,c=Math.pow(10,l);u=(e*c).toFixed(0)/c+"",f=u.lastIndexOf(".");if(l>0){f<0?(u+=a,f=u.length-1):a!=="."&&(u=u.replace(".",a));while(u.length-1-f<l)u+="0"}}if(i.thousandsSeparator){var h=i.thousandsSeparator;f=u.lastIndexOf(a),f=f>-1?f:u.length;var p=u.substring(f),d=-1;for(var v=f;v>0;v--)d++,d%3===0&&v!==f&&(!o||v>1)&&(p=h+p),p=u.charAt(v-1)+p;u=p}return u=i.prefix?i.prefix+u:u,u=i.suffix?u+i.suffix:u,u}return e},tryparsedate:function(e,t){if(t==undefined||t==null)t=this.defaultcalendar();var n=this;if(e=="")return null;e!=null&&!e.substring&&(e=e.toString());if(e!=null&&e.substring(0,6)=="/Date("){var r=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/,i=new Date(+e.replace(/\/Date\((\d+)\)\//,"$1"));if(i=="Invalid Date"){var s=e.match(/^\/Date\((\d+)([-+]\d\d)(\d\d)\)\/$/),i=null;s&&(i=new Date(1*s[1]+36e5*s[2]+6e4*s[3]))}if(i==null||i=="Invalid Date"||isNaN(i)){var o=r.exec(e);if(o){var u=new Date(parseInt(o[1]));if(o[2]){var a=parseInt(o[3]);o[2]==="-"&&(a=-a);var f=u.getUTCMinutes();u.setUTCMinutes(f-a)}if(!isNaN(u.valueOf()))return u}}return i}patterns=t.patterns;for(prop in patterns){i=n.parsedate(e,patterns[prop],t);if(i){if(prop=="ISO"){var l=n.parsedate(e,patterns.ISO2,t);if(l)return l}return i}}if(e!=null){var l=null,c=[":","/","-"],h=!0;for(var p=0;p<c.length;p++)e.indexOf(c[p])!=-1&&(h=!1);if(h){var d=new Number(e);if(!isNaN(d))return new Date(d)}}return null},getparseregexp:function(e,t){var n=e._parseRegExp;if(!n)e._parseRegExp=n={};else{var r=n[t];if(r)return r}var i=this.expandFormat(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),s=["^"],o=[],u=0,a=0,f=this.getTokenRegExp(),l;while((l=f.exec(i))!==null){var c=i.slice(u,l.index);u=f.lastIndex,a+=this.appendPreOrPostMatch(c,s);if(a%2){s.push(l[0]);continue}var h=l[0],p=h.length,d;switch(h){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":d="(\\D+)";break;case"tt":case"t":d="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":d="(\\d{"+p+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":d="(\\d\\d?)";break;case"zzz":d="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":d="([+-]?\\d\\d?)";break;case"/":d="(\\"+e["/"]+")";break;default:throw"Invalid date format pattern '"+h+"'."}d&&s.push(d),o.push(l[0])}this.appendPreOrPostMatch(i.slice(u),s),s.push("$");var v=s.join("").replace(/\s+/g,"\\s+"),m={regExp:v,groups:o};return n[t]=m},outOfRange:function(e,t,n){return e<t||e>n},expandYear:function(e,t){var n=new Date,r=this.getEra(n);if(t<100){var i=e.twoDigitYearMax;i=typeof i=="string"?(new Date).getFullYear()%100+parseInt(i,10):i;var s=this.getEraYear(n,e,r);t+=s-s%100,t>i&&(t-=100)}return t},parsedate:function(e,t,n){if(n==undefined||n==null)n=this.defaultcalendar();e=this.trim(e);var r=n,i=this.getparseregexp(r,t),s=(new RegExp(i.regExp)).exec(e);if(s===null)return null;var o=i.groups,u=null,a=null,f=null,l=null,c=null,h=0,p,d=0,v=0,m=0,g=null,y=!1;for(var b=0,w=o.length;b<w;b++){var E=s[b+1];if(E){var S=o[b],x=S.length,T=parseInt(E,10);switch(S){case"dd":case"d":l=T;if(this.outOfRange(l,1,31))return null;break;case"MMM":case"MMMM":f=this.getMonthIndex(r,E,x===3);if(this.outOfRange(f,0,11))return null;break;case"M":case"MM":f=T-1;if(this.outOfRange(f,0,11))return null;break;case"y":case"yy":case"yyyy":a=x<4?this.expandYear(r,T):T;if(this.outOfRange(a,0,9999))return null;break;case"h":case"hh":h=T,h===12&&(h=0);if(this.outOfRange(h,0,11))return null;break;case"H":case"HH":h=T;if(this.outOfRange(h,0,23))return null;break;case"m":case"mm":d=T;if(this.outOfRange(d,0,59))return null;break;case"s":case"ss":v=T;if(this.outOfRange(v,0,59))return null;break;case"tt":case"t":y=r.PM&&(E===r.PM[0]||E===r.PM[1]||E===r.PM[2]);if(!y&&(!r.AM||E!==r.AM[0]&&E!==r.AM[1]&&E!==r.AM[2]))return null;break;case"f":case"ff":case"fff":m=T*Math.pow(10,3-x);if(this.outOfRange(m,0,999))return null;break;case"ddd":case"dddd":c=this.getDayIndex(r,E,x===3);if(this.outOfRange(c,0,6))return null;break;case"zzz":var N=E.split(/:/);if(N.length!==2)return null;p=parseInt(N[0],10);if(this.outOfRange(p,-12,13))return null;var C=parseInt(N[1],10);if(this.outOfRange(C,0,59))return null;g=p*60+(startsWith(E,"-")?-C:C);break;case"z":case"zz":p=T;if(this.outOfRange(p,-12,13))return null;g=p*60;break;case"g":case"gg":var k=E;if(!k||!r.eras)return null;k=trim(k.toLowerCase());for(var L=0,A=r.eras.length;L<A;L++)if(k===r.eras[L].name.toLowerCase()){u=L;break}if(u===null)return null}}}var O=new Date,M,_=r.convert;M=O.getFullYear(),a===null?a=M:r.eras&&(a+=r.eras[u||0].offset),f===null&&(f=0),l===null&&(l=1);if(_){O=_.toGregorian(a,f,l);if(O===null)return null}else{O.setFullYear(a,f,l);if(O.getDate()!==l)return null;if(c!==null&&O.getDay()!==c)return null}y&&h<12&&(h+=12),O.setHours(h,d,v,m);if(g!==null){var D=O.getMinutes()-(g+O.getTimezoneOffset());O.setHours(O.getHours()+parseInt(D/60,10),D%60)}return O},cleardatescache:function(){this.datescache=new Array},formatDate:function(e,t,n){return this.formatdate(e,t,n)},formatdate:function(e,t,n){function v(e,t){var n,r=e+"";return t>1&&r.length<t?(n=a[t-2]+r,n.substr(n.length-t,t)):(n=r,n)}function m(){return f||l?f:(f=c.test(t),l=!0,f)}function g(e,t){if(d)return d[t];if(e.getMonth!=undefined)switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate()}}if(n==undefined||n==null)n=this.defaultcalendar();if(typeof e=="string")return e;var r=e.toString()+"_"+t;if(this.datescache&&this.datescache[r])return this.datescache[r];if(!t||!t.length||t==="i"){var i;return i=this.formatDate(e,n.patterns.F,culture),i}var s=n.eras,o=t==="s";t=this.expandFormat(n,t),i=[];var u,a=["0","00","000"],f,l,c=/([^d]|^)(d|dd)([^d]|$)/g,h=0,p=this.getTokenRegExp(),d;for(;;){var y=p.lastIndex,b=p.exec(t),w=t.slice(y,b?b.index:t.length);h+=this.appendPreOrPostMatch(w,i);if(!b)break;if(h%2){i.push(b[0]);continue}var E=b[0],S=E.length;switch(E){case"ddd":case"dddd":var x=S===3?n.days.namesAbbr:n.days.names;i.push(x[e.getDay()]);break;case"d":case"dd":f=!0,i.push(v(g(e,2),S));break;case"MMM":case"MMMM":var T=g(e,1);i.push(n.months[S===3?"namesAbbr":"names"][T]);break;case"M":case"MM":i.push(v(g(e,1)+1,S));break;case"y":case"yy":case"yyyy":T=this.getEraYear(e,n,this.getEra(e,s),o),S<4&&(T%=100),i.push(v(T,S));break;case"h":case"hh":u=e.getHours()%12,u===0&&(u=12),i.push(v(u,S));break;case"H":case"HH":i.push(v(e.getHours(),S));break;case"m":case"mm":i.push(v(e.getMinutes(),S));break;case"s":case"ss":i.push(v(e.getSeconds(),S));break;case"t":case"tt":T=e.getHours()<12?n.AM?n.AM[0]:" ":n.PM?n.PM[0]:" ",i.push(S===1?T.charAt(0):T);break;case"f":case"ff":case"fff":i.push(v(e.getMilliseconds(),3).substr(0,S));break;case"z":case"zz":u=e.getTimezoneOffset()/60,i.push((u<=0?"+":"-")+v(Math.floor(Math.abs(u)),S));break;case"zzz":u=e.getTimezoneOffset()/60,i.push((u<=0?"+":"-")+v(Math.floor(Math.abs(u)),2)+":"+v(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":n.eras&&i.push(n.eras[this.getEra(e,s)].name);break;case"/":i.push(n["/"]);break;default:throw"Invalid date format pattern '"+E+"'."}}var N=i.join("");return this.datescache||(this.datescache=new Array),this.datescache[r]=N,N}}),e.jqx.data={};var t,n,r=/#.*$/,i=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,s=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,o=/^(?:GET|HEAD)$/,u=/^\/\//,a=/\?/,f=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,l=/([?&])_=[^&]*/,c=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,h=/\s+/,p=jQuery.fn.load,d={},v={},m=["*/"]+["*"];try{n=location.href}catch(g){n=document.createElement("a"),n.href="",n=n.href}t=c.exec(n.toLowerCase())||[],e.extend(e.jqx.data,{ajaxSetup:function(t,n){return n?w(t,e.jqx.data.ajaxSettings):(n=t,t=e.jqx.data.ajaxSettings),w(t,n),t},ajaxSettings:{url:n,isLocal:s.test(t[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":m},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:y(d),ajaxTransport:y(v),ajax:function(n,s){function j(e,t,n,r){var i,s,o,u,a,l=t;if(P===2)return;P=2,w&&clearTimeout(w),y=undefined,p=r||"",B.readyState=e>0?4:0,n&&(u=E(C,B,n));if(e>=200&&e<300||e===304)C.ifModified&&(a=B.getResponseHeader("Last-Modified"),a&&(jQuery.lastModified[f]=a),a=B.getResponseHeader("Etag"),a&&(jQuery.etag[f]=a)),e===304?(l="notmodified",i=!0):(i=S(C,u),l=i.state,s=i.data,o=i.error,i=!o);else{o=l;if(!l||e)l="error",e<0&&(e=0)}B.status=e,B.statusText=(t||l)+"",i?A.resolveWith(k,[s,l,B]):A.rejectWith(k,[B,l,o]),B.statusCode(M),M=undefined,T&&L.trigger("ajax"+(i?"Success":"Error"),[B,C,i?s:o]),O.fireWith(k,[B,l]),T&&(L.trigger("ajaxComplete",[B,C]),--jQuery.active||jQuery.event.trigger("ajaxStop"))}typeof n=="object"&&(s=n,n=undefined),s=s||{};var f,p,g,y,w,x,T,N,C=e.jqx.data.ajaxSetup({},s),k=C.context||C,L=k!==C&&(k.nodeType||k instanceof jQuery)?jQuery(k):jQuery.event,A=jQuery.Deferred(),O=jQuery.Callbacks("once memory"),M=C.statusCode||{},_={},D={},P=0,H="canceled",B={readyState:0,setRequestHeader:function(e,t){if(!P){var n=e.toLowerCase();e=D[n]=D[n]||e,_[e]=t}return this},getAllResponseHeaders:function(){return P===2?p:null},getResponseHeader:function(e){var t;if(P===2){if(!g){g={};while(t=i.exec(p))g[t[1].toLowerCase()]=t[2]}t=g[e.toLowerCase()]}return t===undefined?null:t},overrideMimeType:function(e){return P||(C.mimeType=e),this},abort:function(e){return e=e||H,y&&y.abort(e),j(0,e),this}};A.promise(B),B.success=B.done,B.error=B.fail,B.complete=O.add,B.statusCode=function(e){if(e){var t;if(P<2)for(t in e)M[t]=[M[t],e[t]];else t=e[B.status],B.always(t)}return this},C.url=((n||C.url)+"").replace(r,"").replace(u,t[1]+"//"),C.dataTypes=jQuery.trim(C.dataType||"*").toLowerCase().split(h),C.crossDomain==null&&(x=c.exec(C.url.toLowerCase()),C.crossDomain=!(!x||x[1]===t[1]&&x[2]===t[2]&&(x[3]||(x[1]==="http:"?80:443))==(t[3]||(t[1]==="http:"?80:443)))),C.data&&C.processData&&typeof C.data!="string"&&(C.data=jQuery.param(C.data,C.traditional)),b(d,C,s,B);if(P===2)return B;T=C.global,C.type=C.type.toUpperCase(),C.hasContent=!o.test(C.type),T&&jQuery.active++===0&&jQuery.event.trigger("ajaxStart");if(!C.hasContent){C.data&&(C.url+=(a.test(C.url)?"&":"?")+C.data,delete C.data),f=C.url;if(C.cache===!1){var F=jQuery.now(),I=C.url.replace(l,"$1_="+F);C.url=I+(I===C.url?(a.test(C.url)?"&":"?")+"_="+F:"")}}(C.data&&C.hasContent&&C.contentType!==!1||s.contentType)&&B.setRequestHeader("Content-Type",C.contentType),C.ifModified&&(f=f||C.url,jQuery.lastModified[f]&&B.setRequestHeader("If-Modified-Since",jQuery.lastModified[f]),jQuery.etag[f]&&B.setRequestHeader("If-None-Match",jQuery.etag[f])),B.setRequestHeader("Accept",C.dataTypes[0]&&C.accepts[C.dataTypes[0]]?C.accepts[C.dataTypes[0]]+(C.dataTypes[0]!=="*"?", "+m+"; q=0.01":""):C.accepts["*"]);for(N in C.headers)B.setRequestHeader(N,C.headers[N]);if(!C.beforeSend||C.beforeSend.call(k,B,C)!==!1&&P!==2){H="abort";for(N in{success:1,error:1,complete:1})B[N](C[N]);y=b(v,C,s,B);if(!y)j(-1,"No Transport");else{B.readyState=1,T&&L.trigger("ajaxSend",[B,C]),C.async&&C.timeout>0&&(w=setTimeout(function(){B.abort("timeout")},C.timeout));try{P=1,y.send(_,j)}catch(q){if(!(P<2))throw q;j(-1,q)}}return B}return B.abort()},active:0,lastModified:{},etag:{}});var x=[],T=/\?/,N=/(=)\?(?=&|$)|\?\?/,C=jQuery.now();e.jqx.data.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=x.pop()||jQuery.expando+"_"+C++;return this[e]=!0,e}}),e.jqx.data.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,s,o=e.data,u=e.url,a=e.jsonp!==!1,f=a&&N.test(u),l=a&&!f&&typeof o=="string"&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&N.test(o);if(e.dataTypes[0]==="jsonp"||f||l)return r=e.jsonpCallback=jQuery.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,i=window[r],f?e.url=u.replace(N,"$1"+r):l?e.data=o.replace(N,"$1"+r):a&&(e.url+=(T.test(u)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||jQuery.error(r+" was not called"),s[0]},e.dataTypes[0]="json",window[r]=function(){s=arguments},n.always(function(){window[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,x.push(r)),s&&jQuery.isFunction(i)&&i(s[0]),s=i=undefined}),"script"}),e.jqx.data.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return jQuery.globalEval(e),e}}}),e.jqx.data.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),e.jqx.data.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(r,i){t=document.createElement("script"),t.async="async",e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,r){if(r||!t.readyState||/loaded|complete/.test(t.readyState))t.onload=t.onreadystatechange=null,n&&t.parentNode&&n.removeChild(t),t=undefined,r||i(200,"success")},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(0,1)}}}});var k,L=window.ActiveXObject?function(){for(var e in k)k[e](0,1)}:!1,A=0;e.jqx.data.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&O()||M()}:O,function(e){jQuery.extend(jQuery.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(e.jqx.data.ajaxSettings.xhr()),jQuery.support.ajax&&e.jqx.data.ajaxTransport(function(e){if(!e.crossDomain||jQuery.support.cors){var t;return{send:function(n,r){var i,s,o=e.xhr();e.username?o.open(e.type,e.url,e.async,e.username,e.password):o.open(e.type,e.url,e.async);if(e.xhrFields)for(s in e.xhrFields)o[s]=e.xhrFields[s];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),!e.crossDomain&&!n["X-Requested-With"]&&(n["X-Requested-With"]="XMLHttpRequest");try{for(s in n)o.setRequestHeader(s,n[s])}catch(u){}o.send(e.hasContent&&e.data||null),t=function(n,s){var u,a,f,l,c;try{if(t&&(s||o.readyState===4)){t=undefined,i&&(o.onreadystatechange=jQuery.noop,L&&delete k[i]);if(s)o.readyState!==4&&o.abort();else{u=o.status,f=o.getAllResponseHeaders(),l={},c=o.responseXML,c&&c.documentElement&&(l.xml=c);try{l.text=o.responseText}catch(h){}try{a=o.statusText}catch(h){a=""}!u&&e.isLocal&&!e.crossDomain?u=l.text?200:404:u===1223&&(u=204)}}}catch(p){s||r(-1,p)}l&&r(u,a,l,f)},e.async?o.readyState===4?setTimeout(t,0):(i=++A,L&&(k||(k={},jQuery(window).unload(L)),k[i]=t),o.onreadystatechange=t):t()},abort:function(){t&&t(0,1)}}}}),e.jqx.filter=function(){this.operator="and";var t=0,n=1,r=["EMPTY","NOT_EMPTY","CONTAINS","CONTAINS_CASE_SENSITIVE","DOES_NOT_CONTAIN","DOES_NOT_CONTAIN_CASE_SENSITIVE","STARTS_WITH","STARTS_WITH_CASE_SENSITIVE","ENDS_WITH","ENDS_WITH_CASE_SENSITIVE","EQUAL","EQUAL_CASE_SENSITIVE","NULL","NOT_NULL"],i=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"],s=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"],o=["EQUAL","NOT_EQUAL"],u=new Array,a=new Array;this.evaluate=function(e){var t=!0;for(var r=0;r<u.length;r++){var i=u[r].evaluate(e);r==0?t=i:a[r]==n||a[r]=="or"?t=t||i:t=t&&i}return t},this.getfilterscount=function(){return u.length},this.setoperatorsbyfiltertype=function(e,t){switch(e){case"numericfilter":i=t;break;case"stringfilter":r=t;break;case"datefilter":s=t;break;case"booleanfilter":o=t}},this.getoperatorsbyfiltertype=function(e){var t=new Array;switch(e){case"numericfilter":t=i.slice(0);break;case"stringfilter":t=r.slice(0);break;case"datefilter":t=s.slice(0);break;case"booleanfilter":t=o.slice(0)}return t};var f=function(){var e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return e()+"-"+e()+"-"+e()};this.createfilter=function(e,t,n,r,i,s){if(e==null||e==undefined)return null;switch(e){case"numericfilter":return new h(t,n.toUpperCase());case"stringfilter":return new l(t,n.toUpperCase());case"datefilter":return new p(t,n.toUpperCase(),i,s);case"booleanfilter":return new c(t,n.toUpperCase());case"custom":return new d(t,n.toUpperCase(),r)}throw new Error("jqxGrid: There is no such filter type. The available filter types are: 'numericfilter', 'stringfilter', 'datefilter' and 'booleanfilter'")},this.getfilters=function(){var e=new Array;for(var t=0;t<u.length;t++){var n={value:u[t].filtervalue,condition:u[t].comparisonoperator,operator:a[t],type:u[t].type};e[t]=n}return e},this.addfilter=function(e,t){u[u.length]=t,t.key=f(),a[a.length]=e},this.removefilter=function(e){for(var t=0;t<u.length;t++)if(u[t].key==e.key){u.splice(t,1),a.splice(t,1);break}},this.getoperatorat=function(e){return e==undefined||e==null?null:e<0||e>u.length?null:a[e]},this.setoperatorat=function(e,t){if(e==undefined||e==null)return null;if(e<0||e>u.length)return null;a[t]=t},this.getfilterat=function(e){return e==undefined||e==null?null:e<0||e>u.length?null:u[e]},this.setfilterat=function(e,t){if(e==undefined||e==null)return null;if(e<0||e>u.length)return null;t.key=f(),u[e]=t},this.clear=function(){u=new Array,a=new Array};var l=function(t,n){this.filtervalue=t,this.comparisonoperator=n,this.type="stringfilter",this.evaluate=function(t){var n=this.filtervalue,r=this.comparisonoperator;if(t==null||t==undefined||t=="")return r=="NULL"?!0:!1;var i="";try{i=t.toString()}catch(s){return!0}var o=function(t,n){switch(r){case"EQUAL":return e.jqx.string.equalsIgnoreCase(t,n);case"EQUAL_CASE_SENSITIVE":return e.jqx.string.equals(t,n);case"NOT_EQUAL":return!e.jqx.string.equalsIgnoreCase(t,n);case"NOT_EQUAL_CASE_SENSITIVE":return!e.jqx.string.equals(t,n);case"CONTAINS":return e.jqx.string.containsIgnoreCase(t,n);case"CONTAINS_CASE_SENSITIVE":return e.jqx.string.contains(t,n);case"DOES_NOT_CONTAIN":return!e.jqx.string.containsIgnoreCase(t,n);case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return!e.jqx.string.contains(t,n);case"EMPTY":return t=="";case"NOT_EMPTY":return t!="";case"NOT_NULL":return t!=null;case"STARTS_WITH":return e.jqx.string.startsWithIgnoreCase(t,n);case"ENDS_WITH":return e.jqx.string.endsWithIgnoreCase(t,n);case"ENDS_WITH_CASE_SENSITIVE":return e.jqx.string.endsWith(t,n);case"STARTS_WITH_CASE_SENSITIVE":return e.jqx.string.startsWith(t,n);default:return!1}},u=new Array;if(n&&n.indexOf)if(n.indexOf("|")>=0||n.indexOf(" AND ")>=0||n.indexOf(" OR ")>=0||n.indexOf(" and ")>=0||n.indexOf(" or ")>=0){var a=o(i,n);if(a)return a;var f=n.indexOf(" AND ")>=0?n.split(" AND "):new Array,l=n.indexOf(" OR ")>=0?n.split(" OR "):new Array,c=n.indexOf(" and ")>=0?n.split(" and "):new Array,h=n.indexOf(" or ")>=0?n.split(" or "):new Array,p=n.indexOf("|")>=0?n.split("|"):new Array;if(p.length>0)for(var d=0;d<p.length;d++)p[d]=e.trim(p[d]);var v=n.indexOf(" ")>=0?n.split(" "):new Array;if(v.length>0)for(var d=0;d<v.length;d++)v[d]=e.trim(v[d]);f=f.concat(v),f=f.concat(c),l=l.concat(p),l=l.concat(h);if(f.length>0)for(var d=0;d<f.length;d++)!f[d].indexOf(" OR ")>=0&&u.push(f[d]);if(l.length>0)for(var d=0;d<l.length;d++)!l[d].indexOf(" AND ")>=0&&u.push(l[d]);var m=undefined;for(var g=0;g<u.length;g++){var t=u[g],a=o(i,t),y=g<f.length?"and":"or";m==undefined?m=a:y=="or"?m=m||a:m=m&&a}return m}return o(i,n)}},c=function(e,t){this.filtervalue=e,this.comparisonoperator=t,this.type="booleanfilter",this.evaluate=function(e){var t=this.filtervalue,n=this.comparisonoperator;if(e==null||e==undefined)return n=="NULL"?!0:!1;var r=e;switch(n){case"EQUAL":return r==t||r.toString()==t.toString();case"NOT_EQUAL":return r!=t&&r.toString()!=t.toString();default:return!1}}},h=function(t,n){this.filtervalue=t,this.comparisonoperator=n,this.type="numericfilter",this.evaluate=function(t){var n=this.filtervalue,r=this.comparisonoperator;if(t===null||t===undefined||t==="")return r=="NOT_NULL"?!1:r=="NULL"?!0:!1;if(r=="NULL")return!1;if(r=="NOT_NULL")return!0;var i=t;try{i=parseFloat(i)}catch(s){if(t.toString()!="")return!1}var o=function(t,n){switch(r){case"EQUAL":return t==n;case"NOT_EQUAL":return t!=n;case"GREATER_THAN":return t>n;case"GREATER_THAN_OR_EQUAL":return t>=n;case"LESS_THAN":return t<n;case"LESS_THAN_OR_EQUAL":return t<=n;case"STARTS_WITH":return e.jqx.string.startsWithIgnoreCase(t.toString(),n.toString());case"ENDS_WITH":return e.jqx.string.endsWithIgnoreCase(t.toString(),n.toString());case"ENDS_WITH_CASE_SENSITIVE":return e.jqx.string.endsWith(t.toString(),n.toString());case"STARTS_WITH_CASE_SENSITIVE":return e.jqx.string.startsWith(t.toString(),n.toString());case"CONTAINS":return e.jqx.string.containsIgnoreCase(t.toString(),n.toString());case"CONTAINS_CASE_SENSITIVE":return e.jqx.string.contains(t.toString(),n.toString());case"DOES_NOT_CONTAIN":return!e.jqx.string.containsIgnoreCase(t.toString(),n.toString());case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return!e.jqx.string.contains(t.toString(),n.toString());default:return!0}},u=new Array;if(n&&n.indexOf)if(n.indexOf("|")>=0||n.indexOf(" AND ")>=0||n.indexOf(" OR ")>=0||n.indexOf(" and ")>=0||n.indexOf(" or ")>=0){var a=o(i,n);if(a)return a;n=n.toString();var f=n.indexOf(" AND ")>=0?n.split(" AND "):new Array,l=n.indexOf(" OR ")>=0?n.split(" OR "):new Array,c=n.indexOf(" and ")>=0?n.split(" and "):new Array,h=n.indexOf(" or ")>=0?n.split(" or "):new Array;f=f.concat(c),l=l.concat(h);var p=n.indexOf("|")>=0?n.split("|"):new Array;if(p.length>0)for(var d=0;d<p.length;d++)p[d]=e.trim(p[d]);l=l.concat(p);if(f.length>0)for(var d=0;d<f.length;d++)!f[d].indexOf(" OR ")>=0&&u.push(f[d]);if(l.length>0)for(var d=0;d<l.length;d++)!l[d].indexOf(" AND ")>=0&&u.push(l[d]);var v=undefined;for(var m=0;m<u.length;m++){var t=u[m];if(t&&t.indexOf&&t.indexOf("..")>=0){var g=t.toString().split("..");g.length==2&&(a=i>=g[0]&&i<=g[1])}else var a=o(i,t);var y=m<f.length?"and":"or";v==undefined?v=a:y=="or"?v=v||a:v=v&&a}return v}if(n&&n.indexOf&&n.indexOf("..")>=0){u=n.toString().split("..");if(u.length==2)return i>=u[0]&&i<=u[1]}return o(i,n)}},p=function(t,n,r,i){this.filtervalue=t,this.type="datefilter";if(r!=undefined&&i!=undefined){var s=e.jqx.dataFormat.parsedate(t,r,i);if(s!=null)this.filterdate=s;else{var o=e.jqx.dataFormat.tryparsedate(t,i);o!=null&&(this.filterdate=o)}}else{var u=new Date(t);u.toString()=="NaN"||u.toString()=="Invalid Date"?this.filterdate=e.jqx.dataFormat.tryparsedate(t):this.filterdate=u}if(!this.filterdate){var u=new Date(t);u.toString()=="NaN"||u.toString()=="Invalid Date"?this.filterdate=e.jqx.dataFormat.tryparsedate(t):this.filterdate=u}this.comparisonoperator=n,this.evaluate=function(t){var n=this.filtervalue,s=this.comparisonoperator;if(t==null||t==undefined||t=="")return s=="NOT_NULL"?!1:s=="NULL"?!0:!1;if(s=="NULL")return!1;if(s=="NOT_NULL")return!0;var o=new Date;o.setFullYear(1900,0,1),o.setHours(12,0,0,0);try{var u=new Date(t);u.toString()=="NaN"||u.toString()=="Invalid Date"?t=e.jqx.dataFormat.tryparsedate(t):t=u,o=t;var a=!1;if(r!=undefined&&i!=undefined)if(r.indexOf("t")>=0||r.indexOf("T")>=0||r.indexOf(":")>=0||r.indexOf("f")>=0){a=!0;if(n&&n.toString().indexOf(":")==-1){var f=e.jqx.dataFormat.tryparsedate(n.toString()+":00",i);f!=null&&(this.filterdate=f)}}a||(o.setHours(0),o.setMinutes(0),o.setSeconds(0))}catch(l){if(t.toString()!="")return!1}if(this.filterdate!=null)n=this.filterdate;else if(n.indexOf)if(n.indexOf(":")!=-1||!isNaN(parseInt(n))){var c=new Date(o);c.setHours(12,0,0,0);var h=n.split(":");for(var p=0;p<h.length;p++)p==0&&c.setHours(h[p]),p==1&&c.setMinutes(h[p]),p==2&&c.setSeconds(h[p]);n=c}a&&n&&n.setFullYear&&o&&o.getFullYear&&r.indexOf("d")==-1&&r.indexOf("M")==-1&&r.indexOf("y")==-1&&n.setFullYear(o.getFullYear(),o.getMonth(),o.getDate());var d=function(t,n){t==null&&(t="");switch(s){case"EQUAL":return t.toString()==n.toString();case"NOT_EQUAL":return t.toString()!=n.toString();case"GREATER_THAN":return t>n;case"GREATER_THAN_OR_EQUAL":return t>=n;case"LESS_THAN":return t<n;case"LESS_THAN_OR_EQUAL":return t<=n;case"STARTS_WITH":return e.jqx.string.startsWithIgnoreCase(t.toString(),n.toString());case"ENDS_WITH":return e.jqx.string.endsWithIgnoreCase(t.toString(),n.toString());case"ENDS_WITH_CASE_SENSITIVE":return e.jqx.string.endsWith(t.toString(),n.toString());case"STARTS_WITH_CASE_SENSITIVE":return e.jqx.string.startsWith(t.toString(),n.toString());case"CONTAINS":return e.jqx.string.containsIgnoreCase(t.toString(),n.toString());case"CONTAINS_CASE_SENSITIVE":return e.jqx.string.contains(t.toString(),n.toString());case"DOES_NOT_CONTAIN":return!e.jqx.string.containsIgnoreCase(t.toString(),n.toString());case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return!e.jqx.string.contains(t.toString(),n.toString());default:return!0}},v=new Array;if(n&&n.indexOf)if(n.indexOf("|")>=0||n.indexOf(" AND ")>=0||n.indexOf(" OR ")>=0||n.indexOf(" and ")>=0||n.indexOf(" or ")>=0){var f=d(o,n);if(f)return f;var m=n.indexOf(" AND ")>=0?n.split(" AND "):new Array,g=n.indexOf(" OR ")>=0?n.split(" OR "):new Array,y=n.indexOf(" and ")>=0?n.split(" and "):new Array,b=n.indexOf(" or ")>=0?n.split(" or "):new Array;m=m.concat(y),g=g.concat(b);var w=n.indexOf("|")>=0?n.split("|"):new Array;if(w.length>0)for(var p=0;p<w.length;p++)w[p]=e.trim(w[p]);g=g.concat(w);if(m.length>0)for(var p=0;p<m.length;p++)!m[p].indexOf(" OR ")>=0&&v.push(m[p]);if(g.length>0)for(var p=0;p<g.length;p++)!g[p].indexOf(" AND ")>=0&&v.push(g[p]);var E=undefined;for(var S=0;S<v.length;S++){var t=v[S];if(t&&t.indexOf&&t.indexOf("..")>=0){var x=t.toString().split("..");x.length==2&&(f=o>=x[0]&&o<=x[1])}else var f=d(o,t);var T=S<m.length?"and":"or";E==undefined?E=f:T=="or"?E=E||f:E=E&&f}return E}if(n&&n.indexOf&&n.indexOf("..")>=0){v=n.toString().split("..");if(v.length==2)return o>=v[0]&&o<=v[1]}return d(o,n)}},d=function(e,t,n){this.filtervalue=e,this.comparisonoperator=t,this.evaluate=function(e,t){return n(this.filtervalue,e,this.comparisonoperator)}}}}(jQuery),function(e){e.jqx.jqxWidget("jqxScrollBar","",{}),e.extend(e.jqx._jqxScrollBar.prototype,{defineInstance:function(){this.height=null,this.width=null,this.vertical=!1,this.min=0,this.max=1e3,this.value=this.min,this.step=10,this.largestep=50,this.thumbMinSize=10,this.thumbSize=0,this.thumbStep="auto",this.roundedCorners="all",this.showButtons=!0,this.disabled=!1,this.touchMode="auto",this.touchModeStyle="auto",this.thumbTouchSize=0,this._triggervaluechanged=!0,this.rtl=!1,this.areaDownCapture=!1,this.areaUpCapture=!1,this._initialLayout=!1},createInstance:function(e){this.render()},render:function(){this._mouseup=new Date;var t=this,n="<div id='jqxScrollOuterWrap' style='width:100%; height: 100%; align:left; border: 0px; valign:top; position: relative;'><div id='jqxScrollWrap' style='width:100%; height: 100%; left: 0px; top: 0px; align:left; valign:top; position: absolute;'><div id='jqxScrollBtnUp' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='jqxScrollAreaUp' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='jqxScrollThumb' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='jqxScrollAreaDown' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='jqxScrollBtnDown' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div></div></div>";e.jqx.utilities&&e.jqx.utilities.scrollBarButtonsVisibility=="hidden"&&(this.showButtons=!1),t.WinJS?MSApp.execUnsafeLocalFunction(function(){t.host.html(n)}):this.element.innerHTML=n,this.width!=undefined&&parseInt(this.width)>0&&this.host.width(parseInt(this.width)),this.height!=undefined&&parseInt(this.height)>0&&this.host.height(parseInt(this.height)),this.isPercentage=!1,this.width!=null&&this.width.toString().indexOf("%")!=-1&&(this.host.width(this.width),this.isPercentage=!0),this.height!=null&&this.height.toString().indexOf("%")!=-1&&(this.host.height(this.height),this.isPercentage=!0);if(this.isPercentage){var r=this;e.jqx.utilities.resize(this.host,function(){r._arrange()},!1)}this.thumbCapture=!1,this.scrollOuterWrap=e(this.element.firstChild),this.scrollWrap=e(this.scrollOuterWrap[0].firstChild),this.btnUp=e(this.scrollWrap[0].firstChild),this.areaUp=e(this.btnUp[0].nextSibling),this.btnThumb=e(this.areaUp[0].nextSibling),this.arrowUp=e("<div></div>"),this.arrowUp.appendTo(this.btnUp),this.areaDown=e(this.btnThumb[0].nextSibling),this.btnDown=e(this.areaDown[0].nextSibling),this.arrowDown=e("<div></div>"),this.arrowDown.appendTo(this.btnDown);var i=this.element.id;this.btnUp[0].id="jqxScrollBtnUp"+i,this.btnDown[0].id="jqxScrollBtnDown"+i,this.btnThumb[0].id="jqxScrollThumb"+i,this.areaUp[0].id="jqxScrollAreaUp"+i,this.areaDown[0].id="jqxScrollAreaDown"+i,this.scrollWrap[0].id="jqxScrollWrap"+i,this.scrollOuterWrap[0].id="jqxScrollOuterWrap"+i;if(!this.host.jqxRepeatButton)throw new Error("jqxScrollBar: Missing reference to jqxbuttons.js.");this.btnUp.jqxRepeatButton({_ariaDisabled:!0,overrideTheme:!0,disabled:this.disabled}),this.btnDown.jqxRepeatButton({_ariaDisabled:!0,overrideTheme:!0,disabled:this.disabled}),this.btnDownInstance=e.data(this.btnDown[0],"jqxRepeatButton").instance,this.btnUpInstance=e.data(this.btnUp[0],"jqxRepeatButton").instance,this.areaUp.jqxRepeatButton({_scrollAreaButton:!0,_ariaDisabled:!0,overrideTheme:!0}),this.areaDown.jqxRepeatButton({_scrollAreaButton:!0,_ariaDisabled:!0,overrideTheme:!0}),this.btnThumb.jqxButton({_ariaDisabled:!0,overrideTheme:!0,disabled:this.disabled}),this.propertyChangeMap.value=function(e,t,n,r){isNaN(r)||n!=r&&e.setPosition(parseFloat(r),!0)},this.propertyChangeMap.width=function(e,t,n,r){e.width!=undefined&&parseInt(e.width)>0&&(e.host.width(parseInt(e.width)),e._arrange())},this.propertyChangeMap.height=function(e,t,n,r){e.height!=undefined&&parseInt(e.height)>0&&(e.host.height(parseInt(e.height)),e._arrange())},this.propertyChangeMap.theme=function(e,t,n,r){e.setTheme()},this.propertyChangeMap.max=function(e,t,n,r){isNaN(r)||n!=r&&(e.max=parseInt(r),e.min>e.max&&(e.max=e.min+1),e._arrange(),e.setPosition(e.value))},this.propertyChangeMap.min=function(e,t,n,r){isNaN(r)||n!=r&&(e.min=parseInt(r),e.min>e.max&&(e.max=e.min+1),e._arrange(),e.setPosition(e.value))},this.propertyChangeMap.disabled=function(e,t,n,r){n!=r&&(r?e.host.addClass(e.toThemeProperty("jqx-fill-state-disabled")):e.host.removeClass(e.toThemeProperty("jqx-fill-state-disabled")),e.btnUp.jqxRepeatButton("disabled",e.disabled),e.btnDown.jqxRepeatButton("disabled",e.disabled),e.btnThumb.jqxButton("disabled",e.disabled))},this.propertyChangeMap.touchMode=function(e,t,n,r){n!=r&&(e._updateTouchBehavior(),r===!0?(e.showButtons=!1,e.refresh()):r===!1&&(e.showButtons=!0,e.refresh()))},this.buttonUpCapture=!1,this.buttonDownCapture=!1,this._updateTouchBehavior(),this.setPosition(this.value),this._addHandlers(),this.setTheme()},resize:function(e,t){this.width=e,this.height=t,this._arrange()},_updateTouchBehavior:function(){this.isTouchDevice=e.jqx.mobile.isTouchDevice();if(this.touchMode==1){if(e.jqx.browser.msie&&e.jqx.browser.version<9){this.setTheme();return}this.isTouchDevice=!0,e.jqx.mobile.setMobileSimulator(this.btnThumb[0]),this._removeHandlers(),this._addHandlers(),this.setTheme()}else this.touchMode==0&&(this.isTouchDevice=!1)},_addHandlers:function(){var t=this,n=!1;try{if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)n=!0,this._touchSupport=!0}catch(r){}if(t.isTouchDevice||n)this.addHandler(this.btnThumb,e.jqx.mobile.getTouchEventName("touchend"),function(e){var n=t.vertical?t.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):t.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"),r=t.toThemeProperty("jqx-fill-state-pressed");return t.btnThumb.removeClass(n),t.btnThumb.removeClass(r),t.disabled||t.handlemouseup(t,e),!1}),this.addHandler(this.btnThumb,e.jqx.mobile.getTouchEventName("touchstart"),function(e){if(!t.disabled){if(t.touchMode==1)e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY;else{var n=e;n.originalEvent.touches&&n.originalEvent.touches.length?(e.clientX=n.originalEvent.touches[0].clientX,e.clientY=n.originalEvent.touches[0].clientY):(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)}t.handlemousedown(e),e.preventDefault&&e.preventDefault()}}),e.jqx.mobile.touchScroll(this.element,t.max,function(e,n,r,i,s){if(t.host.css("visibility")=="visible"){if(t.touchMode==1)s.clientX=s.originalEvent.clientX,s.clientY=s.originalEvent.clientY;else{var o=s;o.originalEvent.touches&&o.originalEvent.touches.length?(s.clientX=o.originalEvent.touches[0].clientX,s.clientY=o.originalEvent.touches[0].clientY):(s.clientX=s.originalEvent.clientX,s.clientY=s.originalEvent.clientY)}var u=t.vertical?t.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):t.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal");t.btnThumb.addClass(u),t.btnThumb.addClass(t.toThemeProperty("jqx-fill-state-pressed")),t.thumbCapture=!0,t.handlemousemove(s)}},t.element.id);this.addHandler(this.btnUp,"click",function(e){var n=t.step;t.rtl&&!t.vertical&&(n=-t.step),t.buttonUpCapture&&!t.isTouchDevice?t.disabled||t.setPosition(t.value-n):!t.disabled&&t.isTouchDevice&&t.setPosition(t.value-n)}),this.addHandler(this.btnDown,"click",function(e){var n=t.step;t.rtl&&!t.vertical&&(n=-t.step),t.buttonDownCapture&&!t.isTouchDevice?t.disabled||t.setPosition(t.value+n):!t.disabled&&t.isTouchDevice&&t.setPosition(t.value+n)});if(!this.isTouchDevice){try{if(document.referrer!=""||window.frameElement)if(window.top!=null&&window.top!=window.self){var i=null;window.parent&&document.referrer&&(i=document.referrer);if(i&&i.indexOf(document.location.host)!=-1){var s=function(e){t.disabled||t.handlemouseup(t,e)};window.top.document.addEventListener?window.top.document.addEventListener("mouseup",s,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",s)}}}catch(o){}this.addHandler(this.btnDown,"mouseup",function(e){if(!t.btnDownInstance.base.disabled&&t.buttonDownCapture){t.buttonDownCapture=!1,t.btnDown.removeClass(t.toThemeProperty("jqx-scrollbar-button-state-pressed")),t.btnDown.removeClass(t.toThemeProperty("jqx-fill-state-pressed")),t._removeArrowClasses("pressed","down"),t.handlemouseup(t,e);var n=t.step;return t.rtl&&!t.vertical&&(n=-t.step),t.setPosition(t.value+n),!1}}),this.addHandler(this.btnUp,"mouseup",function(e){if(!t.btnUpInstance.base.disabled&&t.buttonUpCapture){t.buttonUpCapture=!1,t.btnUp.removeClass(t.toThemeProperty("jqx-scrollbar-button-state-pressed")),t.btnUp.removeClass(t.toThemeProperty("jqx-fill-state-pressed")),t._removeArrowClasses("pressed","up"),t.handlemouseup(t,e);var n=t.step;return t.rtl&&!t.vertical&&(n=-t.step),t.setPosition(t.value-n),!1}}),this.addHandler(this.btnDown,"mousedown",function(e){if(!t.btnDownInstance.base.disabled)return t.buttonDownCapture=!0,t.btnDown.addClass(t.toThemeProperty("jqx-fill-state-pressed")),t.btnDown.addClass(t.toThemeProperty("jqx-scrollbar-button-state-pressed")),t._addArrowClasses("pressed","down"),!1}),this.addHandler(this.btnUp,"mousedown",function(e){if(!t.btnUpInstance.base.disabled)return t.buttonUpCapture=!0,t.btnUp.addClass(t.toThemeProperty("jqx-fill-state-pressed")),t.btnUp.addClass(t.toThemeProperty("jqx-scrollbar-button-state-pressed")),t._addArrowClasses("pressed","up"),!1})}var u="click";this.isTouchDevice&&(u=e.jqx.mobile.getTouchEventName("touchend")),this.addHandler(this.areaUp,u,function(e){if(!t.disabled){var n=t.largestep;return t.rtl&&!t.vertical&&(n=-t.largestep),t.setPosition(t.value-n),!1}}),this.addHandler(this.areaDown,u,function(e){if(!t.disabled){var n=t.largestep;return t.rtl&&!t.vertical&&(n=-t.largestep),t.setPosition(t.value+n),!1}}),this.addHandler(this.areaUp,"mousedown",function(e){if(!t.disabled)return t.areaUpCapture=!0,!1}),this.addHandler(this.areaDown,"mousedown",function(e){if(!t.disabled)return t.areaDownCapture=!0,!1}),this.addHandler(this.btnThumb,"mousedown",function(e){return t.disabled||t.handlemousedown(e),!1}),this.addHandler(this.btnThumb,"dragstart",function(e){return!1}),this.addHandler(e(document),"mouseup."+this.element.id,function(e){t.disabled||t.handlemouseup(t,e)});if(!this.isTouchDevice){this.mousemoveFunc=function(e){t.disabled||t.handlemousemove(e)},this.addHandler(e(document),"mousemove."+this.element.id,this.mousemoveFunc),this.addHandler(e(document),"mouseleave."+this.element.id,function(e){t.disabled||t.handlemouseleave(e)}),this.addHandler(e(document),"mouseenter."+this.element.id,function(e){t.disabled||t.handlemouseenter(e)});if(!t.disabled){this.addHandler(this.btnUp,"mouseenter",function(){!t.disabled&&!t.btnUpInstance.base.disabled&&t.touchMode!=1&&(t.btnUp.addClass(t.toThemeProperty("jqx-scrollbar-button-state-hover")),t.btnUp.addClass(t.toThemeProperty("jqx-fill-state-hover")),t._addArrowClasses("hover","up"))}),this.addHandler(this.btnUp,"mouseleave",function(){!t.disabled&&!t.btnUpInstance.base.disabled&&t.touchMode!=1&&(t.btnUp.removeClass(t.toThemeProperty("jqx-scrollbar-button-state-hover")),t.btnUp.removeClass(t.toThemeProperty("jqx-fill-state-hover")),t._removeArrowClasses("hover","up"))});var a=t.toThemeProperty("jqx-scrollbar-thumb-state-hover");t.vertical||(a=t.toThemeProperty("jqx-scrollbar-thumb-state-hover-horizontal")),this.addHandler(this.btnThumb,"mouseenter",function(){!t.disabled&&t.touchMode!=1&&(t.btnThumb.addClass(a),t.btnThumb.addClass(t.toThemeProperty("jqx-fill-state-hover")))}),this.addHandler(this.btnThumb,"mouseleave",function(){!t.disabled&&t.touchMode!=1&&(t.btnThumb.removeClass(a),t.btnThumb.removeClass(t.toThemeProperty("jqx-fill-state-hover")))}),this.addHandler(this.btnDown,"mouseenter",function(){!t.disabled&&!t.btnDownInstance.base.disabled&&t.touchMode!=1&&(t.btnDown.addClass(t.toThemeProperty("jqx-scrollbar-button-state-hover")),t.btnDown.addClass(t.toThemeProperty("jqx-fill-state-hover")),t._addArrowClasses("hover","down"))}),this.addHandler(this.btnDown,"mouseleave",function(){!t.disabled&&!t.btnDownInstance.base.disabled&&t.touchMode!=1&&(t.btnDown.removeClass(t.toThemeProperty("jqx-scrollbar-button-state-hover")),t.btnDown.removeClass(t.toThemeProperty("jqx-fill-state-hover")),t._removeArrowClasses("hover","down"))})}}},destroy:function(){var t=this.btnUp,n=this.btnDown,r=this.btnThumb,i=this.scrollWrap,s=this.areaUp,o=this.areaDown;this.arrowUp.remove(),delete this.arrowUp,this.arrowDown.remove(),delete this.arrowDown,o.removeClass(),s.removeClass(),n.removeClass(),t.removeClass(),r.removeClass(),t.jqxRepeatButton("destroy"),n.jqxRepeatButton("destroy"),s.jqxRepeatButton("destroy"),o.jqxRepeatButton("destroy"),r.jqxButton("destroy");var u=e.data(this.element,"jqxScrollBar");this._removeHandlers(),this.btnUp=null,this.btnDown=null,this.scrollWrap=null,this.areaUp=null,this.areaDown=null,this.scrollOuterWrap=null,delete this.mousemoveFunc,delete this.btnDownInstance,delete this.btnUpInstance,delete this.scrollOuterWrap,delete this.scrollWrap,delete this.btnDown,delete this.areaDown,delete this.areaUp,delete this.btnDown,delete this.btnUp,delete this.btnThumb,delete this.propertyChangeMap.value,delete this.propertyChangeMap.min,delete this.propertyChangeMap.max,delete this.propertyChangeMap.touchMode,delete this.propertyChangeMap.disabled,delete this.propertyChangeMap.theme,delete this.propertyChangeMap,u&&delete u.instance,this.host.removeData(),this.host.remove(),delete this.host,delete this.set,delete this.get,delete this.call,delete this.element},_removeHandlers:function(){this.removeHandler(this.btnUp,"mouseenter"),this.removeHandler(this.btnDown,"mouseenter"),this.removeHandler(this.btnThumb,"mouseenter"),this.removeHandler(this.btnUp,"mouseleave"),this.removeHandler(this.btnDown,"mouseleave"),this.removeHandler(this.btnThumb,"mouseleave"),this.removeHandler(this.btnUp,"click"),this.removeHandler(this.btnDown,"click"),this.removeHandler(this.btnDown,"mouseup"),this.removeHandler(this.btnUp,"mouseup"),this.removeHandler(this.btnDown,"mousedown"),this.removeHandler(this.btnUp,"mousedown"),this.removeHandler(this.areaUp,"mousedown"),this.removeHandler(this.areaDown,"mousedown"),this.removeHandler(this.areaUp,"click"),this.removeHandler(this.areaDown,"click"),this.removeHandler(this.btnThumb,"mousedown"),this.removeHandler(this.btnThumb,"dragstart"),this.removeHandler(e(document),"mouseup."+this.element.id),this.mousemoveFunc?this.removeHandler(e(document),"mousemove."+this.element.id,this.mousemoveFunc):this.removeHandler(e(document),"mousemove."+this.element.id),this.removeHandler(e(document),"mouseleave."+this.element.id),this.removeHandler(e(document),"mouseenter."+this.element.id);var t=this},_addArrowClasses:function(e,t){e=="pressed"&&(e="selected"),e!=""&&(e="-"+e),this.vertical?((t=="up"||t==undefined)&&this.arrowUp.addClass(this.toThemeProperty("jqx-icon-arrow-up"+e)),(t=="down"||t==undefined)&&this.arrowDown.addClass(this.toThemeProperty("jqx-icon-arrow-down"+e))):((t=="up"||t==undefined)&&this.arrowUp.addClass(this.toThemeProperty("jqx-icon-arrow-left"+e)),(t=="down"||t==undefined)&&this.arrowDown.addClass(this.toThemeProperty("jqx-icon-arrow-right"+e)))},_removeArrowClasses:function(e,t){e=="pressed"&&(e="selected"),e!=""&&(e="-"+e),this.vertical?((t=="up"||t==undefined)&&this.arrowUp.removeClass(this.toThemeProperty("jqx-icon-arrow-up"+e)),(t=="down"||t==undefined)&&this.arrowDown.removeClass(this.toThemeProperty("jqx-icon-arrow-down"+e))):((t=="up"||t==undefined)&&this.arrowUp.removeClass(this.toThemeProperty("jqx-icon-arrow-left"+e)),(t=="down"||t==undefined)&&this.arrowDown.removeClass(this.toThemeProperty("jqx-icon-arrow-right"+e)))},setTheme:function(){var t=this.btnUp,n=this.btnDown,r=this.btnThumb,i=this.scrollWrap,s=this.areaUp,o=this.areaDown,u=this.arrowUp,a=this.arrowDown;this.scrollWrap[0].className=this.toThemeProperty("jqx-reset"),this.scrollOuterWrap[0].className=this.toThemeProperty("jqx-reset");var f=this.toThemeProperty("jqx-reset");this.areaDown[0].className=f,this.areaUp[0].className=f;var l=this.toThemeProperty("jqx-scrollbar")+" "+this.toThemeProperty("jqx-widget")+" "+this.toThemeProperty("jqx-widget-content");this.host.addClass(l),n[0].className=this.toThemeProperty("jqx-scrollbar-button-state-normal"),t[0].className=this.toThemeProperty("jqx-scrollbar-button-state-normal");var c="";this.vertical?(u[0].className=f+" "+this.toThemeProperty("jqx-icon-arrow-up"),a[0].className=f+" "+this.toThemeProperty("jqx-icon-arrow-down"),c=this.toThemeProperty("jqx-scrollbar-thumb-state-normal")):(u[0].className=f+" "+this.toThemeProperty("jqx-icon-arrow-left"),a[0].className=f+" "+this.toThemeProperty("jqx-icon-arrow-right"),c=this.toThemeProperty("jqx-scrollbar-thumb-state-normal-horizontal")),c+=" "+this.toThemeProperty("jqx-fill-state-normal"),r[0].className=c,this.disabled?(i.addClass(this.toThemeProperty("jqx-fill-state-disabled")),i.removeClass(this.toThemeProperty("jqx-scrollbar-state-normal"))):(i.addClass(this.toThemeProperty("jqx-scrollbar-state-normal")),i.removeClass(this.toThemeProperty("jqx-fill-state-disabled")));if(this.roundedCorners=="all"){this.host.addClass(this.toThemeProperty("jqx-rc-all"));if(this.vertical){var h=e.jqx.cssroundedcorners("top");h=this.toThemeProperty(h),t.addClass(h);var p=e.jqx.cssroundedcorners("bottom");p=this.toThemeProperty(p),n.addClass(p)}else{var d=e.jqx.cssroundedcorners("left");d=this.toThemeProperty(d),t.addClass(d);var v=e.jqx.cssroundedcorners("right");v=this.toThemeProperty(v),n.addClass(v)}}else{var m=e.jqx.cssroundedcorners(this.roundedCorners);m=this.toThemeProperty(m),elBtnUp.addClass(m),elBtnDown.addClass(m)}var m=e.jqx.cssroundedcorners(this.roundedCorners);m=this.toThemeProperty(m),r.hasClass(m)||r.addClass(m),this.isTouchDevice&&this.touchModeStyle!=0&&(this.showButtons=!1,r.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-normal-touch")))},isScrolling:function(){return this.thumbCapture==undefined||this.buttonDownCapture==undefined||this.buttonUpCapture==undefined||this.areaDownCapture==undefined||this.areaUpCapture==undefined?!1:this.thumbCapture||this.buttonDownCapture||this.buttonUpCapture||this.areaDownCapture||this.areaUpCapture},handlemousedown:function(e){if(this.thumbCapture==undefined||this.thumbCapture==0){this.thumbCapture=!0;var t=this.btnThumb;t!=null&&(t.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.vertical?t.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed")):t.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal")))}this.dragStartX=e.clientX,this.dragStartY=e.clientY,this.dragStartValue=this.value},toggleHover:function(e,t){},refresh:function(){this._arrange()},_setElementPosition:function(e,t,n){isNaN(t)||parseInt(e[0].style.left)!=parseInt(t)&&(e[0].style.left=t+"px"),isNaN(n)||parseInt(e[0].style.top)!=parseInt(n)&&(e[0].style.top=n+"px")},_setElementTopPosition:function(e,t){isNaN(t)||(e[0].style.top=t+"px")},_setElementLeftPosition:function(e,t){isNaN(t)||(e[0].style.left=t+"px")},handlemouseleave:function(e){var t=this.btnUp,n=this.btnDown;if(this.buttonDownCapture||this.buttonUpCapture)t.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),n.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),this._removeArrowClasses("pressed");if(this.thumbCapture!=1)return;var r=this.btnThumb,i=this.vertical?this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal");r.removeClass(i),r.removeClass(this.toThemeProperty("jqx-fill-state-pressed"))},handlemouseenter:function(e){var t=this.btnUp,n=this.btnDown;this.buttonUpCapture&&(t.addClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),t.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this._addArrowClasses("pressed","up")),this.buttonDownCapture&&(n.addClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),n.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this._addArrowClasses("pressed","down"));if(this.thumbCapture!=1)return;var r=this.btnThumb;this.vertical?r.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed")):r.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal")),r.addClass(this.toThemeProperty("jqx-fill-state-pressed"))},handlemousemove:function(e){var t=this.btnUp,n=this.btnDown,r=0;if(n==null||t==null)return;t!=null&&n!=null&&this.buttonDownCapture!=undefined&&this.buttonUpCapture!=undefined&&(this.buttonDownCapture&&e.which==r?(n.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),n.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this._removeArrowClasses("pressed","down"),this.buttonDownCapture=!1):this.buttonUpCapture&&e.which==r&&(t.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),t.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this._removeArrowClasses("pressed","up"),this.buttonUpCapture=!1));if(this.thumbCapture!=1)return!1;var i=this.btnThumb;if(e.which==r&&!this.isTouchDevice&&!this._touchSupport){this.thumbCapture=!1,this._arrange();var s=this.vertical?this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal");return i.removeClass(s),i.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),!0}e.preventDefault!=undefined&&e.preventDefault(),e.originalEvent!=null&&(e.originalEvent.mouseHandled=!0),e.stopPropagation!=undefined&&e.stopPropagation();var o=0;try{this.vertical?o=e.clientY-this.dragStartY:o=e.clientX-this.dragStartX;var u=this._btnAndThumbSize;this._btnAndThumbSize||(u=this.vertical?t.height()+n.height()+i.height():t.width()+n.width()+i.width());var a=(this.max-this.min)/(this.scrollBarSize-u);if(this.thumbStep!="auto"){o*=a;if(Math.abs(this.dragStartValue+o-this.value)>=parseInt(this.thumbStep)){var f=Math.round(parseInt(o)/this.thumbStep)*this.thumbStep;return this.rtl&&!this.vertical?this.setPosition(this.dragStartValue-f):this.setPosition(this.dragStartValue+f),!1}return!1}o*=a;var f=o;this.rtl&&!this.vertical&&(f=-o),this.setPosition(this.dragStartValue+f)}catch(l){alert(l)}return!1},handlemouseup:function(e,t){var n=!1;if(this.thumbCapture){this.thumbCapture=!1;var r=this.btnThumb,i=this.vertical?this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal");r.removeClass(i),r.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),n=!0,this._mouseup=new Date}this.areaDownCapture=this.areaUpCapture=!1;if(this.buttonUpCapture||this.buttonDownCapture){var s=this.btnUp,o=this.btnDown;this.buttonUpCapture=!1,this.buttonDownCapture=!1,s.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),o.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),s.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),o.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this._removeArrowClasses("pressed"),n=!0,this._mouseup=new Date}n&&(t.preventDefault!=undefined&&t.preventDefault(),t.originalEvent!=null&&(t.originalEvent.mouseHandled=!0),t.stopPropagation!=undefined&&t.stopPropagation())},setPosition:function(e,t){var n=this.element;if(e==undefined||e==NaN)e=this.min;e>=this.max&&(e=this.max),e<this.min&&(e=this.min);if(this.value!==e||t==1){if(e==this.max){var r=new jQuery.Event("complete");this.host.trigger(r)}var i=this.value;if(this._triggervaluechanged){var s=new jQuery.Event("valuechanged");s.previousValue=this.value,s.currentValue=e}this.value=e,this._positionelements(),this._triggervaluechanged&&this.host.trigger(s),this.valuechanged&&this.valuechanged({currentValue:this.value,previousvalue:i})}return e},_getThumbSize:function(e){var t=this.max-this.min,n=0;return t>1?n=e/(t+e)*e:t==1&&(n=e),this.thumbSize>0&&(n=this.thumbSize),n<this.thumbMinSize&&(n=this.thumbMinSize),Math.min(n,e)},_positionelements:function(){var e=this.element,t=this.areaUp,n=this.areaDown,r=this.btnUp,i=this.btnDown,s=this.btnThumb,o=this.scrollWrap,u=this._height?this._height:this.host.height(),a=this._width?this._width:this.host.width(),f=this.vertical?a:u;this.showButtons||(f=0);var l=this.vertical?u:a;this.scrollBarSize=l;var c=this._getThumbSize(l-2*f);c=Math.round(c),c<this.thumbMinSize&&(c=this.thumbMinSize);if(u==NaN||u<10)u=10;if(a==NaN||a<10)a=10;f+=2,this.btnSize=f;var h=this._btnAndThumbSize;if(!this._btnAndThumbSize){var h=this.vertical?2*this.btnSize+s.outerHeight():2*this.btnSize+s.outerWidth();h=Math.round(h)}var p=(l-h)/(this.max-this.min)*(this.value-this.min);this.rtl&&!this.vertical&&(p=(l-h)/(this.max-this.min)*(this.max-this.value-this.min)),p=Math.round(p),p<0&&(p=0);if(this.vertical){var d=l-p-h;d<0&&(d=0),n[0].style.height=d+"px",t[0].style.height=p+"px",this._setElementTopPosition(t,f),this._setElementTopPosition(s,f+p),this._setElementTopPosition(n,f+p+c)}else t[0].style.width=p+"px",l-p-h>=0?n[0].style.width=l-p-h+"px":n[0].style.width="0px",this._setElementLeftPosition(t,f),this._setElementLeftPosition(s,f+p),this._setElementLeftPosition(n,2+f+p+c)},_arrange:function(){if(this._initialLayout){this._initialLayout=!1;return}var e=this.element,t=this.areaUp,n=this.areaDown,r=this.btnUp,i=this.btnDown,s=this.btnThumb,o=this.scrollWrap,u=parseInt(this.element.style.height),a=parseInt(this.element.style.width);if(this.isPercentage)var u=this.host.height(),a=this.host.width();isNaN(u)&&(u=0),isNaN(a)&&(a=0),this._width=a,this._height=u;var f=this.vertical?a:u;this.showButtons||(f=0),r[0].style.width=f+"px",r[0].style.height=f+"px",i[0].style.width=f+"px",i[0].style.height=f+"px",this.vertical?o[0].style.width=a+2+"px":o[0].style.height=u+2+"px",this._setElementPosition(r,0,0);var l=f+2;this.vertical?this._setElementPosition(i,0,u-l):this._setElementPosition(i,a-l,0);var c=this.vertical?u:a;this.scrollBarSize=c;var h=this._getThumbSize(c-2*f);h=Math.round(h),h<this.thumbMinSize&&(h=this.thumbMinSize);var p=!1;this.isTouchDevice&&this.touchModeStyle!=0&&(p=!0),this.vertical?(s[0].style.width=a+"px",s[0].style.height=h+"px",p&&this.thumbTouchSize!==0&&(s.css({width:this.thumbTouchSize+"px"}),s.css("margin-left",(this.host.width()-this.thumbTouchSize)/2))):(s[0].style.width=h+"px",s[0].style.height=u+"px",p&&this.thumbTouchSize!==0&&(s.css({height:this.thumbTouchSize+"px"}),s.css("margin-top",(this.host.height()-this.thumbTouchSize)/2)));if(u==NaN||u<10)u=10;if(a==NaN||a<10)a=10;f+=2,this.btnSize=f;var d=this.vertical?2*this.btnSize+(2+parseInt(s[0].style.height)):2*this.btnSize+(2+parseInt(s[0].style.width));d=Math.round(d),this._btnAndThumbSize=d;var v=(c-d)/(this.max-this.min)*(this.value-this.min);this.rtl&&!this.vertical&&(v=(c-d)/(this.max-this.min)*(this.max-this.value-this.min)),v=Math.round(v);if(v===-Infinity||v==Infinity)v=0;isNaN(v)&&(v=0),v<0&&(v=0);if(this.vertical){var m=c-v-d;m<0&&(m=0),n[0].style.height=m+"px",n[0].style.width=a+"px",t[0].style.height=v+"px",t[0].style.width=a+"px";var g=parseInt(this.element.style.height);this.isPercentage&&(g=this.host.height()),s[0].style.visibility="inherit",g-3*parseInt(f)<0?s[0].style.visibility="hidden":g<d?s[0].style.visibility="hidden":this.element.style.visibility=="visible"&&(s[0].style.visibility="inherit"),this._setElementPosition(t,0,f),this._setElementPosition(s,0,f+v),this._setElementPosition(n,0,f+v+h)}else{v>0&&(t[0].style.width=v+"px"),u>0&&(t[0].style.height=u+"px");var y=c-v-d;y<0&&(y=0),n[0].style.width=y+"px",n[0].style.height=u+"px";var b=parseInt(this.element.style.width);this.isPercentage&&(b=this.host.width()),s[0].style.visibility="inherit",b-3*parseInt(f)<0?s[0].style.visibility="hidden":b<d?s[0].style.visibility="hidden":this.element.style.visibility=="visible"&&(s[0].style.visibility="inherit"),this._setElementPosition(t,f,0),this._setElementPosition(s,f+v,0),this._setElementPosition(n,2+f+v+h,0)}}})}(jQuery),function(e){e.jqx.cssroundedcorners=function(e){var t={all:"jqx-rc-all",top:"jqx-rc-t",bottom:"jqx-rc-b",left:"jqx-rc-l",right:"jqx-rc-r","top-right":"jqx-rc-tr","top-left":"jqx-rc-tl","bottom-right":"jqx-rc-br","bottom-left":"jqx-rc-bl"};for(prop in t){if(!t.hasOwnProperty(prop))continue;if(e==prop)return t[prop]}},e.jqx.jqxWidget("jqxButton","",{}),e.extend(e.jqx._jqxButton.prototype,{defineInstance:function(){this.cursor="arrow",this.roundedCorners="all",this.disabled=!1,this.height=null,this.width=null,this.overrideTheme=!1,this.enableHover=!0,this.enableDefault=!0,this.enablePressed=!0,this.rtl=!1,this._ariaDisabled=!1,this._scrollAreaButton=!1,this.aria={"aria-disabled":{name:"disabled",type:"boolean"}}},createInstance:function(t){var n=this;this._setSize(),this._ariaDisabled||this.host.attr("role","button"),this.overrideTheme||(this.host.addClass(this.toThemeProperty(e.jqx.cssroundedcorners(this.roundedCorners))),this.enableDefault&&this.host.addClass(this.toThemeProperty("jqx-button")),this.host.addClass(this.toThemeProperty("jqx-widget"))),this.isTouchDevice=e.jqx.mobile.isTouchDevice(),this._ariaDisabled||e.jqx.aria(this),this.cursor!="arrow"&&(this.disabled?this.host.css({cursor:"arrow"}):this.host.css({cursor:this.cursor}));var r="mouseenter mouseleave mousedown focus blur";if(this._scrollAreaButton)var r="mousedown";this.isTouchDevice&&(this.addHandler(this.host,e.jqx.mobile.getTouchEventName("touchstart"),function(e){n.isPressed=!0,n.refresh()}),this.addHandler(e(document),e.jqx.mobile.getTouchEventName("touchend")+"."+this.element.id,function(e){n.isPressed=!1,n.refresh()})),this.addHandler(this.host,r,function(e){switch(e.type){case"mouseenter":this.isTouchDevice||!n.disabled&&n.enableHover&&(n.isMouseOver=!0,n.refresh());break;case"mouseleave":this.isTouchDevice||!n.disabled&&n.enableHover&&(n.isMouseOver=!1,n.refresh());break;case"mousedown":n.disabled||(n.isPressed=!0,n.refresh());break;case"focus":n.disabled||(n.isFocused=!0,n.refresh());break;case"blur":n.disabled||(n.isFocused=!1,n.refresh())}}),this.mouseupfunc=function(e){n.disabled||(n.isPressed=!1,n.refresh())},this.addHandler(e(document),"mouseup.button"+this.element.id,this.mouseupfunc);try{if(document.referrer!=""||window.frameElement)if(window.top!=null&&window.top!=window.self){var i="";window.parent&&document.referrer&&(i=document.referrer);if(i.indexOf(document.location.host)!=-1){var s=function(e){n.isPressed=!1,n.refresh()};window.top.document&&this.addHandler(e(window.top.document),"mouseup",s)}}}catch(o){}this.propertyChangeMap.roundedCorners=function(t,n,r,i){t.host.removeClass(t.toThemeProperty(e.jqx.cssroundedcorners(r))),t.host.addClass(t.toThemeProperty(e.jqx.cssroundedcorners(i)))},this.propertyChangeMap.width=function(e,t,n,r){e._setSize(),e.refresh()},this.propertyChangeMap.height=function(e,t,n,r){e._setSize(),e.refresh()},this.propertyChangeMap.disabled=function(t,n,r,i){r!=i&&(t.host[0].disabled=i,t.host.attr("disabled",i),t.refresh(),i?t.host.css({cursor:"default"}):t.host.css({cursor:t.cursor}),e.jqx.aria(t,"aria-disabled",t.disabled))},this.propertyChangeMap.rtl=function(e,t,n,r){n!=r&&e.refresh()},this.propertyChangeMap.theme=function(t,n,r,i){t.host.removeClass(),t.host.addClass(t.toThemeProperty("jqx-button")),t.host.addClass(t.toThemeProperty("jqx-widget")),t.overrideTheme||t.host.addClass(t.toThemeProperty(e.jqx.cssroundedcorners(t.roundedCorners))),t._oldCSSCurrent=null,t.refresh()},this.disabled&&(this.element.disabled=!0,this.host.attr("disabled",!0))},resize:function(e,t){this.width=e,this.height=t,this._setSize()},val:function(){var t=this.host.find("input");if(t.length>0)return arguments.length==0||typeof value=="object"?t.val():(t.val(value),this.refresh(),t.val());if(arguments.length==0||typeof value=="object")return this.element.nodeName.toLowerCase()=="button"?e(this.element).text():this.element.value;this.element.value=arguments[0],this.element.nodeName.toLowerCase()=="button"&&e(this.element).text(arguments[0]),this.refresh()},_setSize:function(){this.width==null||this.width.toString().indexOf("px")==-1&&this.width.toString().indexOf("%")==-1?this.width!=undefined&&!isNaN(this.width)&&this.host.css("width",this.width):this.host.css("width",this.width),this.height==null||this.height.toString().indexOf("px")==-1&&this.height.toString().indexOf("%")==-1?this.height!=undefined&&!isNaN(this.height)&&this.host.css("height",parseInt(this.height)):this.host.css("height",this.height)},_removeHandlers:function(){this.removeHandler(this.host,"selectstart"),this.removeHandler(this.host,"click"),this.removeHandler(this.host,"focus"),this.removeHandler(this.host,"blur"),this.removeHandler(this.host,"mouseenter"),this.removeHandler(this.host,"mouseleave"),this.removeHandler(this.host,"mousedown"),this.removeHandler(e(document),"mouseup.button"+this.element.id,this.mouseupfunc),this.isTouchDevice&&(this.removeHandler(this.host,e.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(e(document),e.jqx.mobile.getTouchEventName("touchend")+"."+this.element.id)),this.mouseupfunc=null,delete this.mouseupfunc},focus:function(){this.host.focus()},destroy:function(){this._removeHandlers();var t=e.data(this.element,"jqxButton");t&&delete t.instance,this.host.removeClass(),this.host.removeData(),this.host.remove(),delete this.set,delete this.get,delete this.call,delete this.propertyChangeMap.roundedCorners,delete this.propertyChangeMap.width,delete this.propertyChangeMap.height,delete this.propertyChangeMap.disabled,delete this.propertyChangeMap.rtl,delete this.propertyChangeMap.theme,delete this.propertyChangeMap,delete this.element,delete this.host},render:function(){this.refresh()},refresh:function(){if(this.overrideTheme)return;var e=this.toThemeProperty("jqx-fill-state-focus"),t=this.toThemeProperty("jqx-fill-state-disabled"),n=this.toThemeProperty("jqx-fill-state-normal");this.enableDefault||(n="");var r=this.toThemeProperty("jqx-fill-state-hover"),i=this.toThemeProperty("jqx-fill-state-pressed"),s=this.toThemeProperty("jqx-fill-state-pressed");this.enablePressed||(i="");var o="";if(!this.host)return;this.host[0].disabled=this.disabled,this.disabled?o=t:this.isMouseOver&&!this.isTouchDevice?this.isPressed?o=s:o=r:this.isPressed?o=i:o=n,this.isFocused&&(o+=" "+e),o!=this._oldCSSCurrent&&(this._oldCSSCurrent&&this.host.removeClass(this._oldCSSCurrent),this.host.addClass(o),this._oldCSSCurrent=o),this.rtl&&(this.host.addClass(this.toThemeProperty("jqx-rtl")),this.host.css("direction","rtl"))}}),e.jqx.jqxWidget("jqxLinkButton","",{}),e.extend(e.jqx._jqxLinkButton.prototype,{defineInstance:function(){this.disabled=!1,this.height=null,this.width=null,this.rtl=!1,this.href=null},createInstance:function(e){var t=this;this.host.onselectstart=function(){return!1},this.host.attr("role","button");var n=this.height||this.host.height(),r=this.width||this.host.width();this.href=this.host.attr("href"),this.target=this.host.attr("target"),this.content=this.host.text(),this.element.innerHTML="",this.host.append("<input type='button' class='jqx-wrapper'/>");var i=this.host.find("input");i.addClass(this.toThemeProperty("jqx-reset")),i.width(r),i.height(n),i.val(this.content),this.host.find("tr").addClass(this.toThemeProperty("jqx-reset")),this.host.find("td").addClass(this.toThemeProperty("jqx-reset")),this.host.find("tbody").addClass(this.toThemeProperty("jqx-reset")),this.host.css("color","inherit"),this.host.addClass(this.toThemeProperty("jqx-link")),i.css({width:r}),i.css({height:n});var s=e==undefined?{}:e[0]||{};i.jqxButton(s),this.disabled&&(this.host[0].disabled=!0),this.propertyChangeMap.disabled=function(e,t,n,r){e.host[0].disabled=r,e.host.find("input").jqxButton({disabled:r})},this.addHandler(i,"click",function(e){return this.disabled||t.onclick(e),!1})},onclick:function(e){this.target!=null?window.open(this.href,this.target):window.location=this.href}}),e.jqx.jqxWidget("jqxRepeatButton","jqxButton",{}),e.extend(e.jqx._jqxRepeatButton.prototype,{defineInstance:function(){this.delay=50},createInstance:function(t){var n=this,r=e.jqx.mobile.isTouchDevice(),i=r?"touchend."+this.base.element.id:"mouseup."+this.base.element.id,s=r?"touchstart."+this.base.element.id:"mousedown."+this.base.element.id;this.addHandler(e(document),i,function(e){n.timeout!=null&&(clearTimeout(n.timeout),n.timeout=null,n.refresh()),n.timer!=undefined&&(clearInterval(n.timer),n.timer=null,n.refresh())}),this.addHandler(this.base.host,s,function(e){n.timer!=null&&clearInterval(n.timer),n.timeout=setTimeout(function(){clearInterval(n.timer),n.timer=setInterval(function(e){n.ontimer(e)},n.delay)},150)}),this.mousemovefunc=function(e){r||e.which==0&&n.timer!=null&&(clearInterval(n.timer),n.timer=null)},this.addHandler(this.base.host,"mousemove",this.mousemovefunc)},destroy:function(){var t=e.jqx.mobile.isTouchDevice(),n=t?"touchend."+this.base.element.id:"mouseup."+this.base.element.id,r=t?"touchstart."+this.base.element.id:"mousedown."+this.base.element.id;this.removeHandler(this.base.host,"mousemove",this.mousemovefunc),this.removeHandler(this.base.host,r),this.removeHandler(e(document),n),this.timer=null,delete this.mousemovefunc,delete this.timer;var i=e.data(this.base.element,"jqxRepeatButton");i&&delete i.instance,e(this.base.element).removeData(),this.base.destroy(),delete this.base},stop:function(){clearInterval(this.timer),this.timer=null},ontimer:function(e){var e=new jQuery.Event("click");this.base!=null&&this.base.host!=null&&this.base.host.trigger(e)}}),e.jqx.jqxWidget("jqxToggleButton","jqxButton",{}),e.extend(e.jqx._jqxToggleButton.prototype,{defineInstance:function(){this.toggled=!1,this.aria={"aria-checked":{name:"toggled",type:"boolean"},"aria-disabled":{name:"disabled",type:"boolean"}}},createInstance:function(t){var n=this;this.base.overrideTheme=!0,this.isTouchDevice=e.jqx.mobile.isTouchDevice(),e.jqx.aria(this),this.propertyChangeMap.toggled=function(e,t,n,r){e.refresh()},this.propertyChangeMap.disabled=function(e,t,r,i){n.base.disabled=i,e.refresh()},this.addHandler(this.base.host,"click",function(e){n.base.disabled||n.toggle()}),this.isTouchDevice||(this.addHandler(this.base.host,"mouseenter",function(e){n.base.disabled||n.refresh()}),this.addHandler(this.base.host,"mouseleave",function(e){n.base.disabled||n.refresh()})),this.addHandler(this.base.host,"mousedown",function(e){n.base.disabled||n.refresh()}),this.addHandler(e(document),"mouseup",function(e){n.base.disabled||n.refresh()})},_removeHandlers:function(){this.removeHandler(this.base.host,"click"),this.removeHandler(this.base.host,"mouseenter"),this.removeHandler(this.base.host,"mouseleave"),this.removeHandler(this.base.host,"mousedown"),this.removeHandler(e(document),"mouseup")},toggle:function(){this.toggled=!this.toggled,this.refresh(),e.jqx.aria(this,"aria-checked",this.toggled)},unCheck:function(){this.toggled=!1,this.refresh()},check:function(){this.toggled=!0,this.refresh()},refresh:function(){var e=this.base.toThemeProperty("jqx-fill-state-disabled"),t=this.base.toThemeProperty("jqx-fill-state-normal"),n=this.base.toThemeProperty("jqx-fill-state-hover"),r=this.base.toThemeProperty("jqx-fill-state-pressed"),i=this.base.toThemeProperty("jqx-fill-state-pressed"),s="";this.base.host[0].disabled=this.base.disabled,this.base.disabled?s=e:this.base.isMouseOver&&!this.isTouchDevice?this.base.isPressed||this.toggled?s=i:s=n:this.base.isPressed||this.toggled?s=r:s=t,this.base.host.hasClass(e)&&e!=s&&this.base.host.removeClass(e),this.base.host.hasClass(t)&&t!=s&&this.base.host.removeClass(t),this.base.host.hasClass(n)&&n!=s&&this.base.host.removeClass(n),this.base.host.hasClass(r)&&r!=s&&this.base.host.removeClass(r),this.base.host.hasClass(i)&&i!=s&&this.base.host.removeClass(i),this.base.host.hasClass(s)||this.base.host.addClass(s)}})}(jQuery),function(e){e.jqx.jqxWidget("jqxMenu","",{}),e.extend(e.jqx._jqxMenu.prototype,{defineInstance:function(){this.items=new Array,this.mode="horizontal",this.width=null,this.height=null,this.minimizeWidth="auto",this.easing="easeInOutSine",this.animationShowDuration=200,this.animationHideDuration=200,this.autoCloseInterval=0,this.animationHideDelay=100,this.animationShowDelay=100,this.menuElements=new Array,this.autoSizeMainItems=!1,this.autoCloseOnClick=!0,this.autoCloseOnMouseLeave=!0,this.enableRoundedCorners=!0,this.disabled=!1,this.autoOpenPopup=!0,this.enableHover=!0,this.autoOpen=!0,this.autoGenerate=!0,this.clickToOpen=!1,this.showTopLevelArrows=!1,this.touchMode="auto",this.source=null,this.popupZIndex=17e3,this.rtl=!1,this.title="",this.events=["shown","closed","itemclick","initialized"]},createInstance:function(t){var n=this;this.host.attr("role","menubar"),e.jqx.utilities.resize(this.host,function(){n.refresh()},!1,this.mode!="popup"),this.host.css("outline","none");if(this.source&&this.source!=null){var r=this.loadItems(this.source);this.element.innerHTML=r}this._tmpHTML=this.element.innerHTML;if(this.element.innerHTML.indexOf("UL")){var i=this.host.find("ul:first");i.length>0&&this._createMenu(i[0])}this.host.data("autoclose",{}),this._render(),this.setSize(),e.jqx.browser.msie&&e.jqx.browser.version<8&&this.host.attr("hideFocus",!0)},focus:function(){try{this.host.focus()}catch(e){}},loadItems:function(t,n){if(t==null)return;if(t.length==0)return"";var r=this;this.items=new Array;var i="<ul>";return n&&(i='<ul style="width:'+n+';">'),e.map(t,function(e){if(e==undefined)return null;i+=r._parseItem(e)}),i+="</ul>",i},_parseItem:function(e){var t="";if(e==undefined)return null;var n=e.label;!e.label&&e.html&&(n=e.html),n||(n="Item"),typeof e=="string"&&(n=e);var r=!1;e.selected!=undefined&&e.selected&&(r=!0);var i=!1;return e.disabled!=undefined&&e.disabled&&(i=!0),t+="<li",i&&(t+=' item-disabled="true" '),e.label&&!e.html&&(t+=' item-label="'+n+'" '),e.value!=null&&(t+=' item-value="'+e.value+'" '),e.id!=undefined&&(t+=' id="'+e.id+'" '),t+=">"+n,e.items&&(e.subMenuWidth?t+=this.loadItems(e.items,e.subMenuWidth):t+=this.loadItems(e.items)),t+="</li>",t},setSize:function(){this.width!=null&&this.width.toString().indexOf("%")!=-1?this.host.width(this.width):this.width!=null&&this.width.toString().indexOf("px")!=-1?this.host.width(this.width):this.width!=undefined&&!isNaN(this.width)&&this.host.width(this.width),this.height!=null&&this.height.toString().indexOf("%")!=-1?this.host.height(this.height):this.height!=null&&this.height.toString().indexOf("px")!=-1?this.host.height(this.height):this.height!=undefined&&!isNaN(this.height)&&this.host.height(this.height),this.height===null&&this.host.height("auto");var t=this;if(this.minimizeWidth!=null){var n=e(window).width();if(!e.jqx.response){var r=!1;if(navigator.userAgent.match(/Windows|Linux|MacOS/)){var i=navigator.userAgent.indexOf("Windows Phone")>=0||navigator.userAgent.indexOf("WPDesktop")>=0||navigator.userAgent.indexOf("IEMobile")>=0||navigator.userAgent.indexOf("ZuneWP7")>=0;i||(r=!0)}var s=this.minimizeWidth;if(r&&this.minimizeWidth=="auto")return}if(this.minimizeWidth=="auto"&&e.jqx.response){var o=new e.jqx.response;if(o.device.type=="Phone"||o.device.type=="Tablet")this.minimized||this.minimize()}else n<s&&!this.minimized?this.minimize():this.minimized&&n>=s&&this.restore()}},minimize:function(){if(this.minimized)return;var t=this;this.host.addClass(this.toThemeProperty("jqx-menu-minimized")),this.minimized=!0,this._tmpMode=this.mode,this.mode="simple";var n=this.host.closest("div.jqx-menu-wrapper");n.remove(),e("#menuWrapper"+this.element.id).remove(),e.each(this.items,function(){var t=this,n=e(t.element),r=e(t.subMenuElement),i=r.closest("div.jqx-menu-popup");i.remove()});if(this.source){var r=this.loadItems(this.source);this.element.innerHTML=r}else{this.element.innerHTML=this._tmpHTML;if(this.element.innerHTML.indexOf("UL")){var i=this.host.find("ul:first");i.length>0&&this._createMenu(i[0])}}this._render();var s=this.host.find("ul:first");s.wrap('<div class="jqx-menu-wrapper" style="z-index:'+this.popupZIndex+'; padding: 0px; display: none; margin: 0px; height: auto; width: auto; position: absolute; top: 0; left: 0; display: block; visibility: visible;"></div>');var n=s.closest("div.jqx-menu-wrapper");n[0].id="menuWrapper"+this.element.id,n.detach(),n.appendTo(e(document.body)),n.addClass(this.toThemeProperty("jqx-widget")),n.addClass(this.toThemeProperty("jqx-menu")),n.addClass(this.toThemeProperty("jqx-menu-minimized")),n.addClass(this.toThemeProperty("jqx-widget-header")),s.children().hide(),n.hide(),n.find("ul").addClass(this.toThemeProperty("jqx-menu-ul-minimized")),this.minimizedItem=e("<div></div>"),this.minimizedItem.addClass(this.toThemeProperty("jqx-item")),this.minimizedItem.addClass(this.toThemeProperty("jqx-menu-item-top")),this.minimizedItem.addClass(this.toThemeProperty("jqx-menu-minimized-button")),this.minimizedItem.prependTo(this.host),this.titleElement=e("<div>"+this.title+"</div>"),this.titleElement.addClass(this.toThemeProperty("jqx-item")),this.titleElement.addClass(this.toThemeProperty("jqx-menu-title")),this.titleElement.prependTo(this.host),e("<div style='clear:both;'></div>").insertAfter(this.minimizedItem),t.minimizedHidden=!0;var o=function(e){t.minimizedHidden=!0,t.minimizedItem.show();var r=!1;t.minimizedItem.css("float")=="right"&&(r=!0),n.animate({left:r?t.host.coord().left+t.host.width()+n.width():-n.outerWidth(),opacity:0},t.animationHideDuration,function(){n.find("ul:first").children().hide(),n.hide()})},u=function(e){if(t.minimizedHidden){n.find("ul:first").children().show(),t.minimizedHidden=!1,n.show(),n.css("opacity",0),n.css("left",-n.outerWidth());var r=!1,i=n.width();t.minimizedItem.css("float")=="right"&&(n.css("left",t.host.coord().left+t.host.width()+i),r=!0),n.css("top",t.host.coord().top+t.host.height()),n.animate({left:r?t.host.coord().left+t.host.width()-i:t.host.coord().left,opacity:.95},t.animationShowDuration,function(){})}else o(e);t._raiseEvent("2",{item:t.minimizedItem[0],event:e}),t.setSize()};this.addHandler(e(window),"orientationchange.jqxmenu"+this.element.id,function(e){setTimeout(function(){if(!t.minimizedHidden){var e=n.width(),r=!1,e=n.width();t.minimizedItem.css("float")=="right"&&(r=!0),n.css("top",t.host.coord().top+t.host.height()),n.css({left:r?t.host.coord().left+t.host.width()-e:t.host.coord().left})}},25)}),this.addHandler(this.minimizedItem,"click",function(e){u(e)})},restore:function(){if(!this.minimized)return;this.host.find("ul").removeClass(this.toThemeProperty("jqx-menu-ul-minimized")),this.host.removeClass(this.toThemeProperty("jqx-menu-minimized")),this.minimized=!1,this.mode=this._tmpMode,this.minimizedItem&&this.minimizedItem.remove();var t=e("#menuWrapper"+this.element.id);t.remove();if(this.source){var n=this.loadItems(this.source);this.element.innerHTML=n}else{this.element.innerHTML=this._tmpHTML;if(this.element.innerHTML.indexOf("UL")){var r=this.host.find("ul:first");r.length>0&&this._createMenu(r[0])}}this.setSize(),this._render()},isTouchDevice:function(){if(this._isTouchDevice!=undefined)return this._isTouchDevice;var t=e.jqx.mobile.isTouchDevice();return this.touchMode==1?t=!0:this.touchMode==0&&(t=!1),t&&(this.host.addClass(this.toThemeProperty("jqx-touch")),e(".jqx-menu-item").addClass(this.toThemeProperty("jqx-touch"))),this._isTouchDevice=t,t},refresh:function(e){e||this.setSize()},resize:function(e,t){this.width=e,this.height=t,this.refresh()},_closeAll:function(t){var n=t!=null?t.data:this,r=n.items;e.each(r,function(){var e=this;e.hasItems==1&&e.isOpen&&n._closeItem(n,e)});if(n.mode=="popup"&&t!=null){var i=n._isRightClick(t);i||n.close()}},closeItem:function(t){if(t==null)return!1;var n=t,r=document.getElementById(n),i=this;return e.each(i.items,function(){var e=this;e.isOpen==1&&e.element==r&&(i._closeItem(i,e),e.parentId&&i.closeItem(e.parentId))}),!0},openItem:function(t){if(t==null)return!1;var n=t,r=document.getElementById(n),i=this;return e.each(i.items,function(){var e=this;e.isOpen==0&&e.element==r&&(i._openItem(i,e),e.parentId&&i.openItem(e.parentId))}),!0},_getClosedSubMenuOffset:function(t){var n=e(t.subMenuElement),r=-n.outerHeight(),i=-n.outerWidth(),s=t.level==0&&this.mode=="horizontal";s?i=0:r=0;switch(t.openVerticalDirection){case"up":case"center":r=n.outerHeight()}switch(t.openHorizontalDirection){case this._getDir("left"):s?i=0:i=n.outerWidth();break;case"center":s?i=0:i=n.outerWidth()}return{left:i,top:r}},_closeItem:function(t,n,r,i){if(t==null||n==null)return!1;var s=e(n.subMenuElement),o=n.level==0&&this.mode=="horizontal",u=this._getClosedSubMenuOffset(n),a=u.top,f=u.left,l=e(n.element),c=s.closest("div.jqx-menu-popup");if(c!=null){var h=t.animationHideDelay;i==1&&(h=0),s.data("timer").show!=null&&(clearTimeout(s.data("timer").show),s.data("timer").show=null);var p=function(){n.isOpen=!1,o?s.stop().animate({top:a},t.animationHideDuration,function(){e(n.element).removeClass(t.toThemeProperty("jqx-fill-state-pressed")),e(n.element).removeClass(t.toThemeProperty("jqx-menu-item-top-selected")),e(n.element).removeClass(t.toThemeProperty("jqx-rc-b-expanded")),c.removeClass(t.toThemeProperty("jqx-rc-t-expanded"));var r=e(n.arrow);r.length>0&&t.showTopLevelArrows&&(r.removeClass(),n.openVerticalDirection=="down"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-down")),r.addClass(t.toThemeProperty("jqx-icon-arrow-down"))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-up")),r.addClass(t.toThemeProperty("jqx-icon-arrow-up")))),e.jqx.aria(e(n.element),"aria-expanded",!1),c.css({display:"none"}),t.animationHideDuration==0&&s.css({top:a}),t._raiseEvent("1",n)}):(!e.jqx.browser.msie,s.stop().animate({left:f},t.animationHideDuration,function(){t.animationHideDuration==0&&s.css({left:f});if(n.level>0){e(n.element).removeClass(t.toThemeProperty("jqx-fill-state-pressed")),e(n.element).removeClass(t.toThemeProperty("jqx-menu-item-selected"));var r=e(n.arrow);r.length>0&&(r.removeClass(),n.openHorizontalDirection!="left"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("right"))),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("right")))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("left"))),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("left")))))}else{e(n.element).removeClass(t.toThemeProperty("jqx-fill-state-pressed")),e(n.element).removeClass(t.toThemeProperty("jqx-menu-item-top-selected"));var r=e(n.arrow);r.length>0&&(r.removeClass(),n.openHorizontalDirection!="left"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-top-"+t._getDir("right"))),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("right")))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-top-"+t._getDir("left"))),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("left")))))}e.jqx.aria(e(n.element),"aria-expanded",!1),c.css({display:"none"}),t._raiseEvent("1",n)}))};h>0?s.data("timer").hide=setTimeout(function(){p()},h):p();if(r!=undefined&&r){var d=s.children();e.each(d,function(){if(t.menuElements[this.id]&&t.menuElements[this.id].isOpen){var n=e(t.menuElements[this.id].subMenuElement);t._closeItem(t,t.menuElements[this.id],!0,!0)}})}}},getSubItems:function(t,n){if(t==null)return!1;var r=this,i=new Array;n!=null&&e.extend(i,n);var s=t,o=this.menuElements[s],u=e(o.subMenuElement),a=u.find(".jqx-menu-item");return e.each(a,function(){i[this.id]=r.menuElements[this.id];var t=r.getSubItems(this.id,i);e.extend(i,t)}),i},disable:function(t,n){if(t==null)return;var r=t,i=this;if(this.menuElements[r]){var s=this.menuElements[r];s.disabled=n;var o=e(s.element);s.element.disabled=n,e.each(o.children(),function(){this.disabled=n}),n?(o.addClass(i.toThemeProperty("jqx-menu-item-disabled")),o.addClass(i.toThemeProperty("jqx-fill-state-disabled"))):(o.removeClass(i.toThemeProperty("jqx-menu-item-disabled")),o.removeClass(i.toThemeProperty("jqx-fill-state-disabled")))}},_setItemProperty:function(e,t,n){if(e==null)return;var r=e,i=this;if(this.menuElements[r]){var s=this.menuElements[r];s[t]&&(s[t]=n)}},setItemOpenDirection:function(t,n,r){if(t==null)return;var i=t,s=this,o=e.jqx.browser.msie&&e.jqx.browser.version<8;if(this.menuElements[i]){var u=this.menuElements[i];if(n!=null){u.openHorizontalDirection=n;if(u.hasItems&&u.level>0){var a=e(u.element);if(a!=undefined){var f=e(u.arrow);u.arrow==null&&(f=e('<span id="arrow'+a[0].id+'"></span>'),o?f.appendTo(a):f.prependTo(a),u.arrow=f[0]),f.removeClass(),u.openHorizontalDirection=="left"?(f.addClass(s.toThemeProperty("jqx-menu-item-arrow-"+s._getDir("left"))),f.addClass(s.toThemeProperty("jqx-icon-arrow-"+s._getDir("left")))):(f.addClass(s.toThemeProperty("jqx-menu-item-arrow-"+s._getDir("right"))),f.addClass(s.toThemeProperty("jqx-icon-arrow-"+s._getDir("right")))),f.css("visibility","visible"),o?(f.css("display","inline-block"),f.css("float","none")):(f.css("display","block"),f.css("float","right"))}}}if(r!=null){u.openVerticalDirection=r;var f=e(u.arrow),a=e(u.element);if(!s.showTopLevelArrows)return;a!=undefined&&(u.arrow==null&&(f=e('<span id="arrow'+a[0].id+'"></span>'),o?f.appendTo(a):f.prependTo(a),u.arrow=f[0]),f.removeClass(),u.openVerticalDirection=="down"?(f.addClass(s.toThemeProperty("jqx-menu-item-arrow-down")),f.addClass(s.toThemeProperty("jqx-icon-arrow-down"))):(f.addClass(s.toThemeProperty("jqx-menu-item-arrow-up")),f.addClass(s.toThemeProperty("jqx-icon-arrow-up"))),f.css("visibility","visible"),o?(f.css("display","inline-block"),f.css("float","none")):(f.css("display","block"),f.css("float","right")))}}},_getSiblings:function(e){var t=new Array,n=0;for(i=0;i<this.items.length;i++){if(this.items[i]==e)continue;this.items[i].parentId==e.parentId&&this.items[i].hasItems&&(t[n++]=this.items[i])}return t},_openItem:function(t,n,r){if(t==null||n==null)return!1;if(n.isOpen)return!1;if(n.disabled)return!1;if(t.disabled)return!1;var i=t.popupZIndex;r!=undefined&&(i=r);var s=t.animationHideDuration;t.animationHideDuration=0,t._closeItem(t,n,!0,!0),t.animationHideDuration=s,this.host.focus();var o=[5,5],u=e(n.subMenuElement);u!=null&&u.stop(),u.data("timer").hide!=null&&clearTimeout(u.data("timer").hide);var a=u.closest("div.jqx-menu-popup"),f=e(n.element),l=n.level==0?this._getOffset(n.element):f.position();if(n.level>0&&this.hasTransform){var c=parseInt(f.coord().top)-parseInt(this._getOffset(n.element).top);l.top+=c}n.level==0&&this.mode=="popup"&&(l=f.coord());var h=n.level==0&&this.mode=="horizontal",p=h?l.left:this.menuElements[n.parentId]!=null&&this.menuElements[n.parentId].subMenuElement!=null?parseInt(e(e(this.menuElements[n.parentId].subMenuElement).closest("div.jqx-menu-popup")).outerWidth())-o[0]:parseInt(u.outerWidth());a.css({visibility:"visible",display:"block",left:p,top:h?l.top+f.outerHeight():l.top,zIndex:i}),u.css("display","block");if(this.mode!="horizontal"&&n.level==0){var d=this._getOffset(this.element);a.css("left",-1+d.left+this.host.outerWidth()),u.css("left",-u.outerWidth())}else{var v=this._getClosedSubMenuOffset(n);u.css("left",v.left),u.css("top",v.top)}a.css({height:parseInt(u.outerHeight())+parseInt(o[1])+"px"});var m=0,g=0;switch(n.openVerticalDirection){case"up":if(h){u.css("top",u.outerHeight()),m=o[1];var y=parseInt(u.parent().css("padding-bottom"));isNaN(y)&&(y=0),y>0&&a.addClass(this.toThemeProperty("jqx-menu-popup-clear")),u.css("top",u.outerHeight()-y),a.css({display:"block",top:l.top-a.outerHeight(),zIndex:i})}else m=o[1],u.css("top",u.outerHeight()),a.css({display:"block",top:l.top-a.outerHeight()+o[1]+f.outerHeight(),zIndex:i});break;case"center":h?(u.css("top",0),a.css({display:"block",top:l.top-a.outerHeight()/2+o[1],zIndex:i})):(u.css("top",0),a.css({display:"block",top:l.top+f.outerHeight()/2-a.outerHeight()/2+o[1],zIndex:i}))}switch(n.openHorizontalDirection){case this._getDir("left"):h?a.css({left:l.left-(a.outerWidth()-f.outerWidth()-o[0])}):(g=0,u.css("left",a.outerWidth()),a.css({left:l.left-a.outerWidth()+2*n.level}));break;case"center":h?a.css({left:l.left-(a.outerWidth()/2-f.outerWidth()/2-o[0]/2)}):(a.css({left:l.left-(a.outerWidth()/2-f.outerWidth()/2-o[0]/2)}),u.css("left",a.outerWidth()))}if(h){if(parseInt(u.css("top"))==m){n.isOpen=!0;return}}else if(parseInt(u.css("left"))==g){n.isOpen==1;return}e.each(t._getSiblings(n),function(){t._closeItem(t,this,!0,!0)});var b=e.data(t.element,"animationHideDelay");t.animationHideDelay=b,this.autoCloseInterval>0&&(this.host.data("autoclose")!=null&&this.host.data("autoclose").close!=null&&clearTimeout(this.host.data("autoclose").close),this.host.data("autoclose")!=null&&(this.host.data("autoclose").close=setTimeout(function(){t._closeAll()},this.autoCloseInterval))),u.data("timer").show=setTimeout(function(){if(a!=null)if(h){u.stop(),u.css("left",g),!e.jqx.browser.msie,f.addClass(t.toThemeProperty("jqx-fill-state-pressed")),f.addClass(t.toThemeProperty("jqx-menu-item-top-selected")),n.openVerticalDirection=="down"?(e(n.element).addClass(t.toThemeProperty("jqx-rc-b-expanded")),a.addClass(t.toThemeProperty("jqx-rc-t-expanded"))):(e(n.element).addClass(t.toThemeProperty("jqx-rc-t-expanded")),a.addClass(t.toThemeProperty("jqx-rc-b-expanded")));var r=e(n.arrow);r.length>0&&t.showTopLevelArrows&&(r.removeClass(),n.openVerticalDirection=="down"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-down-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-down"))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-up-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-up")))),t.animationShowDuration==0?(u.css({top:m}),n.isOpen=!0,t._raiseEvent("0",n),e.jqx.aria(e(n.element),"aria-expanded",!0)):u.animate({top:m},t.animationShowDuration,t.easing,function(){n.isOpen=!0,e.jqx.aria(e(n.element),"aria-expanded",!0),t._raiseEvent("0",n)})}else{u.stop(),u.css("top",m),!e.jqx.browser.msie;if(n.level>0){f.addClass(t.toThemeProperty("jqx-fill-state-pressed")),f.addClass(t.toThemeProperty("jqx-menu-item-selected"));var r=e(n.arrow);r.length>0&&(r.removeClass(),n.openHorizontalDirection!="left"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("right")+"-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("right")))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("left")+"-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("left")))))}else{f.addClass(t.toThemeProperty("jqx-fill-state-pressed")),f.addClass(t.toThemeProperty("jqx-menu-item-top-selected"));var r=e(n.arrow);r.length>0&&(r.removeClass(),n.openHorizontalDirection!="left"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("right")+"-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("right")))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("left")+"-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("left")))))}!e.jqx.browser.msie,t.animationShowDuration==0?(u.css({left:g}),t._raiseEvent("0",n),n.isOpen=!0,e.jqx.aria(e(n.element),"aria-expanded",!0)):u.animate({left:g},t.animationShowDuration,t.easing,function(){t._raiseEvent("0",n),n.isOpen=!0,e.jqx.aria(e(n.element),"aria-expanded",!0)})}},this.animationShowDelay)},_getDir:function(e){switch(e){case"left":return this.rtl?"right":"left";case"right":return this.rtl?"left":"right"}return"left"},_applyOrientation:function(t,n){var r=this,i=0;this.host.removeClass(r.toThemeProperty("jqx-menu-horizontal")),this.host.removeClass(r.toThemeProperty("jqx-menu-vertical")),this.host.removeClass(r.toThemeProperty("jqx-menu")),this.host.removeClass(r.toThemeProperty("jqx-widget")),this.host.addClass(r.toThemeProperty("jqx-widget")),this.host.addClass(r.toThemeProperty("jqx-menu"));if(t!=undefined&&n!=undefined&&n=="popup"){if(this.host.parent().length>0&&this.host.parent().parent().length>0&&this.host.parent().parent()[0]==document.body){var s=e.data(document.body,"jqxMenuOldHost"+this.element.id);if(s!=null){var o=this.host.closest("div.jqx-menu-wrapper");o.remove(),o.appendTo(s),this.host.css("display","block"),this.host.css("visibility","visible"),o.css("display","block"),o.css("visibility","visible")}}}else t==undefined&&n==undefined&&e.data(document.body,"jqxMenuOldHost"+this.element.id,this.host.parent()[0]);this.autoOpenPopup?this.mode=="popup"?(this.addHandler(e(document),"contextmenu."+this.element.id,function(e){return!1}),this.addHandler(e(document),"mousedown.menu"+this.element.id,function(e){r._openContextMenu(e)})):(this.removeHandler(e(document),"contextmenu."+this.element.id),this.removeHandler(e(document),"mousedown.menu"+this.element.id)):(this.removeHandler(e(document),"contextmenu."+this.element.id),this.removeHandler(e(document),"mousedown.menu"+this.element.id)),this.rtl&&this.host.addClass(this.toThemeProperty("jqx-rtl"));switch(this.mode){case"horizontal":this.host.addClass(r.toThemeProperty("jqx-widget-header")),this.host.addClass(r.toThemeProperty("jqx-menu-horizontal")),e.each(this.items,function(){var t=this;$element=e(t.element);var n=e(t.arrow);n.removeClass();if(t.hasItems&&t.level>0){var n=e('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"></span>');n.prependTo($element),n.css("float",r._getDir("right")),n.addClass(r.toThemeProperty("jqx-menu-item-arrow-"+r._getDir("right"))),n.addClass(r.toThemeProperty("jqx-icon-arrow-"+r._getDir("right"))),t.arrow=n[0]}if(t.level==0){e(t.element).css("float",r._getDir("left"));if(!t.ignoretheme&&t.hasItems&&r.showTopLevelArrows){var n=e('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"></span>'),s=e.jqx.browser.msie&&e.jqx.browser.version<8;t.arrow==null?s?n.appendTo($element):n.prependTo($element):n=e(t.arrow),t.openVerticalDirection=="down"?(n.addClass(r.toThemeProperty("jqx-menu-item-arrow-down")),n.addClass(r.toThemeProperty("jqx-icon-arrow-down"))):(n.addClass(r.toThemeProperty("jqx-menu-item-arrow-up")),n.addClass(r.toThemeProperty("jqx-icon-arrow-up"))),n.css("visibility","visible"),s?n.css("display","inline-block"):(n.css("display","block"),n.css("float","right")),t.arrow=n[0]}else if(!t.ignoretheme&&t.hasItems&&!r.showTopLevelArrows&&t.arrow!=null){var n=e(t.arrow);n.remove(),t.arrow=null}i=Math.max(i,$element.height())}});break;case"vertical":case"popup":case"simple":this.host.addClass(r.toThemeProperty("jqx-menu-vertical")),e.each(this.items,function(){var t=this;$element=e(t.element);if(t.hasItems&&!t.ignoretheme){t.arrow&&e(t.arrow).remove();if(r.mode=="simple")return!0;var n=e('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"></span>');n.prependTo($element),n.css("float","right"),t.level==0?(n.addClass(r.toThemeProperty("jqx-menu-item-arrow-top-"+r._getDir("right"))),n.addClass(r.toThemeProperty("jqx-icon-arrow-"+r._getDir("right")))):(n.addClass(r.toThemeProperty("jqx-menu-item-arrow-"+r._getDir("right"))),n.addClass(r.toThemeProperty("jqx-icon-arrow-"+r._getDir("right")))),t.arrow=n[0]}$element.css("float","none")});if(this.mode=="popup"){this.host.addClass(r.toThemeProperty("jqx-widget-content")),this.host.wrap('<div class="jqx-menu-wrapper" style="z-index:'+this.popupZIndex+'; border: none; background-color: transparent; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: visible;"></div>');var o=this.host.closest("div.jqx-menu-wrapper");this.host.addClass(r.toThemeProperty("jqx-popup")),o[0].id="menuWrapper"+this.element.id,o.appendTo(e(document.body))}else this.host.addClass(r.toThemeProperty("jqx-widget-header"));if(this.mode=="popup"){var u=this.host.height();this.host.css("position","absolute"),this.host.css("top","0"),this.host.css("left","0"),this.mode!="simple"&&(this.host.height(u),this.host.css("display","none"))}}var a=this.isTouchDevice();this.autoCloseOnClick&&(this.removeHandler(e(document),"mousedown.menu"+this.element.id,r._closeAfterClick),this.addHandler(e(document),"mousedown.menu"+this.element.id,r._closeAfterClick,r),a&&(this.removeHandler(e(document),e.jqx.mobile.getTouchEventName("touchstart")+".menu"+this.element.id,r._closeAfterClick,r),this.addHandler(e(document),e.jqx.mobile.getTouchEventName("touchstart")+".menu"+this.element.id,r._closeAfterClick,r)))},_getBodyOffset:function(){var t=0,n=0;return e("body").css("border-top-width")!="0px"&&(t=parseInt(e("body").css("border-top-width")),isNaN(t)&&(t=0)),e("body").css("border-left-width")!="0px"&&(n=parseInt(e("body").css("border-left-width")),isNaN(n)&&(n=0)),{left:n,top:t}},_getOffset:function(t){var n=e.jqx.mobile.isSafariMobileBrowser(),r=e(t).coord(!0),i=r.top,s=r.left;e("body").css("border-top-width")!="0px"&&(i=parseInt(i)+this._getBodyOffset().top),e("body").css("border-left-width")!="0px"&&(s=parseInt(s)+this._getBodyOffset().left);var o=e.jqx.mobile.isWindowsPhone();if(this.hasTransform||n!=null&&n||o){var u={left:e.jqx.mobile.getLeftPos(t),top:e.jqx.mobile.getTopPos(t)};return u}return{left:s,top:i}},_isRightClick:function(e){var t;if(!e)var e=window.event;return e.which?t=e.which==3:e.button&&(t=e.button==2),t},_openContextMenu:function(e){var t=this,n=t._isRightClick(e);n&&t.open(parseInt(e.clientX)+5,parseInt(e.clientY)+5)},close:function(){var t=this,n=e.data(this.element,"contextMenuOpened"+this.element.id);if(n){var r=this.host;e.each(t.items,function(){var e=this;e.hasItems&&t._closeItem(t,e)}),e.each(t.items,function(){var t=this;if(t.isOpen==1){$submenu=e(t.subMenuElement);var n=$submenu.closest("div.jqx-menu-popup");n.hide(this.animationHideDuration)}}),this.host.hide(this.animationHideDuration),e.data(t.element,"contextMenuOpened"+this.element.id,!1),t._raiseEvent("1",t)}},open:function(t,n){if(this.mode=="popup"){var r=0;this.host.css("display")=="block"&&(this.close(),r=this.animationHideDuration);var i=this;if(t==undefined||t==null)t=0;if(n==undefined||n==null)n=0;setTimeout(function(){i.host.show(i.animationShowDuration),i.host.css("visibility","visible"),e.data(i.element,"contextMenuOpened"+i.element.id,!0),i._raiseEvent("0",i),i.host.css("z-index",9999),t!=undefined&&n!=undefined&&i.host.css({left:t,top:n})},r)}},_renderHover:function(e,t,n){var r=this;t.ignoretheme||(this.addHandler(e,"mouseenter",function(){!t.disabled&&!t.separator&&r.enableHover&&!r.disabled&&(t.level>0?(e.addClass(r.toThemeProperty("jqx-fill-state-hover")),e.addClass(r.toThemeProperty("jqx-menu-item-hover"))):(e.addClass(r.toThemeProperty("jqx-fill-state-hover")),e.addClass(r.toThemeProperty("jqx-menu-item-top-hover"))))}),this.addHandler(e,"mouseleave",function(){!t.disabled&&!t.separator&&r.enableHover&&!r.disabled&&(t.level>0?(e.removeClass(r.toThemeProperty("jqx-fill-state-hover")),e.removeClass(r.toThemeProperty("jqx-menu-item-hover"))):(e.removeClass(r.toThemeProperty("jqx-fill-state-hover")),e.removeClass(r.toThemeProperty("jqx-menu-item-top-hover"))))}))},_closeAfterClick:function(t){var n=t!=null?t.data:this,r=!1;n.autoCloseOnClick&&(e.each(e(t.target).parents(),function(){if(this.className.indexOf&&this.className.indexOf("jqx-menu")!=-1)return r=!0,!1}),r||(t.data=n,n._closeAll(t)))},_autoSizeHorizontalMenuItems:function(){var t=this;if(t.autoSizeMainItems&&this.mode=="horizontal"){var n=this.maxHeight;parseInt(n)>parseInt(this.host.height())&&(n=parseInt(this.host.height())),n=parseInt(this.host.height()),e.each(this.items,function(){var r=this;$element=e(r.element);if(r.level==0&&n>0){var i=$element.children().length>0?parseInt($element.children().height()):$element.height(),s=t.host.find("ul:first"),o=parseInt(s.css("padding-top")),u=parseInt(s.css("margin-top")),a=n-2*(u+o),f=parseInt(a)/2-i/2,l=parseInt(f),c=parseInt(f);$element.css("padding-top",l),$element.css("padding-bottom",c);if(parseInt($element.outerHeight())>a){var h=1;$element.css("padding-top",l-h),l-=h}}})}e.each(this.items,function(){var t=this;$element=e(t.element);if(t.hasItems&&t.level>0&&t.arrow){var n=e(t.arrow),r=e(t.element).height();r>15&&n.css("margin-top",(r-15)/2)}})},_render:function(t,n){this.disabled&&(this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this.host.addClass(this.toThemeProperty("jqx-menu-disabled")));var r=this.popupZIndex,i=[5,5],s=this;e.data(s.element,"animationHideDelay",s.animationHideDelay);var o=this.isTouchDevice(),u=o&&(e.jqx.mobile.isWindowsPhone()||navigator.userAgent.indexOf("Touch")>=0),a=!1;if(navigator.platform.toLowerCase().indexOf("win")!=-1)if(navigator.userAgent.indexOf("Windows Phone")>=0||navigator.userAgent.indexOf("WPDesktop")>=0||navigator.userAgent.indexOf("IEMobile")>=0||navigator.userAgent.indexOf("ZuneWP7")>=0)this.touchDevice=!0;else if(navigator.userAgent.indexOf("Touch")>=0){var f="MSPointerDown"in window;if(f||e.jqx.mobile.isWindowsPhone()||navigator.userAgent.indexOf("ARM")>=0)a=!0,u=!0,s.clickToOpen=!0,s.autoCloseOnClick=!1,s.enableHover=!1}e.data(document.body,"menuel",this),this.hasTransform=e.jqx.utilities.hasTransform(this.host),this._applyOrientation(t,n),s.enableRoundedCorners&&this.host.addClass(s.toThemeProperty("jqx-rc-all")),e.each(this.items,function(){var t=this,n=e(t.element);n.attr("role","menuitem"),s.enableRoundedCorners&&n.addClass(s.toThemeProperty("jqx-rc-all")),s.removeHandler(n,"click"),s.addHandler(n,"click",function(n){if(t.disabled)return;if(s.disabled)return;s._raiseEvent("2",{item:t.element,event:n}),s.autoOpen?s.autoCloseOnClick&&!o&&!s.clickToOpen&&t.closeOnClick&&(n.data=s,s._closeAll(n)):t.level>0&&s.autoCloseOnClick&&!o&&!s.clickToOpen&&(n.data=s,s._closeAll(n)),o&&s.autoCloseOnClick&&(n.data=s,t.hasItems||s._closeAll(n));if(n.target.tagName!="A"&&n.target.tagName!="a"){var r=t.anchor!=null?e(t.anchor):null;if(r!=null&&r.length>0){var i=r.attr("href"),u=r.attr("target");i!=null&&(u!=null?window.open(i,u):window.location=i)}}}),s.removeHandler(n,"mouseenter"),s.removeHandler(n,"mouseleave"),!u&&s.mode!="simple"&&s._renderHover(n,t,o);if(t.subMenuElement!=null){var a=e(t.subMenuElement);if(s.mode=="simple")return a.show(),!0;a.wrap('<div class="jqx-menu-popup '+s.toThemeProperty("jqx-menu-popup")+'" style="border: none; background-color: transparent; z-index:'+r+'; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: hidden;"><div style="background-color: transparent; border: none; position:absolute; overflow:hidden; left: 0; top: 0; right: 0; width: 100%; height: 100%;"></div></div>'),a.css({overflow:"hidden",position:"absolute",left:0,display:"inherit",top:-a.outerHeight()}),a.data("timer",{}),t.level>0?a.css("left",-a.outerWidth()):s.mode=="horizontal"&&a.css("left",0),r++;var f=e(t.subMenuElement).closest("div.jqx-menu-popup").css({width:parseInt(e(t.subMenuElement).outerWidth())+parseInt(i[0])+"px",height:parseInt(e(t.subMenuElement).outerHeight())+parseInt(i[1])+"px"}),l=n.closest("div.jqx-menu-popup");if(l.length>0){var c=a.css("margin-left"),h=a.css("margin-right"),p=a.css("padding-left"),d=a.css("padding-right");f.appendTo(l),a.css("margin-left",c),a.css("margin-right",h),a.css("padding-left",p),a.css("padding-right",d)}else{var c=a.css("margin-left"),h=a.css("margin-right"),p=a.css("padding-left"),d=a.css("padding-right");f.appendTo(e(document.body)),a.css("margin-left",c),a.css("margin-right",h),a.css("padding-left",p),a.css("padding-right",d)}if(!s.clickToOpen){if(o||u)s.removeHandler(n,e.jqx.mobile.getTouchEventName("touchstart")),s.addHandler(n,e.jqx.mobile.getTouchEventName("touchstart"),function(e){return clearTimeout(a.data("timer").hide),a!=null&&a.stop(),t.level==0&&!t.isOpen&&s.mode!="popup"&&(e.data=s,s._closeAll(e)),t.isOpen?s._closeItem(s,t,!0):s._openItem(s,t),!1});u||(s.addHandler(n,"mouseenter",function(){(s.autoOpen||t.level>0&&!s.autoOpen)&&clearTimeout(a.data("timer").hide);if(t.parentId&&t.parentId!=0&&s.menuElements[t.parentId]){var e=s.menuElements[t.parentId].isOpen;if(!e)return}return(s.autoOpen||t.level>0&&!s.autoOpen)&&s._openItem(s,t),!1}),s.addHandler(n,"mousedown",function(){!s.autoOpen&&t.level==0&&(clearTimeout(a.data("timer").hide),a!=null&&a.stop(),t.isOpen?s._closeItem(s,t,!0):s._openItem(s,t))}),s.addHandler(n,"mouseleave",function(n){if(s.autoCloseOnMouseLeave){clearTimeout(a.data("timer").hide);var r=e(t.subMenuElement),i={left:parseInt(n.pageX),top:parseInt(n.pageY)},o={left:parseInt(r.coord().left),top:parseInt(r.coord().top),width:parseInt(r.outerWidth()),height:parseInt(r.outerHeight())},u=!0;o.left-5<=i.left&&i.left<=o.left+o.width+5&&o.top<=i.top&&i.top<=o.top+o.height&&(u=!1),u&&s._closeItem(s,t,!0)}}),s.removeHandler(f,"mouseenter"),s.addHandler(f,"mouseenter",function(){clearTimeout(a.data("timer").hide)}),s.removeHandler(f,"mouseleave"),s.addHandler(f,"mouseleave",function(e){s.autoCloseOnMouseLeave&&(clearTimeout(a.data("timer").hide),clearTimeout(a.data("timer").show),a!=null&&a.stop(),s._closeItem(s,t,!0))}))}else s.removeHandler(n,"mousedown"),s.addHandler(n,"mousedown",function(e){clearTimeout(a.data("timer").hide),a!=null&&a.stop(),t.level==0&&!t.isOpen&&(e.data=s,s._closeAll(e)),t.isOpen?s._closeItem(s,t,!0):s._openItem(s,t)})}}),this.mode=="simple"&&this._renderSimpleMode(),this._autoSizeHorizontalMenuItems(),this._raiseEvent("3",this)},_renderSimpleMode:function(){this.host.show()},createID:function(){var e=Math.random()+"";e=e.replace(".",""),e="99"+e,e/=1;while(this.items[e])e=Math.random()+"",e=e.replace(".",""),e/=1;return"menuItem"+e},_createMenu:function(t,n){if(t==null)return;n==undefined&&(n=!0),n==null&&(n=!0);var r=this,i=e(t).find("li"),s=0;for(var o=0;o<i.length;o++){var u=i[o],a=e(u);if(u.className.indexOf("jqx-menu")==-1&&this.autoGenerate==0)continue;var f=u.id;f||(f=this.createID()),n&&(u.id=f,this.items[s]=new e.jqx._jqxMenu.jqxMenuItem,this.menuElements[f]=this.items[s]),s+=1;var l=0,c=this,h=a.children();h.each(function(){n||(this.className="",c.autoGenerate&&(e(c.items[s-1].subMenuElement)[0].className="",c.minimized||e(c.items[s-1].subMenuElement).addClass(c.toThemeProperty("jqx-widget-content")),e(c.items[s-1].subMenuElement).addClass(c.toThemeProperty("jqx-menu-dropdown")),e(c.items[s-1].subMenuElement).addClass(c.toThemeProperty("jqx-popup"))));if(this.className.indexOf("jqx-menu-dropdown")!=-1)return n&&(c.items[s-1].subMenuElement=this),!1;if(c.autoGenerate&&(this.tagName=="ul"||this.tagName=="UL"))return n&&(c.items[s-1].subMenuElement=this),this.className="",c.minimized||e(this).addClass(c.toThemeProperty("jqx-widget-content")),e(this).addClass(c.toThemeProperty("jqx-menu-dropdown")),e(this).addClass(c.toThemeProperty("jqx-popup")),e(this).attr("role","menu"),c.rtl?e(this).addClass(c.toThemeProperty("jqx-rc-l")):e(this).addClass(c.toThemeProperty("jqx-rc-r")),e(this).addClass(c.toThemeProperty("jqx-rc-b")),!1});var p=a.parents();p.each(function(){if(this.className.indexOf("jqx-menu-item")!=-1)return l=this.id,!1;if(c.autoGenerate&&(this.tagName=="li"||this.tagName=="LI"))return l=this.id,!1});var d=!1,v=u.getAttribute("type"),m=u.getAttribute("ignoretheme")||u.getAttribute("data-ignoretheme");if(m){if(m=="true"||m==1)m=!0}else m=!1;if(!v)v=u.type;else if(v=="separator")var d=!0;d||(l?v="sub":v="top");var g=this.items[s-1];if(n){g.id=f,g.parentId=l,g.type=v,g.separator=d,g.element=i[o];var y=a.children("a");g.level=a.parents("li").length,g.anchor=y.length>0?y:null}g.ignoretheme=m;var b=this.menuElements[l];b!=null&&b.ignoretheme&&(g.ignoretheme=b.ignoretheme,m=b.ignoretheme),this.autoGenerate&&(v=="separator"?(a.removeClass(),a.addClass(this.toThemeProperty("jqx-menu-item-separator")),a.attr("role","separator")):m||(a[0].className="",this.rtl&&a.addClass(this.toThemeProperty("jqx-rtl")),g.level>0&&!c.minimized?(a.addClass(this.toThemeProperty("jqx-item")),a.addClass(this.toThemeProperty("jqx-menu-item"))):(a.addClass(this.toThemeProperty("jqx-item")),a.addClass(this.toThemeProperty("jqx-menu-item-top"))))),n&&!m&&(g.hasItems=a.find("li").length>0,g.hasItems&&g.element&&(e.jqx.aria(e(g.element),"aria-haspopup",!0),g.subMenuElement.id||(g.subMenuElement.id=e.jqx.utilities.createId()),e.jqx.aria(e(g.element),"aria-owns",g.subMenuElement.id)))}},destroy:function(){e.jqx.utilities.resize(this.host,null,!0);var t=this.host.closest("div.jqx-menu-wrapper");t.remove(),e("#menuWrapper"+this.element.id).remove();var n=this;this.removeHandler(e(document),"mousedown.menu"+this.element.id,n._closeAfterClick),this.removeHandler(e(document),"mouseup.menu"+this.element.id,n._closeAfterClick),e.data(document.body,"jqxMenuOldHost"+this.element.id,null),this.isTouchDevice()&&this.removeHandler(e(document),e.jqx.mobile.getTouchEventName("touchstart")+".menu"+this.element.id,this._closeAfterClick,this),e(window).off&&e(window).off("resize.menu"+n.element.id),e.each(this.items,function(){var t=this,r=e(t.element);n.removeHandler(r,"click"),n.removeHandler(r,"selectstart"),n.removeHandler(r,"mouseenter"),n.removeHandler(r,"mouseleave"),n.removeHandler(r,"mousedown"),n.removeHandler(r,"mouseleave");var i=e(t.subMenuElement),s=i.closest("div.jqx-menu-popup");s.remove(),delete this.subMenuElement,delete this.element}),e.data(document.body,"menuel",null),delete this.menuElements,this.items=new Array,delete this.items;var r=e.data(this.element,"jqxMenu");r&&delete r.instance,this.host.removeClass(),this.host.remove(),delete this.host,delete this.element},_raiseEvent:function(t,n){n==undefined&&(n={owner:null});var r=this.events[t];args=n,args.owner=this;var i=new jQuery.Event(r);t=="2"&&(args=n.item,args.owner=this,e.extend(i,n.event),i.type="itemclick"),i.owner=this,i.args=args;var s=this.host.trigger(i);return s},propertyChangedHandler:function(t,n,r,i){if(this.isInitialized==undefined||this.isInitialized==0)return;n=="disabled"&&(t.disabled?(t.host.addClass(self.toThemeProperty("jqx-fill-state-disabled")),t.host.addClass(self.toThemeProperty("jqx-menu-disabled"))):(t.host.removeClass(self.toThemeProperty("jqx-fill-state-disabled")),t.host.removeClass(self.toThemeProperty("jqx-menu-disabled"))));if(i==r)return;n=="touchMode"&&(this._isTouchDevice=null,t._render(i,r));if(n=="source"&&t.source!=null){var s=t.loadItems(t.source);t.element.innerHTML=s;var o=t.host.find("ul:first");o.length>0&&(t.refresh(),t._createMenu(o[0]),t._render())}n=="autoCloseOnClick"?i==0?t.removeHandler(e(document),"mousedown.menu"+this.element.id,t._closeAll):t.addHandler(e(document),"mousedown.menu"+this.element.id,t,t._closeAll):n=="mode"||n=="width"||n=="height"||n=="showTopLevelArrows"?(t.refresh(),n=="mode"?t._render(i,r):t._applyOrientation()):n=="theme"&&e.jqx.utilities.setTheme(r,i,t.host)}})}(jQuery),function(e){e.jqx._jqxMenu.jqxMenuItem=function(e,t,n){var r={id:e,parentId:t,parentItem:null,anchor:null,type:n,disabled:!1,level:0,isOpen:!1,hasItems:!1,element:null,subMenuElement:null,arrow:null,openHorizontalDirection:"right",openVerticalDirection:"down",closeOnClick:!0};return r}}(jQuery),function(e){e.jqx.jqxWidget("jqxListBox","",{}),e.extend(e.jqx._jqxListBox.prototype,{defineInstance:function(){this.disabled=!1,this.width=null,this.height=null,this.items=new Array,this.multiple=!1,this.selectedIndex=-1,this.selectedIndexes=new Array,this.source=null,this.scrollBarSize=e.jqx.utilities.scrollBarSize,this.enableHover=!0,this.enableSelection=!0,this.visualItems=new Array,this.groups=new Array,this.equalItemsWidth=!0,this.itemHeight=-1,this.visibleItems=new Array,this.emptyGroupText="Group",this.checkboxes=!1,this.hasThreeStates=!1,this.autoHeight=!1,this.autoItemsHeight=!1,this.roundedcorners=!0,this.touchMode="auto",this.displayMember="",this.valueMember="",this.searchMode="startswithignorecase",this.incrementalSearch=!0,this.incrementalSearchDelay=1e3,this.incrementalSearchKeyDownDelay=300,this.allowDrag=!1,this.allowDrop=!0,this.dropAction="default",this.touchModeStyle="auto",this.keyboardNavigation=!0,this.enableMouseWheel=!0,this.multipleextended=!1,this.emptyString="null",this.rtl=!1,this.rendered=null,this.renderer=null,this.dragStart=null,this.dragEnd=null,this.ready=null,this._checkForHiddenParent=!0,this.aria={"aria-disabled":{name:"disabled",type:"boolean"}},this.events=["select","unselect","change","checkChange","dragStart","dragEnd","bindingComplete"]},createInstance:function(t){e.jqx.utilities.scrollBarSize!=15&&(this.scrollBarSize=e.jqx.utilities.scrollBarSize),this.width==null&&(this.width=200),this.height==null&&(this.height=200),this.render();var n=this;e.jqx.utilities.resize(this.host,function(){n._updateSize()},!1,this._checkForHiddenParent)},resize:function(e,t){this.width=e,this.height=t,this._updateSize()},render:function(){this.element.innerHTML="";var t=this,n=this.element.className;n+=" "+this.toThemeProperty("jqx-listbox"),n+=" "+this.toThemeProperty("jqx-reset"),n+=" "+this.toThemeProperty("jqx-rc-all"),n+=" "+this.toThemeProperty("jqx-widget"),n+=" "+this.toThemeProperty("jqx-widget-content"),this.element.className=n;var r=!1;this.width!=null&&this.width.toString().indexOf("%")!=-1&&(this.host.width(this.width),r=!0),this.height!=null&&this.height.toString().indexOf("%")!=-1&&(this.host.height(this.height),this.host.height()==0&&this.host.height(200),r=!0),this.width!=null&&this.width.toString().indexOf("px")!=-1?this.host.width(this.width):this.width!=undefined&&!isNaN(this.width)&&(this.element.style.width=parseInt(this.width)+"px"),this.height!=null&&this.height.toString().indexOf("px")!=-1?this.host.height(this.height):this.height!=undefined&&!isNaN(this.height)&&(this.element.style.height=parseInt(this.height)+"px"),this.multiple||this.multipleextended||this.checkboxes?e.jqx.aria(this,"aria-multiselectable",!0):e.jqx.aria(this,"aria-multiselectable",!1);var i=e("<div style='-webkit-appearance: none; background: transparent; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div style='-webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='listBoxContent' style='-webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='verticalScrollBar"+this.element.id+"' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'/>"+"<div id='horizontalScrollBar"+this.element.id+"' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'/>"+"<div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'/>"+"</div>"+"</div>");this._checkForHiddenParent&&(this._addInput(),this.host.attr("tabIndex")||this.host.attr("tabIndex",1)),this.host.attr("role","listbox"),this.host.append(i);var s=this.host.find("#verticalScrollBar"+this.element.id);if(!this.host.jqxButton)throw new Error("jqxListBox: Missing reference to jqxbuttons.js.");if(!s.jqxScrollBar)throw new Error("jqxListBox: Missing reference to jqxscrollbar.js.");var o=parseInt(this.host.height())/2;o==0&&(o=10),this.vScrollBar=s.jqxScrollBar({_initialLayout:!0,vertical:!0,rtl:this.rtl,theme:this.theme,touchMode:this.touchMode,largestep:o});var u=this.host.find("#horizontalScrollBar"+this.element.id);this.hScrollBar=u.jqxScrollBar({_initialLayout:!0,vertical:!1,rtl:this.rtl,touchMode:this.touchMode,theme:this.theme}),this.content=this.host.find("#listBoxContent"),this.content[0].id="listBoxContent"+this.element.id,this.bottomRight=this.host.find("#bottomRight").addClass(this.toThemeProperty("jqx-listbox-bottomright")).addClass(this.toThemeProperty("jqx-scrollbar-state-normal")),this.bottomRight[0].id="bottomRight"+this.element.id,this.vScrollInstance=e.data(this.vScrollBar[0],"jqxScrollBar").instance,this.hScrollInstance=e.data(this.hScrollBar[0],"jqxScrollBar").instance;if(this.isTouchDevice()&&!(e.jqx.browser.msie&&e.jqx.browser.version<9)){var a=e("<div class='overlay' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div>");this.content.parent().append(a),this.overlayContent=this.host.find(".overlay")}this._updateTouchScrolling(),this.host.addClass("jqx-disableselect"),this.host.jqxDragDrop&&jqxListBoxDragDrop()},_highlight:function(e,t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+n+")","ig"),function(e,t){return"<b>"+t+"</b>"})},_addInput:function(){var t=this.host.attr("name");t?this.host.attr("name",""):t=this.element.id,this.input=e("<input type='hidden'/>"),this.host.append(this.input),this.input.attr("name",t)},_updateTouchScrolling:function(){var t=this;if(this.isTouchDevice()){t.enableHover=!1;var n=this.overlayContent?this.overlayContent:this.content;this.removeHandler(e(n),e.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"),this.removeHandler(e(n),e.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(e(n),e.jqx.mobile.getTouchEventName("touchend")+".touchScroll"),this.removeHandler(e(n),"touchcancel.touchScroll"),e.jqx.mobile.touchScroll(n,t.vScrollInstance.max,function(e,n){if(t.vScrollBar.css("visibility")!="hidden"){var r=t.vScrollInstance.value;t.vScrollInstance.setPosition(r+n),t._lastScroll=new Date}if(t.hScrollBar.css("visibility")!="hidden"){var r=t.hScrollInstance.value;t.hScrollInstance.setPosition(r+e),t._lastScroll=new Date}},this.element.id,this.hScrollBar,this.vScrollBar),t.vScrollBar.css("visibility")!="visible"&&t.hScrollBar.css("visibility")!="visible"?e.jqx.mobile.setTouchScroll(!1,this.element.id):e.jqx.mobile.setTouchScroll(!0,this.element.id),this._arrange()}},isTouchDevice:function(){var t=e.jqx.mobile.isTouchDevice();if(this.touchMode==1){if(this.touchDevice)return!0;if(e.jqx.browser.msie&&e.jqx.browser.version<9)return!1;this.touchDevice=!0,t=!0,e.jqx.mobile.setMobileSimulator(this.element)}else this.touchMode==0&&(t=!1);return t&&this.touchModeStyle!=0&&(this.scrollBarSize=e.jqx.utilities.touchScrollBarSize),t&&this.host.addClass(this.toThemeProperty("jqx-touch")),t},beginUpdate:function(){this.updatingListBox=!0},endUpdate:function(){this.updatingListBox=!1,this._addItems(),this._renderItems()},beginUpdateLayout:function(){this.updating=!0},resumeUpdateLayout:function(){this.updating=!1,this.vScrollInstance.value=0,this._render(!1)},propertyChangedHandler:function(t,n,r,i){if(this.isInitialized==undefined||this.isInitialized==0)return;n=="renderer"&&(t._cachedItemHtml=new Array,t.refresh()),n=="itemHeight"&&t.refresh();if(n=="source"||n=="checkboxes")i==null&&r&&r.unbindBindingUpdate&&(r.unbindBindingUpdate(t.element.id),r.unbindDownloadComplete(t.element.id)),t.clearSelection(),t.refresh();(n=="scrollBarSize"||n=="equalItemsWidth")&&i!=r&&t._updatescrollbars(),n=="disabled"&&(t._renderItems(),t.vScrollBar.jqxScrollBar({disabled:i}),t.hScrollBar.jqxScrollBar({disabled:i}));if(n=="touchMode"||n=="rtl"){t._removeHandlers(),t.vScrollBar.jqxScrollBar({touchMode:i}),t.hScrollBar.jqxScrollBar({touchMode:i});if(n=="touchMode"&&!(e.jqx.browser.msie&&e.jqx.browser.version<9)){var s=e("<div class='overlay' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div>");t.content.parent().append(s),t.overlayContent=t.host.find(".overlay")}t._updateTouchScrolling(),t._addHandlers(),t._render(!1)}this.updating||(n=="width"||n=="height")&&t._updateSize(),n=="theme"&&r!=i&&(t.hScrollBar.jqxScrollBar({theme:t.theme}),t.vScrollBar.jqxScrollBar({theme:t.theme}),t.host.removeClass(),t.host.addClass(t.toThemeProperty("jqx-listbox")),t.host.addClass(t.toThemeProperty("jqx-widget")),t.host.addClass(t.toThemeProperty("jqx-widget-content")),t.host.addClass(t.toThemeProperty("jqx-reset")),t.host.addClass(t.toThemeProperty("jqx-rc-all")),t.refresh()),n=="selectedIndex"&&(t.clearSelection(),t.selectIndex(i,!0));if(n=="displayMember"||n=="valueMember"){if(r!=i){var o=t.selectedIndex;t.refresh(),t.selectedIndex=o,t.selectedIndexes[o]=o}t._renderItems()}n=="autoHeight"&&(r!=i?t._render(!1):(t._updatescrollbars(),t._renderItems())),t._checkForHiddenParent&&e.jqx.isHidden(t.host)&&e.jqx.utilities.resize(this.host,function(){t._updateSize()},!1,t._checkForHiddenParent)},loadFromSelect:function(t){if(t==null)return;var n="#"+t,r=e(n);if(r.length>0){var i=r.find("option"),s=r.find("optgroup"),o=0,u=-1,a=new Array;e.each(i,function(){var t=s.find(this).length>0,n=null;this.text!=this.value&&(this.label==null||this.label=="")&&(this.label=this.text);var r={disabled:this.disabled,value:this.value,label:this.label,title:this.title,originalItem:this},i=e.jqx.browser.msie&&e.jqx.browser.version<8;i&&r.value==""&&this.text!=null&&this.text.length>0&&(r.value=this.text),t&&(n=s.find(this).parent()[0].label,r.group=n),this.selected&&(u=o),a[o]=r,o++}),this.source=a,this.fromSelect=!0,this.clearSelection(),this.selectedIndex=u,this.selectedIndexes[this.selectedIndex]=this.selectedIndex,this.refresh()}},invalidate:function(){this._cachedItemHtml=[],this._renderItems(),this.virtualSize=null,this._updateSize()},refresh:function(t){var n=this;if(this.vScrollBar==undefined)return;this._cachedItemHtml=[],this.visibleItems=new Array;var r=function(e){if(e==1&&n.selectedIndex!=-1){var t=n.selectedIndex;n.selectedIndex=-1,n._stopEvents=!0,n.selectIndex(t,!1,!0),n.selectedIndex==-1&&(n.selectedIndex=t),n._stopEvents=!1}};this.itemswrapper!=null&&(this.itemswrapper.remove(),this.itemswrapper=null);if(e.jqx.dataAdapter&&this.source!=null&&this.source._source){this.databind(this.source),r(t);return}this.items=this.loadItems(this.source),this._raiseEvent("6"),this._render(!1,t==1),r(t)},_render:function(e,t){this._addItems(),this._renderItems(),this.vScrollInstance.setPosition(0),this._cachedItemHtml=new Array,(e==undefined||e)&&this.items!=undefined&&this.items!=null&&this.selectedIndex>=0&&this.selectedIndex<this.items.length&&this.selectIndex(this.selectedIndex,!0,!0,!0);if(this.allowDrag&&this._enableDragDrop){this._enableDragDrop();if(this.isTouchDevice()){this._removeHandlers(),this.overlayContent&&(this.overlayContent.remove(),this.overlayContent=null),this._updateTouchScrolling(),this._addHandlers();return}}this._updateTouchScrolling(),this.rendered&&this.rendered(),this.ready&&this.ready()},_hitTest:function(e,t){var n=parseInt(this.vScrollInstance.value),r=this._searchFirstVisibleIndex(t+n,this.renderedVisibleItems);if(this.renderedVisibleItems[r]!=undefined&&this.renderedVisibleItems[r].isGroup)return null;if(this.renderedVisibleItems.length>0){var i=this.renderedVisibleItems[this.renderedVisibleItems.length-1];if(i.height+i.top<t+n)return null}return r=this._searchFirstVisibleIndex(t+n),this.visibleItems[r]},_searchFirstVisibleIndex:function(e,t){e==undefined&&(e=parseInt(this.vScrollInstance.value));var n=0;if(t==undefined||t==null)t=this.visibleItems;var r=t.length;while(n<=r){mid=parseInt((n+r)/2);var i=t[mid];if(i==undefined)break;if(i.initialTop>e&&i.initialTop+i.height>e)r=mid-1;else{if(!(i.initialTop<e&&i.initialTop+i.height<=e))return mid;n=mid+1}}return 0},_renderItems:function(){if(this.items==undefined||this.items.length==0){this.visibleItems=new Array;return}if(this.updatingListBox==1)return;var t=this.isTouchDevice(),n=this.vScrollInstance,r=this.hScrollInstance,i=parseInt(n.value),s=parseInt(r.value);this.rtl&&this.hScrollBar[0].style.visibility!="hidden"&&(s=r.max-s);var o=this.items.length,u=this.host.width(),a=parseInt(this.content[0].style.width),f=a+parseInt(r.max),l=parseInt(this.vScrollBar[0].style.width)+2;this.vScrollBar[0].style.visibility=="hidden"&&(l=0),this.hScrollBar[0].style.visibility!="visible"&&(f=a);var c=this._getVirtualItemsCount(),h=new Array,p=0,d=parseInt(this.element.style.height)+2;this.element.style.height.indexOf("%")!=-1&&(d=this.host.outerHeight()),isNaN(d)&&(d=0);var v=0,m=0,g=0;if(n.value==0||this.visibleItems.length==0)for(var y=0;y<this.items.length;y++){var b=this.items[y];if(b.visible){b.top=-i,b.initialTop=-i,!b.isGroup&&b.visible&&(this.visibleItems[m++]=b,b.visibleIndex=m-1),this.renderedVisibleItems[g++]=b,b.left=-s;var w=b.top+b.height;w>=0&&b.top-b.height<=d&&(h[p++]={index:y,item:b}),i-=b.height}}var E=i>0?this._searchFirstVisibleIndex(this.vScrollInstance.value,this.renderedVisibleItems):0,S=0;p=0;var x=this.vScrollInstance.value,T=0;while(S<100+d){var b=this.renderedVisibleItems[E];if(b==undefined)break;if(b.visible){b.left=-s;var w=b.top+b.height-x;w>=0&&b.initialTop-x-b.height<=2*d&&(h[p++]={index:E,item:b})}E++,b.visible&&(S+=b.initialTop-x+b.height-S),T++;if(T>this.items.length-1)break}var N=this.toThemeProperty("jqx-listitem-state-normal")+" "+this.toThemeProperty("jqx-item"),C=this.toThemeProperty("jqx-listitem-state-group"),k=this.toThemeProperty("jqx-listitem-state-disabled")+" "+this.toThemeProperty("jqx-fill-state-disabled"),L=0,A=this;for(var y=0;y<this.visualItems.length;y++){var O=this.visualItems[y],M=function(){var e=O[0].firstChild;A.checkboxes&&(e=O[0].lastChild),e!=null&&(e.style.visibility="hidden",e.className="");if(A.checkboxes){var t=O.find(".chkbox");t.css({visibility:"hidden"})}};if(y<h.length){var b=h[y].item;if(b.initialTop-x>=d){M();continue}var _=e(O[0].firstChild);this.checkboxes&&(_=e(O[0].lastChild));if(_.length==0)continue;if(_[0]==null)continue;_[0].className="",_[0].style.display="block",_[0].style.visibility="inherit";var D="";!b.isGroup&&!this.selectedIndexes[b.index]>=0?D=N:D=C;if(b.disabled||this.disabled)D+=" "+k;this.roundedcorners&&(D+=" "+this.toThemeProperty("jqx-rc-all")),t&&(D+=" "+this.toThemeProperty("jqx-listitem-state-normal-touch")),_[0].className=D;if(this.renderer){b.key||(b.key=this.generatekey()),this._cachedItemHtml||(this._cachedItemHtml=new Array);if(this._cachedItemHtml[b.key])_[0].innerHTML!=this._cachedItemHtml[b.key]&&(_[0].innerHTML=this._cachedItemHtml[b.key]);else{var P=this.renderer(b.index,b.label,b.value);_[0].innerHTML=P,this._cachedItemHtml[b.key]=_[0].innerHTML}}else{if(this.itemHeight!==-1){var H=2+2*parseInt(_.css("padding-top"));_[0].style.lineHeight=b.height-H+"px",_.css("vertical-align","middle")}if(b.html!=null&&b.html.toString().length>0)_[0].innerHTML=b.html;else if(b.label!=null||b.value!=null)b.label!=null?(_[0].innerHTML!==b.label&&(_[0].innerHTML=b.label),e.trim(b.label)==""&&(_[0].innerHTML=this.emptyString,this.emptyString==""&&(_[0].style.height=b.height-8+"px")),!this.incrementalSearch&&!b.disabled&&this.searchString!=undefined&&this.searchString!=""&&(_[0].innerHTML=this._highlight(b.label,this.searchString))):b.label===null?(_[0].innerHTML=this.emptyString,this.emptyString==""&&(_[0].style.height=b.height-8+"px")):_[0].innerHTML!==b.value?_[0].innerHTML=b.value:b.label==""&&(_[0].innerHTML=" ");else if(b.label==""||b.label==null)_[0].innerHTML="",_[0].style.height=b.height-8+"px"}O[0].style.left=b.left+"px",O[0].style.top=b.initialTop-x+"px",b.element=_[0],b.title&&(_[0].title=b.title);if(this.equalItemsWidth&&!b.isGroup){if(v==0){var B=parseInt(f),j=parseInt(_.outerWidth())-parseInt(_.width());B-=j;var F=1;F!=null?F=parseInt(F):F=0,B-=2*F,v=B,this.checkboxes&&this.hScrollBar[0].style.visibility=="hidden"&&(v-=18)}a>this.virtualSize.width?(_[0].style.width=v+"px",b.width=v):(_[0].style.width=-4+this.virtualSize.width+"px",b.width=this.virtualSize.width-4)}else _.width()<this.host.width()&&_.width(this.host.width()-2);this.rtl&&(_[0].style.textAlign="right"),this.autoItemsHeight&&(_[0].style.whiteSpace="normal",_.width(v),b.width=v),L=0;if(this.checkboxes&&!b.isGroup){L==0&&(L=(b.height-16)/2,L++);var I=e(O.children()[0]);I[0].item=b,this.rtl?_[0].style.left!="0px"&&(_[0].style.left="0px"):_[0].style.left!="18px"&&(_[0].style.left="18px"),this.rtl&&I.css("left",8+b.width+"px"),I[0].style.top=L+"px",I[0].style.display="block",I[0].style.visibility="inherit";var q=b.checked,R=b.checked?" "+this.toThemeProperty("jqx-checkbox-check-checked"):"";q?I[0].firstChild.firstChild.firstChild.className=R:q===!1?I[0].firstChild.firstChild.firstChild.className="":q===null&&(I[0].firstChild.firstChild.firstChild.className=this.toThemeProperty("jqx-checkbox-check-indeterminate")),e.jqx.ariaEnabled&&(q?O[0].setAttribute("aria-selected",!0):O[0].removeAttribute("aria-selected"))}else if(this.checkboxes){var I=e(O.children()[0]);I.css({display:"none",visibility:"inherit"})}this.selectedIndexes[b.visibleIndex]>=0&&!b.disabled?(_.addClass(this.toThemeProperty("jqx-listitem-state-selected")),_.addClass(this.toThemeProperty("jqx-fill-state-pressed")),e.jqx.ariaEnabled&&(O[0].setAttribute("aria-selected",!0),this._activeElement=O[0])):this.checkboxes||e.jqx.ariaEnabled&&O[0].removeAttribute("aria-selected")}else M()}},generatekey:function(){var e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},_calculateVirtualSize:function(){var t=0,n=2,r=0,i=e("<span></span>");this.equalItemsWidth&&i.css("float","left");var s=0,o=this.host.outerHeight();e(document.body).append(i);var u=this.items.length,a=this.host.width();this.autoItemsHeight&&(a-=10,this.vScrollBar.css("visibility")!="hidden"&&(a-=20));if(this.autoItemsHeight||this.renderer||this.groups.length>1||u>0&&this.items[0].html!=null&&this.items[0].html!="")for(var r=0;r<u;r++){var f=this.items[r];if(f.isGroup&&f.label==""&&f.html=="")continue;if(!f.visible)continue;var l="";f.isGroup?l+=this.toThemeProperty("jqx-listitem-state-group jqx-rc-all"):l+=this.toThemeProperty("jqx-listitem-state-normal jqx-rc-all"),l+=" "+this.toThemeProperty("jqx-fill-state-normal"),this.isTouchDevice()&&(l+=" "+this.toThemeProperty("jqx-touch")),i[0].className=l;if(this.autoItemsHeight){i[0].style.whiteSpace="normal";var c=this.checkboxes?-20:0;i[0].style.width=c+a+"px"}if(this.renderer){var h=this.renderer(f.index,f.label,f.value);i[0].innerHTML=h}else if(f.html!=null&&f.html.toString().length>0)i[0].innerHTML=f.html;else if(f.label!=null||f.value!=null)f.label!=null?(i[0].innerHTML=f.label,f.label==""&&(i[0].innerHTML="Empty")):i[0].innerHTML=f.value;var p=i.outerHeight(),d=i.outerWidth();this.itemHeight>-1&&(p=this.itemHeight),f.height=p,f.width=d,n+=p,t=Math.max(t,d),n<=o&&s++}else{var n=0,v=0,m="",g=0,y=0,b=-1;for(var r=0;r<u;r++){var f=this.items[r];if(f.isGroup&&f.label==""&&f.html=="")continue;if(!f.visible)continue;b++;var l="";if(b==0){l+=this.toThemeProperty("jqx-listitem-state-normal jqx-rc-all"),l+=" "+this.toThemeProperty("jqx-fill-state-normal"),l+=" "+this.toThemeProperty("jqx-widget"),l+=" "+this.toThemeProperty("jqx-listbox"),l+=" "+this.toThemeProperty("jqx-widget-content"),this.isTouchDevice()&&(l+=" "+this.toThemeProperty("jqx-touch"),l+=" "+this.toThemeProperty("jqx-listitem-state-normal-touch")),i[0].className=l;if(this.autoItemsHeight){i[0].style.whiteSpace="normal";var c=this.checkboxes?-20:0;i[0].style.width=c+a+"px"}if(f.html==null||f.label==""||f.label==null)i[0].innerHTML="Item";else if(f.html!=null&&f.html.toString().length>0)i[0].innerHTML=f.html;else if(f.label!=null||f.value!=null)f.label!=null?f.label.toString().match(new RegExp("\\w"))!=null||f.label.toString().match(new RegExp("\\d"))!=null?i[0].innerHTML=f.label:i[0].innerHTML="Item":i[0].innerHTML=f.value;var p=1+i.outerHeight();this.itemHeight>-1&&(p=this.itemHeight),v=p}g!=undefined&&(y=g),f.html!=null&&f.html.toString().length>0?(g=Math.max(g,f.html.toString().length),y!=g&&(m=f.html)):f.label!=null?(g=Math.max(g,f.label.length),y!=g&&(m=f.label)):f.value!=null&&(g=Math.max(g,f.value.length),y!=g&&(m=f.value)),f.height=v,n+=v,n<=o&&s++}i[0].innerHTML=m,t=i.outerWidth()}return n+=2,s<10&&(s=10),i.remove(),{width:t,height:n,itemsPerPage:s}},_getVirtualItemsCount:function(){if(this.virtualItemsCount==0){var e=parseInt(this.host.height())/5;return e>this.items.length&&(e=this.items.length),e}return this.virtualItemsCount},_addItems:function(t){if(this.updatingListBox==1)return;if(this.items==undefined||this.items.length==0){this.virtualSize={width:0,height:0,itemsPerPage:0},this._updatescrollbars(),this.renderedVisibleItems=new Array,this.itemswrapper&&this.itemswrapper.children().remove();return}if(t==0){var n=this._calculateVirtualSize(),r=n.itemsPerPage*2;this.autoHeight&&(r=this.items.length),this.virtualItemsCount=Math.min(r,this.items.length);var i=this,s=n.width;this.virtualSize=n,this._updatescrollbars();return}var o=this,u=0;this.visibleItems=new Array,this.renderedVisibleItems=new Array,this._removeHandlers(),this.allowDrag&&this._enableDragDrop&&(this.itemswrapper=null),this.itemswrapper==null&&(this.content[0].innerHTML="",this.itemswrapper=e('<div style="outline: 0 none; overflow:hidden; width:100%; position: relative;"></div>'),this.itemswrapper.height(2*this.host.height()),this.content.append(this.itemswrapper));var n=this._calculateVirtualSize(),r=n.itemsPerPage*2;this.autoHeight&&(r=this.items.length),this.virtualItemsCount=Math.min(r,this.items.length);var i=this,s=n.width;this.virtualSize=n,this.itemswrapper.width(Math.max(this.host.width(),17+n.width));var a=0,f="";for(var l=a;l<this.virtualItemsCount;l++){var c=this.items[l],h="listitem"+l+this.element.id;f+="<div role='option' id='"+h+"' class='jqx-listitem-element'>";if(this.checkboxes){f+='<div style="background-color: transparent; padding: 0; margin: 0; position: absolute; float: left; width: 16px; height: 16px;" class="chkbox">';var p='<div class="'+this.toThemeProperty("jqx-checkbox-default")+" "+this.toThemeProperty("jqx-fill-state-normal")+" "+this.toThemeProperty("jqx-rc-all")+'"><div style="cursor: pointer; width: 13px; height: 13px;">',d=c.checked?" "+this.toThemeProperty("jqx-checkbox-check-checked"):"";p+='<span style="width: 13px; height: 13px;" class="checkBoxCheck'+d+'"></span>',p+="</div></div>",f+=p,f+="</div>"}f+="<span style='-ms-touch-action: none;'></span></div>"}o.WinJS?this.itemswrapper.html(f):this.itemswrapper[0].innerHTML=f;var v=this.itemswrapper.children();for(var l=a;l<this.virtualItemsCount;l++){var c=this.items[l],m=e(v[l]);this.allowDrag&&this._enableDragDrop&&m.addClass("draggable");if(this.checkboxes){var g=e(m.children()[0]);m.css("float","left");var y=e(m[0].firstChild);y.css("float","left")}m[0].style.height=c.height+"px",m[0].style.top=u+"px",u+=c.height,this.visualItems[l]=m}this._addHandlers(),this._updatescrollbars();if(this.autoItemsHeight){var n=this._calculateVirtualSize(),r=n.itemsPerPage*2;this.autoHeight&&(r=this.items.length),this.virtualItemsCount=Math.min(r,this.items.length);var i=this,s=n.width;this.virtualSize=n,this._updatescrollbars()}e.jqx.browser.msie&&e.jqx.browser.version<8&&(this.host.attr("hideFocus",!0),this.host.find("div").attr("hideFocus",!0))},_updatescrollbars:function(){if(!this.virtualSize)return;var t=this.virtualSize.height,n=this.virtualSize.width,r=this.vScrollInstance,i=this.hScrollInstance;this._arrange(!1);var s=!1,o=this.host.outerWidth(),u=this.host.outerHeight();if(t>u){var a=0;n>o&&(a=this.hScrollBar.outerHeight()+2);var f=r.max;r.max=2+parseInt(t)+a-parseInt(u-2),this.vScrollBar[0].style.visibility!="inherit"&&(this.vScrollBar[0].style.visibility="inherit",s=!0),f!=r.max&&r._arrange()}else this.vScrollBar[0].style.visibility!="hidden"&&(this.vScrollBar[0].style.visibility="hidden",s=!0,r.setPosition(0));var l=0;this.vScrollBar[0].style.visibility!="hidden"&&(l=this.scrollBarSize+6);var c=this.checkboxes?20:0;if(this.autoItemsHeight)this.hScrollBar[0].style.visibility="hidden";else if(n>=o-l-c){var h=i.max;this.vScrollBar[0].style.visibility=="inherit"?i.max=c+l+parseInt(n)-this.host.width()+4:i.max=c+parseInt(n)-this.host.width()+6,this.hScrollBar[0].style.visibility!="inherit"&&(this.hScrollBar[0].style.visibility="inherit",s=!0),h!=i.max&&i._arrange(),this.vScrollBar[0].style.visibility=="inherit"&&(r.max=2+parseInt(t)+this.hScrollBar.outerHeight()+2-parseInt(this.host.height()))}else this.hScrollBar[0].style.visibility!="hidden"&&(this.hScrollBar[0].style.visibility="hidden",s=!0);i.setPosition(0),s&&this._arrange(),this.itemswrapper&&(this.itemswrapper[0].style.width=Math.max(0,Math.max(o-2,17+n))+"px",this.itemswrapper[0].style.height=Math.max(0,2*u)+"px");var p=this.isTouchDevice();p&&(this.vScrollBar.css("visibility")!="visible"&&this.hScrollBar.css("visibility")!="visible"?e.jqx.mobile.setTouchScroll(!1,this.element.id):e.jqx.mobile.setTouchScroll(!0,this.element.id))},clear:function(){this.source=null,this.clearSelection(),this.refresh()},clearSelection:function(e){for(var t=0;t<this.selectedIndexes.length;t++)this.selectedIndexes[t]&&this.selectedIndexes[t]!=-1&&this._raiseEvent("1",{index:t,type:"api",item:this.getVisibleItem(t),originalEvent:null}),this.selectedIndexes[t]=-1;this.selectedIndex=-1,e!=0&&this._renderItems()},unselectIndex:function(e,t){if(isNaN(e))return;this.selectedIndexes[e]=-1;var n=!1;for(var r=0;r<this.selectedIndexes.length;r++){var e=this.selectedIndexes[r];e!=-1&&e!=undefined&&(n=!0)}n||(this.selectedValue=null,this.selectedIndex=-1);if(t==undefined||t==1)this._renderItems(),this._raiseEvent("1",{index:e,type:"api",item:this.getVisibleItem(e),originalEvent:null});this._updateInputSelection(),this._raiseEvent("2",{index:e,type:"api",item:this.getItem(e)})},getItem:function(t){if(t==-1||isNaN(t)||typeof t=="string")return t===-1?null:this.getItemByValue(t);var n=null,r=e.each(this.items,function(){if(this.index==t)return n=this,!1});return n},getVisibleItem:function(e){return e==-1||isNaN(e)||typeof e=="string"?e===-1?null:this.getItemByValue(e):this.visibleItems[e]},getVisibleItems:function(){return this.visibleItems},checkIndex:function(t,n,r){if(!this.checkboxes)return;if(isNaN(t))return;if(t<0||t>=this.visibleItems.length)return;if(this.visibleItems[t]!=null&&this.visibleItems[t].disabled)return;if(this.disabled)return;var i=this.getItem(t);if(this.groups.length>0)var i=this.getVisibleItem(t);if(i!=null){var s=e(i.checkBoxElement);i.checked=!0,(n==undefined||n==1)&&this._updateCheckedItems()}(r==undefined||r==1)&&this._raiseEvent(3,{label:i.label,value:i.value,checked:!0,item:i})},getCheckedItems:function(){if(!this.checkboxes)return null;var t=new Array;if(this.items==undefined)return;return e.each(this.items,function(){this.checked&&(t[t.length]=this)}),t},checkAll:function(t){if(!this.checkboxes)return;if(this.disabled)return;var n=this;e.each(this.items,function(){var e=this;t!==!1&&e.checked!==!0&&n._raiseEvent(3,{label:e.label,value:e.value,checked:!0,item:e}),this.checked=!0}),this._updateCheckedItems()},uncheckAll:function(t){if(!this.checkboxes)return;if(this.disabled)return;var n=this;e.each(this.items,function(){var e=this;t!==!1&&e.checked!==!1&&(this.checked=!1,n._raiseEvent(3,{label:e.label,value:e.value,checked:!1,item:e})),this.checked=!1}),this._updateCheckedItems()},uncheckIndex:function(t,n,r){if(!this.checkboxes)return;if(isNaN(t))return;if(t<0||t>=this.visibleItems.length)return;if(this.visibleItems[t]!=null&&this.visibleItems[t].disabled)return;if(this.disabled)return;var i=this.getItem(t);if(this.groups.length>0)var i=this.getVisibleItem(t);if(i!=null){var s=e(i.checkBoxElement);i.checked=!1,(n==undefined||n==1)&&this._updateCheckedItems()}(r==undefined||r==1)&&this._raiseEvent(3,{label:i.label,value:i.value,checked:!1,item:i})},indeterminateIndex:function(t,n,r){if(!this.checkboxes)return;if(isNaN(t))return;if(t<0||t>=this.visibleItems.length)return;if(this.visibleItems[t]!=null&&this.visibleItems[t].disabled)return;if(this.disabled)return;var i=this.getItem(t);if(this.groups.length>0)var i=this.getVisibleItem(t);if(i!=null){var s=e(i.checkBoxElement);i.checked=null,(n==undefined||n==1)&&this._updateCheckedItems()}(r==undefined||r==1)&&this._raiseEvent(3,{checked:null})},getSelectedIndex:function(){return this.selectedIndex},getSelectedItems:function(){var e=this.getVisibleItems(),t=this.selectedIndexes,n=[];for(var r in t)t[r]!=-1&&(n[n.length]=e[r]);return n},getSelectedItem:function(){return this.getItem(this.selectedIndex)},_updateCheckedItems:function(){var t=this.selectedIndex;this.clearSelection(!1);var n=this.getCheckedItems();this.selectedIndex=t,this._renderItems();var r=e.data(this.element,"hoveredItem");r!=null&&(e(r).addClass(this.toThemeProperty("jqx-listitem-state-hover")),e(r).addClass(this.toThemeProperty("jqx-fill-state-hover"))),this._updateInputSelection()},getItemByValue:function(t){if(this.visibleItems==null)return;if(this.itemsByValue)return this.itemsByValue[e.trim(t).split(" ").join("")];var n=this.visibleItems;for(var r=0;r<n.length;r++)if(n[r].value==t)return n[r]},checkItem:function(e){if(e!=null){var t=this._getItemByParam(e);return this.checkIndex(t.index,!0)}return!1},uncheckItem:function(e){if(e!=null){var t=this._getItemByParam(e);return this.uncheckIndex(t.index,!0)}return!1},indeterminateItem:function(e){if(e!=null){var t=this._getItemByParam(e);return this.indeterminateIndex(t.index,!0)}return!1},val:function(e){if(this.input&&arguments.length==0)return this.input.val();var t=this.getItemByValue(e);t!=null&&this.selectItem(t);if(this.input)return this.input.val()},selectItem:function(e){if(e!=null){if(e.index==undefined){var t=this.getItemByValue(e);t&&(e=t)}return this.selectIndex(e.visibleIndex,!0)}return!1},unselectItem:function(e){if(e!=null){if(e.index==undefined){var t=this.getItemByValue(e);t&&(e=t)}return this.unselectIndex(e.visibleIndex,!0)}return!1},selectIndex:function(e,t,n,r,i,s){if(isNaN(e))return;if(e<-1||e>=this.visibleItems.length)return;if(this.visibleItems[e]!=null&&this.visibleItems[e].disabled)return;if(this.disabled)return;if(!this.multiple&&!this.multipleextended&&this.selectedIndex==e&&!r){this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(a=this.getVisibleItem(e),a&&(this.selectedValue=a.value));return}if(this.checkboxes){this._updateCheckedItems();return}this.focused=!0;var o=!1;this.selectedIndex!=e&&(o=!0);var u=this.selectedIndex;this.selectedIndex==e&&!this.multiple&&(u=-1),i==undefined&&(i="none");var a=this.getItem(e),f=this.getItem(u);this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(a=this.getVisibleItem(e),f=this.getVisibleItem(u));if(r!=undefined&&r)this._raiseEvent("1",{index:u,type:i,item:f,originalEvent:s}),this.selectedIndex=e,this.selectedIndexes[u]=-1,this.selectedIndexes[e]=e,a&&(this.selectedValue=a.value),this._raiseEvent("0",{index:e,type:i,item:a,originalEvent:s});else{var l=this,c=function(e,t,n,r,i,s){l._raiseEvent("1",{index:t,type:n,item:r,originalEvent:s}),l.selectedIndex=e,l.selectedIndexes[t]=-1,t=e,l.selectedIndexes[e]=e,l._raiseEvent("0",{index:e,type:n,item:i,originalEvent:s})},h=function(e,t,n,r,i,s){l.selectedIndexes[e]==undefined||l.selectedIndexes[e]==-1?(l.selectedIndexes[e]=e,l.selectedIndex=e,l._raiseEvent("0",{index:e,type:n,item:i,originalEvent:s})):(t=l.selectedIndexes[e],r=l.getVisibleItem(t),l.selectedIndexes[e]=-1,l.selectedIndex=-1,l._raiseEvent("1",{index:t,type:n,item:r,originalEvent:s}))};if(this.multipleextended){if(!this._shiftKey&&!this._ctrlKey)i!="keyboard"&&i!="mouse"?(h(e,u,i,f,a,s),l._clickedIndex=e):(this.clearSelection(!1),l._clickedIndex=e,c(e,u,i,f,a,s));else if(this._ctrlKey)i=="keyboard"&&(this.clearSelection(!1),l._clickedIndex=e),h(e,u,i,f,a,s);else if(this._shiftKey){l._clickedIndex==undefined&&(l._clickedIndex=u);var p=Math.min(l._clickedIndex,e),d=Math.max(l._clickedIndex,e);this.clearSelection(!1);for(var v=p;v<=d;v++)l.selectedIndexes[v]=v,l._raiseEvent("0",{index:v,type:i,item:this.getVisibleItem(v),originalEvent:s});i!="keyboard"?l.selectedIndex=l._clickedIndex:l.selectedIndex=e}}else this.multiple?h(e,u,i,f,a,s):(a&&(this.selectedValue=a.value),c(e,u,i,f,a,s))}return(n==undefined||n==1)&&this._renderItems(),t!=undefined&&t!=null&&t==1&&this.ensureVisible(e),this._raiseEvent("2",{index:e,item:a,oldItem:f,type:i}),this._updateInputSelection(),o},_updateInputSelection:function(){if(this.input){this.selectedIndex==-1?this.input.val(""):this.items&&this.items[this.selectedIndex]!=undefined&&this.input.val(this.items[this.selectedIndex].value);if(this.multiple||this.multipleextended||this.checkboxes){var e=this.checkboxes?this.getCheckedItems():this.getSelectedItems(),t="";if(e){for(var n=0;n<e.length;n++)undefined!=e[n]&&(n==e.length-1?t+=e[n].value:t+=e[n].value+",");this.input.val(t)}}}},isIndexInView:function(e){if(isNaN(e))return!1;if(!this.items)return!1;if(e<0||e>=this.items.length)return!1;var t=this.vScrollInstance.value,n=this.visibleItems[e];if(n==undefined)return!0;var r=n.initialTop,i=n.height;return r-t<0||r-t+i>=this.host.outerHeight()?!1:!0},_itemsInPage:function(){var t=0,n=this;return this.items&&e.each(this.items,function(){if(this.initialTop+this.height>=n.content.height())return!1;t++}),t},_firstItemIndex:function(){return this.visibleItems!=null?this.visibleItems[0]?this.visibleItems[0].isGroup?this._nextItemIndex(0):0:0:-1},_lastItemIndex:function(){return this.visibleItems!=null?this.visibleItems[this.visibleItems.length-1]?this.visibleItems[this.visibleItems.length-1].isGroup?this._prevItemIndex(this.visibleItems.length-1):this.visibleItems.length-1:this.visibleItems.length-1:-1},_nextItemIndex:function(e){for(indx=e+1;indx<this.visibleItems.length;indx++)if(this.visibleItems[indx]&&!this.visibleItems[indx].disabled&&!this.visibleItems[indx].isGroup)return indx;return-1},_prevItemIndex:function(e){for(indx=e-1;indx>=0;indx--)if(this.visibleItems[indx]&&!this.visibleItems[indx].disabled&&!this.visibleItems[indx].isGroup)return indx;return-1},_getMatches:function(t,n){if(t==undefined||t.length==0)return-1;n==undefined&&(n=0);var r=this.getItems(),i=this,s=-1,o=0;return e.each(r,function(r){var o="";if(!this.isGroup){this.label?o=this.label.toString():this.value?o=this.value.toString():this.title?o=this.title.toString():o="jqxItem";var u=!1;switch(i.searchMode){case"containsignorecase":u=e.jqx.string.containsIgnoreCase(o,t);break;case"contains":u=e.jqx.string.contains(o,t);break;case"equals":u=e.jqx.string.equals(o,t);break;case"equalsignorecase":u=e.jqx.string.equalsIgnoreCase(o,t);break;case"startswith":u=e.jqx.string.startsWith(o,t);break;case"startswithignorecase":u=e.jqx.string.startsWithIgnoreCase(o,t);break;case"endswith":u=e.jqx.string.endsWith(o,t);break;case"endswithignorecase":u=e.jqx.string.endsWithIgnoreCase(o,t)}if(u&&this.visibleIndex>=n)return s=this.visibleIndex,!1}}),s},findItems:function(t){var n=this.getItems(),r=this,i=0,s=new Array;return e.each(n,function(n){var o="";if(!this.isGroup){this.label?o=this.label:this.value?o=this.value:this.title?o=this.title:o="jqxItem";var u=!1;switch(r.searchMode){case"containsignorecase":u=e.jqx.string.containsIgnoreCase(o,t);break;case"contains":u=e.jqx.string.contains(o,t);break;case"equals":u=e.jqx.string.equals(o,t);break;case"equalsignorecase":u=e.jqx.string.equalsIgnoreCase(o,t);break;case"startswith":u=e.jqx.string.startsWith(o,t);break;case"startswithignorecase":u=e.jqx.string.startsWithIgnoreCase(o,t);break;case"endswith":u=e.jqx.string.endsWith(o,t);break;case"endswithignorecase":u=e.jqx.string.endsWithIgnoreCase(o,t)}u&&(s[i++]=this)}}),s},_handleKeyDown:function(e){var t=e.keyCode,n=this,r=n.selectedIndex,i=n.selectedIndex,s=!1;if(!this.keyboardNavigation||!this.enableSelection)return;var o=function(){n.multiple&&n.clearSelection(!1)};e.altKey&&(t=-1);if(n.incrementalSearch){var u=-1;n._searchString||(n._searchString=""),(t==8||t==46)&&n._searchString.length>=1&&(n._searchString=n._searchString.substr(0,n._searchString.length-1));var a=String.fromCharCode(t),f=!isNaN(parseInt(a)),l=!1;if(t>=65&&t<=97||f||t==8||t==32||t==46){e.shiftKey||(a=a.toLocaleLowerCase());var c=1+n.selectedIndex;t!=8&&t!=32&&t!=46&&(n._searchString.length>0&&n._searchString.substr(0,1)==a?c=1+n.selectedIndex:n._searchString+=a),t==32&&(n._searchString+=" ");var h=this._getMatches(n._searchString,c);u=h;if(u==n._lastMatchIndex||u==-1){var h=this._getMatches(n._searchString,0);u=h}n._lastMatchIndex=u;if(u>=0){var p=function(){o(),n.selectIndex(u,!1,!1,!1,"keyboard",e);var t=n.isIndexInView(u);t?n._renderItems():n.ensureVisible(u)};n._toSelectTimer&&clearTimeout(n._toSelectTimer),n._toSelectTimer=setTimeout(function(){p()},n.incrementalSearchKeyDownDelay)}l=!0}n._searchTimer!=undefined&&clearTimeout(n._searchTimer);if(t==27||t==13)n._searchString="";n._searchTimer=setTimeout(function(){n._searchString="",n._renderItems()},n.incrementalSearchDelay);if(u>=0)return;if(l)return!1}if(this.checkboxes)return!0;if(t==33){var d=n._itemsInPage();n.selectedIndex-d>=0?(o(),n.selectIndex(i-d,!1,!1,!1,"keyboard",e)):(o(),n.selectIndex(n._firstItemIndex(),!1,!1,!1,"keyboard",e)),n._searchString=""}if(t==32&&this.checkboxes){var v=this.getItem(r);v!=null&&(n._updateItemCheck(v,r),e.preventDefault()),n._searchString=""}t==36&&(o(),n.selectIndex(n._firstItemIndex(),!1,!1,!1,"keyboard",e),n._searchString=""),t==35&&(o(),n.selectIndex(n._lastItemIndex(),!1,!1,!1,"keyboard",e),n._searchString="");if(t==34){var d=n._itemsInPage();n.selectedIndex+d<n.visibleItems.length?(o(),n.selectIndex(i+d,!1,!1,!1,"keyboard",e)):(o(),n.selectIndex(n._lastItemIndex(),!1,!1,!1,"keyboard",e)),n._searchString=""}if(t==38){n._searchString="";if(!(n.selectedIndex>0))return!1;var m=n._prevItemIndex(n.selectedIndex);if(m==n.selectedIndex||m==-1)return!0;o(),n.selectIndex(m,!1,!1,!1,"keyboard",e)}else if(t==40){n._searchString="";if(!(n.selectedIndex+1<n.visibleItems.length))return!1;var m=n._nextItemIndex(n.selectedIndex);if(m==n.selectedIndex||m==-1)return!0;o(),n.selectIndex(m,!1,!1,!1,"keyboard",e)}if(t==35||t==36||t==38||t==40||t==34||t==33){var g=n.isIndexInView(n.selectedIndex);return g?n._renderItems():n.ensureVisible(n.selectedIndex),!1}return!0},_updateItemCheck:function(e,t){e.checked==1?e.checked=e.hasThreeStates&&this.hasThreeStates?null:!1:e.checked=e.checked!=null;switch(e.checked){case!0:this.checkIndex(t);break;case!1:this.uncheckIndex(t);break;default:this.indeterminateIndex(t)}},wheel:function(e,t){if(t.autoHeight||!t.enableMouseWheel)return e.returnValue=!0,!0;if(t.disabled)return!0;var n=0;e||(e=window.event),e.originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?n=e.wheelDelta/120:e.detail&&(n=-e.detail/3);if(n){var r=t._handleDelta(n);return r&&(e.preventDefault&&e.preventDefault(),e.originalEvent!=null&&(e.originalEvent.mouseHandled=!0),e.stopPropagation!=undefined&&e.stopPropagation()),r?(r=!1,e.returnValue=r,r):!1}e.preventDefault&&e.preventDefault(),e.returnValue=!1},_handleDelta:function(e){var t=this.vScrollInstance.value;e<0?this.scrollDown():this.scrollUp();var n=this.vScrollInstance.value;return t!=n?!0:!1},focus:function(){try{this.focused=!0,this.host.focus();var e=this;setTimeout(function(){e.host.focus()},10)}catch(t){}},_removeHandlers:function(){var t=this;this.removeHandler(e(document),"keydown.listbox"+this.element.id),this.removeHandler(e(document),"keyup.listbox"+this.element.id),this.removeHandler(this.vScrollBar,"valuechanged"),this.removeHandler(this.hScrollBar,"valuechanged"),this._mousewheelfunc?this.removeHandler(this.host,"mousewheel",this._mousewheelfunc):this.removeHandler(this.host,"mousewheel"),this.removeHandler(this.host,"keydown"),this.removeHandler(this.content,"mouseleave"),this.removeHandler(this.content,"focus"),this.removeHandler(this.content,"blur"),this.removeHandler(this.host,"focus"),this.removeHandler(this.host,"blur"),this.removeHandler(this.content,"mouseenter"),this.removeHandler(this.content,"mouseup"),this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"touchend"),this._mousemovefunc?this.removeHandler(this.content,"mousemove",this._mousemovefunc):this.removeHandler(this.content,"mousemove"),this.removeHandler(this.content,"selectstart"),this.overlayContent&&this.removeHandler(this.overlayContent,e.jqx.mobile.getTouchEventName("touchend"))},_updateSize:function(){this.virtualSize||(this._oldheight=null,this.virtualSize=this._calculateVirtualSize());var e=this;e._arrange();if(e.host.height()!=e._oldheight||e.host.width()!=e._oldwidth){var t=e.host.width()!=e._oldwidth;if(e.autoItemsHeight)e._render(!1);else if(e.items)if(e.items.length>0&&e.virtualItemsCount*e.items[0].height<e._oldheight-2)e._render(!1);else{var n=e.vScrollInstance.value;e._updatescrollbars(),e._renderItems(),n<e.vScrollInstance.max?e.vScrollInstance.setPosition(n):e.vScrollInstance.setPosition(e.vScrollInstance.max)}e._oldwidth=e.host.width(),e._oldheight=e.host.height()}},_addHandlers:function(){var t=this;this.focused=!1;var n=!1,r=0,i=null,r=0,s=0,o=new Date,u=this.isTouchDevice();this.addHandler(this.vScrollBar,"valuechanged",function(n){e.jqx.browser.msie&&e.jqx.browser.version>9?setTimeout(function(){t._renderItems()},1):t._renderItems()}),this.addHandler(this.hScrollBar,"valuechanged",function(){t._renderItems()}),this._mousewheelfunc&&this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this._mousewheelfunc=function(e){t.wheel(e,t)},this.addHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(e(document),"keydown.listbox"+this.element.id,function(e){t._ctrlKey=e.ctrlKey,t._shiftKey=e.shiftKey}),this.addHandler(e(document),"keyup.listbox"+this.element.id,function(e){t._ctrlKey=e.ctrlKey,t._shiftKey=e.shiftKey}),this.addHandler(this.host,"keydown",function(e){return t._handleKeyDown(e)}),this.addHandler(this.content,"mouseleave",function(n){t.focused=!1;var r=e.data(t.element,"hoveredItem");r!=null&&(e(r).removeClass(t.toThemeProperty("jqx-listitem-state-hover")),e(r).removeClass(t.toThemeProperty("jqx-fill-state-hover")),e.data(t.element,"hoveredItem",null))}),this.addHandler(this.content,"focus",function(e){t.disabled||(t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")),t.focused=!0)}),this.addHandler(this.content,"blur",function(e){t.focused=!1,t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this.host,"focus",function(e){t.disabled||(t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")),t.focused=!0)}),this.addHandler(this.host,"blur",function(n){if(e.jqx.browser.msie&&e.jqx.browser.version<9&&t.focused)return;t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")),t.focused=!1}),this.addHandler(this.content,"mouseenter",function(e){t.focused=!0});var a=e.jqx.utilities.hasTransform(this.host);if(this.enableSelection){var f=t.isTouchDevice()&&this.touchMode!==!0,l=f?"touchend":"mousedown";this.overlayContent?this.addHandler(this.overlayContent,e.jqx.mobile.getTouchEventName("touchend"),function(n){if(!t.enableSelection)return!0;if(f){t._newScroll=new Date;if(t._newScroll-t._lastScroll<500)return!0}var r=e.jqx.mobile.getTouches(n),i=r[0];if(i!=undefined){var s=t.host.offset(),o=parseInt(i.pageX),u=parseInt(i.pageY);t.touchMode==1&&(o=parseInt(i._pageX),u=parseInt(i._pageY)),o-=s.left,u-=s.top;var a=t._hitTest(o,u);if(a!=null&&!a.isGroup){t._newScroll=new Date;if(t._newScroll-t._lastScroll<500)return!1;if(t.checkboxes){t._updateItemCheck(a,a.visibleIndex);return}if(a.html.indexOf("href")==-1)return t.selectIndex(a.visibleIndex,!1,!0,!1,"mouse",n),t.content.trigger("click"),!1;setTimeout(function(){return t.selectIndex(a.visibleIndex,!1,!0,!1,"mouse",n),t.content.trigger("click"),!1},100)}}}):this.addHandler(this.content,l,function(n){if(!t.enableSelection)return!0;if(f){t._newScroll=new Date;if(t._newScroll-t._lastScroll<500)return!1}t.focused=!0,t.isTouchDevice()||t.host.focus();if(n.target.id!="listBoxContent"+t.element.id&&t.itemswrapper[0]!=n.target){var r=n.target,i=e(r).offset(),s=t.host.offset();if(a){var o=e.jqx.mobile.getLeftPos(r),u=e.jqx.mobile.getTopPos(r);i.left=o,i.top=u,o=e.jqx.mobile.getLeftPos(t.element),u=e.jqx.mobile.getTopPos(t.element),s.left=o,s.top=u}var c=parseInt(i.top)-parseInt(s.top),h=parseInt(i.left)-parseInt(s.left),p=t._hitTest(h,c);if(p!=null&&!p.isGroup){var d=function(e,n){t._shiftKey||(t._clickedIndex=e.visibleIndex);if(!t.checkboxes)t.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",n);else{t.selectedIndex=e.visibleIndex,h=20+n.pageX-i.left;if(t.rtl){var r=t.hScrollBar.css("visibility")!="hidden"?t.hScrollInstance.max:t.host.width();h<=t.host.width()-20&&t._updateItemCheck(e,e.visibleIndex)}else h+t.hScrollInstance.value>=20&&t._updateItemCheck(e,e.visibleIndex)}};p.disabled||(p.html.indexOf("href")!=-1?setTimeout(function(){d(p,n)},100):d(p,n))}if(l=="mousedown"){var v=!1;return n.which?v=n.which==3:n.button&&(v=n.button==2),v?!0:!1}}return!0}),this.addHandler(this.content,"mouseup",function(e){t.vScrollInstance.handlemouseup(t,e)}),e.jqx.browser.msie&&this.addHandler(this.content,"selectstart",function(e){return!1})}var u=this.isTouchDevice();this.enableHover&&!u&&(this._mousemovefunc=function(n){if(u)return!0;if(!t.enableHover)return!0;var r=e.jqx.browser.msie==1&&e.jqx.browser.version<9?0:1;if(n.target==null)return!0;if(t.disabled)return!0;t.focused=!0;var i=t.vScrollInstance.isScrolling();if(!i&&n.target.id!="listBoxContent"+t.element.id&&t.itemswrapper[0]!=n.target){var s=n.target,o=e(s).offset(),f=t.host.offset();if(a){var l=e.jqx.mobile.getLeftPos(s),c=e.jqx.mobile.getTopPos(s);o.left=l,o.top=c,l=e.jqx.mobile.getLeftPos(t.element),c=e.jqx.mobile.getTopPos(t.element),f.left=l,f.top=c}var h=parseInt(o.top)-parseInt(f.top),p=parseInt(o.left)-parseInt(f.left),d=t._hitTest(p,h);if(d!=null&&!d.isGroup&&!d.disabled){var v=e.data(t.element,"hoveredItem");v!=null&&(e(v).removeClass(t.toThemeProperty("jqx-listitem-state-hover")),e(v).removeClass(t.toThemeProperty("jqx-fill-state-hover"))),e.data(t.element,"hoveredItem",d.element);var m=e(d.element);m.addClass(t.toThemeProperty("jqx-listitem-state-hover")),m.addClass(t.toThemeProperty("jqx-fill-state-hover"))}}},this.addHandler(this.content,"mousemove",this._mousemovefunc))},_arrange:function(e){e==undefined&&(e=!0);var t=null,n=null,r=this,i=function(e){return e=r.host.height(),e==0&&(e=200,r.host.height(e)),e};this.width!=null&&this.width.toString().indexOf("px")!=-1?t=this.width:this.width!=undefined&&!isNaN(this.width)&&(t=this.width),this.height!=null&&this.height.toString().indexOf("px")!=-1?n=this.height:this.height!=undefined&&!isNaN(this.height)&&(n=this.height),this.width!=null&&this.width.toString().indexOf("%")!=-1&&(this.host.css("width",this.width),t=this.host.width()),this.height!=null&&this.height.toString().indexOf("%")!=-1&&(this.host.css("height",this.height),n=i(n)),t!=null&&(t=parseInt(t),parseInt(this.element.style.width)!=parseInt(this.width)&&this.host.width(this.width)),this.autoHeight?this.virtualSize&&(this.hScrollBar.css("visibility")!="hidden"?(this.host.height(this.virtualSize.height+parseInt(this.scrollBarSize)+3),this.height=this.virtualSize.height+parseInt(this.scrollBarSize)+3,n=this.height):(this.host.height(this.virtualSize.height),this.height=this.virtualSize.height,n=this.virtualSize.height)):n!=null&&(n=parseInt(n),parseInt(this.element.style.height)!=parseInt(this.height)&&(this.host.height(this.height),i(n)));var s=this.scrollBarSize;isNaN(s)&&(s=parseInt(s),isNaN(s)?s="17px":s+="px"),s=parseInt(s);var o=4,u=2,a=0;if(!this.vScrollBar)return;this.vScrollBar[0].style.visibility!="hidden"?a=s+o:this.vScrollInstance.setPosition(0);if(!this.hScrollBar)return;this.hScrollBar[0].style.visibility!="hidden"?u=s+o:this.hScrollInstance.setPosition(0),this.autoItemsHeight&&(this.hScrollBar[0].style.visibility="hidden",u=0),n==null&&(n=0);var f=parseInt(n)-o-s;f<0&&(f=0),parseInt(this.hScrollBar[0].style.height)!=s&&(parseInt(s)<0&&(s=0),this.hScrollBar[0].style.height=parseInt(s)+"px"),this.hScrollBar[0].style.top!=f+"px"&&(this.hScrollBar[0].style.top=f+"px",this.hScrollBar[0].style.left="0px");var l=t-s-o;l<0&&(l=0);var c=l+"px";this.hScrollBar[0].style.width!=c&&(this.hScrollBar[0].style.width=c),a==0&&t>=2&&(this.hScrollBar[0].style.width=parseInt(t-2)+"px"),s!=parseInt(this.vScrollBar[0].style.width)&&(this.vScrollBar[0].style.width=parseInt(s)+"px");if(parseInt(n)-u!=parseInt(this.vScrollBar[0].style.height)){var h=parseInt(n)-u;h<0&&(h=0),this.vScrollBar[0].style.height=h+"px"}t==null&&(t=0);var p=parseInt(t)-parseInt(s)-o+"px";p!=this.vScrollBar[0].style.left&&(parseInt(p)>=0&&(this.vScrollBar[0].style.left=p),this.vScrollBar[0].style.top="0px");var d=this.vScrollInstance;d.disabled=this.disabled,e&&d._arrange();var v=this.hScrollInstance;v.disabled=this.disabled,e&&v._arrange(),this.vScrollBar[0].style.visibility!="hidden"&&this.hScrollBar[0].style.visibility!="hidden"?(this.bottomRight[0].style.visibility="inherit",this.bottomRight[0].style.left=1+parseInt(this.vScrollBar[0].style.left)+"px",this.bottomRight[0].style.top=1+parseInt(this.hScrollBar[0].style.top)+"px",this.rtl&&this.bottomRight.css({left:0}),this.bottomRight[0].style.width=parseInt(s)+3+"px",this.bottomRight[0].style.height=parseInt(s)+3+"px"):this.bottomRight[0].style.visibility="hidden";if(parseInt(this.content[0].style.width)!=parseInt(t)-a){var m=parseInt(t)-a;m<0&&(m=0),this.content[0].style.width=m+"px"}this.rtl&&(this.vScrollBar.css({left:"0px",top:"0px"}),this.hScrollBar.css({left:this.vScrollBar.width()+2+"px"}),this.vScrollBar[0].style.visibility!="hidden"?this.content.css("margin-left",4+this.vScrollBar.width()):(this.content.css("margin-left",0),this.hScrollBar.css({left:"0px"})));if(parseInt(this.content[0].style.height)!=parseInt(n)-u){var g=parseInt(n)-u;g<0&&(g=0),this.content[0].style.height=g+"px"}this.overlayContent&&(this.overlayContent.width(parseInt(t)-a),this.overlayContent.height(parseInt(n)-u))},ensureVisible:function(t){if(isNaN(t)){var n=this.getItemByValue(t);n&&(t=n.index)}var r=this.isIndexInView(t);if(!r){if(t<0)return;if(this.autoHeight){var i=e.data(this.vScrollBar[0],"jqxScrollBar").instance;i.setPosition(0)}else for(indx=0;indx<this.visibleItems.length;indx++){var n=this.visibleItems[indx];if(n.visibleIndex==t&&!n.isGroup){var i=e.data(this.vScrollBar[0],"jqxScrollBar").instance,s=i.value,o=this.hScrollBar.css("visibility")==="hidden",u=o?0:this.scrollBarSize+4;n.initialTop<s?i.setPosition(n.initialTop):n.initialTop+n.height>s+this.host.height()&&i.setPosition(n.initialTop+n.height+2-this.host.height()+u);break}}}this._renderItems()},scrollTo:function(e,t){this.vScrollBar.css("visibility")!="hidden"&&this.vScrollInstance.setPosition(t),this.hScrollBar.css("visibility")!="hidden"&&this.hScrollInstance.setPosition(e)},scrollDown:function(){if(this.vScrollBar.css("visibility")=="hidden")return!1;var e=this.vScrollInstance;return e.value+e.largestep<=e.max?(e.setPosition(e.value+e.largestep),!0):(e.setPosition(e.max),!0)},scrollUp:function(){if(this.vScrollBar.css("visibility")=="hidden")return!1;var e=this.vScrollInstance;return e.value-e.largestep>=e.min?(e.setPosition(e.value-e.largestep),!0):e.value!=e.min?(e.setPosition(e.min),!0):!1},databind:function(t){this.records=new Array;var n=t._source?!0:!1,r=new e.jqx.dataAdapter(t,{autoBind:!1});n&&(r=t,t=t._source);var i=function(e){t.type!=undefined&&(r._options.type=t.type),t.formatdata!=undefined&&(r._options.formatData=t.formatdata),t.contenttype!=undefined&&(r._options.contentType=t.contenttype),t.async!=undefined&&(r._options.async=t.async)},s=function(t,n){var i=function(n){if(typeof n=="string")var r=n,i=n;else var i=n[t.valueMember],r=n[t.displayMember];var s=new e.jqx._jqxListBox.item;return s.label=r,s.value=i,s.html="",s.visible=!0,s.originalItem=n,s.group="",s.groupHtml="",s.disabled=!1,s.hasThreeStates=!0,s};if(n!=undefined){var s=r._changedrecords[0];if(s){e.each(r._changedrecords,function(){var e=this.index,r=this.record;if(n!="remove")var s=i(r);switch(n){case"update":t.updateAt(s,e);break;case"add":t.insertAt(s,e);break;case"remove":t.removeAt(e)}});return}}t.records=r.records;var o=t.records.length;t.items=new Array,t.itemsByValue=new Array;for(var u=0;u<o;u++){var a=t.records[u],f=i(a);f.index=u,t.items[u]=f;var l=f.value;if(f.value==""||f.value==null)l=u;t.itemsByValue[e.trim(l).split(" ").join("")]=f}t._render(),t._raiseEvent("6")};i(this);var o=this;switch(t.datatype){case"local":case"array":default:t.localdata!=null&&(r.unbindBindingUpdate(this.element.id),r.dataBind(),s(this),r.bindBindingUpdate(this.element.id,function(e){s(o,e)}));break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(t.localdata!=null){r.unbindBindingUpdate(this.element.id),r.dataBind(),s(this),r.bindBindingUpdate(this.element.id,function(){s(o)});return}var u={};r._options.data?e.extend(r._options.data,u):(t.data&&e.extend(u,t.data),r._options.data=u);var a=function(){s(o)};r.unbindDownloadComplete(o.element.id),r.bindDownloadComplete(o.element.id,a),r.dataBind()}},loadItems:function(t){if(t==null){this.groups=new Array,this.items=new Array,this.visualItems=new Array;return}var n=this,r=0,i=0,s=0;this.groups=new Array,this.items=new Array,this.visualItems=new Array;var o=new Array;this.itemsByValue=new Array,e.map(t,function(t){if(t==undefined)return null;var u=new e.jqx._jqxListBox.item,a=t.group,f=t.groupHtml,l=t.title;if(l==null||l==undefined)l="";if(a==null||a==undefined)a="";if(f==null||f==undefined)f="";if(!n.groups[a]){n.groups[a]={items:new Array,index:-1,caption:a,captionHtml:f},r++;var c=r+"jqxGroup";n.groups[c]=n.groups[a],i++,n.groups.length=i}var h=n.groups[a];return h.index++,h.items[h.index]=u,typeof t=="string"?(u.label=t,u.value=t):t.label==null&&t.value==null&&t.html==null&&t.group==null&&t.groupHtml==null?(u.label=t.toString(),u.value=t.toString()):(u.label=t.label||t.value,u.value=t.value||t.label),typeof t!="string"&&(n.displayMember!=""&&t[n.displayMember]!=undefined&&(u.label=t[n.displayMember]),n.valueMember!=""&&(u.value=t[n.valueMember])),u.hasThreeStates=t.hasThreeStates!=undefined?t.hasThreeStates:!0,u.originalItem=t,u.title=l,u.html=t.html||"",t.html&&t.html!=""&&l&&l!="",u.group=a,u.checked=t.checked||!1,u.groupHtml=t.groupHtml||"",u.disabled=t.disabled||!1,u.visible=t.visible!=undefined?t.visible:!0,u.index=s,o[s]=u,s++,u});var u=new Array,a=0;if(this.fromSelect==undefined||this.fromSelect==0)for(var f=0;f<i;f++){var r=f+1,l=r+"jqxGroup",c=this.groups[l];if(c==undefined||c==null)break;if(f==0&&c.caption==""&&c.captionHtml==""&&i<=1){for(var h=0;h<c.items.length;h++){var p=c.items[h].value;if(c.items[h].value==""||c.items[h].value==null)p=h;this.itemsByValue[e.trim(p).split(" ").join("")]=c.items[h]}return c.items}var d=new e.jqx._jqxListBox.item;d.isGroup=!0,d.label=c.caption,c.caption==""&&c.captionHtml==""&&(c.caption=this.emptyGroupText,d.label=c.caption),d.html=c.captionHtml,u[a]=d,a++;for(var v=0;v<c.items.length;v++){u[a]=c.items[v];var p=c.items[v].value;if(c.items[v].value==""||c.items[v].value==null)p=a;n.itemsByValue[e.trim(p).split(" ").join("")]=c.items[v],a++}}else{var a=0,m=new Array;e.each(o,function(){if(!m[this.group]&&this.group!=""){var t=new e.jqx._jqxListBox.item;t.isGroup=!0,t.label=this.group,u[a]=t,a++,m[this.group]=!0}u[a]=this;var r=this.value;if(this.value==""||this.value==null)r=a-1;n.itemsByValue[e.trim(r).split(" ").join("")]=this,a++})}return u},_mapItem:function(t){var n=new e.jqx._jqxListBox.item;return this.displayMember&&(t.label==undefined&&(t.label=t[this.displayMember]),t.value==undefined&&(t.value=t[this.valueMember])),typeof t=="string"?(n.label=t,n.value=t):typeof t=="number"?(n.label=t.toString(),n.value=t.toString()):(n.label=t.label||t.value,n.value=t.value||t.label),n.label==undefined&&n.value==undefined&&n.html==undefined&&(n.label=n.value=t),n.html=t.html||"",n.group=t.group||"",n.title=t.title||"",n.groupHtml=t.groupHtml||"",n.disabled=t.disabled||!1,n.visible=t.visible||!0,n},addItem:function(e){return this.insertAt(e,this.items?this.items.length:0)},_getItemByParam:function(e){if(e!=null&&e.index==undefined){var t=this.getItemByValue(e);t&&(e=t)}return e},insertItem:function(e,t){var n=this._getItemByParam(e);return this.insertAt(n,t)},updateItem:function(e,t){var n=this._getItemByParam(t);return n&&n.index!=undefined?this.updateAt(e,n.index):!1},updateAt:function(t,n){if(t!=null){var r=this._mapItem(t);this.itemsByValue[e.trim(r.value).split(" ").join("")]=this.items[n],this.items[n].value=r.value,this.items[n].label=r.label,this.items[n].html=r.html,this.items[n].disabled=r.disabled}this._cachedItemHtml=[],this._renderItems(),this.rendered&&this.rendered()},insertAt:function(t,n){if(t==null)return!1;this._cachedItemHtml=[];if(this.items==undefined||this.items.length==0){this.source=new Array,this.refresh();var r=this._mapItem(t);r.index=0,this.items[this.items.length]=r,this._addItems(!0),this._renderItems(),this.rendered&&this.rendered(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop();var i=r.value;if(r.value==""||r.value==null)i=n;return this.itemsByValue[e.trim(i).split(" ").join("")]=r,!1}var r=this._mapItem(t);if(n==-1||n==undefined||n==null||n>=this.items.length)r.index=this.items.length,this.items[this.items.length]=r;else{var s=new Array,o=0,u=!1,a=0;for(var f=0;f<this.items.length;f++)this.items[f].isGroup==0&&a>=n&&!u&&(s[o++]=r,r.index=n,a++,u=!0),s[o]=this.items[f],this.items[f].isGroup||(s[o].index=a,a++),o++;this.items=s}var i=r.value;if(r.value==""||r.value==null)i=n;this.itemsByValue[e.trim(i).split(" ").join("")]=r,this.visibleItems=new Array,this.renderedVisibleItems=new Array;var l=e.data(this.vScrollBar[0],"jqxScrollBar").instance,c=l.value;return l.setPosition(0),this.allowDrag&&this._enableDragDrop||this.virtualSize&&this.virtualSize.height<10+this.host.height()?this._addItems(!0):this._addItems(!1),this._renderItems(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop(),l.setPosition(c),this.rendered&&this.rendered(),!0},removeAt:function(t){if(t<0||t>this.items.length-1)return!1;if(t==undefined)return!1;var n=this.items[t].height,r=this.items[t].value;if(r==""||r==null)r=t;this.itemsByValue[e.trim(r).split(" ").join("")]=null,this.items.splice(t,1);var i=new Array,s=0,o=!1,u=0;for(var a=0;a<this.items.length;a++)i[s]=this.items[a],this.items[a].isGroup||(i[s].index=u,u++),s++;this.items=i;var f=e.data(this.vScrollBar[0],"jqxScrollBar").instance,f=e.data(this.vScrollBar[0],"jqxScrollBar").instance,l=f.value;f.setPosition(0),this.visibleItems=new Array,this.renderedVisibleItems=new Array;if(this.items.length>0){if(this.virtualSize){this.virtualSize.height-=n;var c=this.virtualSize.itemsPerPage*2;this.autoHeight&&(c=this.items.length),this.virtualItemsCount=Math.min(c,this.items.length)}this._updatescrollbars()}else this._addItems();this._renderItems(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop(),this.vScrollBar.css("visibility")!="hidden"?f.setPosition(l):f.setPosition(0),this.itemsByValue=new Array;for(var h=0;h<this.items.length;h++){var r=this.items[h].value;if(this.items[h].value==""||this.items[h].value==null)r=h;this.itemsByValue[e.trim(r).split(" ").join("")]=this.items[h]}return this.rendered&&this.rendered(),!0},removeItem:function(e){var t=this._getItemByParam(e);this.removeAt(t.index)},getItems:function(){return this.items},disableItem:function(e){var t=this._getItemByParam(e);this.disableAt(t.index)},enableItem:function(e){var t=this._getItemByParam(e);this.enableAt(t.index)},disableAt:function(e){return this.items?e<0||e>this.items.length-1?!1:(this.items[e].disabled=!0,this._renderItems(),!0):!1},enableAt:function(e){return this.items?e<0||e>this.items.length-1?!1:(this.items[e].disabled=!1,this._renderItems(),!0):!1},destroy:function(){this.source&&this.source.unbindBindingUpdate&&this.source.unbindBindingUpdate(this.element.id),this._removeHandlers(),this.vScrollBar.jqxScrollBar("destroy"),this.hScrollBar.jqxScrollBar("destroy"),this.vScrollBar.remove(),this.hScrollBar.remove(),this.content.remove(),e.jqx.utilities.resize(this.host,null,!0);var t=e.data(this.element,"jqxListBox");delete this.hScrollInstance,delete this.vScrollInstance,delete this.vScrollBar,delete this.hScrollBar,delete this.content,delete this.bottomRight,delete this.itemswrapper,delete this.visualItems,delete this.visibleItems,delete this.items,delete this.groups,delete this.renderedVisibleItems,delete this._mousewheelfunc,delete this._mousemovefunc,delete this._cachedItemHtml,delete this.itemsByValue,delete this._activeElement,delete this.source,delete this.events,this.input&&(this.input.remove(),delete this.input),t&&delete t.instance,this.host.removeData(),this.host.removeClass(),this.host.remove(),this.element=null,delete this.element,this.host=null,delete this.set,delete this.get,delete this.call,delete this.host},_raiseEvent:function(e,t){if(this._stopEvents==1)return!0;t==undefined&&(t={owner:null});var n=this.events[e];args=t,args.owner=this,this._updateInputSelection();var r=new jQuery.Event(n);r.owner=this,r.args=args;if(this.host!=null)var i=this.host.trigger(r);return i}})}(jQuery),function(e){e.jqx._jqxListBox.item=function(){var e={group:"",groupHtml:"",selected:!1,isGroup:!1,highlighted:!1,value:null,label:"",html:null,visible:!0,disabled:!1,element:null,width:null,height:null,initialTop:null,top:null,left:null,title:"",index:-1,checkBoxElement:null,originalItem:null,checked:!1,visibleIndex:-1};return e}}(jQuery),function(e){e.jqx.jqxWidget("jqxDropDownList","",{}),e.extend(e.jqx._jqxDropDownList.prototype,{defineInstance:function(){this.disabled=!1,this.width=null,this.height=null,this.items=new Array,this.selectedIndex=-1,this.source=null,this.scrollBarSize=15,this.arrowSize=19,this.enableHover=!0,this.enableSelection=!0,this.visualItems=new Array,this.groups=new Array,this.equalItemsWidth=!0,this.itemHeight=-1,this.visibleItems=new Array,this.emptyGroupText="Group",this.checkboxes=!1,this.openDelay==undefined&&(this.openDelay=250),this.closeDelay==undefined&&(this.closeDelay=300),this.animationType="default",this.autoOpen=!1,this.dropDownWidth="auto",this.dropDownHeight="200px",this.autoDropDownHeight=!1,this.keyboardSelection=!0,this.enableBrowserBoundsDetection=!1,this.dropDownHorizontalAlignment="left",this.displayMember="",this.valueMember="",this.searchMode="startswithignorecase",this.incrementalSearch=!0,this.incrementalSearchDelay=700,this.renderer=null,this.placeHolder="Please Choose:",this.promptText="Please Choose:",this.emptyString="",this.rtl=!1,this.selectionRenderer=null,this.listBox=null,this.popupZIndex=9999999999999,this.renderMode="default",this.touchMode="auto",this._checkForHiddenParent=!0,this.aria={"aria-disabled":{name:"disabled",type:"boolean"}},this.events=["open","close","select","unselect","change","checkChange","bindingComplete"]},createInstance:function(e){this.render()},render:function(){this.width||(this.width=200),this.height||(this.height=25),this.element.innerHTML="",this.isanimating=!1,this.id=this.element.id||e.jqx.utilities.createId(),this.host.attr("role","combobox"),e.jqx.aria(this,"aria-autocomplete","both"),e.jqx.aria(this,"aria-readonly",!1);var t=e("<div tabIndex=0 style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; border: 0px; position: relative;'><div id='dropdownlistWrapper' style='outline: none; background-color: transparent; border: none; float: left; width:100%; height: 100%; position: relative;'><div id='dropdownlistContent' style='outline: none; background-color: transparent; border: none; float: left; position: relative;'/><div id='dropdownlistArrow' style='background-color: transparent; border: none; float: right; position: relative;'><div></div></div></div></div>");this._addInput();if(e.jqx._jqxListBox==null||e.jqx._jqxListBox==undefined)throw new Error("jqxDropDownList: Missing reference to jqxlistbox.js.");var n=this;this.touch=e.jqx.mobile.isTouchDevice(),this.comboStructure=t,this.host.append(t),this.dropdownlistWrapper=this.host.find("#dropdownlistWrapper"),this.dropdownlistArrow=this.host.find("#dropdownlistArrow"),this.arrow=e(this.dropdownlistArrow.children()[0]),this.dropdownlistContent=this.host.find("#dropdownlistContent"),this.dropdownlistContent.addClass(this.toThemeProperty("jqx-dropdownlist-content")),this.dropdownlistWrapper.addClass(this.toThemeProperty("jqx-disableselect")),this.rtl&&(this.dropdownlistContent.addClass(this.toThemeProperty("jqx-rtl")),this.dropdownlistContent.addClass(this.toThemeProperty("jqx-dropdownlist-content-rtl"))),this.addHandler(this.dropdownlistWrapper,"selectstart",function(){return!1}),this.dropdownlistWrapper[0].id="dropdownlistWrapper"+this.element.id,this.dropdownlistArrow[0].id="dropdownlistArrow"+this.element.id,this.dropdownlistContent[0].id="dropdownlistContent"+this.element.id,this.promptText!="Please Choose:"&&(this.placeHolder=this.promptText);var r=this.toThemeProperty("jqx-widget")+" "+this.toThemeProperty("jqx-dropdownlist-state-normal")+" "+this.toThemeProperty("jqx-rc-all")+" "+this.toThemeProperty("jqx-fill-state-normal");this.element.className+=" "+r,this._firstDiv=this.host.find("div:first");try{var i="listBox"+this.id,s=e(e.find("#"+i));s.length>0&&s.remove(),e.jqx.aria(this,"aria-owns",i),e.jqx.aria(this,"aria-haspopup",!0);var o=e("<div style='overflow: hidden; background-color: transparent; border: none; position: absolute;' id='listBox"+this.id+"'><div id='innerListBox"+this.id+"'></div></div>");o.hide(),o.appendTo(document.body),this.container=o,this.listBoxContainer=e(e.find("#innerListBox"+this.id));var u=this.width;this.dropDownWidth!="auto"&&(u=this.dropDownWidth),u==null&&(u=this.host.width(),u==0&&(u=this.dropDownWidth)),this.dropDownHeight==null&&(this.dropDownHeight=200);var n=this;this.container.width(parseInt(u)+25),this.container.height(parseInt(this.dropDownHeight)+25),this.addHandler(this.listBoxContainer,"bindingComplete",function(e){n._raiseEvent("6")}),this.listBoxContainer.jqxListBox({_checkForHiddenParent:!1,touchMode:this.touchMode,checkboxes:this.checkboxes,rtl:this.rtl,emptyString:this.emptyString,itemHeight:this.itemHeight,width:u,searchMode:this.searchMode,incrementalSearch:this.incrementalSearch,incrementalSearchDelay:this.incrementalSearchDelay,displayMember:this.displayMember,valueMember:this.valueMember,height:this.dropDownHeight,autoHeight:this.autoDropDownHeight,scrollBarSize:this.scrollBarSize,selectedIndex:this.selectedIndex,source:this.source,theme:this.theme,rendered:function(){n.selectedIndex!=n.listBoxContainer.jqxListBox("selectedIndex")?(n.listBox=e.data(n.listBoxContainer[0],"jqxListBox").instance,n.listBoxContainer.jqxListBox({selectedIndex:n.selectedIndex}),n.renderSelection("mouse")):n.renderSelection("mouse")},renderer:this.renderer}),this.listBoxContainer.css({position:"absolute",zIndex:this.popupZIndex,top:0,left:0}),this.listBox=e.data(this.listBoxContainer[0],"jqxListBox").instance,this.listBox.enableSelection=this.enableSelection,this.listBox.enableHover=this.enableHover,this.listBox.equalItemsWidth=this.equalItemsWidth,this.listBox.selectIndex(this.selectedIndex),this.listBox._arrange(),this.listBoxContainer.addClass(this.toThemeProperty("jqx-popup")),e.jqx.browser.msie&&this.listBoxContainer.addClass(this.toThemeProperty("jqx-noshadow")),this.addHandler(this.listBoxContainer,"unselect",function(e){n._raiseEvent("3",{index:e.args.index,type:e.args.type,item:e.args.item})}),this.addHandler(this.listBoxContainer,"change",function(e){n._raiseEvent("4",{index:e.args.index,type:e.args.type,item:e.args.item})}),this.animationType=="none"?this.container.css("display","none"):this.container.hide()}catch(a){}var f=this;this.propertyChangeMap.disabled=function(t,n,r,i){i?(t.host.addClass(f.toThemeProperty("jqx-dropdownlist-state-disabled")),t.host.addClass(f.toThemeProperty("jqx-fill-state-disabled")),t.dropdownlistContent.addClass(f.toThemeProperty("jqx-dropdownlist-content-disabled"))):(t.host.removeClass(f.toThemeProperty("jqx-dropdownlist-state-disabled")),t.host.removeClass(f.toThemeProperty("jqx-fill-state-disabled")),t.dropdownlistContent.removeClass(f.toThemeProperty("jqx-dropdownlist-content-disabled"))),e.jqx.aria(t,"aria-disabled",t.disabled)},this.disabled&&(this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-disabled")),this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this.dropdownlistContent.addClass(this.toThemeProperty("jqx-dropdownlist-content-disabled"))),this.arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")),this.arrow.addClass(this.toThemeProperty("jqx-icon")),this.renderMode==="simple"&&(this.arrow.remove(),this.host.removeClass(this.toThemeProperty("jqx-fill-state-normal")),this.host.removeClass(this.toThemeProperty("jqx-rc-all"))),this._updateHandlers(),this._setSize(),this._arrange(),this.listBox&&this.renderSelection();if(e.jqx.browser.msie&&e.jqx.browser.version<8&&this.host.parents(".jqx-window").length>0){var l=this.host.parents(".jqx-window").css("z-index");o.css("z-index",l+10),this.listBoxContainer.css("z-index",l+10)}},resize:function(e,t){this.width=e,this.height=t,this._setSize(),this._arrange()},val:function(e){if(!this.dropdownlistContent)return"";if(this.input&&arguments.length==0)return this.input.val();var t=this.getItemByValue(e);t!=null&&this.selectItem(t);if(this.input)return this.input.val()},focus:function(){try{var e=this,t=function(){e.host.focus(),e._firstDiv&&e._firstDiv.focus()};t(),setTimeout(function(){t()},10)}catch(n){}},_addInput:function(){var t=this.host.attr("name");t||(t=this.element.id),this.input=e("<input type='hidden'/>"),this.host.append(this.input),this.input.attr("name",t)},getItems:function(){return this.listBox?this.listBox.items:new Array},getVisibleItems:function(){return this.listBox.getVisibleItems()},_setSize:function(){this.width!=null&&this.width.toString().indexOf("px")!=-1?this.host.width(this.width):this.width!=undefined&&!isNaN(this.width)&&this.host.width(this.width),this.height!=null&&this.height.toString().indexOf("px")!=-1?this.host.height(this.height):this.height!=undefined&&!isNaN(this.height)&&this.host.height(this.height);var t=!1;this.width!=null&&this.width.toString().indexOf("%")!=-1&&(t=!0,this.host.width(this.width)),this.height!=null&&this.height.toString().indexOf("%")!=-1&&(t=!0,this.host.height(this.height));var n=this,r=function(){n._arrange();if(n.dropDownWidth=="auto"){var e=n.host.width();n.listBoxContainer.jqxListBox({width:e}),n.container.width(parseInt(e)+25)}};if(t){var i=this.host.width();this.dropDownWidth!="auto"&&(i=this.dropDownWidth),this.listBoxContainer.jqxListBox({width:i}),this.container.width(parseInt(i)+25)}e.jqx.utilities.resize(this.host,function(){r()},!1,this._checkForHiddenParent)},isOpened:function(){var t=this,n=e.data(document.body,"openedJQXListBox"+this.id);return n!=null&&n==t.listBoxContainer?!0:!1},_updateHandlers:function(){var t=this,n=!1;this.removeHandlers(),this.touch||(this.addHandler(this.host,"mouseenter",function(){!t.disabled&&t.enableHover&&t.renderMode!=="simple"&&(n=!0,t.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-hover")),t.arrow.addClass(t.toThemeProperty("jqx-icon-arrow-down-hover")),t.host.addClass(t.toThemeProperty("jqx-fill-state-hover")))}),this.addHandler(this.host,"mouseleave",function(){!t.disabled&&t.enableHover&&t.renderMode!=="simple"&&(t.host.removeClass(t.toThemeProperty("jqx-dropdownlist-state-hover")),t.host.removeClass(t.toThemeProperty("jqx-fill-state-hover")),t.arrow.removeClass(t.toThemeProperty("jqx-icon-arrow-down-hover")),n=!1)})),this.host.parents()&&this.addHandler(this.host.parents(),"scroll.dropdownlist"+this.element.id,function(e){var n=t.isOpened();n&&t.close()});var r="mousedown";this.touch&&(r=e.jqx.mobile.getTouchEventName("touchstart")),this.addHandler(this.dropdownlistWrapper,r,function(e){if(!t.disabled){var n=t.container.css("display")=="block";if(!t.isanimating){if(n)return t.hideListBox(),!1;t.showListBox()}}}),t.autoOpen&&(this.addHandler(this.host,"mouseenter",function(){var e=t.isOpened();!e&&t.autoOpen&&(t.open(),t.host.focus())}),e(document).on("mousemove."+t.id,function(e){var n=t.isOpened();if(n&&t.autoOpen){var r=t.host.coord(),i=r.top,s=r.left,o=t.container.coord(),u=o.left,a=o.top;canClose=!0,e.pageY>=i&&e.pageY<=i+t.host.height()&&e.pageX>=s&&e.pageX<s+t.host.width()&&(canClose=!1),e.pageY>=a&&e.pageY<=a+t.container.height()&&e.pageX>=u&&e.pageX<u+t.container.width()&&(canClose=!1),canClose&&t.close()}})),this.touch?this.addHandler(e(document),e.jqx.mobile.getTouchEventName("touchstart")+"."+this.id,t.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.id}):this.addHandler(e(document),"mousedown."+this.id,t.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.id}),this.addHandler(this.host,"keydown",function(e){var n=t.container.css("display")=="block";if(t.host.css("display")=="none")return!0;if(e.keyCode=="13"||e.keyCode=="9")if(!t.isanimating)return n&&(t.renderSelection(),e.keyCode=="13"&&t._firstDiv.focus(),t.hideListBox(),t.keyboardSelection||t._raiseEvent("2",{index:t.selectedIndex,type:"keyboard",item:t.getItem(t.selectedIndex)})),n&&e.keyCode!="9"?!1:!0;if(e.keyCode==115)return t.isanimating||(t.isOpened()?t.isOpened()&&t.hideListBox():t.showListBox()),!1;if(e.altKey&&t.host.css("display")=="block")if(e.keyCode==38){if(t.isOpened())return t.hideListBox(),!0}else if(e.keyCode==40&&!t.isOpened())return t.showListBox(),!0;if(e.keyCode=="27"&&!t.ishiding)return t.hideListBox(),t.tempSelectedIndex!=undefined&&t.selectIndex(t.tempSelectedIndex),!0;if(!t.disabled)return t.listBox._handleKeyDown(e)}),this.addHandler(this.listBoxContainer,"checkChange",function(e){t.renderSelection(),t._updateInputSelection(),t._raiseEvent(5,{label:e.args.label,value:e.args.value,checked:e.args.checked,item:e.args.item})}),this.addHandler(this.listBoxContainer,"select",function(e){if(!t.disabled){e.args.type=="keyboard"&&!t.isOpened()&&t.renderSelection();if(e.args.type!="keyboard"||t.keyboardSelection)t.renderSelection(),t._raiseEvent("2",{index:e.args.index,type:e.args.type,item:e.args.item,originalEvent:e.args.originalEvent}),e.args.type=="mouse"&&(t.checkboxes||(t.hideListBox(),t._firstDiv&&t._firstDiv.focus()))}}),this.listBox&&this.listBox.content&&this.addHandler(this.listBox.content,"click",function(e){if(!t.disabled){if(t.listBox.itemswrapper&&e.target===t.listBox.itemswrapper[0])return!0;t.renderSelection("mouse"),t.touch||t.ishiding||t.checkboxes||(t.hideListBox(),t._firstDiv&&t._firstDiv.focus()),t.keyboardSelection||(t._oldSelectedInd==undefined&&(t._oldSelectedIndx=t.selectedIndex),t.selectedIndex!=t._oldSelectedIndx&&(t._raiseEvent("2",{index:t.selectedIndex,type:"keyboard",item:t.getItem(t.selectedIndex)}),t._oldSelectedIndx=t.selectedIndex))}}),this.addHandler(this.host,"focus",function(e){t.renderMode!=="simple"&&(t.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-focus")),t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")))}),this.addHandler(this.host,"blur",function(){t.renderMode!=="simple"&&(t.host.removeClass(t.toThemeProperty("jqx-dropdownlist-state-focus")),t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")))}),this.addHandler(this._firstDiv,"focus",function(e){t.renderMode!=="simple"&&(t.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-focus")),t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")))}),this.addHandler(this._firstDiv,"blur",function(){t.renderMode!=="simple"&&(t.host.removeClass(t.toThemeProperty("jqx-dropdownlist-state-focus")),t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")))})},removeHandlers:function(){var t=this,n="mousedown";this.touch&&(n=e.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(this.dropdownlistWrapper,n),this.listBox&&this.listBox.content&&this.removeHandler(this.listBox.content,"click"),this.removeHandler(this.host,"loadContent"),this.removeHandler(this.listBoxContainer,"checkChange"),this.removeHandler(this.host,"keydown"),this.removeHandler(this.host,"focus"),this.removeHandler(this.host,"blur"),this.removeHandler(this._firstDiv,"focus"),this.removeHandler(this._firstDiv,"blur"),this.removeHandler(this.host,"mouseenter"),this.removeHandler(this.host,"mouseleave"),this.removeHandler(e(document),"mousemove."+t.id)},getItem:function(e){var t=this.listBox.getItem(e);return t},getItemByValue:function(e){var t=this.listBox.getItemByValue(e);return t},selectItem:function(e){this.listBox!=undefined&&(this.listBox.selectItem(e),this.selectedIndex=this.listBox.selectedIndex,this.renderSelection("mouse"))},unselectItem:function(e){this.listBox!=undefined&&(this.listBox.unselectItem(e),this.renderSelection("mouse"))},checkItem:function(e){this.listBox!=undefined&&this.listBox.checkItem(e)},uncheckItem:function(e){this.listBox!=undefined&&this.listBox.uncheckItem(e)},indeteterminateItem:function(e){this.listBox!=undefined&&this.listBox.indeteterminateItem(e)},renderSelection:function(){if(this.listBox==null)return;this.height&&this.height.toString().indexOf("%")!=-1&&this._arrange();var t=this.listBox.visibleItems[this.listBox.selectedIndex],n=this;if(this.checkboxes){var r=this.getCheckedItems();r!=null&&r.length>0?t=r[0]:t=null}if(t==null){var i=e('<span style="color: inherit; border: none; background-color: transparent;"></span>');i.appendTo(e(document.body)),i.addClass(this.toThemeProperty("jqx-widget")),i.addClass(this.toThemeProperty("jqx-listitem-state-normal")),i.addClass(this.toThemeProperty("jqx-item")),e.jqx.utilities.html(i,this.placeHolder);var s=this.dropdownlistContent.css("padding-top"),o=this.dropdownlistContent.css("padding-bottom");i.css("padding-top",s),i.css("padding-bottom",o);var u=i.outerHeight();i.remove(),i.removeClass(),e.jqx.utilities.html(this.dropdownlistContent,i);var a=this.host.height();this.height!=null&&this.height!=undefined&&this.height.toString().indexOf("%")===-1&&(a=parseInt(this.height));var f=parseInt((parseInt(a)-parseInt(u))/2);f>0&&(this.dropdownlistContent.css("margin-top",f+"px"),this.dropdownlistContent.css("margin-bottom",f+"px")),this.selectionRenderer&&(e.jqx.utilities.html(this.dropdownlistContent,this.selectionRenderer()),this._updateInputSelection()),this.selectedIndex=this.listBox.selectedIndex,this.width==="auto"&&this._arrange();return}this.selectedIndex=this.listBox.selectedIndex;var i=e('<span style="color: inherit; border: none; background-color: transparent;"></span>');i.appendTo(e(document.body)),i.addClass(this.toThemeProperty("jqx-widget")),i.addClass(this.toThemeProperty("jqx-listitem-state-normal")),i.addClass(this.toThemeProperty("jqx-item"));var l=!1;try{if(t.html!=undefined&&t.html!=null&&t.html.toString().length>0)e.jqx.utilities.html(i,t.html);else if(t.label!=undefined&&t.label!=null&&t.label.toString().length>0)e.jqx.utilities.html(i,t.label);else if(t.label===null||t.label==="")l=!0,e.jqx.utilities.html(i,"");else if(t.value!=undefined&&t.value!=null&&t.value.toString().length>0)e.jqx.utilities.html(i,t.value);else if(t.title!=undefined&&t.title!=null&&t.title.toString().length>0)e.jqx.utilities.html(i,t.title);else if(t.label==""||t.label==null)l=!0,e.jqx.utilities.html(i,"")}catch(c){var h=c}var s=this.dropdownlistContent.css("padding-top"),o=this.dropdownlistContent.css("padding-bottom");i.css("padding-top",s),i.css("padding-bottom",o);var u=i.outerHeight();u===0&&(u=16),(t.label==""||t.label==null)&&l&&e.jqx.utilities.html(i,"");var p=this.width&&this.width.toString().indexOf("%")<=0;i.remove(),i.removeClass();if(this.selectionRenderer)e.jqx.utilities.html(this.dropdownlistContent,this.selectionRenderer(i,t.index,t.label,t.value));else if(this.checkboxes){var d=this.getCheckedItems(),v="";for(var m=0;m<d.length;m++)m==d.length-1?v+=d[m].label:v+=d[m].label+",";i.text(v),p&&i.css("max-width",this.host.width()-30),i.css("overflow","hidden"),i.css("display","block"),this.rtl||p&&i.css("width",this.host.width()-30),i.css("text-overflow","ellipsis"),i.css("padding-bottom",1+parseInt(o)),this.dropdownlistContent.html(i)}else this.width&&this.width!=="auto"&&(p&&(this.rtl||i.css("max-width",this.host.width()-10)),i.css("overflow","hidden"),i.css("display","block"),i.css("padding-bottom",1+parseInt(o)),this.rtl||p&&i.css("width",this.host.width()-10),i.css("text-overflow","ellipsis")),this.dropdownlistContent.html(i);var a=this.host.height();this.height!=null&&this.height!=undefined&&this.height.toString().indexOf("%")===-1&&(a=parseInt(this.height));var f=parseInt((parseInt(a)-parseInt(u))/2);f>0&&(this.dropdownlistContent.css("margin-top",f+"px"),this.dropdownlistContent.css("margin-bottom",f+"px")),this.dropdownlistContent&&this.input&&this._updateInputSelection(),this.listBox&&this.listBox._activeElement&&e.jqx.aria(this,"aria-activedescendant",this.listBox._activeElement.id),this.width==="auto"&&this._arrange()},_updateInputSelection:function(){if(this.input){if(this.selectedIndex==-1)this.input.val("");else{var e=this.getSelectedItem();e!=null?this.input.val(e.value):this.input.val(this.dropdownlistContent.text())}if(this.checkboxes){var t=this.getCheckedItems(),n="";if(t!=null)for(var r=0;r<t.length;r++){var i=t[r].value;if(i==undefined)continue;r==t.length-1?n+=i:n+=i+","}this.input.val(n)}}},setContent:function(t){e.jqx.utilities.html(this.dropdownlistContent,t),this._updateInputSelection()},dataBind:function(){this.listBoxContainer.jqxListBox({source:this.source}),this.renderSelection("mouse"),this.source==null&&this.clearSelection()},clear:function(){this.listBoxContainer.jqxListBox({source:null}),this.clearSelection()},clearSelection:function(t){this.selectedIndex=-1,this._updateInputSelection(),this.listBox.clearSelection(),this.renderSelection(),e.jqx.utilities.html(this.dropdownlistContent,this.placeHolder)},unselectIndex:function(e,t){if(isNaN(e))return;this.listBox.unselectIndex(e,t),this.renderSelection()},selectIndex:function(e,t,n,r){this.listBox.selectIndex(e,t,n,r,"api")},getSelectedIndex:function(){return this.selectedIndex},getSelectedItem:function(){return this.getItem(this.selectedIndex)},getCheckedItems:function(){return this.listBox.getCheckedItems()},checkIndex:function(e){this.listBox.checkIndex(e)},uncheckIndex:function(e){this.listBox.uncheckIndex(e)},indeterminateIndex:function(e){this.listBox.indeterminateIndex(e)},checkAll:function(){this.listBox.checkAll()},uncheckAll:function(){this.listBox.uncheckAll()},addItem:function(e){return this.listBox.addItem(e)},insertAt:function(e,t){return e==null?!1:this.listBox.insertAt(e,t)},removeAt:function(e){var t=this.listBox.removeAt(e);return this.renderSelection("mouse"),t},removeItem:function(e){var t=this.listBox.removeItem(e);return this.renderSelection("mouse"),t},updateItem:function(e,t){var n=this.listBox.updateItem(e,t);return this.renderSelection("mouse"),n},updateAt:function(e,t){var n=this.listBox.updateAt(e,t);return this.renderSelection("mouse"),n},ensureVisible:function(e){return this.listBox.ensureVisible(e)},disableAt:function(e){return this.listBox.disableAt(e)},enableAt:function(e){return this.listBox.enableAt(e)},disableItem:function(e){return this.listBox.disableItem(e)},enableItem:function(e){return this.listBox.enableItem(e)},_findPos:function(t){while(t&&(t.type=="hidden"||t.nodeType!=1||e.expr.filters.hidden(t)))t=t.nextSibling;var n=e(t).coord(!0);return[n.left,n.top]},testOffset:function(t,n,r){var i=t.outerWidth(),s=t.outerHeight(),o=e(window).width()+e(window).scrollLeft(),u=e(window).height()+e(window).scrollTop();if(n.left+i>o&&i>this.host.width()){var a=this.host.coord().left,f=i-this.host.width();n.left=a-f+2}return n.left<0&&(n.left=parseInt(this.host.coord().left)+"px"),n.top-=Math.min(n.top,n.top+s>u&&u>s?Math.abs(s+r+22):0),n},open:function(){this.showListBox()},close:function(){this.hideListBox()},_getBodyOffset:function(){var t=0,n=0;return e("body").css("border-top-width")!="0px"&&(t=parseInt(e("body").css("border-top-width")),isNaN(t)&&(t=0)),e("body").css("border-left-width")!="0px"&&(n=parseInt(e("body").css("border-left-width")),isNaN(n)&&(n=0)),{left:n,top:t}},showListBox:function(){e.jqx.aria(this,"aria-expanded",!0);if(this.dropDownWidth=="auto"&&this.width!=null&&this.width.indexOf&&(this.width.indexOf("%")!=-1||this.width.indexOf("auto")!=-1)&&this.listBox.host.width()!=this.host.width()){var t=this.host.width();this.listBoxContainer.jqxListBox({width:t}),this.container.width(parseInt(t)+25)}var n=this,r=this.listBoxContainer,i=this.listBox,s=e(window).scrollTop(),o=e(window).scrollLeft(),u=parseInt(this._findPos(this.host[0])[1])+parseInt(this.host.outerHeight())-1+"px",a,f=parseInt(Math.round(this.host.coord(!0).left));a=f+"px";var l=e.jqx.mobile.isSafariMobileBrowser()||e.jqx.mobile.isWindowsPhone();if(this.listBox==null)return;var c=e.jqx.utilities.hasTransform(this.host);this.ishiding=!1,this.keyboardSelection||(this.listBox.selectIndex(this.selectedIndex),this.listBox.ensureVisible(this.selectedIndex)),this.tempSelectedIndex=this.selectedIndex,this.autoDropDownHeight&&this.container.height(this.listBoxContainer.height()+25);if(c||l!=null&&l)a=e.jqx.mobile.getLeftPos(this.element),u=e.jqx.mobile.getTopPos(this.element)+parseInt(this.host.outerHeight()),e("body").css("border-top-width")!="0px"&&(u=parseInt(u)-this._getBodyOffset().top+"px"),e("body").css("border-left-width")!="0px"&&(a=parseInt(a)-this._getBodyOffset().left+"px");r.stop(),this.renderMode!=="simple"&&(this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-selected")),this.host.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down-selected"))),this.container.css("left",a),this.container.css("top",u),i._arrange();var h=!0,p=!1;if(this.dropDownHorizontalAlignment=="right"||this.rtl){var d=this.container.outerWidth(),v=Math.abs(d-this.host.width());d>this.host.width()?this.container.css("left",25+parseInt(Math.round(f))-v+"px"):this.container.css("left",25+parseInt(Math.round(f))+v+"px")}if(this.enableBrowserBoundsDetection){var m=this.testOffset(r,{left:parseInt(this.container.css("left")),top:parseInt(u)},parseInt(this.host.outerHeight()));parseInt(this.container.css("top"))!=m.top?(p=!0,r.css("top",23),r.addClass(this.toThemeProperty("jqx-popup-up"))):r.css("top",0),this.container.css("top",m.top),parseInt(this.container.css("left"))!=m.left&&this.container.css("left",m.left)}if(this.animationType=="none")this.container.css("display","block"),e.data(document.body,"openedJQXListBoxParent",n),e.data(document.body,"openedJQXListBox"+this.id,r),r.css("margin-top",0),r.css("opacity",1);else{this.container.css("display","block"),n.isanimating=!0;if(this.animationType=="fade")r.css("margin-top",0),r.css("opacity",0),r.animate({opacity:1},this.openDelay,function(){e.data(document.body,"openedJQXListBoxParent",n),e.data(document.body,"openedJQXListBox"+n.id,r),n.ishiding=!1,n.isanimating=!1});else{r.css("opacity",1);var g=r.outerHeight();p?r.css("margin-top",g):r.css("margin-top",-g),r.animate({"margin-top":0},this.openDelay,function(){e.data(document.body,"openedJQXListBoxParent",n),e.data(document.body,"openedJQXListBox"+n.id,r),n.ishiding=!1,n.isanimating=!1})}}p?(this.host.addClass(this.toThemeProperty("jqx-rc-t-expanded")),r.addClass(this.toThemeProperty("jqx-rc-b-expanded"))):(this.host.addClass(this.toThemeProperty("jqx-rc-b-expanded")),r.addClass(this.toThemeProperty("jqx-rc-t-expanded"))),this.renderMode!=="simple"&&(r.addClass(this.toThemeProperty("jqx-fill-state-focus")),this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-focus")),this.host.addClass(this.toThemeProperty("jqx-fill-state-focus"))),i._renderItems(),this._raiseEvent("0",i)},hideListBox:function(){e.jqx.aria(this,"aria-expanded",!1);var t=this.listBoxContainer,n=this.listBox,r=this.container,i=this;e.data(document.body,"openedJQXListBox"+this.id,null);if(this.animationType=="none")this.container.css("display","none");else if(!i.ishiding){t.stop();var s=t.outerHeight();t.css("margin-top",0),i.isanimating=!0;var o=-s;parseInt(this.container.coord().top)<parseInt(this.host.coord().top)&&(o=s),this.animationType=="fade"?(t.css({opacity:1}),t.animate({opacity:0},this.closeDelay,function(){r.css("display","none"),i.isanimating=!1,i.ishiding=!1})):t.animate({"margin-top":o},this.closeDelay,function(){r.css("display","none"),i.isanimating=!1,i.ishiding=!1})}this.ishiding=!0,this.host.removeClass(this.toThemeProperty("jqx-dropdownlist-state-selected")),this.host.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this.arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")),this.host.removeClass(this.toThemeProperty("jqx-rc-b-expanded")),t.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),this.host.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),t.removeClass(this.toThemeProperty("jqx-rc-b-expanded")),t.removeClass(this.toThemeProperty("jqx-fill-state-focus")),this._raiseEvent("1",n)},closeOpenedListBox:function(t){var n=t.data.me,r=e(t.target),i=t.data.listbox;if(i==null)return!0;if(e(t.target).ischildof(t.data.me.host))return!0;if(!n.isOpened())return!0;var s=n,o=!1;return e.each(r.parents(),function(){if(this.className!="undefined"&&this.className.indexOf){if(this.className.indexOf("jqx-listbox")!=-1)return o=!0,!1;if(this.className.indexOf("jqx-dropdownlist")!=-1)return n.element.id==this.id&&(o=!0),!1}}),i!=null&&!o&&n.isOpened()&&n.hideListBox(),!0},loadFromSelect:function(e){this.listBox.loadFromSelect(e)},refresh:function(e){e!==!0&&(this._setSize(),this._arrange(),this.listBox&&this.renderSelection())},_arrange:function(){var e=parseInt(this.host.width()),t=parseInt(this.host.height()),n=this.arrowSize,r=this.arrowSize,i=3,s=e-r-2*i;s>0&&this.width!=="auto"&&this.dropdownlistContent.width(s+"px"),this.width==="auto"&&(this.dropdownlistContent.css("width","auto"),e=this.dropdownlistContent.width()+r+2*i,this.host.width(e)),this.dropdownlistContent.height(t),this.dropdownlistContent.css("left",0),this.dropdownlistContent.css("top",0),this.dropdownlistArrow.width(r),this.dropdownlistArrow.height(t),this.rtl&&(this.dropdownlistArrow.css("float","left"),this.dropdownlistContent.css("float","right"))},destroy:function(){e.jqx.utilities.resize(this.host,null,!0),this.removeHandler(this.listBoxContainer,"select"),this.removeHandler(this.listBoxContainer,"unselect"),this.removeHandler(this.listBoxContainer,"change"),this.removeHandler(this.dropdownlistWrapper,"selectstart"),this.removeHandler(this.dropdownlistWrapper,"mousedown"),this.removeHandler(this.host,"keydown"),this.removeHandler(this.listBoxContainer,"select"),this.removeHandler(this.listBox.content,"click"),this.removeHandler(this.listBoxContainer,"bindingComplete"),this.host.parents()&&this.removeHandler(this.host.parents(),"scroll.dropdownlist"+this.element.id),this.removeHandlers(),this.listBoxContainer.jqxListBox("destroy"),this.listBoxContainer.remove(),this.host.removeClass(),this.removeHandler(e(document),"mousedown."+this.id,this.closeOpenedListBox),this.touch&&this.removeHandler(e(document),e.jqx.mobile.getTouchEventName("touchstart")+"."+this.id),this.dropdownlistArrow.remove(),delete this.dropdownlistArrow,delete this.dropdownlistWrapper,delete this.listBoxContainer,delete this.input,delete this.arrow,delete this.dropdownlistContent,delete this.listBox,delete this._firstDiv,this.container.remove(),delete this.container;var t=e.data(this.element,"jqxDropDownList");t&&delete t.instance,this.host.removeData(),this.host.remove(),delete this.comboStructure,delete this.host,delete this.set,delete this.get,delete this.call,delete this.element},_raiseEvent:function(e,t){t==undefined&&(t={owner:null});var n=this.events[e];args=t,args.owner=this;var r=new jQuery.Event(n);r.owner=this;if(e==2||e==3||e==4||e==5)r.args=t;var i=this.host.trigger(r);return i},propertyChangedHandler:function(t,n,r,i){if(t.isInitialized==undefined||t.isInitialized==0)return;n=="enableSelection"&&t.listBoxContainer.jqxListBox({enableSelection:i}),n=="enableHover"&&t.listBoxContainer.jqxListBox({enableHover:i}),n=="autoOpen"&&t._updateHandlers(),n=="emptyString"&&(t.listBox.emptyString=t.emptyString),n=="itemHeight"&&t.listBoxContainer.jqxListBox({itemHeight:i}),n=="renderer"&&t.listBoxContainer.jqxListBox({renderer:i}),n=="rtl"&&(i?(t.dropdownlistArrow.css("float","left"),t.dropdownlistContent.css("float","right")):(t.dropdownlistArrow.css("float","right"),t.dropdownlistContent.css("float","left")),t.listBoxContainer.jqxListBox({rtl:t.rtl})),n=="source"&&(t.listBoxContainer.jqxListBox({source:t.source}),t.listBox.selectedIndex=-1,t.listBox.selectIndex(this.selectedIndex),t.renderSelection(),i==null&&t.clear());if(n=="displayMember"||n=="valueMember")t.listBoxContainer.jqxListBox({displayMember:t.displayMember,valueMember:t.valueMember}),t.renderSelection();n=="placeHolder"&&t.renderSelection(),n=="theme"&&i!=null&&(t.listBoxContainer.jqxListBox({theme:i}),t.listBoxContainer.addClass(t.toThemeProperty("jqx-popup")),e.jqx.browser.msie&&t.listBoxContainer.addClass(t.toThemeProperty("jqx-noshadow")),t.dropdownlistContent.removeClass(),t.dropdownlistContent.addClass(t.toThemeProperty("jqx-dropdownlist-content")),t.dropdownlistWrapper.removeClass(),t.dropdownlistWrapper.addClass(t.toThemeProperty("jqx-disableselect")),t.host.removeClass(),t.host.addClass(t.toThemeProperty("jqx-fill-state-normal")),t.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-normal")),t.host.addClass(t.toThemeProperty("jqx-rc-all")),t.host.addClass(t.toThemeProperty("jqx-widget")),t.arrow.removeClass(),t.arrow.addClass(t.toThemeProperty("jqx-icon-arrow-down")),t.arrow.addClass(t.toThemeProperty("jqx-icon"))),n=="autoDropDownHeight"&&(t.listBoxContainer.jqxListBox({autoHeight:t.autoDropDownHeight}),t.autoDropDownHeight?t.container.height(t.listBoxContainer.height()+25):(t.listBoxContainer.jqxListBox({height:t.dropDownHeight}),t.container.height(parseInt(t.dropDownHeight)+25)),t.listBox._arrange(),t.listBox._updatescrollbars()),n=="searchMode"&&t.listBoxContainer.jqxListBox({searchMode:t.searchMode}),n=="incrementalSearch"&&t.listBoxContainer.jqxListBox({incrementalSearch:t.incrementalSearch}),n=="incrementalSearchDelay"&&t.listBoxContainer.jqxListBox({incrementalSearchDelay:t.incrementalSearchDelay}),n=="dropDownHeight"&&(t.autoDropDownHeight||(t.listBoxContainer.jqxListBox({height:t.dropDownHeight}),t.container.height(parseInt(t.dropDownHeight)+25)));if(n=="dropDownWidth"||n=="scrollBarSize"){var s=t.width;t.dropDownWidth!="auto"&&(s=t.dropDownWidth),t.listBoxContainer.jqxListBox({width:s,scrollBarSize:t.scrollBarSize}),t.container.width(parseInt(s)+25)}if(n=="width"||n=="height")if(i!=r){this.refresh();if(n=="width"&&t.dropDownWidth=="auto"){var s=t.host.width();t.listBoxContainer.jqxListBox({width:s}),t.container.width(parseInt(s)+25)}}n=="checkboxes"&&t.listBoxContainer.jqxListBox({checkboxes:t.checkboxes}),n=="selectedIndex"&&t.listBox!=null&&(t.listBox.selectIndex(parseInt(i)),t.renderSelection())}})}(jQuery),function(e){function t(t,n){return this.owner=t,this.datafield=null,this.displayfield=null,this.text="",this.sortable=!0,this.hideable=!0,this.editable=!0,this.hidden=!1,this.groupable=!0,this.renderer=null,this.cellsrenderer=null,this.checkchange=null,this.threestatecheckbox=!1,this.buttonclick=null,this.columntype=null,this.cellsformat="",this.align="left",this.cellsalign="left",this.width="auto",this.minwidth=25,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.filteritems=[],this.resizable=!0,this.initeditor=null,this.createeditor=null,this.destroyeditor=null,this.geteditorvalue=null,this.validation=null,this.classname="",this.cellclassname="",this.cellendedit=null,this.cellbeginedit=null,this.cellvaluechanging=null,this.aggregates=null,this.aggregatesrenderer=null,this.menu=!0,this.createfilterwidget=null,this.filtertype="default",this.filtercondition=null,this.rendered=null,this.exportable=!0,this.exporting=!1,this.draggable=!0,this.nullable=!0,this.enabletooltips=!0,this.columngroup=null,this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hideable:this.hideable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsformat:this.cellsformat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,t){if(this[e]){var n=this[e];this[e]=t,this.owner._columnPropertyChanged(this,e,t,n)}else if(this[e.toLowerCase()]){var n=this[e.toLowerCase()];this[e.toLowerCase()]=t,this.owner._columnPropertyChanged(this,e.toLowerCase(),t,n)}},this._initfields=function(n){if(n!=null){var r=this.that;e.jqx.hasProperty(n,"dataField")&&(this.datafield=e.jqx.get(n,"dataField")),e.jqx.hasProperty(n,"displayField")?this.displayfield=e.jqx.get(n,"displayField"):this.displayfield=this.datafield,e.jqx.hasProperty(n,"enableTooltips")&&(this.enabletooltips=e.jqx.get(n,"enableTooltips")),e.jqx.hasProperty(n,"text")&&(this.text=e.jqx.get(n,"text")),e.jqx.hasProperty(n,"sortable")&&(this.sortable=e.jqx.get(n,"sortable")),e.jqx.hasProperty(n,"hideable")&&(this.hideable=e.jqx.get(n,"hideable")),e.jqx.hasProperty(n,"hidden")&&(this.hidden=e.jqx.get(n,"hidden")),e.jqx.hasProperty(n,"groupable")&&(this.groupable=e.jqx.get(n,"groupable")),e.jqx.hasProperty(n,"renderer")&&(this.renderer=e.jqx.get(n,"renderer")),e.jqx.hasProperty(n,"align")&&(this.align=e.jqx.get(n,"align")),e.jqx.hasProperty(n,"cellsAlign")&&(this.cellsalign=e.jqx.get(n,"cellsAlign")),e.jqx.hasProperty(n,"cellsFormat")&&(this.cellsformat=e.jqx.get(n,"cellsFormat")),e.jqx.hasProperty(n,"width")&&(this.width=e.jqx.get(n,"width")),e.jqx.hasProperty(n,"minWidth")&&(this.minwidth=e.jqx.get(n,"minWidth")),e.jqx.hasProperty(n,"maxWidth")&&(this.maxwidth=e.jqx.get(n,"maxWidth")),e.jqx.hasProperty(n,"cellsRenderer")&&(this.cellsrenderer=e.jqx.get(n,"cellsRenderer")),e.jqx.hasProperty(n,"columnType")&&(this.columntype=e.jqx.get(n,"columnType")),e.jqx.hasProperty(n,"checkChange")&&(this.checkchange=e.jqx.get(n,"checkChange")),e.jqx.hasProperty(n,"buttonClick")&&(this.buttonclick=e.jqx.get(n,"buttonClick")),e.jqx.hasProperty(n,"pinned")&&(this.pinned=e.jqx.get(n,"pinned")),e.jqx.hasProperty(n,"visibleIndex")&&(this.visibleindex=e.jqx.get(n,"visibleIndex")),e.jqx.hasProperty(n,"filterable")&&(this.filterable=e.jqx.get(n,"filterable")),e.jqx.hasProperty(n,"filter")&&(this.filter=e.jqx.get(n,"filter")),e.jqx.hasProperty(n,"resizable")&&(this.resizable=e.jqx.get(n,"resizable")),e.jqx.hasProperty(n,"editable")&&(this.editable=e.jqx.get(n,"editable")),e.jqx.hasProperty(n,"initEditor")&&(this.initeditor=e.jqx.get(n,"initEditor")),e.jqx.hasProperty(n,"createEditor")&&(this.createeditor=e.jqx.get(n,"createEditor")),e.jqx.hasProperty(n,"destroyEditor")&&(this.destroyeditor=e.jqx.get(n,"destroyEditor")),e.jqx.hasProperty(n,"getEditorValue")&&(this.geteditorvalue=e.jqx.get(n,"getEditorValue")),e.jqx.hasProperty(n,"validation")&&(this.validation=e.jqx.get(n,"validation")),e.jqx.hasProperty(n,"cellBeginEdit")&&(this.cellbeginedit=e.jqx.get(n,"cellBeginEdit")),e.jqx.hasProperty(n,"cellEndEdit")&&(this.cellendedit=e.jqx.get(n,"cellEndEdit")),e.jqx.hasProperty(n,"className")&&(this.classname=e.jqx.get(n,"className")),e.jqx.hasProperty(n,"cellClassName")&&(this.cellclassname=e.jqx.get(n,"cellClassName")),e.jqx.hasProperty(n,"menu")&&(this.menu=e.jqx.get(n,"menu")),e.jqx.hasProperty(n,"aggregates")&&(this.aggregates=e.jqx.get(n,"aggregates")),e.jqx.hasProperty(n,"aggregatesRenderer")&&(this.aggregatesrenderer=e.jqx.get(n,"aggregatesRenderer")),e.jqx.hasProperty(n,"createFilterWidget")&&(this.createfilterwidget=e.jqx.get(n,"createFilterWidget")),e.jqx.hasProperty(n,"filterType")&&(this.filtertype=e.jqx.get(n,"filterType")),e.jqx.hasProperty(n,"rendered")&&(this.rendered=e.jqx.get(n,"rendered")),e.jqx.hasProperty(n,"exportable")&&(this.exportable=e.jqx.get(n,"exportable")),e.jqx.hasProperty(n,"filterItems")&&(this.filteritems=e.jqx.get(n,"filterItems")),e.jqx.hasProperty(n,"cellValueChanging")&&(this.cellvaluechanging=e.jqx.get(n,"cellValueChanging")),e.jqx.hasProperty(n,"draggable")&&(this.draggable=e.jqx.get(n,"draggable")),e.jqx.hasProperty(n,"filterCondition")&&(this.filtercondition=e.jqx.get(n,"filterCondition")),e.jqx.hasProperty(n,"threeStateCheckbox")&&(this.threestatecheckbox=e.jqx.get(n,"threeStateCheckbox")),e.jqx.hasProperty(n,"nullable")&&(this.nullable=e.jqx.get(n,"nullable")),e.jqx.hasProperty(n,"columnGroup")&&(this.columngroup=e.jqx.get(n,"columnGroup"));if(!n instanceof String&&typeof n!="string")for(var i in n)if(!r.hasOwnProperty(i)&&!r.hasOwnProperty(i.toLowerCase()))throw t.host.remove(),new Error("jqxGrid: Invalid property name - "+i+".")}},this._initfields(n),this}function n(e,t){return this.setdata=function(e){e!=null&&(this.bounddata=e,this.boundindex=e.boundindex,this.visibleindex=e.visibleindex,this.group=e.group,this.parentbounddata=e.parentItem,this.uniqueid=e.uniqueid,this.level=e.level)},this.setdata(t),this.parentrow=null,this.subrows=new Array,this.owner=e,this.height=25,this.hidden=!1,this.rowdetails=null,this.rowdetailsheight=100,this.rowdetailshidden=!0,this.top=-1,this.setrowinfo=function(e){this.hidden=e.hidden,this.rowdetails=e.rowdetails,this.rowdetailsheight=e.rowdetailsheight,this.rowdetailshidden=!e.showdetails,this.height=e.height},this}e.jqx.jqxWidget("jqxGrid","",{}),e.extend(e.jqx._jqxGrid.prototype,{defineInstance:function(){this.disabled=!1,this.width=600,this.height=400,this.pagerheight=28,this.groupsheaderheight=34,this.pagesize=10,this.pagesizeoptions=["5","10","20"],this.rowsheight=25,this.columnsheight=25,this.filterrowheight=31,this.groupindentwidth=30,this.rowdetails=!1,this.enablerowdetailsindent=!0,this.enablemousewheel=!0,this.initrowdetails=null,this.layoutrowdetails=null,this.editable=!1,this.editmode="selectedcell",this.pageable=!1,this.pagermode="default",this.pagerbuttonscount=5,this.groupable=!1,this.sortable=!1,this.filterable=!1,this.filtermode="default",this.autoshowfiltericon=!0,this.showfiltercolumnbackground=!0,this.showpinnedcolumnbackground=!0,this.showsortcolumnbackground=!0,this.altrows=!1,this.altstart=1,this.altstep=1,this.showrowdetailscolumn=!0,this.showtoolbar=!1,this.toolbarheight=34,this.showstatusbar=!1,this.statusbarheight=34,this.enableellipsis=!0,this.groups=[],this.groupsrenderer=null,this.groupcolumnrenderer=null,this.groupsexpandedbydefault=!1,this.pagerrenderer=null,this.touchmode="auto",this.columns=[],this.selectedrowindex=-1,this.selectedrowindexes=new Array,this.selectedcells=new Array,this.selectedcell=null,this.tableZIndex=799,this.headerZIndex=199,this.updatefilterconditions=null,this.showaggregates=!1,this.showfilterrow=!1,this.autorowheight=!1,this.autokoupdates=!0,this.handlekeyboardnavigation=null,this.showsortmenuitems=!0,this.showfiltermenuitems=!0,this.showgroupmenuitems=!0,this.enablebrowserselection=!1,this.enablekeyboarddelete=!0,this.clipboard=!0,this.ready=null,this.updatefilterpanel=null,this.autogeneratecolumns=!1,this.rowdetailstemplate=null,this.scrollfeedback=null,this.rendertoolbar=null,this.renderstatusbar=null,this.rendered=null,this.multipleselectionbegins=null,this.columngroups=null,this.cellhover=null,this.source={beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},this.dataview=null,this.updatedelay=null,this.autoheight=!1,this.autowidth=!1,this.showheader=!0,this.showgroupsheader=!0,this.closeablegroups=!0,this.scrollbarsize=e.jqx.utilities.scrollBarSize,this.touchscrollbarsize=e.jqx.utilities.touchScrollBarSize,this.virtualmode=!1,this.sort=null,this.columnsmenu=!0,this.columnsresize=!1,this.columnsreorder=!1,this.columnsmenuwidth=15,this.autoshowcolumnsmenubutton=!0,this.popupwidth="auto",this.sorttogglestates=2,this.rendergridrows=null,this.enableanimations=!0,this.enabletooltips=!1,this.selectionmode="singlerow",this.enablehover=!0,this.loadingerrormessage="The data is still loading. When the data binding is completed, the Grid raises the 'bindingcomplete' event. Call this function in the 'bindingcomplete' event handler.",this.verticalscrollbarstep=25,this.verticalscrollbarlargestep=400,this.horizontalscrollbarstep=10,this.horizontalscrollbarlargestep=50,this.keyboardnavigation=!0,this.touchModeStyle="auto",this.autoshowloadelement=!0,this.showdefaultloadelement=!0,this.showemptyrow=!0,this.autosavestate=!1,this.autoloadstate=!1,this._updating=!1,this._pagescache=new Array,this._pageviews=new Array,this._cellscache=new Array,this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,this._requiresupdate=!1,this._hasOpenedMenu=!1,this.scrollmode="physical",this.deferreddatafields=null,this.localization=null,this.rtl=!1,this.menuitemsarray=[],this.events=["initialized","rowClick","rowSelect","rowUnselect","groupExpand","groupCollapse","sort","columnClick","cellClick","pageChanged","pageSizeChanged","bindingComplete","groupsChanged","filter","columnResized","cellSelect","cellUnselect","cellBeginEdit","cellEndEdit","cellValueChanged","rowExpand","rowCollapse","rowDoubleClick","cellDoubleClick","columnReordered","pageChanging"]},createInstance:function(t){this.that=this;var n="<div class='jqx-clear jqx-border-reset jqx-overflow-hidden jqx-max-size jqx-position-relative'><div tabindex='1' class='jqx-clear jqx-max-size jqx-position-relative jqx-overflow-hidden jqx-background-reset' id='wrapper"+this.element.id+"'>"+"<div class='jqx-clear jqx-position-absolute' id='toolbar' style='visibility: hidden;'></div>"+"<div class='jqx-clear jqx-position-absolute' id='groupsheader' style='visibility: hidden;'></div>"+"<div class='jqx-clear jqx-overflow-hidden jqx-position-absolute jqx-border-reset jqx-background-reset' id='content"+this.element.id+"'></div>"+"<div class='jqx-clear jqx-position-absolute' id='verticalScrollBar"+this.element.id+"'></div>"+"<div class='jqx-clear jqx-position-absolute' id='horizontalScrollBar"+this.element.id+"'></div>"+"<div class='jqx-clear jqx-position-absolute jqx-border-reset' id='bottomRight'></div>"+"<div class='jqx-clear jqx-position-absolute' id='statusbar'></div>"+"<div class='jqx-clear jqx-position-absolute' id='pager' style='z-index: 20;'></div>"+"</div>"+"</div>";this.element.innerText="",this.element.innerHTML="",e.jqx.utilities.scrollBarSize!=15&&(this.scrollbarsize=e.jqx.utilities.scrollBarSize);if(this.source){this.source.dataBind||(this.source=new e.jqx.dataAdapter(this.source));var r=this.source._source.datafields;r&&r.length>0&&(this._camelCase=this.source._source.dataFields!==undefined,this.editmode=this.editmode.toLowerCase(),this.selectionmode=this.selectionmode.toLowerCase())}this.host.attr("role","grid"),this.host.attr("align","left"),this.element.innerHTML=n,this.host.addClass(this.toTP("jqx-grid")),this.host.addClass(this.toTP("jqx-reset")),this.host.addClass(this.toTP("jqx-rc-all")),this.host.addClass(this.toTP("jqx-widget")),this.host.addClass(this.toTP("jqx-widget-content")),this.wrapper=this.host.find("#wrapper"+this.element.id),this.content=this.host.find("#content"+this.element.id),this.content.addClass(this.toTP("jqx-reset"));var i=this.host.find("#verticalScrollBar"+this.element.id),s=this.host.find("#horizontalScrollBar"+this.element.id);this.bottomRight=this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright")).addClass(this.toTP("jqx-scrollbar-state-normal"));if(!i.jqxScrollBar)throw new Error("jqxGrid: Missing reference to jqxscrollbar.js");this.editors=new Array,this.vScrollBar=i.jqxScrollBar({vertical:!0,rtl:this.rtl,touchMode:this.touchmode,step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep,theme:this.theme,_triggervaluechanged:!1}),this.hScrollBar=s.jqxScrollBar({vertical:!1,rtl:this.rtl,touchMode:this.touchmode,step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep,theme:this.theme,_triggervaluechanged:!1}),this.pager=this.host.find("#pager"),this.pager[0].id="pager"+this.element.id,this.toolbar=this.host.find("#toolbar"),this.toolbar[0].id="toolbar"+this.element.id,this.toolbar.addClass(this.toTP("jqx-grid-toolbar")),this.toolbar.addClass(this.toTP("jqx-widget-header")),this.statusbar=this.host.find("#statusbar"),this.statusbar[0].id="statusbar"+this.element.id,this.statusbar.addClass(this.toTP("jqx-grid-statusbar")),this.statusbar.addClass(this.toTP("jqx-widget-header")),this.pager.addClass(this.toTP("jqx-grid-pager")),this.pager.addClass(this.toTP("jqx-widget-header")),this.groupsheader=this.host.find("#groupsheader"),this.groupsheader.addClass(this.toTP("jqx-grid-groups-header")),this.groupsheader.addClass(this.toTP("jqx-widget-header")),this.vScrollBar.css("visibility","hidden"),this.hScrollBar.css("visibility","hidden"),this.vScrollInstance=e.data(this.vScrollBar[0],"jqxScrollBar").instance,this.hScrollInstance=e.data(this.hScrollBar[0],"jqxScrollBar").instance,this.gridtable=null,this.isNestedGrid=this.host.parent()?this.host.parent().css("z-index")==2e3:!1,this.touchdevice=this.isTouchDevice(),this.localizestrings&&(this.localizestrings(),this.localization!=null&&this.localizestrings(this.localization,!1)),this.rowdetailstemplate&&(undefined==this.rowdetailstemplate.rowdetails&&(this.rowdetailstemplate.rowdetails="<div></div>"),undefined==this.rowdetailstemplate.rowdetailsheight&&(this.rowdetailstemplate.rowdetailsheight=200),undefined==this.rowdetailstemplate.rowdetailshidden&&(this.rowdetailstemplate.rowdetailshidden=!0));if(this.showfilterrow&&!this.filterable)throw new Error('jqxGrid: "showfilterrow" requires setting the "filterable" property to true!');if(this.autorowheight&&!this.autoheight&&!this.pageable)throw new Error('jqxGrid: "autorowheight" requires setting the "autoheight" or "pageable" property to true!');if(this.virtualmode&&this.rendergridrows==null)throw new Error('jqxGrid: "virtualmode" requires setting the "rendergridrows"!');if(this.virtualmode&&!this.pageable&&this.groupable)throw new Error('jqxGrid: "grouping" in "virtualmode" without paging is not supported!');if(this._testmodules())return;this._builddataloadelement(),this._cachedcolumns=this.columns,this.rowsheight!=25&&this._measureElement("cell"),(this.columnsheight!=25||this.columngroups)&&this._measureElement("column");if(this.source){var r=this.source.datafields;r==null&&this.source._source&&(r=this.source._source.datafields);if(r)for(var o=0;o<this.columns.length;o++){var u=this.columns[o];if(u&&u.cellsformat&&u.cellsformat.length>2)for(var a=0;a<r.length;a++)if(r[a].name==u.datafield&&!r[a].format){r[a].format=u.cellsformat;break}}}this.databind(this.source),this.showtoolbar&&this.toolbar.css("visibility","visible"),this.showstatusbar&&this.statusbar.css("visibility","visible"),this._arrange(),this.pageable&&this._initpager&&this._initpager(),this.tableheight=null;var f=this.that,l=function(){f.content&&(f.content[0].scrollTop=0,f.content[0].scrollLeft=0),f.gridcontent&&(f.gridcontent[0].scrollLeft=0,f.gridcontent[0].scrollTop=0)};this.addHandler(this.content,"mousedown",function(){l()}),this.addHandler(this.content,"scroll",function(e){return l(),!1}),this.showfilterrow||(!this.showstatusbar&&!this.showtoolbar&&this.host.addClass("jqx-disableselect"),this.content.addClass("jqx-disableselect")),this.enablebrowserselection&&(this.content.removeClass("jqx-disableselect"),this.host.removeClass("jqx-disableselect")),this._resizeWindow(),this.renderstatusbar&&this.renderstatusbar(this.statusbar),this.rendertoolbar&&this.rendertoolbar(this.toolbar),this.disabled&&this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this.hasTransform=e.jqx.utilities.hasTransform(this.host),this.scrollmode=="logical"&&(this.vScrollInstance.thumbStep=this.rowsheight,this.vScrollInstance.step=this.rowsheight),e.jqx.isHidden(this.host)||(this.filterable||this.groupable||this.sortable)&&this._initmenu()},_resizeWindow:function(){var t=this.that;if(this.width!=null&&this.width.toString().indexOf("%")!=-1||this.height!=null&&this.height.toString().indexOf("%")!=-1)this._updatesizeonwindowresize=!0,e.jqx.utilities.resize(this.host,function(n){var r=e(window).width(),i=e(window).height(),s=t.host.width(),o=t.host.height();t.autoheight&&(t._lastHostWidth=i);if(t._lastHostWidth!=s||t._lastHostHeight!=o){if(t.touchdevice&&t.editcell&&n!=="orientationchange")return;t._updatesize(t._lastHostWidth!=s,t._lastHostHeight!=o)}t._lastWidth=r,t._lastHeight=i,t._lastHostWidth=s,t._lastHostHeight=o})},_builddataloadelement:function(){this.dataloadelement&&this.dataloadelement.remove(),this.dataloadelement=e('<div style="overflow: hidden; position: absolute;"></div>');if(this.showdefaultloadelement){var t=e('<div style="z-index: 99999; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+this.gridlocalization.loadtext+"</span></div></div>");t.addClass(this.toTP("jqx-rc-all")),this.dataloadelement.addClass(this.toTP("jqx-rc-all")),t.addClass(this.toTP("jqx-fill-state-normal")),this.dataloadelement.append(t)}else this.dataloadelement.addClass(this.toTP("jqx-grid-load"));this.dataloadelement.width(this.width),this.dataloadelement.height(this.height),this.host.prepend(this.dataloadelement)},_measureElement:function(t){var n=e("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");n.addClass(this.toTP("jqx-widget")),e(document.body).append(n),t=="cell"?this._cellheight=n.height():this._columnheight=n.height(),n.remove()},_measureMenuElement:function(){var t=e("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");t.addClass(this.toTP("jqx-widget")),t.addClass(this.toTP("jqx-menu")),t.addClass(this.toTP("jqx-menu-item-top")),t.addClass(this.toTP("jqx-fill-state-normal")),e(document.body).append(t);var n=t.outerHeight();return t.remove(),n},_measureElementWidth:function(t){var n=e("<span style='visibility: hidden; white-space: nowrap;'>"+t+"</span>");n.addClass(this.toTP("jqx-widget")),n.addClass(this.toTP("jqx-grid")),n.addClass(this.toTP("jqx-grid-column-header")),n.addClass(this.toTP("jqx-widget-header")),e(document.body).append(n);var r=n.outerWidth()+20;return n.remove(),r},_getBodyOffset:function(){var t=0,n=0;return e("body").css("border-top-width")!="0px"&&(t=parseInt(e("body").css("border-top-width")),isNaN(t)&&(t=0)),e("body").css("border-left-width")!="0px"&&(n=parseInt(e("body").css("border-left-width")),isNaN(n)&&(n=0)),{left:n,top:t}},_testmodules:function(){var t="",n=this.that,r=function(){t.length!=""&&(t+=",")};this.columnsmenu&&!this.host.jqxMenu&&(this.sortable||this.groupable||this.filterable)&&(r(),t+=" jqxmenu.js"),this.host.jqxScrollBar||(r(),t+=" jqxscrollbar.js"),this.host.jqxButton||(r(),t+=" jqxbuttons.js"),e.jqx.dataAdapter||(r(),t+=" jqxdata.js"),this.pageable&&!this.gotopage&&(r(),t+="jqxgrid.pager.js"),this.filterable&&!this.applyfilters&&(r(),t+=" jqxgrid.filter.js"),this.groupable&&!this._initgroupsheader&&(r(),t+=" jqxgrid.grouping.js"),this.columnsresize&&!this.autoresizecolumns&&(r(),t+=" jqxgrid.columnsresize.js"),this.columnsreorder&&!this.setcolumnindex&&(r(),t+=" jqxgrid.columnsreorder.js"),this.sortable&&!this.sortby&&(r(),t+=" jqxgrid.sort.js"),this.editable&&!this.begincelledit&&(r(),t+=" jqxgrid.edit.js"),this.showaggregates&&!this.getcolumnaggregateddata&&(r(),t+=" jqxgrid.aggregates.js"),this.keyboardnavigation&&!this.selectrow&&(r(),t+=" jqxgrid.selection.js");if(t!=""||this.editable||this.filterable||this.pageable){var i=[],s=function(e){switch(e){case"checkbox":!n.host.jqxCheckBox&&!i.checkbox&&(i.checkbox=!0,r(),t+=" jqxcheckbox.js");break;case"numberinput":!n.host.jqxNumberInput&&!i.numberinput&&(i.numberinput=!0,r(),t+=" jqxnumberinput.js");break;case"datetimeinput":!n.host.jqxDateTimeInput&&!i.datetimeinput?(r(),i.datetimeinput=!0,t+=" jqxdatetimeinput.js(requires: jqxcalendar.js)"):!n.host.jqxCalendar&&!i.calendar&&(r(),t+=" jqxcalendar.js");break;case"combobox":!n.host.jqxComboBox&&!i.combobox?(r(),i.combobox=!0,t+=" jqxcombobox.js(requires: jqxlistbox.js)"):!n.host.jqxListBox&&!i.listbox&&(r(),i.listbox=!0,t+=" jqxlistbox.js");break;case"dropdownlist":!n.host.jqxDropDownList&&!i.dropdownlist?(r(),i.dropdownlist=!0,t+=" jqxdropdownlist.js(requires: jqxlistbox.js)"):!n.host.jqxListBox&&!i.listbox&&(r(),i.listbox=!0,t+=" jqxlistbox.js")}};(this.filterable||this.pageable)&&s("dropdownlist");for(var o=0;o<this.columns.length;o++){if(this.columns[o]==undefined)continue;var u=this.columns[o].columntype;s(u);if(this.filterable&&this.showfilterrow){var u=this.columns[o].filtertype;(u=="checkedlist"||u=="bool")&&s("checkbox"),u=="date"&&s("datetimeinput")}}if(t!="")throw new Error("jqxGrid: Missing references to the following module(s): "+t)}return!1},focus:function(){try{this.wrapper.focus();var e=this.that;setTimeout(function(){e.wrapper.focus()},25),this.focused=!0}catch(t){}},hiddenParent:function(){return e.jqx.isHidden(this.host)},resize:function(e,t){this.width=e,this.height=t,this._updatesize(!0,!0)},_updatesize:function(t,n){if(this._loading)return;var r=this.that;r._newmax=null;var i=r.host.width(),s=r.host.height();r._oldWidth||(r._oldWidth=i),r._oldHeight||(r._oldHeight=s),r._resizeTimer&&clearTimeout(r._resizeTimer);var o=5;r._resizeTimer=setTimeout(function(){r.resizingGrid=!0;if(e.jqx.isHidden(r.host))return;if(u!=r._oldHeight||n==1){var s=r.groupable&&r.groups.length>0,o=r.vScrollBar.css("visibility");if(!r.autoheight){r.virtualmode&&(r._pageviews=new Array);if(!s&&!r.rowdetails&&!r.pageable){r._arrange(),r.virtualsizeinfo=r._calculatevirtualheight();var u=Math.round(r.host.height())+2*r.rowsheight;parseInt(u)>=parseInt(r._oldHeight)&&(r.prerenderrequired=!0),r._renderrows(r.virtualsizeinfo)}else{r._arrange(),r.prerenderrequired=!0;var u=Math.round(r.host.height())+2*r.rowsheight;realheight=r._gettableheight();var a=Math.round(u/r.rowsheight),f=Math.max(r.dataview.totalrows,r.dataview.totalrecords);r.pageable&&(f=r.pagesize,r.pagesize>Math.max(r.dataview.totalrows,r.dataview.totalrecords)&&r.autoheight?f=Math.max(r.dataview.totalrows,r.dataview.totalrecords):r.autoheight||r.dataview.totalrows<r.pagesize&&(f=Math.max(r.dataview.totalrows,r.dataview.totalrecords)));var l=f*r.rowsheight,c=r._getpagesize();!r.pageable&&r.autoheight&&(a=f),r.virtualsizeinfo&&(r.virtualsizeinfo.visiblerecords=a),r.rendergridcontent(!0,!1),r._renderrows(r.virtualsizeinfo)}o!=r.vScrollBar.css("visibility")&&(r.vScrollInstance.setPosition(0),r._arrange(),r._updatecolumnwidths(),r.table&&r.table.width(r.columnsheader.width()),r._updatecellwidths())}}if(i!=r._oldWidth||t==1){var h=!1;if(r.editcell&&r.editcell.editor)switch(r.editcell.columntype){case"dropdownlist":h=r.editcell.editor.jqxDropDownList("isOpened")||r.editcell.editor.jqxDropDownList("isanimating")&&!r.editcell.editor.jqxDropDownList("ishiding");if(h){r.editcell.editor.jqxDropDownList({openDelay:0}),r.editcell.editor.jqxDropDownList("open"),r.editcell.editor.jqxDropDownList({openDelay:250});return}break;case"combobox":h=r.editcell.editor.jqxComboBox("isOpened")||r.editcell.editor.jqxComboBox("isanimating")&&!r.editcell.editor.jqxComboBox("ishiding");if(h){r.editcell.editor.jqxComboBox({openDelay:0}),r.editcell.editor.jqxComboBox("open"),r.editcell.editor.jqxComboBox({openDelay:250});return}break;case"datetimeinput":if(h){h=r.editcell.editor.jqxDateTimeInput("isOpened")||r.editcell.editor.jqxDateTimeInput("isanimating")&&!r.editcell.editor.jqxDateTimeInput("ishiding"),r.editcell.editor.jqxDateTimeInput({openDelay:0}),r.editcell.editor.jqxDateTimeInput("open"),r.editcell.editor.jqxDateTimeInput({openDelay:250});return}}var p=r.hScrollBar.css("visibility");r._arrange(),r._updatecolumnwidths(),r.table&&r.table.width(r.columnsheader.width()),r._updatecellwidths(),t==0&&r._oldWidth>i||(!n||r.dataview.rows.length==0)&&r._renderrows(r.virtualsizeinfo),p!=r.hScrollBar.css("visibility")&&r.hScrollInstance.setPosition(0)}r._oldWidth=i,r._oldHeight=u,r.resizingGrid=!1},o)},getTouches:function(t){return e.jqx.mobile.getTouches(t)},_updateTouchScrolling:function(){var t=this.that;if(t.isTouchDevice()){t.scrollmode="logical",t.vScrollInstance.thumbStep=t.rowsheight;var n=e.jqx.mobile.getTouchEventName("touchstart"),r=e.jqx.mobile.getTouchEventName("touchend"),i=e.jqx.mobile.getTouchEventName("touchmove");t.enablehover=!1,t.gridcontent&&(t.removeHandler(t.gridcontent,n+".touchScroll"),t.removeHandler(t.gridcontent,i+".touchScroll"),t.removeHandler(t.gridcontent,r+".touchScroll"),t.removeHandler(t.gridcontent,"touchcancel.touchScroll"),e.jqx.mobile.touchScroll(t.gridcontent[0],t.vScrollInstance.max,function(e,n){if(t.vScrollBar.css("visibility")=="visible"){var r=t.vScrollInstance.value;t.vScrollInstance.setPosition(r+n)}if(t.hScrollBar.css("visibility")=="visible"){var r=t.hScrollInstance.value;t.hScrollInstance.setPosition(r+e)}t.vScrollInstance.thumbCapture=!0,t._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),t._overlayElement&&(t.removeHandler(t._overlayElement,n+".touchScroll"),t.removeHandler(t._overlayElement,i+".touchScroll"),t.removeHandler(t._overlayElement,r+".touchScroll"),t.removeHandler(t._overlayElement,"touchcancel.touchScroll"),e.jqx.mobile.touchScroll(t._overlayElement[0],t.vScrollInstance.max,function(e,n){if(t.vScrollBar.css("visibility")=="visible"){var r=t.vScrollInstance.value;t.vScrollInstance.setPosition(r+n)}if(t.hScrollBar.css("visibility")=="visible"){var r=t.hScrollInstance.value;t.hScrollInstance.setPosition(r+e)}t.vScrollInstance.thumbCapture=!0,t._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),this.addHandler(this.host,n,function(){t.editcell?t._overlayElement.css("visibility","hidden"):t._overlayElement.css("visibility","visible")}),this.addHandler(this.host,r,function(){t.editcell?t._overlayElement.css("visibility","hidden"):t._overlayElement.css("visibility","visible")})))}},isTouchDevice:function(){if(this.touchDevice!=undefined)return this.touchDevice;var t=e.jqx.mobile.isTouchDevice();this.touchDevice=t;if(this.touchmode==1){if(e.jqx.browser.msie&&e.jqx.browser.version<9)return this.enablehover=!1,!1;t=!0,e.jqx.mobile.setMobileSimulator(this.element),this.touchDevice=t}else this.touchmode==0&&(t=!1);return t&&this.touchModeStyle!=0&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollbarsize=this.touchscrollbarsize),t},toTP:function(e){return this.toThemeProperty(e)},localizestrings:function(t,n){this._cellscache=new Array,e.jqx.dataFormat&&e.jqx.dataFormat.cleardatescache();if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(t!=null){for(var r in t)r.toLowerCase()!==r&&(t[r.toLowerCase()]=t[r]);t.pagergotopagestring&&(this.gridlocalization.pagergotopagestring=t.pagergotopagestring),t.pagershowrowsstring&&(this.gridlocalization.pagershowrowsstring=t.pagershowrowsstring),t.pagerrangestring&&(this.gridlocalization.pagerrangestring=t.pagerrangestring),t.pagernextbuttonstring&&(this.gridlocalization.pagernextbuttonstring=t.pagernextbuttonstring),t.pagerpreviousbuttonstring&&(this.gridlocalization.pagerpreviousbuttonstring=t.pagerpreviousbuttonstring),t.pagerfirstbuttonstring&&(this.gridlocalization.pagerfirstbuttonstring=t.pagerfirstbuttonstring),t.pagerlastbuttonstring&&(this.gridlocalization.pagerlastbuttonstring=t.pagerlastbuttonstring),t.groupsheaderstring&&(this.gridlocalization.groupsheaderstring=t.groupsheaderstring),t.sortascendingstring&&(this.gridlocalization.sortascendingstring=t.sortascendingstring),t.sortdescendingstring&&(this.gridlocalization.sortdescendingstring=t.sortdescendingstring),t.sortremovestring&&(this.gridlocalization.sortremovestring=t.sortremovestring),t.groupbystring&&(this.gridlocalization.groupbystring=t.groupbystring),t.groupremovestring&&(this.gridlocalization.groupremovestring=t.groupremovestring),t.firstDay&&(this.gridlocalization.firstDay=t.firstDay),t.days&&(this.gridlocalization.days=t.days),t.months&&(this.gridlocalization.months=t.months),t.AM&&(this.gridlocalization.AM=t.AM),t.PM&&(this.gridlocalization.PM=t.PM),t.patterns&&(this.gridlocalization.patterns=t.patterns),t.percentsymbol&&(this.gridlocalization.percentsymbol=t.percentsymbol),t.currencysymbol&&(this.gridlocalization.currencysymbol=t.currencysymbol),t.currencysymbolposition&&(this.gridlocalization.currencysymbolposition=t.currencysymbolposition),t.decimalseparator!=undefined&&(this.gridlocalization.decimalseparator=t.decimalseparator),t.thousandsseparator!=undefined&&(this.gridlocalization.thousandsseparator=t.thousandsseparator),t.filterclearstring&&(this.gridlocalization.filterclearstring=t.filterclearstring),t.filterstring&&(this.gridlocalization.filterstring=t.filterstring),t.filtershowrowstring&&(this.gridlocalization.filtershowrowstring=t.filtershowrowstring),t.filterselectallstring&&(this.gridlocalization.filterselectallstring=t.filterselectallstring),t.filterchoosestring&&(this.gridlocalization.filterchoosestring=t.filterchoosestring),t.filterorconditionstring&&(this.gridlocalization.filterorconditionstring=t.filterorconditionstring),t.filterandconditionstring&&(this.gridlocalization.filterandconditionstring=t.filterandconditionstring),t.filterstringcomparisonoperators&&(this.gridlocalization.filterstringcomparisonoperators=t.filterstringcomparisonoperators),t.filternumericcomparisonoperators&&(this.gridlocalization.filternumericcomparisonoperators=t.filternumericcomparisonoperators),t.filterdatecomparisonoperators&&(this.gridlocalization.filterdatecomparisonoperators=t.filterdatecomparisonoperators),t.filterbooleancomparisonoperators&&(this.gridlocalization.filterbooleancomparisonoperators=t.filterbooleancomparisonoperators),t.emptydatastring&&(this.gridlocalization.emptydatastring=t.emptydatastring),t.filterselectstring&&(this.gridlocalization.filterselectstring=t.filterselectstring),t.todaystring&&(this.gridlocalization.todaystring=t.todaystring),t.clearstring&&(this.gridlocalization.clearstring=t.clearstring),t.validationstring&&(this.gridlocalization.validationstring=t.validationstring),t.loadtext&&(this.gridlocalization.loadtext=t.loadtext);if(n!==!1){this._initpager&&this._initpager(),this._initgroupsheader&&this._initgroupsheader(),this._initmenu&&this._initmenu(),this._builddataloadelement(),e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none");if(this.filterable&&this.showfilterrow&&this._updatefilterrow){for(var r in this._filterrowcache)e(this._filterrowcache[r]).remove();this._filterrowcache=[],this._updatefilterrow()}this.showaggregates&&this.refresheaggregates&&this.refresheaggregates(),this._renderrows(this.virtualsizeinfo)}}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",groupsheaderstring:"Drag a column and drop it here to group by that column",sortascendingstring:"Sort Ascending",sortdescendingstring:"Sort Descending",sortremovestring:"Remove Sort",groupbystring:"Group By this column",groupremovestring:"Remove from groups",filterclearstring:"Clear",filterstring:"Filter",filtershowrowstring:"Show rows where:",filterorconditionstring:"Or",filterandconditionstring:"And",filterselectallstring:"(Select All)",filterchoosestring:"Please Choose:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today"}},_initmenu:function(){var t=this.that;if(this.host.jqxMenu){this.gridmenu&&(this.filterable&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu.removeData(),this.gridmenu.remove()),this.menuitemsarray=new Array,this.gridmenu=e('<div id="gridmenu'+this.element.id+'" style="z-index: 9999999999999;"></div>'),this.host.append(this.gridmenu);var n=e("<ul></ul>"),r='<div class="jqx-grid-sortasc-icon"></div>',i=e("<li>"+r+this.gridlocalization.sortascendingstring+"</li>"),s='<div class="jqx-grid-sortdesc-icon"></div>',o=e("<li>"+s+this.gridlocalization.sortdescendingstring+"</li>"),u='<div class="jqx-grid-sortremove-icon"></div>',a=e("<li>"+u+this.gridlocalization.sortremovestring+"</li>"),f='<div class="jqx-grid-groupby-icon"></div>',l=e("<li>"+f+this.gridlocalization.groupbystring+"</li>"),c=e("<li>"+f+this.gridlocalization.groupremovestring+"</li>"),h=e('<li type="separator"></li>'),p=e('<li class="filter" style="height: 175px;" ignoretheme="true"><div class="filter"></div></li>'),d=this.gridlocalization.sortascendingstring.length,v=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>d&&(d=this.gridlocalization.sortdescendingstring.length,v=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>d&&(d=this.gridlocalization.sortremovestring.length,v=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(this.gridlocalization.groupbystring.length>d&&(d=this.gridlocalization.groupbystring.length,v=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>d&&(d=this.gridlocalization.groupremovestring.length,v=this.gridlocalization.groupremovestring));var m=200;v=e.trim(v).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");var g=e("<span>"+v+"</span>");g.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(g),m=g.outerWidth()+60,g.remove();var y=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(n.append(i),this.menuitemsarray[0]=i[0],n.append(o),this.menuitemsarray[1]=o[0],n.append(a),this.menuitemsarray[2]=a[0],y=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(n.append(l),this.menuitemsarray[3]=l[0],n.append(c),this.menuitemsarray[4]=c[0],y+=2);var b=this._measureMenuElement(),w=y*b+9,E=!0;if(this.filterable&&!this.showfilterrow&&this.showfiltermenuitems){if(!this._initfilterpanel)throw new Error("jqxGrid: Missing reference to jqxgrid.filter.js.");this.menuitemsarray[5]=p[0],this.menuitemsarray[6]=p[0],n.append(h),n.append(p),w+=180,e.jqx.browser.msie&&e.jqx.browser.version<8&&(w+=20);var S=e(p).find("div:first");m+=20,this._initfilterpanel(this,S,"",m),E=!1,this.removeHandler(e(document),"click.menu"+t.element.id,t._closemenuafterclick,t),this.addHandler(e(document),"click.menu"+t.element.id,t._closemenuafterclick,t)}this.gridmenu.append(n),e.jqx.browser.msie&&e.jqx.browser.version<8&&this.filterable&&(e("#listBoxfilter1"+this.element.id).css("z-index",4990),e("#listBoxfilter2"+this.element.id).css("z-index",4990),e("#listBoxfilter3"+this.element.id).css("z-index",4990),e("#gridmenu"+this.element.id).css("z-index",5e3),this.addHandler(e("#gridmenu"+this.element.id),"initialized",function(){e("#menuWrappergridmenu"+t.element.id).css("z-index",4980)})),this.menuitemsarray[0]==undefined&&(w=65),this.removeHandler(this.gridmenu,"keydown"),this.addHandler(this.gridmenu,"keydown",function(n){if(n.keyCode==27)t.gridmenu.jqxMenu("close");else if(n.keyCode==13&&t.filterable&&t._buildfilter){var r=e(e.find("#filter1"+t.element.id)).jqxDropDownList("container").css("display")=="block",i=e(e.find("#filter2"+t.element.id)).jqxDropDownList("container").css("display")=="block",s=e(e.find("#filter3"+t.element.id)).jqxDropDownList("container").css("display")=="block",o=e(e.find("#filterclearbutton"+t.element.id)).hasClass("jqx-fill-state-focus");if(o){var u=e.data(document.body,"contextmenu"+t.element.id).column;t._clearfilter(t,t.element,u),t.gridmenu.jqxMenu("close")}else if(!r&&!i&&!s){var u=e.data(document.body,"contextmenu"+t.element.id).column;t.gridmenu.jqxMenu("close"),t._buildfilter(t,p,u)}}}),this.popupwidth!="auto"&&(m=this.popupwidth),this.gridmenu.jqxMenu({width:m,height:w,autoCloseOnClick:E,autoOpenPopup:!1,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0}),this.filterable&&this.gridmenu.jqxMenu("_setItemProperty",p[0].id,"closeOnClick",!1);if(this.rtl){var x=this.that;e.each(n.find("li"),function(){e(this).addClass(x.toTP("jqx-rtl"))});var T=function(e){var t=e.find("div");t.css("float","right"),t.css("margin-left","4px"),t.css("margin-right","-4px")};T(a),T(o),T(i),T(l),T(c)}this._handlemenueevents()}else this.columnsmenu=!1},_arrangemenu:function(){this.gridmenu||this._initmenu();var t=this.gridlocalization.sortascendingstring.length,n=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>t&&(t=this.gridlocalization.sortdescendingstring.length,n=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>t&&(t=this.gridlocalization.sortremovestring.length,n=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&(this.gridlocalization.groupbystring.length>t&&(t=this.gridlocalization.groupbystring.length,n=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>t&&(t=this.gridlocalization.groupremovestring.length,n=this.gridlocalization.groupremovestring));var r=200;n=e.trim(n).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");var i=e("<span>"+n+"</span>");i.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(i),r=i.outerWidth()+60,i.remove();var s=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(s=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(s+=2);var o=s*27+3;this.filterable&&this.showfiltermenuitems&&this._initfilterpanel&&(o+=180,r+=20,e.jqx.browser.msie&&e.jqx.browser.version<8&&(o+=20)),this.menuitemsarray[0]==undefined&&(o=65),this.popupwidth!="auto"&&(r=this.popupwidth),this.gridmenu.jqxMenu({width:r,height:o})},_closemenuafterclick:function(t){var n=t!=null?t.data:this,r=!1;if(t.target==undefined||t.target!=undefined&&t.target.className.indexOf==undefined){n.gridmenu.jqxMenu("close");return}if(t.target.className.indexOf("filter")!=-1&&t.target.className.indexOf("jqx-grid-cell-filter")==-1)return;if(t.target.className.indexOf("jqx-grid-cell")!=-1){n.gridmenu.jqxMenu("close");return}if(n._hasOpenedMenu&&e(t.target).ischildof(n.gridmenu))return;var i=n.host.coord(),s=n.gridmenu.coord(),o=t.pageX,u=t.pageY;e.each(e(t.target).parents(),function(){if(this.id!=null&&this.id.indexOf&&this.id.indexOf("filter")!=-1)return r=!0,!1;if(this.className.indexOf&&this.className.indexOf("filter")!=-1&&this.className.indexOf("jqx-grid-cell-filter")==-1)return r=!0,!1;if(this.className.indexOf&&this.className.indexOf("jqx-grid-cell")!=-1)return n.gridmenu.jqxMenu("close"),!1;if(this.className.indexOf&&this.className.indexOf("jqx-grid-column")!=-1)return n.gridmenu.jqxMenu("close"),!1});if(r)return;try{if(n.filtermode==="default"){var a=e(e.find("#filter1"+n.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup,f=new Date;if(f-a<100)return;var l=e(e.find("#filter3"+n.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup;if(f-l<100)return;if(e(e.find("#filter3"+n.element.id)).jqxDropDownList("container").css("display")=="block")return;if(e(e.find("#filter1"+n.element.id)).jqxDropDownList("container").css("display")=="block")return;if(e(e.find("#filter2"+n.element.id)).jqxDropDownList("container").css("display")=="block")return}else{var a=e(e.find("#filter1"+n.element.id)).data().jqxListBox.instance.vScrollInstance._mouseup,f=new Date;if(f-a<100)return;var l=e(e.find("#filter1"+n.element.id)).data().jqxListBox.instance.hScrollInstance._mouseup;if(f-l<100)return}}catch(c){}if(o>=s.left&&o<=s.left+n.gridmenu.width()&&u>=s.top&&u<=s.top+n.gridmenu.height())return;n.gridmenu.jqxMenu("close")},_handlemenueevents:function(){var t=this.that;this.removeHandler(this.gridmenu,"closed"),this.addHandler(this.gridmenu,"closed",function(e){t._closemenu()}),this.removeHandler(this.gridmenu,"itemclick"),this.addHandler(this.gridmenu,"itemclick",function(n){var r=n.args;for(var i=0;i<t.menuitemsarray.length;i++){var s=t.menuitemsarray[i];if(r==s){if(e(r).attr("ignoretheme")!=undefined)return;var o=e.data(document.body,"contextmenu"+t.element.id),u=o.column;t.filterable&&t.gridmenu.jqxMenu("close");var a=u.displayfield;a==null&&(a=u.datafield);if(o!=null)switch(i){case 0:t.sortby(a,"ascending",null);break;case 1:t.sortby(a,"descending",null);break;case 2:t.sortby(a,null,null);break;case 3:t.addgroup(u.datafield);break;case 4:t.removegroup(u.datafield);break;case 5:var f=e(t.menuitemsarray[6]);e(f).css("display","block");break;case 7:}break}}})},getdatainformation:function(){var e=this.dataview.totalrecords;return this.summaryrows&&(e+=this.summaryrows.length),{rowscount:e,sortinformation:this.getsortinformation(),paginginformation:this.getpaginginformation()}},getsortinformation:function(){return{sortcolumn:this.sortcolumn,sortdirection:this.sortdirection}},getpaginginformation:function(){return{pagenum:this.dataview.pagenum,pagesize:this.pagesize,pagescount:Math.ceil(this.dataview.totalrecords/this.pagesize)}},_updaterowsproperties:function(){this._updatehiddenrows(),this._updaterowheights(),this._updaterowdetails()},_updatehiddenrows:function(){var t=this.that;this.hiddens=new Array;var n=this.hiddenboundrows;e.each(n,function(e){if(this.index!=undefined){var n=this.index,r=t.getrowvisibleindex(e);t.hiddens[r]=this.hidden}})},_updaterowheights:function(){var t=this.that;this.heights=new Array;var n=this.heightboundrows;e.each(n,function(e){if(this.index!=undefined){var n=this.index,r=t.getrowvisibleindex(e);t.heights[r]=this.height}})},_updaterowdetails:function(){var t=this.that;this.details=new Array;var n=this.detailboundrows;e.each(n,function(e){if(this.index!=undefined){var n=this.index,r=t.getrowvisibleindex(e);t.details[r]=this.details}})},_getmenuitembyindex:function(e){return e==undefined?null:this.menuitemsarray[e]},_closemenu:function(){if(this._hasOpenedMenu){this.gridmenu!=null&&this.gridmenu.jqxMenu("close");var t=e.data(document.body,"contextmenu"+this.element.id),n=16;if(t!=null&&this.autoshowcolumnsmenubutton){if(this.enableanimations){e(t.columnsmenu).animate({"margin-left":0},"fast",function(){e(t.columnsmenu).css("display","none")});var r=this.rtl?0:-32;t.column.iconscontainer.animate({"margin-left":r},"fast")}else{e(t.columnsmenu).css("display","none");var r=this.rtl?0:-32;t.column.iconscontainer.css("margin-left",r)}e.data(document.body,"contextmenu"+this.element.id,null)}this._hasOpenedMenu=!1;var i=this._getmenuitembyindex(5);if(i){var s=e(i).find("#filter1"+this.element.id),o=e(i).find("#filter2"+this.element.id),u=e(i).find("#filter3"+this.element.id);s.length>0&&this.filtermode==="default"&&(s.jqxDropDownList("hideListBox"),o.jqxDropDownList("hideListBox"),u.jqxDropDownList("hideListBox"))}}},scrolloffset:function(e,t){if(e==null||t==null||e==undefined||t==undefined)return;this.vScrollBar.jqxScrollBar("setPosition",e),this.hScrollBar.jqxScrollBar("setPosition",t)},scrollleft:function(e){if(e==null||e==undefined)return;this.hScrollBar.css("visibility")!="hidden"&&this.hScrollBar.jqxScrollBar("setPosition",e)},scrolltop:function(e){if(e==null||e==undefined)return;this.vScrollBar.css("visibility")!="hidden"&&this.vScrollBar.jqxScrollBar("setPosition",e)},beginupdate:function(){this._updating=!0,this._datachanged=!1},endupdate:function(){this.resumeupdate()},resumeupdate:function(){this._updating=!1;if(this._datachanged==1){var e=this.vScrollInstance.value;this.render(!0,!0,!1),this._datachanged=!1,e!=0&&e<this.vScrollInstance.max&&this.scrolltop(e)}else this.rendergridcontent(!0),this._renderrows(this.virtualsizeinfo);this.showaggregates&&this.renderaggregates&&this.renderaggregates(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)},updating:function(){return this._updating},showloadelement:function(){this.renderloadelement&&this.dataloadelement.html(this.renderloadelement()),e(this.dataloadelement).css("visibility","visible"),e(this.dataloadelement).css("display","block")},hideloadelement:function(){e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none")},_updatefocusedfilter:function(){var e=this.that;e.focusedfilter&&(e.focusedfilter.focus(),setTimeout(function(){e.focusedfilter.focus();if(e.focusedfilter[0].nodeName.toLowerCase()=="input"){var t=e.focusedfilter.val().length;try{if("selectionStart"in e.focusedfilter[0])e.focusedfilter[0].setSelectionRange(t,t);else{var n=e.focusedfilter[0].createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}}catch(r){}}},10))},databind:function(t,n){if(this.loadingstate===!0)return;this.host.css("display")=="block"&&(this.autoshowloadelement?(e(this.dataloadelement).css("visibility","visible"),e(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),this._hideemptyrow()):(e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none"))),!this._initgroupsheader&&this.groups.length>0&&(this.groups=new Array);var r=this.that;t==null&&(t={}),t.recordstartindex||(t.recordstartindex=0),t.recordendindex||(t.recordendindex=0);if(t.loadallrecords==undefined||t.loadallrecords==null)t.loadallrecords=!0;if(t.sortcomparer==undefined||t.sortcomparer==null)t.sortcomparer=null;if(t.filter==undefined||t.filter==null)t.filter=null;if(t.sort==undefined||t.sort==null)t.sort=null;if(t.data==undefined||t.data==null)t.data=null;var i=null;t!=null&&(i=t._source!=undefined?t._source.url:t.url),this.dataview=this.dataview||new e.jqx.dataview,e.jqx.dataview.sort&&e.extend(this.dataview,new e.jqx.dataview.sort),e.jqx.dataview.grouping&&e.extend(this.dataview,new e.jqx.dataview.grouping),this.dataview.suspendupdate(),this.dataview.pageable=this.pageable,this.dataview.groupable=this.groupable,this.dataview.groups=this.groups,this.dataview.virtualmode=this.virtualmode,this.dataview.grid=this,this.dataview._clearcaches(),!this.pageable&&this.virtualmode&&(this.loadondemand=!0);if(!r.initializedcall){if(t._source&&this.sortable){t._source.sortcolumn!=undefined&&(this.sortcolumn=t._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=t._source.sortcolumn,t._source.sortcolumn=null);if(t._source.sortdirection!=undefined){this.dataview.sortfielddirection=t._source.sortdirection;var s=t._source.sortdirection;if(s=="a"||s=="asc"||s=="ascending"||s==1)var o=!0;else var o=!1;s!=null?this.sortdirection={ascending:o,descending:!o}:this.sortdirection={ascending:!1,descending:!1}}}this.pageable&&t._source&&(t._source.pagenum!=undefined&&(this.dataview.pagenum=t._source.pagenum),t._source.pagesize!=undefined?(this.pagesize=t._source.pagesize,this.dataview.pagesize=t._source.pagesize):(this.dataview.pagesize=t._source.pagesize,this.dataview.pagesize==undefined&&(this.dataview.pagesize=this.pagesize))),this.sortable&&(t.sortcolumn&&(this.dataview.sortfield=t.sortcolumn),t.sortdirection&&(this.dataview.sortfielddirection=t.sortdirection))}this._loading=!0,this.dataview.update=function(t){!r.pageable&&r.virtualmode&&(r.loadondemand=!0),r._loading=!1,r.dataview.isupdating()&&r.dataview.resumeupdate(!1);if(r.pageable&&r.pagerrenderer){if(!r._initpager)throw new Error("jqxGrid: Missing reference to jqxgrid.pager.js.");r._initpager()}if(r.source&&r.source.sortcolumn&&r.sortby&&!r.virtualmode)r.render(),r.source._source.sort||r.sortby(r.source.sortcolumn,r.source.sortdirection,r.source.sortcomparer),r.source.sortcolumn=null;else{var i=r.vScrollInstance.value,s=r.hScrollInstance.value,o=r.source?r.source.datatype:"array";if(o!="local"||o!="array"){var u=r.virtualsizeinfo==null||r.virtualsizeinfo!=null&&r.virtualsizeinfo.virtualheight==0;if(n=="cells"){var a=!1;r.filterable&&r._initfilterpanel&&r.dataview.filters.length&&(a=!0);if(0==t){!r.vScrollInstance.isScrolling()&&!r.hScrollInstance.isScrolling()&&(r._cellscache=new Array,r._pagescache=new Array,r._renderrows(r.virtualsizeinfo),r.showfilterrow&&r.filterable&&r.filterrow&&r._updatelistfilters(!0),r.showaggregates&&r._updateaggregates&&r._updateaggregates()),r.sortcolumn&&r.sortby(r.sortcolumn,r.dataview.sortfielddirection,r.source.sortcomparer),r.autoshowloadelement&&(e(r.dataloadelement).css("visibility","hidden"),e(r.dataloadelement).css("display","none")),r.virtualmode&&!r._loading&&(r.loadondemand=!0,r._renderrows(r.virtualsizeinfo));return}a?n="filter":r.sortcolumn!=undefined&&(n="sort")}!r.virtualmode||u||r.virtualmode&&r.pageable?r.initializedcall==1&&n=="pagechanged"?(i=0,r.groupable&&r.groups.length>0?(r._render(!0,!0,!1,!1,!1),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo)):(r.rendergridcontent(!0),r.pageable&&r.updatepagerdetails&&(r.updatepagerdetails(),r.autoheight?(r._updatepageviews(),r.autorowheight&&r._renderrows(this.virtualsizeinfo)):r.autorowheight&&(r._updatepageviews(),r._renderrows(this.virtualsizeinfo)))),r.showaggregates&&r._updateaggregates&&r._updateaggregates()):n=="filter"?r.virtualmode?(r._render(!0,!0,!1,!1,!1),r._updatefocusedfilter(),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo)):r._render(!0,!0,!1,!1,!1):n=="sort"?r.virtualmode?(r.rendergridcontent(!0),r.showaggregates&&r._updateaggregates&&r._updateaggregates()):(r._render(!0,!0,!1,!1,!1),r.sortcolumn&&!r.source.sort&&r.sortby(r.sortcolumn,r.dataview.sortfielddirection,r.source.sortcomparer)):n=="data"?r._render(!0,!0,!1,!1,!1):n=="state"?r._render(!0,!0,!1,r.menuitemsarray&&r.menuitemsarray.length>0&&!r.virtualmode):r._render(!0,!0,!0,r.menuitemsarray&&r.menuitemsarray.length>0&&!r.virtualmode):r.virtualmode&&t==1&&!r.pageable?(r._render(!0,!0,!1,!1,!1),r._updatefocusedfilter(),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo)):r.virtualmode&&!r.pageable&&t==0&&n!=undefined?(r.rendergridcontent(!0),r.showaggregates&&r._updateaggregates&&r._updateaggregates()):r.virtualmode&&r.dataview.totalrecords==0&&r.dataview.filters.length>0?r._render(!0,!0,!0,r.menuitemsarray&&!r.virtualmode):(r._pagescache=new Array,r._renderrows(r.virtualsizeinfo)),r.vScrollInstance.value!=i&&i<=r.vScrollInstance.max&&r.vScrollInstance.setPosition(i),r.hScrollInstance.value!=s&&s<=r.hScrollInstance.max&&r.hScrollInstance.setPosition(s)}}r.autoshowloadelement&&(e(r.dataloadelement).css("visibility","hidden"),e(r.dataloadelement).css("display","none")),r.pageable&&r.pagerrightbutton&&(r.pagerrightbutton.jqxButton({disabled:!1}),r.pagerleftbutton.jqxButton({disabled:!1}),r.pagershowrowscombo.jqxDropDownList({disabled:!1})),r._raiseEvent(11);if(!r.initializedcall){var f=function(){r._raiseEvent(0),r.initializedcall=!0,r.isInitialized=!0,r.ready&&r.ready(),r.autoloadstate&&r.loadstate&&r.loadstate(null,!0)};e.jqx.isHidden(r.host)?(r.readyInterval&&clearInterval(r.readyInterval),r.readyInterval=setInterval(function(){e.jqx.isHidden(r.host)||r.__isRendered&&(clearInterval(r.readyInterval),r.readyInterval=null,f(),r._initmenu())},200)):f(),r.width!=null&&r.width.toString().indexOf("%")!=-1||r.height!=null&&r.height.toString().indexOf("%")!=-1;if(r.host.css("visibility")=="hidden"){var l=e.jqx.browser.msie&&e.jqx.browser.version<8;r.vScrollBar.css("visibility")=="visible"&&r.vScrollBar.css("visibility","inherit"),r.autowidth||r.hScrollBar.css("visibility")=="visible"&&r.hScrollBar.css("visibility","inherit"),r._intervalTimer=setInterval(function(){r.host.css("visibility")=="visible"&&(r._updatesize(!0),clearInterval(r._intervalTimer))},100)}}else r._updateTouchScrolling()},this.dataview.databind(t),this.dataview.isupdating()&&(i!=undefined?this.dataview.suspend=!1:this.dataview.resumeupdate(!1)),this._initializeRows()},scrollto:function(e,t){undefined!=e&&this.hScrollInstance.setPosition(e),undefined!=t&&this.vScrollInstance.setPosition(t)},scrollposition:function(){return{top:this.vScrollInstance.value,left:this.hScrollInstance.value}},ensurerowvisible:function(e){if(this.autoheight&&!this.pageable)return!0;var t=this._getpagesize(),n=Math.floor(e/t);!this._pageviews[n]&&!this.pageable&&this._updatepageviews();if(this.groupable&&this.groups.length>0)return!0;var r=!1;if(this.pageable&&this.gotopage&&!this.virtualmode){var n=Math.floor(e/t);if(this.dataview.pagenum!=n){if(this.groupable&&this.groups.length>0)return!0;this.gotopage(n),r=!0}}var i=this.vScrollInstance.value,s=this._gettableheight()-this.rowsheight,o=t*(e/t-n);o=Math.round(o);if(this._pageviews[n]){var u=this._pageviews[n].top,a=u+o*this.rowsheight;if(this.rowdetails)for(var f=t*n;f<e;f++)this.details[f]&&this.details[f].rowdetailshidden==0&&(a+=this.details[f].rowdetailsheight);this.scrollmode=="deferred"&&this.vScrollInstance.max<=a+this.rowsheight&&(a=this.vScrollInstance.max),a<i?(this.scrolltop(a),r=!0):a>i+s+2&&(this.scrolltop(a-s),r=!0)}else if(this.pageable){var a=o*this.rowsheight;if(this.rowdetails)for(var f=t*n;f<t*n+o;f++)this.details[f]&&this.details[f].rowdetailshidden==0&&(a+=this.details[f].rowdetailsheight);if(a<i||a>i+s)this.scrollto(0,a),r=!0}return r},ensurecellvisible:function(t,n){var r=this.that,i=this.hScrollBar.jqxScrollBar("value"),s=r.hScrollInstance.max;r.rtl&&this.hScrollBar.css("visibility")!="visible"&&(s=0);var o=this.ensurerowvisible(t),u=0;if(this.columns.records){var a=i;if(this.hScrollBar.css("visibility")=="hidden")return;var f=this.host.width(),l=0,c=this.vScrollBar.css("visibility")=="visible"?20:0,h=!1;e.each(this.columns.records,function(){if(this.datafield==n){var e=0,t=r.rtl?s-i:a;return u+this.width>t+f-c?(e=u+this.width-f+c,r.rtl&&(e=s-e),r.scrollleft(e),h=!0):u<=t&&(e=u-this.width,r.rtl&&(e=s-e),r.scrollleft(e),h=!0),l==0?(r.rtl?r.scrollleft(s):r.scrollleft(0),h=!0):l==r.columns.records.length-1&&r.hScrollBar.css("visibility")=="visible"&&(r.rtl?r.scrollleft(r.hScrollBar.jqxScrollBar("min")):r.scrollleft(r.hScrollBar.jqxScrollBar("max")),h=!0),!1}l++,u+=this.width}),h||r.scrollleft(a)}return o},setrowheight:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return e==null||t==null?!1:(this.heightboundrows[e]={index:e,height:t},e=this.getrowvisibleindex(e),e<0?!1:(this.rows.records[e]?this.rows.records[e].height=t:(row=new n(this,null),row.height=t,this.rows.replace(e,row)),this.heights[e]=t,this.rendergridcontent(!0),!0))},getrowheight:function(e){if(e==null)return null;e=this.getrowvisibleindex(e);if(e<0)return!1;if(this.rows.records[e])return this.rows.records[e].height},setrowdetails:function(t,n,r,i){if(t==undefined||t==null||t<0)return;var s=t+"_";if(this._rowdetailscache[s]){var o=this._rowdetailscache[s].element;e(o).remove(),this._rowdetailscache[s]=null}var u=this.dataview.generatekey();return this.detailboundrows[t]={index:t,details:{rowdetails:n,rowdetailsheight:r,rowdetailshidden:i,key:u}},t=this.getrowvisibleindex(t),t<0?!1:this._setrowdetails(t,n,r,i,u)},getcolumn:function(t){var n=null;return this.columns.records&&e.each(this.columns.records,function(){if(this.datafield==t||this.displayfield==t)return n=this,!1}),n},_getcolumnindex:function(t){var n=-1;return this.columns.records&&e.each(this.columns.records,function(){n++;if(this.datafield==t)return!1}),n},_getcolumnat:function(e){var t=this.columns.records[e];return t},_getprevvisiblecolumn:function(e){var t=this.that;while(e>0){e--;var n=t.getcolumnat(e);if(!n)return null;if(!n.hidden)return n}return null},_getnextvisiblecolumn:function(e){var t=this.that;while(e<this.columns.records.length){e++;var n=t.getcolumnat(e);if(!n)return null;if(!n.hidden)return n}return null},getcolumnat:function(e){if(!isNaN(e)){var t=this.columns.records[e];return t}return null},_getcolumn:function(t){var n=null;return e.each(this._columns,function(){if(this.datafield==t||this.displayfield==t)return n=this,!1}),n},_setcolumnproperty:function(e,t,n){if(e==null||t==null||n==null)return null;t=t.toLowerCase();var r=this.getcolumn(e);if(r==null)return;var i=r[t];r[t]=n;var s=this._getcolumn(e);s!=null&&(s[t]=n),this._cellscache=new Array;switch(t){case"filteritems":this.filterable&&this.showfilterrow&&this._updatelistfilters(!0,!0);break;case"text":this.prerenderrequired=!0,this._rendercolumnheaders(),this._updatecellwidths(),this._groupsheader()&&this._initgroupsheader&&this._initgroupsheader(),this._renderrows(this.virtualsizeinfo);break;case"editable":case"resizable":case"draggable":if(t=="editable"&&n!=i){this.editcell!=null&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!0);if(r.columntype=="checkbox"){this.prerenderrequired=!0,this.rendergridcontent(!0,!1);if(this.updating())return!1}if(this.updating())return!1;this._renderrows(this.virtualsizeinfo)}break;case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"aggregates":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"filterable":case"groupable":case"cellclass":case"cellclassname":case"classname":case"class":this.prerenderrequired=!0,this.rendergridcontent(!0);if(this.updating())return!1;t=="hidden"&&(this._updatecolumnwidths(),this._updatecellwidths()),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updateaggregates&&this._updateaggregates();break;case"width":case"minwidth":case"maxwidth":if(this.updating())return!1;r._width=null,r._percentagewidth=null,this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)}},_getcolumnproperty:function(e,t){if(e==null||t==null)return null;t=t.toLowerCase();var n=this.getcolumn(e);return n[t]},setcolumnproperty:function(e,t,n){this._setcolumnproperty(e,t,n)},getcolumnproperty:function(e,t){return this._getcolumnproperty(e,t)},hidecolumn:function(e){this._setcolumnproperty(e,"hidden",!0)},showcolumn:function(e){this._setcolumnproperty(e,"hidden",!1)},iscolumnvisible:function(e){return!this._getcolumnproperty(e,"hidden")},pincolumn:function(e){this._setcolumnproperty(e,"pinned",!0)},unpincolumn:function(e){this._setcolumnproperty(e,"pinned",!1)},iscolumnpinned:function(e){return this._getcolumnproperty(e,"pinned")},_setrowdetails:function(e,t,n,r,i){n==0&&(n=100);if(e==null||n==null)return!1;if(i!=null)this.details[e]={rowdetails:t,rowdetailsheight:n,rowdetailshidden:r,detailskey:i};else{var s=this.details[e]!=null?this.details[e].detailskey:null,o={rowdetails:t,rowdetailsheight:n,rowdetailshidden:r,detailskey:s},u=this.that;for(var a=0;a<this.detailboundrows.length;a++)if(this.detailboundrows[a]!=undefined){var f=this.detailboundrows[a];if(f.details.detailskey==s){f.details.rowdetailsheight=o.rowdetailsheight,f.details.rowdetailshidden=o.rowdetailshidden,f.details.rowdetails=o.rowdetails;break}}this.details[e]=o}return this.rendergridcontent(!0),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),!0},getrowdetails:function(e){return e==null?!1:(e=this.getrowvisibleindex(e),this._getrowdetails(e))},_getrowdetails:function(e){if(e==null)return!1;if(e<0)return!1;if(this.details[e])return this.details[e];if(this.rowdetailstemplate)return this.rowdetailstemplate},getrecordscount:function(){return this.dataview.totalrecords},showrowdetails:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(e==null)return!1;e=this.getrowvisibleindex(e);if(e<0)return!1;var t=this._getrowdetails(e);return this._setrowdetailsvisibility(e,t,!1)},hiderowdetails:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);e=this.getrowvisibleindex(e);if(e<0)return!1;var t=this._getrowdetails(e);return this._setrowdetailsvisibility(e,t,!0)},_togglerowdetails:function(e){var t=e.visibleindex,n=this._getrowdetails(t);if(n!=null){var r=this.vScrollInstance.value,i=!n.rowdetailshidden,s=this._setrowdetailsvisibility(t,n,i);return r!==0&&this.vScrollBar.css("visibility")!=="hidden"&&(r<=this.vScrollInstance.max?this.vScrollInstance.setPosition(r):this.vScrollInstance.setPosition(this.vScrollInstance.max)),s}return!1},_setrowdetailsvisibility:function(e,t,n){if(this.rowdetailstemplate){this.details||(this.details=new Array);if(!this.details[e]){this.details[e]={rowdetailshidden:this.rowdetailstemplate.rowdetailshidden,rowdetailsheight:this.rowdetailstemplate.rowdetailsheight,rowdetails:this.rowdetailstemplate.rowdetails};var r=this.dataview.generatekey();this.details[e].detailskey=r,this.detailboundrows[e]={index:e,details:this.details[e]}}}if(t==null)return!1;this.details[e].rowdetailshidden=n;var i=this.details[e];return n?this._raiseEvent(21,{rowindex:e,details:i.rowdetails,height:i.rowdetailsheight}):this._raiseEvent(20,{rowindex:e,details:i.rowdetails,height:i.rowdetailsheight}),this._setrowdetails(e,i.rowdetails,i.rowdetailsheight,i.rowdetailshidden)},getrowvisibleindex:function(e){if(e==undefined||e==null||e<0)return!1;if(this.virtualmode){var t=this.dataview.loadedrecords[e];return t==undefined?-1:t.visibleindex}return this.getrowdisplayindex(e)},hiderow:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return e==undefined||e==null||e<0?!1:e==null?!1:(this.hiddenboundrows[e]={index:e,hidden:!0},e=this.getrowvisibleindex(e),this._setrowvisibility(e,!0))},showrow:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return e==undefined||e==null||e<0?!1:e==null?!1:(this.hiddenboundrows[e]={index:e,hidden:!1},e=this.getrowvisibleindex(e),this._setrowvisibility(e,!1))},isrowhiddenat:function(e){if(e==null)return null;e=this.getrowvisibleindex(e);if(this.rows.records[e])return this.rows.records[e].hidden},_setrowvisibility:function(e,t,n){return e==null?!1:(this.hiddens[e]=t,n==undefined||n?(this.rendergridcontent(!0),!0):!1)},_loadrows:function(){if(!this._pageviews[this.dataview.pagenum]&&!this.pageable)return;var e=this.pageable?0:this._pageviews[this.dataview.pagenum].top;if(!this.pageable&&this._pagescache[this.dataview.pagenum]!=undefined)return null;if(!this.virtualsizeinfo)return;var t=this.that,r=new Array,i=new Array,s=t.groupable&&t.groups.length>0,o=this.dataview.totalrecords,u=this.virtualsizeinfo.virtualheight,a=0;this.rows.beginupdate();var f=this.dataview.pagesize;this.pageable&&s&&(f=this.dataview.rows.length);for(var l=0;l<f;l++){if(l>=this.dataview.rows.length)break;var c=this.dataview.rows[l],h=null;t.rows.records[c.visibleindex]?(h=t.rows.records[c.visibleindex],h.setdata(c)):h=new n(t,c),h.hidden=this.hiddens[h.visibleindex],this.rowdetailstemplate&&(h.rowdetails=this.rowdetailstemplate.rowdetails,h.rowdetailsheight=this.rowdetailstemplate.rowdetailsheight,h.rowdetailshidden=this.rowdetailstemplate.rowdetailshidden);var p=this.details[h.visibleindex];p?(h.rowdetails=p.rowdetails,h.rowdetailsheight=p.rowdetailsheight,h.rowdetailshidden=p.rowdetailshidden):this.rowdetailstemplate||(h.rowdetails=null);if(s&&this.pageable&&h.parentbounddata!=null){var d=r[h.parentbounddata.uniqueid];if(d!=null){var v=this._findgroupstate(d.uniqueid);this._setsubgroupsvisibility&&this._setsubgroupsvisibility(this,h.parentbounddata,!v,!1),h.hidden=this.hiddens[h.visibleindex]}d!=null&&d!=undefined&&(h.parentrow=d,d.subrows[d.subrows.length++]=h)}if(h.hidden)continue;var m=c.visibleindex;this.heights[m]||(this.heights[m]=this.rowsheight),h.height=this.heights[m],this.rowdetails&&h.rowdetails&&!h.rowdetailshidden&&(h.height+=h.rowdetailsheight),r[h.uniqueid]=h,i[a++]=h,h.top=e,e+=h.height;var g=m;t.rows.replace(g,h)}(this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews&&this._pageviews.length>0&&(this._pageviews[0].height=e),this.rows.resumeupdate(),i.length>0&&(this._pagescache[this.dataview.pagenum]=i)},_gettableheight:function(){if(this.tableheight!=undefined)return this.tableheight;var e=this.host.height();if(this.columnsheader){var t=this.columnsheader.outerHeight();this.showheader||(t=0)}return e-=t,this.hScrollBar[0].style.visibility=="visible"&&(e-=this.hScrollBar.outerHeight()),this.pageable&&(e-=this.pager.outerHeight()),this._groupsheader()&&(e-=this.groupsheader.outerHeight()),this.showtoolbar&&(e-=this.toolbarheight),this.showstatusbar&&(e-=this.statusbarheight),e>0?(this.tableheight=e,e):this.host.height()},_getpagesize:function(){if(this.pageable)return this.pagesize;if(this.virtualmode){var e=Math.round(this.host.height())+2*this.rowsheight,t=Math.round(e/this.rowsheight);return t}return this.autoheight||this.autorowheight?this.dataview.totalrows==0?1:this.dataview.totalrows:this.dataview.totalrows<100&&this.dataview.totalrecords<100&&this.dataview.totalrows>0?this.dataview.totalrows:100},_calculatevirtualheight:function(){var e=this.that,t=Math.round(this.host.height())+2*this.rowsheight;realheight=this._gettableheight();var n=Math.round(t/this.rowsheight);this.heights=new Array,this.hiddens=new Array,this.details=new Array,this.expandedgroups=new Array,this.hiddenboundrows=new Array,this.heightboundrows=new Array,this.detailboundrows=new Array;var r=Math.max(this.dataview.totalrows,this.dataview.totalrecords);this.pageable&&(r=this.pagesize,this.pagesize>Math.max(this.dataview.totalrows,this.dataview.totalrecords)&&this.autoheight?r=Math.max(this.dataview.totalrows,this.dataview.totalrecords):this.autoheight||this.dataview.totalrows<this.pagesize&&(r=Math.max(this.dataview.totalrows,this.dataview.totalrecords)));var i=r*this.rowsheight,s=0,o=0,u=0,a=this._getpagesize(),f=a*this.rowsheight,l=0;!this.pageable&&this.autoheight&&(n=r);if(r+a>0)while(l<=r+a){s+=f;if(l-a<r&&l>=r){var c=l-r;c>0&&(u-=f,this._pageviews[o-1]={top:u,height:f-c*this.rowsheight});break}this._pageviews[o++]={top:u,height:f},u=s,l+=a}return this.resizingGrid!=1&&this.vScrollBar.jqxScrollBar({value:0}),i>realheight&&!this.autoheight?(this.vScrollBar.css("visibility","visible"),this.scrollmode=="deferred"?this.vScrollBar.jqxScrollBar({max:i}):this.vScrollBar.jqxScrollBar({max:i-realheight})):this.vScrollBar.css("visibility","hidden"),this.dataview.pagesize=a,this.dataview.updateview(),{visiblerecords:n,virtualheight:i}},_updatepageviews:function(){if(this.updating())return;this._pagescache=new Array,this._pageviews=new Array,this.tableheight=null;var e=this.that,t=Math.round(this.host.height())+2*this.rowsheight,n=Math.round(t/this.rowsheight),r=Math.max(this.dataview.totalrows,this.dataview.totalrecords),i=r*this.rowsheight,s=0,o=0,u=0,a=0,f=0,l=this._getpagesize();if(!this.pageable)for(var c=0;c<r;c++){var h={index:c,height:this.heights[c],hidden:this.hiddens[c],details:this.details[c]};this.heights[c]==undefined&&(this.heights[c]=this.rowsheight,h.height=this.rowsheight),this.hiddens[c]==undefined&&(this.hiddens[c]=!1,h.hidden=!1),this.details[c]==undefined&&(this.details[c]=null),h.height!=e.rowsheight&&(i-=e.rowsheight,i+=h.height);if(h.hidden)i-=h.height;else{o+=h.height;var p=0;this.rowdetails&&(this.rowdetailstemplate&&(h.details||(h.details=this.rowdetailstemplate)),h.details&&h.details.rowdetails&&!h.details.rowdetailshidden&&(p=h.details.rowdetailsheight,o+=p,i+=p)),s+=h.height+p}f++;if(f>=l||c==r-1)this._pageviews[u++]={top:a,height:o},o=0,a=s,f=0}else this._updatepagedview&&(i=this._updatepagedview(r,i,0)),this.autoheight&&this._arrange();var d=this._gettableheight();if(i>d){this.pageable&&this.gotopage&&(i=this._pageviews[0].height,i<0&&(i=this._pageviews[0].height)),this.vScrollBar.css("visibility")!="visible"&&this.vScrollBar.css("visibility","visible"),(i<=d||this.autoheight)&&this.vScrollBar.css("visibility","hidden");if(i-d>0){if(this.scrollmode!="deferred"){var v=i-d,m=this.vScrollInstance.max;this.vScrollBar.jqxScrollBar({max:v}),v!=m&&this.vScrollBar.jqxScrollBar({value:0})}}else this.vScrollBar.jqxScrollBar({value:0,max:i})}else this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0});this._arrange(),this.autoheight&&(n=Math.round(this.host.height()/this.rowsheight)),this.virtualsizeinfo={visiblerecords:n,virtualheight:i}},updatebounddata:function(e){e!="data"&&e!="sort"&&e!="filter"&&e!="cells"&&e!="pagechanged"&&e!="pagesizechanged"&&!this.virtualmode&&(this.virtualsizeinfo=null,this.showfilterrow&&this.filterable&&this.filterrow?(this.clearfilters&&this.clearfilters(!1),this.filterrow.remove(),this._filterrowcache=new Array,this.filterrow=null):this.filterable&&this.clearfilters&&this.clearfilters(!1),this.groupable&&(this.dataview.groups=[],this.groups=[]),this.pageable&&(this.pagenum=0,this.dataview.pagenum=0),this.sortable&&(this.sortcolumn=null,this.sortdirection="",this.dataview.sortfielddirection="",this.dataview.clearsortdata())),this.databind(this.source,e)},refreshdata:function(){this._refreshdataview(),this.render()},_updatevscrollbarmax:function(){if(this._pageviews&&this._pageviews.length>0){var e=this._pageviews[0].height;if(this.virtualmode||!this.pageable)e=this.virtualsizeinfo.virtualheight;var t=this._gettableheight();if(e>t){this.pageable&&this.gotopage&&(e=this._pageviews[0].height,e<0&&(e=this._pageviews[0].height)),this.vScrollBar.css("visibility")!="visible"&&this.vScrollBar.css("visibility","visible"),(e<=t||this.autoheight)&&this.vScrollBar.css("visibility","hidden");if(e-t>0){var n=e-t;this.vScrollBar.jqxScrollBar({max:n})}else this.vScrollBar.jqxScrollBar({value:0,max:e})}else this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})}},_refreshdataview:function(){this.dataview.refresh()},refresh:function(t){if(t!=1){if(e.jqx.isHidden(this.host))return;this.virtualsizeinfo!=null&&(this._cellscache=new Array,this._renderrows(this.virtualsizeinfo),this._updatesize())}},render:function(){this._render(!0,!0,!0,!0)},invalidate:function(){this.virtualsizeinfo&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))},clear:function(){this.databind(null),this.render()},_preparecolumngroups:function(){var e=this.columnsheight;if(this.columngroups){this.columnshierarchy=new Array;if(this.columngroups.length){var t=this;for(var n=0;n<this.columngroups.length;n++)this.columngroups[n].parent=null,this.columngroups[n].groups=null;for(var n=0;n<this.columns.records.length;n++)this.columns.records[n].parent=null,this.columns.records[n].groups=null;var r=function(e){for(var n=0;n<t.columngroups.length;n++){var r=t.columngroups[n];if(r.name===e)return r}return null};for(var n=0;n<this.columngroups.length;n++){var i=this.columngroups[n];i.groups||(i.groups=null);if(i.parentgroup){var s=r(i.parentgroup);s&&(i.parent=s,s.groups||(s.groups=new Array),s.groups.indexOf(i)===-1&&s.groups.push(i))}}for(var n=0;n<this.columns.records.length;n++){var i=this.columns.records[n];if(i.columngroup){var s=r(i.columngroup);s&&(s.groups||(s.groups=new Array),i.parent=s,s.groups.indexOf(i)===-1&&s.groups.push(i))}}var o=0;for(var n=0;n<this.columns.records.length;n++){var i=this.columns.records[n],u=i;i.level=0;while(u.parent)u=u.parent,i.level++;var u=i,a=i.level;o=Math.max(o,i.level);while(u.parent)u=u.parent,u&&(u.level=--a)}var f=function(e){var t=new Array;e.columngroup&&t.push(e);if(e.groups)for(var n=0;n<e.groups.length;n++)if(e.groups[n].columngroup)t.push(e.groups[n]);else if(e.groups[n].groups){var r=f(e.groups[n]);for(var i=0;i<r.length;i++)t.push(r[i])}return t};for(var n=0;n<this.columngroups.length;n++){var i=this.columngroups[n],l=f(i);i.columns=l;var c=new Array,h=0;for(var p=0;p<l.length;p++)c.push(this.columns.records.indexOf(l[p])),l[p].pinned&&h++;if(h!=0)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group cannot be pinned.");c.sort(function(e,t){return e=parseInt(e),t=parseInt(t),e<t?-1:e>t?1:0});for(var d=1;d<c.length;d++)if(c[d]!=c[d-1]+1)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group are expected to be siblings in the columns array.")}}this.columngroupslevel=1+o,e=this.columngroupslevel*this.columnsheight}return e},_render:function(t,n,r,i,s){if(this.dataview==null)return;if(this._loading)return;if(e.jqx.isHidden(this.host)){var o=this;o.___hiddenTimer&&(clearInterval(o.___hiddenTimer),o.___hiddenTimer=null),this.___hiddenTimer=setInterval(function(){e.jqx.isHidden(o.host)||(clearInterval(o.___hiddenTimer),o.render())},300);return}this.editcell!=null&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!1),this.validationpopup=null,this._removeHandlers(),this._addHandlers(),this._initializeRows(),this._requiresupdate=n!=undefined?n:!0,this._newmax=null,r&&(this._requiresupdate||i!=0&&this._initmenu(),this.columns==null?this.columns=new e.jqx.collection(this.element):this._initializeColumns()),this.tableheight=null,this._pagescache=new Array,this._pageviews=new Array,this.visiblerows=new Array,this.hittestinfo=new Array,this._requiresupdate&&(this._clearcaches(),i==1&&this._initmenu()),this.virtualsizeinfo=null,this.prerenderrequired=!0,(this.groupable&&this.groups.length>0&&this.rowdetails||this.rowdetails)&&this.gridcontent&&(this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,this.detailboundrows=new Array,this.details=new Array,e.jqx.utilities.html(this.gridcontent,""),this.gridcontent=null),this.gridcontent&&this.editable&&this._destroyeditors&&this._destroyeditors(),r?(this.filterrow&&this.filterrow.detach(),e.jqx.utilities.html(this.content,""),this.columnsheader=this.columnsheader||e('<div style="overflow: hidden;"></div>'),this.columnsheader.remove(),this.columnsheader.addClass(this.toTP("jqx-widget-header")),this.columnsheader.addClass(this.toTP("jqx-grid-header"))):this.gridcontent&&e.jqx.utilities.html(this.gridcontent,""),this.showheader?this.columnsheader&&this.columnsheader.css("display","block"):this.columnsheader.css("display","none"),this.gridcontent=this.gridcontent||e('<div style="width: 100%; overflow: hidden; position: absolute;"></div>'),this.gridcontent.remove();var u=this.columnsheight;u=this._preparecolumngroups(),this.showfilterrow&&this.filterable?this.columnsheader.height(u+this.filterrowheight):this.columnsheader.height(u),this.content.append(this.columnsheader),this.content.append(this.gridcontent),this._arrange(),this._initgroupsheader&&this._initgroupsheader(),this.selectionarea=this.selectionarea||e("<div style='z-index: 99999; visibility: hidden; position: absolute;'></div>"),this.selectionarea.addClass(this.toThemeProperty("jqx-grid-selectionarea")),this.selectionarea.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.content.append(this.selectionarea),this.tableheight=null,this.rendergridcontent(!1,r);if(this.groups.length>0&&this.groupable){var a=this.vScrollBar[0].style.visibility;this.suspendgroupevents=!0,this.collapseallgroups&&(this.groupsexpandedbydefault?this.expandallgroups(!1):(this.collapseallgroups(!1),this._updatescrollbarsafterrowsprerender())),this.vScrollBar[0].style.visibility!=a&&(this._updatecolumnwidths(),this._updatecellwidths()),this.suspendgroupevents=!1}this.pageable&&this.updatepagerdetails&&(this.updatepagerdetails(),this.autoheight&&this._updatepageviews(),this.autorowheight&&(this.autoheight||this._updatepageviews(),this._renderrows(this.virtualsizeinfo))),this.showaggregates&&this._updateaggregates&&this._updateaggregates(),this._addoverlayelement(),this.scrollmode=="deferred"&&this._addscrollelement(),this.showfilterrow&&this.filterable&&this.filterrow&&(s==undefined||s==1)&&this._updatelistfilters(!r),this.rendered&&this.rendered("full"),this.__isRendered=!0},_addoverlayelement:function(){if(this.autoheight){this._overlayElement&&this._overlayElement.remove(),this._updateTouchScrolling();return}var t=e.jqx.utilities.getBrowser();if(t.browser=="msie"&&parseInt(t.version)<9||this.isTouchDevice()){this._overlayElement&&this._overlayElement.remove(),this._overlayElement=e("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),this._overlayElement.css("background","white"),this._overlayElement.css("z-index",18e3),this._overlayElement.css("opacity",.001);if(this.isTouchDevice())if(this.vScrollBar.css("visibility")!=="hidden"||this.hScrollBar.css("visibility")!=="hidden"){var n=0;this.selectionmode=="checkbox"&&(n+=30),(this.groupable||this.rowdetails)&&this._overlayElement.css("left",30*(this.groups.length+(this.rowdetails?1:0)));var r=this._overlayElement.css("left");this._overlayElement.css("left",r+n)}else this._overlayElement&&this._overlayElement.remove();else this.content.prepend(this._overlayElement)}this._updateTouchScrolling()},_addscrollelement:function(){this._scrollelement&&this._scrollelement.remove(),this._scrollelementoverlay&&this._scrollelementoverlay.remove(),this._scrollelementoverlay=e("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),this._scrollelementoverlay.css("background","black"),this._scrollelementoverlay.css("z-index",18e3),this._scrollelementoverlay.css("opacity",.1),this._scrollelement=e("<span style='visibility: hidden; top: 50%; right: 10px; position: absolute;'></span>"),this._scrollelement.css("z-index",18005),this._scrollelement.addClass(this.toThemeProperty("jqx-button")),this._scrollelement.addClass(this.toThemeProperty("jqx-fill-state-normal")),this._scrollelement.addClass(this.toThemeProperty("jqx-rc-all")),this._scrollelement.addClass(this.toThemeProperty("jqx-shadow")),this.content.prepend(this._scrollelement),this.content.prepend(this._scrollelementoverlay)},rendergridcontent:function(e,t){if(this.updating())return!1;if(e==undefined||e==null)e=!1;this._requiresupdate=e;var n=this.prerenderrequired;this.prerenderrequired&&this._arrange();var r=this.that,t=t;if(t==null||t==undefined)t=!0;this.tableheight=null,r.virtualsizeinfo=r.virtualsizeinfo||r._calculatevirtualheight(),r.pageable&&!r.autoheight&&r.dataview.totalrows<r.pagesize&&(r._requiresupdate=!0),t?r._rendercolumnheaders():(this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn()),r._renderrows(r.virtualsizeinfo),this.gridcontent&&(this.gridcontent[0].scrollTop!=0&&(this.gridcontent[0].scrollTop=0),this.gridcontent[0].scrollLeft!=0&&(this.gridcontent[0].scrollLeft=0));if(n){var i=this.tableheight;this._arrange(),i!=this.tableheight&&this.autoheight&&r._renderrows(r.virtualsizeinfo)}return this.rtl&&this._renderhorizontalscroll(),this.autosavestate&&this.initializedcall!=null&&this.savestate&&this.savestate(),!0},_updatecolumnwidths:function(){var t=this.host.width(),n=t,r="";if(this.columns==undefined||this.columns.records==undefined)return;var i=this.that,s=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;e.each(this.columns.records,function(e,o){if(!this.hidden||!this.hideable)if(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined){var o=0,u=i.vScrollBar[0].style.visibility=="hidden"?0:i.scrollbarsize+5,a=n;o=parseFloat(this.width)*a/100,u+=s,this._percentagewidth!=undefined&&(o=parseFloat(this._percentagewidth)*(a-u)/100),o<this.minwidth&&this.minwidth!="auto"&&(o=this.minwidth),o>this.maxwidth&&this.maxwidth!="auto"&&(o=this.maxwidth),t-=o}else this.width!="auto"&&!this._width?t-=this.width:r+=this.text});var o=this._gettableheight();if(!this.autoheight&&this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>o)if(this.groupable&&this.groups.length>0)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var u=this.dataview.loadedrootgroups.length*this.rowsheight;if(this.pageable)for(var a=0;a<this.dataview.rows.length;a++)this.dataview.rows[a].group&&this.dataview.rows[a].level===0&&(u+=this.rowsheight);u>o?(t-=this.scrollbarsize+5,n-=this.scrollbarsize+5):this.vScrollBar.css("visibility")=="visible"&&(t-=this.scrollbarsize+5,n-=this.scrollbarsize+5)}else t-=this.scrollbarsize+5,n-=this.scrollbarsize+5;else t-=this.scrollbarsize+5,n-=this.scrollbarsize+5;var s=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;n-=s;if(!this.columnsheader)return;var f=this.columnsheader.find("#columntable"+this.element.id);if(f.length==0)return;var l=f.find(".jqx-grid-column-header"),c=0;e.each(this.columns.records,function(i,s){var o=e(l[i]),u=!1,a=this.width;if(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined)this._percentagewidth!=undefined?a=parseFloat(this._percentagewidth)*n/100:a=parseFloat(this.width)*n/100,u=!0;if(this.width!="auto"&&!this._width&&!u)parseInt(o[0].style.width)!=this.width&&o.width(this.width);else if(u)a<this.minwidth&&this.minwidth!="auto"&&(a=this.minwidth,this.width=a),a>this.maxwidth&&this.maxwidth!="auto"&&(a=this.maxwidth,this.width=a),parseInt(o[0].style.width)!=a&&(o.width(a),this.width=a);else{var f=Math.floor(t*(this.text.length/r.length));isNaN(f)&&(f=this.minwidth),f<0&&($element=e("<span>"+this.text+"</span>"),e(document.body).append($element),f=10+$element.width(),$element.remove()),f<this.minwidth&&(f=this.minwidth),f>this.maxwidth&&(f=this.maxwidth),this._width="auto",this.width=f,o.width(this.width)}parseInt(o[0].style.left)!=c&&o.css("left",c);if(!this.hidden||!this.hideable)c+=this.width;this._requirewidthupdate=!0}),this.columnsheader.width(2+c),f.width(this.columnsheader.width()),c==0?this.columnsheader[0].style.visibility="hidden":this.columnsheader[0].style.visibility="inherit",this._resizecolumngroups(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()),this.autowidth&&this._arrange()},_rendercolumnheaders:function(){var t=this.that;if(!this.prerenderrequired){this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui());return}this._columnsbydatafield=new Array,this.columnsheader.find("#columntable"+this.element.id).remove();var n=e('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');n[0].cells=new Array;var r=0,i=0,s="",o=this.host.width(),u=o,a=new Array,f=new Array,l=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;e.each(this.columns.records,function(e,n){if(!this.hidden||!this.hideable)if(this.width!="auto"&&!this._width)if(this.width<this.minwidth&&this.minwidth!="auto")o-=this.minwidth;else if(this.width>this.maxwidth&&this.maxwidth!="auto")o-=this.maxwidth;else if(this.width.toString().indexOf("%")!=-1){var n=0,r=t.vScrollBar[0].style.visibility=="hidden"?0:t.scrollbarsize+5;r+=l,n=parseFloat(this.width)*(u-r)/100,n<this.minwidth&&this.minwidth!="auto"&&(n=this.minwidth),n>this.maxwidth&&this.maxwidth!="auto"&&(n=this.maxwidth),o-=n}else typeof this.width=="string"&&(this.width=parseInt(this.width)),o-=this.width;else s+=this.text;this.pinned||this.grouped||this.checkboxcolumn?(t._haspinned&&(this.pinned=!0),a[a.length]=this):f[f.length]=this});if(!this.rtl){for(var c=0;c<a.length;c++)this.columns.replace(c,a[c]);for(var h=0;h<f.length;h++)this.columns.replace(a.length+h,f[h])}else{var p=0;a.reverse();for(var c=this.columns.records.length-1;c>=this.columns.records.length-a.length;c--)this.columns.replace(c,a[p++]);for(var h=0;h<f.length;h++)this.columns.replace(h,f[h])}var d=this.headerZIndex,v=t.groupable?t.groups.length:0;this.rowdetails&&this.showrowdetailscolumn&&v++;var m=t.columnsheader.height();this.showfilterrow&&(this.columngroups?m-=this.filterrowheight:m=this.columnsheight);var g=this._gettableheight();if(this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>g)if(this.groupable&&this.groups.length>0)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var y=0;if(!this.pageable)var y=this.dataview.loadedrootgroups.length*this.rowsheight;else if(this.pageable)for(var b=0;b<this.dataview.rows.length;b++)this.dataview.rows[b].group&&this.dataview.rows[b].level===0&&(y+=this.rowsheight);y>g&&(o-=this.scrollbarsize+5,u-=this.scrollbarsize+5)}else o-=this.scrollbarsize+5,u-=this.scrollbarsize+5;else this.autoheight||(o-=this.scrollbarsize+5,u-=this.scrollbarsize+5);u-=l;var w=function(e,n){var r=t.columngroupslevel*t.columnsheight;return r-=n.level*t.columnsheight,r};e.each(this.columns.records,function(a,f){this.height=t.columnsheight,t.columngroups&&t.columngroups.length&&(this.height=w(this.datafield,this),m=this.height);var l=t.toTP("jqx-grid-column-header")+" "+t.toTP("jqx-widget-header");t.rtl&&(l+=" "+t.toTP("jqx-grid-column-header-rtl"));var c=t.rtl?150+d+1:150+d-1,h=t.rtl?d++:d--,p=e('<div role="columnheader" style="z-index: '+h+';position: absolute; height: 100%;" class="'+l+'"><div style="height: 100%; width: 100%;"></div></div>');t.columngroups&&(p[0].style.height=m+"px",p[0].style.bottom="0px",this.pinned&&(p[0].style.zIndex=c)),this.uielement=p,this.classname!=""&&this.classname&&p.addClass(this.classname);var g=this.width,y=!1;this.width===null&&(this.width="auto");if(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined)this._percentagewidth!=undefined?g=parseFloat(this._percentagewidth)*u/100:g=parseFloat(this.width)*u/100,y=!0;if(this.width!="auto"&&!this._width&&!y)g<this.minwidth&&this.minwidth!="auto"&&(g=this.minwidth),g>this.maxwidth&&this.maxwidth!="auto"&&(g=this.maxwidth),p[0].style.width=parseInt(g)+"px";else if(y){g<this.minwidth&&this.minwidth!="auto"&&(g=this.minwidth),g>this.maxwidth&&this.maxwidth!="auto"&&(g=this.maxwidth);if(this._percentagewidth==undefined||this.width.toString().indexOf("%")!=-1)this._percentagewidth=this.width;p.width(g),this.width=g}else if(!this.hidden){var b=Math.floor(o*(this.text.length/s.length));isNaN(b)&&(b=this.minwidth),b<0&&($element=e("<span>"+this.text+"</span>"),e(document.body).append($element),b=10+$element.width(),$element.remove()),b<this.minwidth&&(b=this.minwidth),b>this.maxwidth&&(b=this.maxwidth),this._width="auto",this.width=b,g=this.width,p.width(this.width)}this.hidden&&this.hideable&&p.css("display","none");var E=e(p.children()[0]),S=t.rtl?t.toTP("jqx-grid-column-menubutton")+" "+t.toTP("jqx-grid-column-menubutton-rtl"):t.toTP("jqx-grid-column-menubutton");S+=" "+t.toTP("jqx-icon-arrow-down");var x=e('<div style="height: '+m+'px; display: none; left: 100%; top: 0%; position: absolute;"><div class="'+S+'" style="width: 100%; height:100%;"></div></div>');t.enableanimations||x.css("margin-left",-16),t.rtl&&x.css("left","0px"),this.columnsmenu=x[0],n[0].cells[a]=p[0],x[0].style.width=parseInt(t.columnsmenuwidth)+"px";var T=t.columnsmenu,N=!1,C=!1,L=t.groupable&&v>0&&r<v||t.rowdetails&&r<v;t.rtl&&(L=t.groupable&&v>0&&r<v||t.rowdetails&&r<v,L&=a>t.columns.records.length-1-v);if(L)r++,T&=!1,this.sortable=!1,this.editable=!1,C=!0;else{var A=this.renderer!=null?this.renderer(this.text,this.align,m):t._rendercolumnheader(this.text,this.align,m,t);A==null&&(A=t._rendercolumnheader(this.text,this.align,m,t)),this.renderer!=null&&(A=e(A)),T&=!0,N=!0}t.WinJS?MSApp.execUnsafeLocalFunction(function(){E.append(e(A))}):this.renderer?E.append(e(A)):A&&(E[0].innerHTML=A);if(A!=null){var O=e('<div class="iconscontainer" style="height: '+m+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;">'+'<div class="filtericon '+t.toTP("jqx-widget-header")+'" style="height: '+m+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-filterbutton")+'" style="width: 100%; height:100%;"></div></div>'+'<div class="sortasc '+t.toTP("jqx-widget-header")+'" style="height: '+m+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortascbutton")+" "+t.toTP("jqx-icon-arrow-up")+'" style="width: 100%; height:100%;"></div></div>'+'<div class="sortdesc '+t.toTP("jqx-widget-header")+'" style="height: '+m+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortdescbutton")+" "+t.toTP("jqx-icon-arrow-down")+'" style="width: 100%; height:100%;"></div></div>'+"</div>");x.addClass(t.toTP("jqx-widget-header")),E.append(O);var M=O.children();this.sortasc=M[1],this.sortdesc=M[2],this.filtericon=M[0],this.iconscontainer=O,t.rtl&&(O.css("margin-left","0px"),O.css("left","0px"),e(this.sortasc).css("float","left"),e(this.filtericon).css("float","left"),e(this.sortdesc).css("float","left")),!t.autoshowfiltericon&&this.filterable&&e(this.filtericon).css("display","block")}T&&(t._handlecolumnsmenu(t,E,p,x,this),this.menu||x.hide()),n.append(p);if(t.groupable&&N){p[0].id=t.dataview.generatekey();if(!t._handlecolumnstogroupsdragdrop)throw new Error("jqxGrid: Missing reference to jqxgrid.grouping.js.");t._handlecolumnstogroupsdragdrop(this,p)}t.columnsreorder&&this.draggable&&t._handlecolumnsdragreorder&&t._handlecolumnsdragreorder(this,p);var _=this;t.addHandler(p,"click",function(e){if(_.checkboxcolumn)return!0;t.sorttogglestates>0&&t._togglesort&&(t._loading||t._togglesort(_)),e.preventDefault(),t._raiseEvent(7,{column:_.getcolumnproperties(),datafield:_.datafield,originalEvent:e})});if(_.resizable&&t.columnsresize&&!C){var D=!1,P="mousemove";t.isTouchDevice()&&t.touchmode!==!0&&(D=!0,P=e.jqx.mobile.getTouchEventName("touchstart")),t.addHandler(p,P,function(n){var r=parseInt(n.pageX),i=5,s=parseInt(p.coord().left);t.hasTransform&&(s=e.jqx.utilities.getOffset(p).left);if(t.resizing)return!0;if(t._handlecolumnsresize){if(D){var o=t.getTouches(n),u=o[0];return r=u.pageX,i=40,r>=s+_.width-i?(t.resizablecolumn={columnelement:p,column:_},p.css("cursor","col-resize")):(p.css("cursor",""),t.resizablecolumn=null),!0}var a=_.width;t.rtl&&(a=0);if(r>=s+a-i){if(r<=s+a+i)return t.resizablecolumn={columnelement:p,column:_},p.css("cursor","col-resize"),!1;p.css("cursor",""),t.resizablecolumn=null}else p.css("cursor",""),r<s+a-i&&!_._animating&&!_._menuvisible&&p.mouseenter(),t.resizablecolumn=null}})}p.css("left",i);if(!this.hidden||!this.hideable)i+=g;if(_.rendered){var H=_.rendered(e(E[0].firstChild),_.align,m);H&&O!=null&&O.hide()}if(_.checkboxcolumn){O&&O.hide();if(!t.host.jqxCheckBox)throw new Error("jqxGrid: Missing reference to jqxcheckbox.js");E.html('<div style="cursor: pointer; margin-left: 5px; top: 50%; margin-top: -8px; position: relative;"></div>');var B=E.find("div:first");B.jqxCheckBox({_canFocus:!1,disabledContainer:!0,theme:t.theme,enableContainerClick:!1,width:16,height:16,animationShowDelay:0,animationHideDelay:0}),_.checkboxelement=B;var j=B.data().jqxCheckBox.instance;t._checkboxcolumn=_,j.updated=function(e,n,r){t._checkboxcolumnupdating=!0,n?t.selectallrows():t.clearselection(!0,!1),t._checkboxcolumnupdating=!1}}}),i>0?this.columnsheader.width(2+i):this.columnsheader.width(i),this.columnsrow=n,t.columnsheader.append(n);if(this.showfilterrow&&this._updatefilterrow){this.columngroups?n.height(this.columngroupslevel*this.columnsheight):n.height(this.columnsheight);if(!this.filterrow){var E=e("<div></div>");E[0].id="filterrow."+this.element.id,E.height(this.filterrowheight),this.filterrow=E}this.filterrow.width(i),this.columnsheader.append(this.filterrow),this._updatefilterrow()}i==0?n[0].style.visibility="hidden":n[0].style.visibility="inherit",n.width(i),this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop(),this._handlecolumnsreorder&&this._handlecolumnsreorder(),this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this._handlecolumnsresize&&this._handlecolumnsresize(),this.columngroups&&this._rendercolumngroups(),this._updatecheckboxselection&&this._updatecheckboxselection()},_rendercolumngroups:function(){if(!this.columngroups)return;var t=0;for(var n=0;n<this.columns.records.length;n++)this.columns.records[n].pinned&&t++;var r=this.headerZIndex-t+this.columns.records.length,i=this.that,s=i.toTP("jqx-grid-column-header")+" "+i.toTP("jqx-grid-columngroup-header")+" "+i.toTP("jqx-widget-header");i.rtl&&(s+=" "+i.toTP("jqx-grid-columngroup-header-rtl"));var o=this.columnsheader.find("#columntable"+this.element.id);o.find("jqx-grid-columngroup-header").remove();for(var u=0;u<this.columngroupslevel-1;u++)for(var n=0;n<this.columngroups.length;n++){var a=this.columngroups[n],f=a.level;if(f!==u)continue;var l=f*this.columnsheight,c=99999;if(a.groups){var h=function(e){var t=0;for(var n=0;n<e.groups.length;n++){var r=e.groups[n];r.groups?t+=h(r):r.hidden||(t+=r.width,c=Math.min(parseInt(r.element.style.left),c))}return t};a.width=h(a),a.left=c;var p=this.columnsheight,d=r--,v=e('<div role="columnheader" style="z-index: '+d+';position: absolute;" class="'+s+'"></div>'),m=e(this._rendercolumnheader(a.text,a.align,this.columnsheight,this));if(a.renderer){var m=e("<div style='height: 100%; width: 100%;'></div>"),g=a.renderer(a.text,a.align,p);m.html(g)}v.append(m),v[0].style.left=c+"px",c===0&&(v[0].style.borderLeftColor="transparent"),v[0].style.top=l+"px",v[0].style.height=p+"px",v[0].style.width=-1+a.width+"px",o.append(v),a.element=v,a.rendered&&a.rendered(m,a.align,p)}}},_resizecolumngroups:function(){if(!this.columngroups)return;for(var e=0;e<this.columngroups.length;e++){var t=this.columngroups[e],n=t.level,r=n*this.columnsheight,i=99999;if(t.groups){var s=function(e){var t=0;for(var n=0;n<e.groups.length;n++){var r=e.groups[n];r.groups?t+=s(r):r.hidden||(t+=r.width,i=Math.min(parseInt(r.element.style.left),i))}return t};t.width=s(t),t.left=i;var o=this.columnsheight,u=t.element;u[0].style.left=i+"px",u[0].style.top=r+"px",u[0].style.height=o+"px",u[0].style.width=-1+t.width+"px"}}},_handlecolumnsmenu:function(t,n,r,i,s){t.dragmousedown=null,i[0].id=t.dataview.generatekey(),n.append(i),r[0].columnsmenu=i[0],s.element=r[0];var o=this.columnsmenuwidth+1,u=function(){if(!s.menu)return!1;if(!t.resizing){if(s._menuvisible&&t._hasOpenedMenu)return!1;s._animating=!0;if(t.menuitemsarray&&t.menuitemsarray.length>0)if(!t.enableanimations){i.css("display","block");var e=t.rtl?16:-48;s.iconscontainer.css("margin-left",e+"px"),s._animating=!1,s._menuvisible=!0}else{i.css("display","block"),i.stop(),s.iconscontainer.stop(),t.rtl?(i.css("margin-left",-o),i.animate({"margin-left":"0px"},"fast",function(){i.css("display","block"),s._animating=!1,s._menuvisible=!0})):(i.css("margin-left","0px"),i.animate({"margin-left":-o},"fast",function(){i.css("display","block"),s._animating=!1,s._menuvisible=!0}));var e=t.rtl?o:-(32+o);s.iconscontainer.animate({"margin-left":e},"fast")}}},a="mouseenter";t.isTouchDevice()&&(a="touchstart"),t.addHandler(r,a,function(n){var i=parseInt(n.pageX),o=t.columnsresize&&s.resizable?3:0,a=parseInt(r.coord().left);t.hasTransform&&(a=e.jqx.utilities.getOffset(r).left);var f=s.width;t.rtl&&(f=0);if(o!=0&&i>=a+f-o&&i<=a+f+o)return!1;var l=t.vScrollInstance.isScrolling();s.menu&&t.autoshowcolumnsmenubutton&&!l&&u()});if(!t.autoshowcolumnsmenubutton){i.css("display","block");var f=t.rtl?16:-48;s.iconscontainer.css("margin-left",f+"px"),t.rtl?i.css({"margin-left":"0px"}):i.css({"margin-left":-o})}t.addHandler(r,"mouseleave",function(n){if(t.menuitemsarray&&t.menuitemsarray.length>0&&s.menu){var r=e.data(document.body,"contextmenu"+t.element.id);if(r!=undefined&&i[0].id==r.columnsmenu.id)return;if(t.autoshowcolumnsmenubutton)if(!t.enableanimations){i.css("display","none");var u=t.rtl?0:-32;s.iconscontainer.css("margin-left",u+"px"),s._menuvisible=!1}else{t.rtl?i.css("margin-left","0px"):i.css("margin-left",-o),i.stop(),s.iconscontainer.stop(),t.rtl?i.animate({"margin-left":-o},"fast",function(){i.css("display","none"),s._menuvisible=!1}):i.animate({"margin-left":0},"fast",function(){i.css("display","none"),s._menuvisible=!1});var u=t.rtl?0:-32;s.iconscontainer.animate({"margin-left":u},"fast")}}});var l=!0,c="",h=e(s.filtericon);t.addHandler(i,"mousedown",function(n){t.gridmenu||t._initmenu(),l=!e.data(t.gridmenu[0],"contextMenuOpened"+t.gridmenu[0].id),c=e.data(document.body,"contextmenu"+t.element.id),c!=null&&(c=c.column.datafield)}),t.addHandler(h,"mousedown",function(n){t.gridmenu||t._initmenu(),l=!e.data(t.gridmenu[0],"contextMenuOpened"+t.gridmenu[0].id),c=e.data(document.body,"contextmenu"+t.element.id),c!=null&&(c=c.column.datafield)});var p=function(){if(!s.menu)return!1;t.gridmenu||t._initmenu();var n=i.coord(!0),r=i.height();if(!l){l=!0;if(c==s.datafield)return t._closemenu(),!1}var o=t.host.coord(!0);t.hasTransform&&(o=e.jqx.utilities.getOffset(t.host),n=e.jqx.utilities.getOffset(i)),o.left+t.host.width()>parseInt(n.left)+t.gridmenu.width()?t.gridmenu.jqxMenu("open",n.left,n.top+r):t.gridmenu.jqxMenu("open",i.width()+n.left-t.gridmenu.width(),n.top+r),t.gridmenu.width()<100&&t._arrangemenu(),t._hasOpenedMenu=!0;var u=t._getmenuitembyindex(0),a=t._getmenuitembyindex(1),f=t._getmenuitembyindex(2),h=t._getmenuitembyindex(3),p=t._getmenuitembyindex(4),d=t._getmenuitembyindex(5);if(u!=null&&a!=null&&f!=null){var v=s.sortable&&t.sortable;t.gridmenu.jqxMenu("disable",u.id,!v),t.gridmenu.jqxMenu("disable",a.id,!v),t.gridmenu.jqxMenu("disable",f.id,!v);if(s.datafield)if(t.sortcolumn==s.datafield){var m=t.getsortinformation();v&&(m.sortdirection.ascending?t.gridmenu.jqxMenu("disable",u.id,!0):t.gridmenu.jqxMenu("disable",a.id,!0))}else t.gridmenu.jqxMenu("disable",f.id,!0)}h!=null&&p!=null&&(!t.groupable||!s.groupable?(t.gridmenu.jqxMenu("disable",p.id,!0),t.gridmenu.jqxMenu("disable",h.id,!0)):t.groups&&t.groups.indexOf(s.datafield)!=-1?(t.gridmenu.jqxMenu("disable",h.id,!0),t.gridmenu.jqxMenu("disable",p.id,!1)):(t.gridmenu.jqxMenu("disable",h.id,!1),t.gridmenu.jqxMenu("disable",p.id,!0)));if(d!=null){t._updatefilterpanel(t,d,s);var g=0;t.sortable&&t._togglesort&&t.showsortmenuitems&&(g+=3),t.groupable&&t.addgroup&&t.showgroupmenuitems&&(g+=2);var y=g*27+3;e.jqx.browser.msie&&e.jqx.browser.version<8&&(y+=20,e(d).height(190)),t.filterable&&t.showfiltermenuitems&&(s.filterable?(t.gridmenu.height(y+180),e(d).css("display","block")):(t.gridmenu.height(y),e(d).css("display","none")))}e.data(document.body,"contextmenu"+t.element.id,{column:s,columnsmenu:i[0]})};t.addHandler(h,"click",function(e){return s.menu?(t.showfilterrow||(u(),p()),!1):!1}),t.addHandler(i,"click",function(e){return s.menu?(p(),!1):!1}),t.isTouchDevice()&&t.addHandler(i,e.jqx.mobile.getTouchEventName("touchstart"),function(e){return s.menu?(t._hasOpenedMenu?t._closemenu():p(),!1):!1})},_removecolumnhandlers:function(t){var n=this.that,r=e(t.element);if(r.length>0){n.removeHandler(r,"mouseenter"),n.removeHandler(r,"mouseleave");var i=e(t.filtericon);n.removeHandler(i,"mousedown"),n.removeHandler(i,"click"),n.removeHandler(r,"click"),n.removeHandler(r,"mousemove"),n.columnsreorder&&(n.removeHandler(r,"mousedown.drag"),n.removeHandler(r,"mousemove.drag")),n.removeHandler(r,"dragstart");if(r[0].columnsmenu){var s=e(r[0].columnsmenu);n.removeHandler(s,"click"),n.removeHandler(s,"mousedown"),n.removeHandler(s,e.jqx.mobile.getTouchEventName("touchstart"))}}},_rendercolumnheader:function(e,t,n,r){var i="4px";r.columngroups?(i=n/2-this._columnheight/2,i<0&&(i=4),i+="px"):this.columnsheight!=25&&(i=this.columnsheight/2-this._columnheight/2,i<0&&(i=4),i+="px");if(this.enableellipsis)return'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 4px; margin-right: 2px; margin-bottom: "+i+"; margin-top: "+i+';">'+'<span style="text-overflow: ellipsis; cursor: default;">'+e+"</span>"+"</div>";if(t=="center"||t=="middle")return'<div style="padding-bottom: 2px; text-align: center; margin-top: '+i+';">'+'<a href="#">'+e+"</a>"+"</div>";var s='<a style="margin-top: '+i+"; float: "+t+';" href="#">'+e+"</a>";return s},_renderrows:function(t,n,r){var i=this.that;(this.pageable||this.groupable)&&(this.autoheight||this.autorowheight)&&this.table!=null&&this.table[0].rows!=null&&this.table[0].rows.length<this.dataview.rows.length&&(i.prerenderrequired=!0);if(!this.pageable&&(this.autoheight||this.autorowheight)&&(this.virtualmode||this.unboundmode)){var s=this.source.totalrecords;isNaN(s)||this.table!=null&&this.table[0].rows!=null&&this.table[0].rows.length!=s&&(i.prerenderrequired=!0)}(this.autoheight||this.autorowheight)&&!i.prerenderrequired&&this.table&&this.table[0].rows&&(this.table[0].rows.length<this.dataview.records.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize?i.prerenderrequired=!0:this.pageable||(i.prerenderrequired=!0)),this.table[0].rows.length<this.dataview.cachedrecords.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize?i.prerenderrequired=!0:this.pageable||(i.prerenderrequired=!0))),i._prerenderrows(t),i._requiresupdate&&(i._requiresupdate=!1,i._updatepageviews());var o=function(){if(i._loading)return;i.WinJS?MSApp.execUnsafeLocalFunction(function(){i._rendervisualrows()}):i._rendervisualrows(),i.virtualmode&&i.showaggregates&&i._updateaggregates&&i.refreshaggregates()},u=e.jqx.browser.msie&&e.jqx.browser.version<10;if(this.virtualmode){var a=function(){if(i.rendergridrows){var e=i._startboundindex;e==undefined&&(e=0);var t=e+1+i.dataview.pagesize;if(e!=null&&t!=null){var r=i.source._source?!0:!1,s=r?i.source._source.recordstartindex:i.source.recordstartindex;if(s!=e||n==1){if(!r)i.source.recordstartindex=e,i.source.recordendindex=t;else{if(t>=i.source._source.totalrecords){t=i.source._source.totalrecords,e=t-i.dataview.pagesize-1,e<0&&(e=0);if(i.source._source.recordendindex==t&&i.source._source.recordstartindex==e)return}i.source._source.recordstartindex=e,i.source._source.recordendindex=t}i.updatebounddata("cells")}}}};this.loadondemand&&(o(),a(),this.loadondemand=!1);var f=this._browser==undefined?this._isIE10():this._browser;this.editable&&this.editcell&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling()?o():this.autoheight?o():f||u||e.jqx.browser.mozilla||navigator&&navigator.userAgent.indexOf("Safari")!=-1?(this._scrolltimer!=null&&clearTimeout(this._scrolltimer),this._scrolltimer=setTimeout(function(){o()},5)):o()}else{if(this.scrollmode=="deferred"&&(this.hScrollInstance.isScrolling()||this.vScrollInstance.isScrolling())){this._scrolltimer!=null&&clearInterval(this._scrolltimer);var l=this._getfirstvisualrow();if(l!=null){var c=function(t){if(l==null)return"";var n="<table>",r=i.deferreddatafields;r==null&&i.columns.records.length>0&&(r=new Array,r.push(i.columns.records[0].displayfield));for(var s=0;s<r.length;s++){var o=r[s],u=i._getcolumnbydatafield(o);if(u){var a=i._getcellvalue(u,l);u.cellsformat!=""&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(a)?a=e.jqx.dataFormat.formatdate(a,u.cellsformat,i.gridlocalization):e.jqx.dataFormat.isNumber(a)&&(a=e.jqx.dataFormat.formatnumber(a,u.cellsformat,i.gridlocalization))),n+="<tr><td>"+a+"</td></tr>"}}return n+="</table>",n},h=this.scrollfeedback?this.scrollfeedback(l.bounddata):c(l.bounddata);h!=this._scrollelementcontent&&(this._scrollelement[0].innerHTML=h,this._scrollelementcontent=h)}this._scrollelement.css("visibility","visible"),this._scrollelementoverlay.css("visibility","visible"),this._scrollelement.css("margin-top",-this._scrollelement.height()/2),this._scrolltimer=setInterval(function(){!i.hScrollInstance.isScrolling()&&!i.vScrollInstance.isScrolling()&&(o(),i._scrollelement.css("visibility","hidden"),i._scrollelementoverlay.css("visibility","hidden"),clearInterval(i._scrolltimer),l&&i.ensurerowvisible(l.visibleindex))},100);return}navigator&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.userAgent.indexOf("Safari")!=-1&&(this._updatedelay=1),this.touchDevice!=undefined&&this.touchDevice==1&&(this._updatedelay=5);var f=this._browser==undefined?this._isIE10():this._browser;if(f||u)this._updatedelay=5;if((f||e.jqx.browser.mozilla)&&this.hScrollInstance.isScrolling()){o();return}e.jqx.browser.mozilla&&this._updatedelay==0&&(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())&&(this._updatedelay=1),this.updatedelay!=null&&(this._updatedelay=this.updatedelay);if(this._updatedelay==0)o();else{var p=this._jqxgridrendertimer;p!=null&&clearTimeout(p),this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()?(p=setTimeout(function(){o()},this._updatedelay),this._jqxgridrendertimer=p):(this._jqxgridrendertimer=p,o())}}if(i.autorowheight&&!i.autoheight&&this._pageviews.length>0){var d=this._gettableheight(),v=this._pageviews[0].height;if(v>d){this.pageable&&this.gotopage&&(v=this._pageviews[0].height,v<0&&(v=this._pageviews[0].height)),this.vScrollBar.css("visibility")!="visible"&&this.vScrollBar.css("visibility","visible"),(v<=d||this.autoheight)&&this.vScrollBar.css("visibility","hidden");if(v-d>0){if(this.scrollmode!="deferred"){var m=v-d,g=this.vScrollInstance.max;this.vScrollBar.jqxScrollBar({max:m}),Math.round(m)!=Math.round(g)&&this.vScrollBar.jqxScrollBar({value:0})}}else this.vScrollBar.jqxScrollBar({value:0,max:v})}else this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0});this._arrange(),this.virtualsizeinfo&&(this.virtualsizeinfo.virtualheight=v)}},scrolling:function(){var e=this.vScrollInstance.isScrolling(),t=this.hScrollInstance.isScrolling();return{vertical:e,horizontal:t}},_renderhorizontalscroll:function(){var e=this.hScrollInstance,t=e.value;this.hScrollBar.css("visibility")==="hidden"&&(e.value=0,t=0);var n=parseInt(t);if(this.table==null)return;var r=this.table[0].rows.length,i=this.columnsrow,s=this.groupable&&this.groups.length>0?this.groups.length:0,o=this.columns.records.length-s,u=this.columns.records,a=this.dataview.rows.length==0;this.rtl&&this.hScrollBar.css("visibility")!="hidden"&&(n=e.max-n);if(a&&!this._haspinned){for(var f=0;f<r;f++){var l=this.table[0].rows[f];for(var c=0;c<s+o;c++){var h=l.cells[c];if(h!=undefined){var p=u[c];if(p.pinned){h.style.marginLeft=n+"px";if(f==0){var d=i[0].cells[c];d.style.marginLeft=n+"px"}}}}}this.table[0].style.marginLeft=-n+"px",i[0].style.marginLeft=-n+"px"}else if(this._haspinned||this._haspinned==undefined){for(var f=0;f<r;f++){var l=this.table[0].rows[f];for(var c=0;c<s+o;c++){var h=l.cells[c];if(h!=undefined){var p=u[c];if(p.pinned){if(n==0&&h.style.marginLeft=="")continue;var v=null,m=null;this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(m=this.filterrow[0].cells[c]),this.showaggregates&&this.statusbar[0].cells&&(v=this.statusbar[0].cells[c]);if(!this.rtl){h.style.marginLeft=n+"px";if(f==0){var d=i[0].cells[c];d.style.marginLeft=n+"px",v&&(v.style.marginLeft=n+"px"),m&&(m.style.marginLeft=n+"px")}}else{h.style.marginLeft=-parseInt(t)+"px";if(f==0){var d=i[0].cells[c];d.style.marginLeft=-parseInt(t)+"px",v&&(v.style.marginLeft=-parseInt(t)+"px"),m&&(m.style.marginLeft=-parseInt(t)+"px")}}}}}}this.table[0].style.marginLeft=-n+"px",i[0].style.marginLeft=-n+"px"}else this._haspinned==0&&(this.table[0].style.marginLeft=-n+"px",i[0].style.marginLeft=-n+"px");if(this.showaggregates&&this.statusbar[0].cells){var g=0;this.rtl&&this.vScrollBar.css("visibility")!="hidden"&&this.hScrollBar.css("visibility")!="hidden"&&(g=2+parseInt(this.hScrollBar.css("left"))),this.statusbar[0].style.marginLeft=-n+g+"px"}this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(this.filterrow[0].style.marginLeft=-n+"px")},_updaterowdetailsvisibility:function(){if(this.rowdetails)for(var t=0;t<this._rowdetailselementscache.length;t++)e(this._rowdetailselementscache[t]).css("display","none")},_getvisualcolumnsindexes:function(e,t,n,r,i){if(this.rowdetails||this.rtl||this.editcell||this.width&&this.width.toString().indexOf("%")>=0||this.exporting)return{start:0,end:n+r};var s=0,o=-1,u=n+r,a=!1;if(this.autorowheight)return{start:0,end:n+r};if(!i)for(var f=0;f<n+r;f++){var l=f;a||this.columns.records[f].pinned&&(a=!0),this.columns.records[f].hidden||(s+=this.columns.records[f].width),s>=e&&o==-1&&(o=f);if(s>t+e){u=f;break}}u++,u>n+r&&(u=n+r);if(o==-1||a)o=0;return{start:o,end:u}},_getfirstvisualrow:function(){var e=this.vScrollInstance,t=e.value,n=parseInt(t);this._pagescache.length==0&&(this.dataview.updateview(),this._loadrows()),this.vScrollBar[0].style.visibility!="visible"&&(n=0);if(!this.pageable){var r=this._findvisiblerow(n,this._pageviews);if(r==-1)return null;r!=this.dataview.pagenum?(this.dataview.pagenum=r,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}var i=this._findvisiblerow(n,this._pagescache[this.dataview.pagenum]),s=this._pagescache[this.dataview.pagenum];if(s&&s[0])return s[i]},_rendervisualrows:function(){if(!this.virtualsizeinfo)return;var t=this.vScrollInstance,n=this.hScrollInstance,r=t.value,i=n.value,s=parseInt(r),o=parseInt(i),u=this._gettableheight(),a=this._hostwidth!=undefined?this._hostwidth:this.host.width();this.hScrollBar[0].style.visibility=="visible"&&(u+=29),this.scrollmode=="deferred"&&this._newmax!=0&&s>this._newmax&&this._newmax!=null&&(s=this._newmax);var f=t.isScrolling()||n.isScrolling()||this._keydown,l=this.groupable&&this.groups.length>0;this.visiblerows=new Array,this.hittestinfo=new Array,this.editcell&&this.editrow==undefined&&this._hidecelleditor(!1),this.editrow!=undefined&&this._hideeditors(),this.virtualmode&&!this.pageable&&(this._pagescache=new Array),this._pagescache.length==0&&(this.dataview.updateview(),this._loadrows()),this.vScrollBar[0].style.visibility=="hidden"&&(s=0);if(!this.pageable){var c=this._findvisiblerow(s,this._pageviews);if(c==-1){this._clearvisualrows(),this._renderemptyrow(),this._updaterowdetailsvisibility();return}c!=this.dataview.pagenum?(this.dataview.pagenum=c,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}var h=this.groupable&&this.groups.length>0?this.groups.length:0;if(!this.columns.records)return;var p=this.columns.records.length-h,d=this._findvisiblerow(s,this._pagescache[this.dataview.pagenum]),v=this._pagescache[this.dataview.pagenum],m=d;m<0&&(m=0);var g=0,y=0,b=0,w=0,E=this.virtualsizeinfo.visiblerecords,S=this.groupable?this.groups.length:0,x=this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");this.rtl&&(x+=" "+this.toTP("jqx-grid-cell-rtl")),(this.autoheight||this.autorowheight)&&this.pageable&&(this.groupable||(E=this.dataview.pagesize)),l&&(x=" "+this.toTP("jqx-grid-group-cell")),this.isTouchDevice()&&(x+=" "+this.toTP("jqx-touch")),this.autorowheight&&(x+=" jqx-grid-cell-wrap");var T=this.rowsheight,N=m,C=this._rendercell,k=!0,L=this._getvisualcolumnsindexes(o,a,h,p,l),A=L.start,O=L.end;(this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews[0]&&(this._oldpageviewheight=this._pageviews[0].height),this.autorowheight&&(m=0);if(m>=0){this._updaterowdetailsvisibility(),this._startboundindex=v!=null?v[m].bounddata.boundindex:0,this._startvisibleindex=v!=null?v[m].bounddata.visibleindex:0;for(var M=0;M<E&&y<E;M++){var _=v!=undefined?v[m+M]:null;if(_==null){m=-M;if(this._pagescache[this.dataview.pagenum+1])v=this._pagescache[this.dataview.pagenum+1],this.dataview.pagenum++;else{var D=this._pageviews.length;do{if(!(this.dataview.pagenum<this._pageviews.length-1)){v=undefined;break}this.dataview.pagenum++,v=undefined,this._pageviews[this.dataview.pagenum].height>0&&(this.dataview.updateview(),this._loadrows(),v=this._pagescache[this.dataview.pagenum])}while(v==undefined&&this.dataview.pagenum<D)}v!=undefined&&(_=v[m+M])}if(_!=null){if(_.hidden)continue;this._endboundindex=this._startboundindex+M,this._endvisibleindex=this._startvisibleindex+M;if(M==0){var P=Math.abs(s-_.top);this.table[0].style.top=-P+"px",w=-P}var H=this.table[0].rows[y];if(!H)continue;parseInt(H.style.height)!=_.height&&(H.style.height=parseInt(_.height)+"px"),b+=_.height;var B=this.rowdetails&&_.rowdetails,j=!_.rowdetailshidden;B&&j&&(H.style.height=parseInt(_.height-_.rowdetailsheight)+"px",E++);var F=this._isrowselected(k,_);for(var I=A;I<O;I++){var q=I;this._rendervisualcell(C,x,F,B,j,l,S,H,_,q,y,f)}_.group!=undefined&&this._rendergroup&&this._rendergroup(S,H,_,h,p,y,a);if(this.autorowheight&&(this.autoheight||this.pageable)){var T=this.rowsheight;for(var I=A;I<O;I++){if(this.editable&&this.editcell&&this.editcell.column==this.columns.records[I].datafield&&this.editcell.row==this.getboundindex(_))continue;H.cells[I].firstChild&&(T=Math.max(T,8+parseInt(H.cells[I].firstChild.offsetHeight)))}H.style.height=parseInt(T)+"px",this.heights[this._startboundindex+M]=T,B&&j&&(T+=_.rowdetailsheight),_.height=T}this.visiblerows[this.visiblerows.length]=_,this.hittestinfo[this.hittestinfo.length]={row:_,visualrow:H,details:!1};if(B&&j){y++;var H=this.table[0].rows[y];this._renderrowdetails(x,H,_,h,p,y),this.visiblerows[this.visiblerows.length]=_,this.hittestinfo[this.hittestinfo.length]={row:_,visualrow:H,details:!0}}if(!this.autorowheight&&b+w>=u)break}else cansetheight=!0,this._clearvisualrow(o,l,y,h,p),b+g+w<=u&&(g+=T);y++}this._horizontalvalue=o;if(g>0&&this.vScrollBar[0].style.visibility=="visible"){var R=parseInt(this.table.css("top")),U=this._pageviews[this._pageviews.length-1],z=t.max,W=U.top+U.height-u;this.hScrollBar.css("visibility")=="visible"&&(W+=this.scrollbarsize+20),z!=W&&!this.autorowheight&&W>=0&&(this.scrollmode!="deferred"?(t.max=W,t.setPosition(t.max)):this._newmax!=W&&(this._newmax=W,this._rendervisualrows()))}}if((this.autoheight||this.pageable)&&this.autorowheight){this._pagescache=new Array;var X=0,V=0;for(var J=0;J<this.visiblerows.length;J++){var K=this.visiblerows[J];K.top=X,X+=K.height,V+=K.height;var B=this.rowdetails&&K.rowdetails,j=!K.rowdetailshidden,H=this.table[0].rows[J];B&&j&&J++;for(var I=A;I<O;I++){var Q=this.columns.records[I];if(!Q.hidden&&!Q.cellsrenderer){var G=H.cells[I],Y=0;if(G.firstChild){var Y=(K.height-parseInt(G.firstChild.offsetHeight)-8)/2;if(B&&j)var Y=(K.height-K.rowdetailsheight-e(G.firstChild).height()-8)/2}else var Y=(K.height-parseInt(e(G).height())-8)/2;if(Y>=0){Y=parseInt(Y)+4;if(G.firstChild&&G.firstChild.className.indexOf("jqx-grid-groups-row")==-1&&Q.columntype!="checkbox"&&Q.columntype!="button"){if(this.editable&&this.editcell&&this.editcell.column==Q.datafield&&this.editcell.row==this.getboundindex(K))continue;G.firstChild.style.marginTop=Y+"px"}}}}}this._pageviews[0]&&(this._pageviews[0].height=V),this._arrange()}this._renderemptyrow()},_hideemptyrow:function(){if(!this.showemptyrow)return;if(!this.table)return;if(!this.table[0].rows)return;var t=this.table[0].rows[0];if(!t)return;var n=!1;for(var r=0;r<t.cells.length;r++){var i=e(t.cells[r]);i.css("display")!="none"&&!n&&(i.width()==this.host.width()||i.text()==this.gridlocalization.emptydatastring)&&(i[0].checkbox=null,i[0].button=null,n=!0,i[0].innerHTML="")}},_renderemptyrow:function(){if(this._loading)return;if(this.dataview.records.length==0&&this.showemptyrow){var t=!1,n=this.toTP("jqx-grid-cell");if(this.table&&this.table.length>0&&this.table[0].rows&&this.table[0].rows.length>0){var r=this.table[0].rows[0];this.table[0].style.top="0px";for(var i=0;i<r.cells.length;i++){var s=e(r.cells[i]);if(s.css("display")!="none"&&!t){s[0].checkbox=null,s[0].button=null,s[0].className=n,t=!0,s[0].innerHTML="";var o=e("<span style='white-space: nowrap; float: left; margin-left: 50%; position: relative;'></span>");o.text(this.gridlocalization.emptydatastring),s.append(o);var u=0;this.oldhscroll||(u=parseInt(this.table[0].style.marginLeft),this.rtl&&(s.css("z-index",999),s.css("overflow","visible"))),o.css("left",-u-o.width()/2),o.css("top",this._gettableheight()/2-o.height()/2),e.jqx.browser.msie&&e.jqx.browser.version<8&&(o.css("margin-left","0px"),o.css("left",this.host.width()/2-o.width()/2));var a=Math.abs(parseInt(this.table[0].style.top));isNaN(a)&&(a=0),e(r).height(this._gettableheight()+a),s.css("margin-left","0px"),s.width(this.host.width()),this.table.width()<this.host.width()&&this.table.width(this.host.width())}s.addClass(this.toThemeProperty("jqx-grid-empty-cell"))}}}},_clearvisualrows:function(){var e=this.virtualsizeinfo.visiblerecords,t=this.hScrollInstance,n=t.value,r=parseInt(n),i=this.groupable&&this.groups.length>0;if(!this.columns.records)return;for(var s=0;s<e;s++)this._clearvisualrow(r,i,s,0,this.columns.records.length)},_iscellselected:function(e,t,n){var r=!1,i=0;this.virtualmode&&this.pageable&&this.groupable&&this.groups.length>0&&(i=this.dataview.pagesize*this.dataview.pagenum);if(e&&t.bounddata!=null)if(this.selectionmode!="singlerow"){if(this.dataview.filters.length>0)if(!this.virtualmode)for(var s in this.selectedcells)s==i+t.bounddata.dataindex+"_"+n&&(r=!0);else for(var s in this.selectedcells)s==i+t.bounddata.boundindex+"_"+n&&(r=!0);else for(var s in this.selectedcells)if(s==i+t.bounddata.boundindex+"_"+n){r=!0;break}}else if(this.dataview.filters.length>0){if(!this.virtualmode){for(var s in this.selectedcells)if(s==i+t.bounddata.dataindex+"_"+n){r=!0;break}}else for(var s in this.selectedcells)if(s==i+t.bounddata.boundindex+"_"+n){r=!0;break}}else for(var s in this.selectedcells)if(s==i+t.bounddata.boundindex==this.selectedrowindex){r=!0;break}return r},_isrowselected:function(e,t){var n=!1,r=0;return this.virtualmode&&this.pageable&&this.groupable&&this.groups.length>0&&(r=this.dataview.pagesize*this.dataview.pagenum),e&&t.bounddata!=null&&(this.selectionmode!="singlerow"?this.dataview.filters.length>0?this.virtualmode?this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)!=-1&&(n=!0):this.selectedrowindexes.indexOf(r+t.bounddata.dataindex)!=-1&&(n=!0):this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)!=-1&&(n=!0):this.dataview.filters.length>0?this.virtualmode?this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)!=-1&&(n=!0):this.selectedrowindexes.indexOf(r+t.bounddata.dataindex)!=-1&&(n=!0):r+t.bounddata.boundindex==this.selectedrowindex&&(n=!0)),n},_rendervisualcell:function(t,n,r,i,s,o,u,a,f,l,c,h){var p=null,d=this.columns.records[l];if(d.hidden){var v=a.cells[l];v.innerHTML="";return}cellvalue=this._getcellvalue(d,f);var v=a.cells[l],m=n;this.selectionmode.indexOf("cell")!=-1&&(this.dataview.filters.length>0?this.selectedcells[f.bounddata.dataindex+"_"+d.datafield]?r=!0:r=!1:this.selectedcells[f.boundindex+"_"+d.datafield]?r=!0:r=!1,this.editcell&&this.editcell.row===f.boundindex&&this.editcell.column===d.datafield&&d.columntype!=="checkbox"&&(r=!1),this.virtualmode&&(r=this._iscellselected(!0,f,d.datafield)));if(d.cellclassname!=""&&d.cellclassname)if(typeof d.cellclassname=="string")m+=" "+d.cellclassname;else{var g=d.cellclassname(this.getboundindex(f),d.datafield,cellvalue,f.bounddata);g&&(m+=" "+g)}var y=this.showsortcolumnbackground&&this.sortcolumn&&d.displayfield==this.sortcolumn;y&&(m+=" "+this.toTP("jqx-grid-cell-sort")),d.filter&&this.showfiltercolumnbackground&&(m+=" "+this.toTP("jqx-grid-cell-filter"));if(d.pinned&&this.showpinnedcolumnbackground||d.grouped)o?m+=" "+this.toTP("jqx-grid-cell-pinned"):m+=" "+this.toTP("jqx-grid-cell-pinned");if(this.altrows&&f.group==undefined){var b=f.visibleindex;b>=this.altstart&&(this.altstart+b)%(1+this.altstep)==0&&(y?m+=" "+this.toTP("jqx-grid-cell-sort-alt"):m+=" "+this.toTP("jqx-grid-cell-alt"),d.filter&&this.showfiltercolumnbackground&&(m+=" "+this.toTP("jqx-grid-cell-filter-alt")),d.pinned&&this.showpinnedcolumnbackground&&(m+=" "+this.toTP("jqx-grid-cell-pinned-alt")))}if(l<=u){if(o||this.rowdetails){var w=e(v),E=this.columns.records[l].width;v.style.width!=parseInt(E)+"px"&&w.width(E)}}else if(o||this.rowdetails)if(this._hiddencolumns){var w=e(v),E=this.columns.records[l].width;parseInt(v.style.width)!=E&&w.width(E)}var S=!0;if(this.rowdetails&&i){s&&!o?m+=" "+this.toTP("jqx-grid-details-cell"):o&&(m+=" "+this.toTP("jqx-grid-group-details-cell"));if(this.showrowdetailscolumn)if(!this.rtl){if(f.group==undefined&&l==u){var x=this.toThemeProperty("jqx-icon-arrow-down");if(s)m+=" "+this.toTP("jqx-grid-group-expand"),m+=" "+x;else{m+=" "+this.toTP("jqx-grid-group-collapse");var x=this.toThemeProperty("jqx-icon-arrow-right");m+=" "+x}S=!1,v.title="",v.innerHTML="",v.className!=m&&(v.className=m);return}}else if(f.group==undefined&&l==a.cells.length-u-1){var x=this.toThemeProperty("jqx-icon-arrow-down");if(s)m+=" "+this.toTP("jqx-grid-group-expand-rtl"),m+=" "+x;else{m+=" "+this.toTP("jqx-grid-group-collapse-rtl");var x=this.toThemeProperty("jqx-icon-arrow-left");m+=" "+x}S=!1,v.title="",v.innerHTML="",v.className!=m&&(v.className=m);return}}r&&S&&l>=u&&(m+=" "+this.toTP("jqx-grid-cell-selected"),m+=" "+this.toTP("jqx-fill-state-pressed")),v.className!=m&&(v.className=m);if(f.group!=undefined){cellvalue="",v.title="",v.innerHTML="";return}t(this,d,f,cellvalue,v,h)},_rendercell:function(t,n,r,i,s,o){var u=i+"_"+n.visibleindex;if(n.columntype=="number"||n.cellsrenderer!=null)var u=r.uniqueid+"_"+n.visibleindex;if(t.editcell&&t.editrow==undefined)if(t.editmode=="selectedrow"&&n.editable&&t.editable){if(t.editcell.row==t.getboundindex(r)&&t._showcelleditor){!t.hScrollInstance.isScrolling()&&!t.vScrollInstance.isScrolling()?t._showcelleditor(t.editcell.row,n,s,t.editcell.init):t._showcelleditor(t.editcell.row,n,s,t.editcell.init,!1);return}}else if(t.editcell.row==t.getboundindex(r)&&t.editcell.column==n.datafield){t.editcell.element=s;if(t.editcell.editing&&t._showcelleditor){!t.hScrollInstance.isScrolling()&&!t.vScrollInstance.isScrolling()?t._showcelleditor(t.editcell.row,n,t.editcell.element,t.editcell.init):t._showcelleditor(t.editcell.row,n,t.editcell.element,t.editcell.init,!1);return}}var a=t._defaultcellsrenderer(i,n),f=t._cellscache[u];if(f){if(n.columntype=="inline"){t._renderinlinecell(t,s,n,r,i);if(n.cellsrenderer!=null){var l=n.cellsrenderer(t.getboundindex(r),n.datafield,i,a,n.getcolumnproperties(),r.bounddata);l!=undefined&&(s.innerHTML=l)}return}if(n.columntype=="checkbox"){if(t.host.jqxCheckBox){i===""&&(i=null);var c=s.innerHTML.toString().length==0;s.checkbox&&!t.groupable&&!c?(s.checkboxrow=t.getboundindex(r),i==""&&(i=!1),i=="1"&&(i=!0),i=="0"&&(i=!1),i==1&&(i=!0),i==0&&(i=!1),i=="true"&&(i=!0),i=="false"&&(i=!1),i==null&&!n.threestatecheckbox&&(i=!1),n.checkboxcolumn&&(i=!1,t.dataview.filters.length>0&&!t.virtualmode?t.selectedrowindexes.indexOf(r.bounddata.dataindex)!=-1&&(i=!0):t.selectedrowindexes.indexOf(r.bounddata.boundindex)!=-1&&(i=!0)),s.checkboxinstance?s.checkboxinstance._setState(i):s.checkbox.jqxCheckBox("_setState",i)):t._rendercheckboxcell(t,s,n,r,i);if(n.cellsrenderer!=null){var l=n.cellsrenderer(t.getboundindex(r),n.datafield,i,a,n.getcolumnproperties(),r.bounddata);l!=undefined&&(s.innerHTML=l)}return}}else if(n.columntype=="button"&&t.host.jqxButton){i==""&&(i=!1),n.cellsrenderer!=null&&(i=n.cellsrenderer(t.getboundindex(r),n.datafield,i,a,n.getcolumnproperties(),r.bounddata)),s.innerHTML==""&&(s.buttonrow=t.getboundindex(r),s.button=null,t._renderbuttoncell(t,s,n,r,i)),s.button&&!t.groupable?(s.buttonrow=t.getboundindex(r),s.button.val(i)):t._renderbuttoncell(t,s,n,r,i);return}var h=f.element;if(n.cellsrenderer!=null||s.childNodes&&s.childNodes.length==0||t.groupable||t.rowdetails)s.innerHTML!=h&&(s.innerHTML=h);else if(s.innerHTML.indexOf("editor")>=0)s.innerHTML=h;else if(o){var p=h.indexOf(">"),d=h.indexOf("</"),v=h.substring(p+1,d),m=s.childNodes[0];if(v.indexOf(">")>=0)s.innerHTML=h;else if(m.childNodes[0])v!=m.childNodes[0].nodeValue&&(v.indexOf("&")>=0?s.innerHTML=h:m.childNodes[0].nodeValue=v);else{var g=document.createTextNode(v);m.appendChild(g)}}else s.innerHTML!=h&&(s.innerHTML=h);t.enabletooltips&&n.enabletooltips&&(s.title=f.title);return}if(n.columntype=="checkbox"){t._rendercheckboxcell(t,s,n,r,i),t._cellscache[u]={element:"",title:i},t.enabletooltips&&n.enabletooltips&&(s.title=i);return}if(n.columntype=="button"){n.cellsrenderer!=null&&(i=n.cellsrenderer(t.getboundindex(r),n.datafield,i,a,n.getcolumnproperties(),r.bounddata)),t._renderbuttoncell(t,s,n,r,i),t._cellscache[u]={element:"",title:i},t.enabletooltips&&n.enabletooltips&&(s.title=i);return}if(n.columntype=="number")i=r.visibleindex;else if(n.columntype=="inline"){t._renderinlinecell(t,s,n,r,i),t._cellscache[u]={element:"",title:i},t.enabletooltips&&n.enabletooltips&&(s.title=i);return}var h=null;n.cellsrenderer!=null?h=n.cellsrenderer(t.getboundindex(r),n.datafield,i,a,n.getcolumnproperties(),r.bounddata):h=a,h==null&&(h=a);var y=i;return t.enabletooltips&&n.enabletooltips&&(n.cellsformat!=""&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(i)?y=e.jqx.dataFormat.formatdate(y,n.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(i)&&(y=e.jqx.dataFormat.formatnumber(y,n.cellsformat,this.gridlocalization))),s.title=y),t.WinJS?e(s).html(h):s.innerHTML=h,t._cellscache[u]={element:s.innerHTML,title:y},!0},_isIE10:function(){if(this._browser==undefined){var t=e.jqx.utilities.getBrowser();if(t.browser=="msie"&&parseInt(t.version)>9)this._browser=!0;else{this._browser=!1;if(t.browser=="msie"){var n="Browser CodeName: "+navigator.appCodeName+"";n+="Browser Name: "+navigator.appName+"",n+="Browser Version: "+navigator.appVersion+"",n+="Platform: "+navigator.platform+"",n+="User-agent header: "+navigator.userAgent+"",n.indexOf("Zune 4.7")!=-1&&(this._browser=!0)}}}return this._browser},_renderinlinecell:function(t,n,r,i,s){var o=e(n);n.innerHTML='<div style="position: absolute;"></div>'},_rendercheckboxcell:function(t,n,r,i,s){if(t.host.jqxCheckBox){var o=e(n);s===""&&(r.threestatecheckbox?s=null:s=!1),s=="1"&&(s=!0),s=="0"&&(s=!1),s==1&&(s=!0),s==0&&(s=!1),s=="true"&&(s=!0),s=="false"&&(s=!1),r.checkboxcolumn&&(s=!1,this.dataview.filters.length>0?this.selectedrowindexes.indexOf(i.bounddata.dataindex)!=-1&&(s=!0):this.selectedrowindexes.indexOf(i.bounddata.boundindex)!=-1&&(s=!0));if(o.find(".jqx-checkbox").length==0){n.innerHTML='<div style="position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"></div>',e(n.firstChild).jqxCheckBox({_canFocus:!1,hasInput:!1,hasThreeStates:r.threestatecheckbox,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,locked:!0,theme:t.theme,checked:s}),this.editable&&r.editable&&e(n.firstChild).jqxCheckBox({locked:!1}),r.checkboxcolumn&&e(n.firstChild).jqxCheckBox({locked:!1}),n.checkbox=e(n.firstChild),n.checkboxinstance=n.checkbox.data().jqxCheckBox.instance,n.checkboxrow=i.boundindex;if(this.dataview.filters.length>0){var u=i.bounddata.dataindex;n.checkboxrow=u}var a=e.data(n.firstChild,"jqxCheckBox").instance;a.updated=function(i,s,o){if(r.editable){var u=t.table[0].rows.length,a=t._getcolumnindex(r.datafield);if(t.editrow==undefined){if(r.cellbeginedit){var f=r.cellbeginedit(n.checkboxrow,r.datafield,r.columntype,!s);if(f==0){t.setcellvalue(n.checkboxrow,r.datafield,!s,!0);return}}if(t.editmode!=="selectedrow")for(var l=0;l<u;l++){var c=t.table[0].rows[l].cells[a].firstChild;c&&e(c).jqxCheckBox("destroy")}t.editcell&&t.editcell.validated==0?t.setcellvalue(n.checkboxrow,r.datafield,!s,!0):t.editmode!=="selectedrow"||t.editcell==null?(t._raiseEvent(17,{rowindex:n.checkboxrow,datafield:r.datafield,value:o,columntype:r.columntype}),t.setcellvalue(n.checkboxrow,r.datafield,s,!0),t._raiseEvent(18,{rowindex:n.checkboxrow,datafield:r.datafield,oldvalue:o,value:s,columntype:r.columntype})):t.setcellvalue(n.checkboxrow,r.datafield,s,!1,!1)}}else r.checkboxcolumn&&(t.editcell&&t.endcelledit(t.editcell.row,t.editcell.column,!1,!0),s?t.selectrow(n.checkboxrow):t.unselectrow(n.checkboxrow),t.autosavestate&&t.savestate&&t.savestate())}}else n.checkboxrow=i.boundindex,this.dataview.filters.length>0&&(u=i.bounddata.dataindex,n.checkboxrow=u),e(n.firstChild).jqxCheckBox("_setState",s)}},_renderbuttoncell:function(t,n,r,i,s){if(t.host.jqxButton){var o=e(n);s==""&&(s=!1);if(o.find(".jqx-button").length==0){n.innerHTML='<input type="button" style="opacity: 0.99; position: absolute; top: 0%; left: 0%; padding: 0px; margin-top: 2px; margin-left: 2px;"/>',e(n.firstChild).val(s),e(n.firstChild).attr("hideFocus","true"),e(n.firstChild).jqxButton({theme:t.theme,height:t.rowsheight-4,width:r.width-4}),n.button=e(n.firstChild),n.buttonrow=t.getboundindex(i);var u=this.isTouchDevice();if(u){var a=e.jqx.mobile.getTouchEventName("touchend");t.addHandler(e(n.firstChild),a,function(e){r.buttonclick&&r.buttonclick(n.buttonrow,e)})}else t.addHandler(e(n.firstChild),"click",function(e){r.buttonclick&&r.buttonclick(n.buttonrow,e)})}else n.buttonrow=t.getboundindex(i),e(n.firstChild).val(s)}},_clearvisualrow:function(t,n,r,i,s){var o=this.toTP("jqx-grid-cell");n&&(o=" "+this.toTP("jqx-grid-group-cell")),o+=" "+this.toTP("jqx-grid-cleared-cell");var u=this.table[0].rows;for(var a=0;a<i+s;a++)if(u[r]){var f=u[r].cells[a];f.className!=o&&(f.className=o);var l=this.columns.records[a];if(this._horizontalvalue!=t&&!l.pinned&&this.oldhscroll==1){var c=-t;f.style.marginLeft=-t+"px"}var h=l.width;h<l.minwidth&&(h=l.minwidth),h>l.maxwidth&&(h=l.maxwidth),parseInt(f.style.width)!=h&&(h!="auto"?e(f)[0].style.width=h+"px":e(f)[0].style.width=h),f.title!=""&&(f.title=""),f.innerHTML!=""&&(f.innerHTML="")}u[r]&&parseInt(u[r].style.height)!=this.rowsheight&&(u[r].style.height=parseInt(this.rowsheight)+"px")},_findgroupstate:function(e){var t=this._findgroup(e);return t==null?!1:t.expanded},_findgroup:function(e){var t=null;return this.expandedgroups[e]?this.expandedgroups[e]:t},_clearcaches:function(){this._columnsbydatafield=new Array,this._pagescache=new Array,this._pageviews=new Array,this._cellscache=new Array,this.heights=new Array,this.hiddens=new Array,this.hiddenboundrows=new Array,this.heightboundrows=new Array,this.detailboundrows=new Array,this.details=new Array,this.expandedgroups=new Array,this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,e.jqx.dataFormat&&e.jqx.dataFormat.cleardatescache(),this.tableheight=null},_getColumnText:function(t){this._columnsbydatafield==undefined&&(this._columnsbydatafield=new Array);if(this._columnsbydatafield[t])return this._columnsbydatafield[t];var n=t,r=null;return e.each(this.columns.records,function(){if(this.datafield==t)return n=this.text,r=this,!1}),this._columnsbydatafield[t]={label:n,column:r},this._columnsbydatafield[t]},_getcolumnbydatafield:function(t){this.__columnsbydatafield==undefined&&(this.__columnsbydatafield=new Array);if(this.__columnsbydatafield[t])return this.__columnsbydatafield[t];var n=t,r=null;return e.each(this.columns.records,function(){if(this.datafield==t||this.displayfield==t)return n=this.text,r=this,!1}),this.__columnsbydatafield[t]=r,this.__columnsbydatafield[t]},isscrollingvertically:function(){var e=this.vScrollBar.jqxScrollBar("isScrolling");return e},_renderrowdetails:function(t,n,r,i,s,o){if(n==undefined)return;var u=e(n),a=0,f=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(this.groupable&&this.groups.length>0)for(var l=0;l<=s;l++){var c=e(n.cells[l]);c[0].innerHTML="",c[0].className="jqx-grid-details-cell"}var c=e(n.cells[a]);if(c[0].style.display=="none"){var h=n.cells[a],p=2,d=a;while(h!=undefined&&h.style.display=="none"&&p<10)h=n.cells[d+p-1],p++;c=e(h)}if(this.rtl)for(var v=i;v<s;v++)n.cells[v].innerHTML="",n.cells[v].className="jqx-grid-details-cell";c.css("width","100%"),u.height(r.rowdetailsheight),c[0].className=t;var m=this.getboundindex(r),g=m+"_";if(this._rowdetailscache[g]){var y=this._rowdetailscache[g],b=y.html;if(this.initrowdetails){if(this._rowdetailscache[g].element){var w=this._rowdetailscache[g].element,E=c.coord(),S=this.gridcontent.coord(),x=parseInt(E.top)-parseInt(S.top),T=parseInt(E.left)-parseInt(S.left);this.rtl&&(T=0),e(w).css("top",x),e(w).css("left",T),e(w).css("display","block"),e(w).width(this.host.width()-f),this.layoutrowdetails&&this.layoutrowdetails(m,w,this.element,this.getrowdata(m))}}else c[0].innerHTML=b;return}c[0].innerHTML="",this.enablerowdetailsindent||(f=0);var N='<div role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: '+f+'px;">'+r.rowdetails+"</div>";if(this.rtl)var N='<div role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: 0px; margin-right: '+f+'px;">'+r.rowdetails+"</div>";this._rowdetailscache[g]={id:n.id,html:N};if(this.initrowdetails){var w=e(N)[0];e(this.gridcontent).prepend(e(w)),e(w).css("position","absolute"),e(w).width(this.host.width()-f),e(w).height(c.height());var E=c.coord();e(w).css("z-index",2e3),this.isTouchDevice()&&e(w).css("z-index",99999),e(w).addClass(this.toThemeProperty("jqx-widget-content"));var E=c.coord(),S=this.gridcontent.coord(),x=parseInt(E.top)-parseInt(S.top),T=parseInt(E.left)-parseInt(S.left);e(w).css("top",x),e(w).css("left",T),this.content[0].scrollTop=0,this.content[0].scrollLeft=0;var C=e(e(w).children()[0]);C[0].id!=""&&(C[0].id=C[0].id+m),this.initrowdetails(m,w,this.element,this.getrowdata(m)),this._rowdetailscache[g].element=w,this._rowdetailselementscache[m]=w}else c[0].innerHTML=N},_defaultcellsrenderer:function(t,n){n.cellsformat!=""&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(t)?t=e.jqx.dataFormat.formatdate(t,n.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(t)&&(t=e.jqx.dataFormat.formatnumber(t,n.cellsformat,this.gridlocalization)));var r="4px";this.rowsheight!=25&&(r=this.rowsheight/2-this._cellheight/2,r<0&&(r=4),r+="px");if(this.enableellipsis){if(n.cellsalign=="center"||n.cellsalign=="middle")return r="5px",'<div style="text-overflow: ellipsis; overflow: hidden; padding-bottom: 2px; text-align: center; margin-top: '+r+';">'+t+"</div>";if(n.cellsalign=="left")return'<div style="overflow: hidden; text-overflow: ellipsis; padding-bottom: 2px; text-align: left; margin-right: 2px; margin-left: 4px; margin-top: '+r+';">'+t+"</div>";if(n.cellsalign=="right")return'<div style="overflow: hidden;  text-overflow: ellipsis; padding-bottom: 2px; text-align: right; margin-right: 2px; margin-left: 4px; margin-top: '+r+';">'+t+"</div>"}return n.cellsalign=="center"||n.cellsalign=="middle"?(r="5px",'<div style="text-align: center; margin-top: '+r+';">'+t+"</div>"):'<span style="margin-left: 4px; margin-right: 2px; margin-top: '+r+"; float: "+n.cellsalign+';">'+t+"</span>"},getcelltext:function(t,n){if(t==null||n==null)return null;var r=this.getcellvalue(t,n),i=this.getcolumn(n);return i&&i.cellsformat!=""&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(r)?r=e.jqx.dataFormat.formatdate(r,i.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(r)&&(r=e.jqx.dataFormat.formatnumber(r,i.cellsformat,this.gridlocalization))),r},getcelltextbyid:function(t,n){if(t==null||n==null)return null;var r=this.getcellvaluebyid(t,n),i=this.getcolumn(n);return i&&i.cellsformat!=""&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(r)?r=e.jqx.dataFormat.formatdate(r,i.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(r)&&(r=e.jqx.dataFormat.formatnumber(r,i.cellsformat,this.gridlocalization))),r},_getcellvalue:function(e,t){var n=null;return n=t.bounddata[e.datafield],e.displayfield!=null&&(n=t.bounddata[e.displayfield]),n==null&&(n=""),n},getcell:function(e,t){if(e==null||t==null)return null;var n=parseInt(e),r=e,i="";return isNaN(n)||(r=this.getrowdata(n)),r!=null&&(i=r[t]),this._getcellresult(i,e,t)},getrenderedcell:function(e,t){if(e==null||t==null)return null;var n=parseInt(e),r=e,i="";return isNaN(n)||(r=this.getrenderedrowdata(n)),r!=null&&(i=r[t]),this._getcellresult(i,e,t)},_getcellresult:function(e,t,n){var r=this.getcolumn(n);if(r==null||r==undefined)return null;var i=r.getcolumnproperties(),s=i.hidden,o=i.width,u=i.pinned,a=i.cellsalign,f=i.cellsformat,l=this.getrowheight(t);return l==0?null:{value:e,row:t,column:n,datafield:n,width:o,height:l,hidden:s,pinned:u,align:a,format:f}},setcellvaluebyid:function(e,t,n,r,i){var s=this.getrowboundindexbyid(e);return this.setcellvalue(s,t,n,r,i)},getcellvaluebyid:function(e,t){var n=this.getrowboundindexbyid(e);return this.getcellvalue(n,t)},setcellvalue:function(t,n,r,i,s){if(t==null||n==null)return!1;var o=parseInt(t),u=o,a=t;isNaN(o)||(a=this.getrowdata(o));var f=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(f=!0),this.virtualmode&&(this._pagescache=new Array);var l="",c="";if(a==null||a[n]===r)return!this._updating&&i!=0&&this._renderrows(this.virtualsizeinfo),!1;if(a[n]===null&&r==="")return;var h=this._getcolumnbydatafield(n),p="string",d=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(d){var v="";e.each(d,function(){if(this.name==h.displayfield)return this.type&&(v=this.type),!1}),v&&(p=v),c=a[h.displayfield]}l=a[n];if(!h.nullable||r!=null&&r!==""&&h.nullable&&r.label===undefined){if(e.jqx.dataFormat.isNumber(l)||p=="number"||p=="float"||p=="int"||p=="decimal"&&p!="date")r=new Number(r),r=parseFloat(r),isNaN(r)&&(r=0);else if(e.jqx.dataFormat.isDate(l)||p=="date")if(r!=""){var m=r;m=new Date(m),m!="Invalid Date"&&m!=null?r=m:m=="Invalid Date"&&(m=new Date,r=m)}if(a[n]===r){!this._updating&&i!=0&&this._renderrows(this.virtualsizeinfo);return}}a[n]=r;var g=this.getrenderedrowdata(o,!0);g[n]=r;if(r!=null&&r.label!=null){var h=this._getcolumnbydatafield(n);a[h.displayfield]=r.label,g[h.displayfield]=r.label,a[n]=r.value,g[n]=r.value}f&&a.dataindex!=undefined&&(u=a.dataindex,this.dataview.cachedrecords[a.dataindex][n]=r,r!=null&&r.label!=undefined&&(this.dataview.cachedrecords[a.dataindex][n]=r.value,this.dataview.cachedrecords[a.dataindex][h.displayfield]=r.label));if(this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates&&this.source._source._localdata){var y=o;f&&a.dataindex!=undefined&&(y=a.dataindex);var b=this.source._source._localdata.get()[y];this.source.suspendKO=!0;var w=b;if("function"==typeof w.ref&&w.ref(n))r!=null&&r.label!=null?(w[h.displayfield].set(r.label),w.ref(n).set(r.value)):w.ref(n).set(r);else{var d=this.source._source.datafields,E=null,S=null;d&&e.each(d,function(){if(this.name==n)return S=this.map,!1});if(S==null)r!=null&&r.label!=null?(w[n]=r.value,w[h.displayfield]=r.label):w[n]=r;else{var x=S.split(this.source.mapChar);if(x.length>0){var T=w;for(var N=0;N<x.length-1;N++)T=T[x[N]];T[x[x.length-1]]=r}}this.source._source._localdata.replace(b,e.extend({},w))}this.source.suspendKO=!1}if(this.sortcolumn&&this.dataview.sortby&&!this._updating){var C=this.getsortinformation();this.sortcolumn==n&&(this.dataview.clearsortdata(),this.dataview.sortby(C.sortcolumn,C.sortdirection.ascending))}else this._updating||this.dataview.sortby&&this.dataview.sortcache[n]&&(this.dataview.sortcache[n]=null);this._cellscache=new Array;if(this.source.updaterow&&(s==undefined||s==1)){var k=!1,L=this.that,A=function(e){0==e&&(L.setcellvalue(t,n,l,!0,!1),l!=c&&L.setcellvalue(t,L.getcolumn(n).displayfield,c,!0,!1))};try{var O=this.getrowid(o);k=this.source.updaterow(O,a,A),k==undefined&&(k=!0)}catch(M){k=!1,L.setcellvalue(t,n,l,!0,!1),l!=c&&L.setcellvalue(t,L.getcolumn(n).displayfield,c,!0,!1);return}}var _=this.vScrollInstance.value;this._updating&&i!=1&&(i=!1);if(i==1||i==undefined){var L=this.that,D=function(){L.pageable&&L.updatepagerdetails&&(L.updatepagerdetails(),(L.autoheight||L.autorowheight)&&L._updatepageviews())},P=this.groupable&&this.groups.length>0;if(f&&!P){if(this.autoheight||this.autorowheight)this.prerenderrequired=!0;this.dataview.refresh(),this.rendergridcontent(!0,!1),D(),this._renderrows(this.virtualsizeinfo)}else if(this.sortcolumn&&!P){if(this.autoheight||this.autorowheight)this.prerenderrequired=!0;this.dataview.reloaddata(),this.rendergridcontent(!0,!1),D(),this._renderrows(this.virtualsizeinfo)}else if(this.groupable&&this.groups.length>0){if(this.autoheight||this.autorowheight)this.prerenderrequired=!0;this.pageable?this.groups.indexOf(n)!=-1?(this._pagescache=new Array,this._cellscache=new Array,this.dataview.refresh(),this._render(!0,!0,!1,!1)):(this._pagescache=new Array,this._cellscache=new Array,this.dataview.updateview(),this._renderrows(this.virtualsizeinfo)):(this._pagescache=new Array,this._cellscache=new Array,this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))}else this.dataview.updateview(),this._renderrows(this.virtualsizeinfo)}this.vScrollInstance.setPosition(_),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates();if(this.showfilterrow&&this.filterable&&this.filterrow){var H=this.getcolumn(n).filtertype;(H=="list"||H=="checkedlist")&&this._updatelistfilters(!0)}return this._raiseEvent(19,{rowindex:t,datafield:n,newvalue:r,value:r,oldvalue:l}),!0},getcellvalue:function(e,t){if(e==null||t==null)return null;var n=parseInt(e),r=e;isNaN(n)||(r=this.getrowdata(n));if(r!=null){var i=r[t];return i}return null},getrows:function(){var t=this.dataview.records.length;if(this.virtualmode){var n=new Array;for(var r=0;r<this.dataview.records.length;r++){var i=this.dataview.records[r];i&&n.push(i)}this.dataview.records.length===undefined&&e.each(this.dataview.records,function(){var e=this;e&&n.push(e)});var s=0;return this.pageable&&(s=this.dataview.pagenum*this.dataview.pagesize),n.length>this.source._source.totalrecords-s?n.slice(0,this.source._source.totalrecords-s):n}if(this.dataview.sortdata){var n=new Array;for(var r=0;r<t;r++){var o={};o=e.extend({},this.dataview.sortdata[r].value),n[r]=o}return n}return this.dataview.records},getrowboundindexbyid:function(e){var t=this.dataview.recordsbyid["id"+e];if(t&&t.boundindex)return this.getboundindex(t);var n=this.getboundrows();for(var r=0;r<n.length;r++)if(n[r]&&n[r].uid==e)return r;return-1},getrowdatabyid:function(e){var t=this.dataview.recordsbyid["id"+e];if(t)return t;var n=this.getrowboundindexbyid(e);return this.getboundrows()[n]},getrowdata:function(e){e==undefined&&(e=0);if(this.virtualmode){var t=this.dataview.records[e];return t}var t=this.getboundrows()[e];return t},getrenderedrowdata:function(e,t){e==undefined&&(e=0);if(this.virtualmode){var n=this.getrowvisibleindex(e),r=this.dataview.loadedrecords[n];return r}var n=this.getrowvisibleindex(e);if(n>=0){if(this.groupable&&this.groups.length>0)var r=this.dataview.loadedrecords[n];else{var r=this.dataview.loadedrecords[n];if(this.pageable&&(t==undefined||t==0))var r=this.dataview.loadedrecords[this.dataview.pagesize*this.dataview.pagenum+e]}return r}return null},getboundrows:function(){return this.dataview.cachedrecords},getrowdisplayindex:function(e){var t=this.getdisplayrows();for(var n=0;n<t.length;n++)if(t[n].dataindex!==undefined){if(t[n].dataindex===e)return t[n].visibleindex}else if(t[n].boundindex===e)return t[n].visibleindex;return-1},getboundindex:function(e){var t=e.boundindex;return this.dataview.filters.length>0&&(e.bounddata?e.bounddata.dataindex!==undefined&&(t=e.bounddata.dataindex):e.dataindex!==undefined&&(t=e.dataindex)),t},getrowboundindex:function(e){var t=this.getdisplayrows()[e];return t?t.dataindex!==undefined?t.dataindex:t.boundindex:-1},getdisplayrows:function(){return this.dataview.loadedrecords},getloadedrows:function(){return this.getdisplayrows()},getvisiblerowdata:function(e){var t=this.getvisiblerows();return t?t[e]:null},getloadedrowdata:function(e){var t=this.getloadedrows();return t?t[e]:null},getvisiblerows:function(){if(this.virtualmode)return this.dataview.loadedrecords;if(this.pageable){var e=[];for(var t=0;t<this.dataview.pagesize;t++){var n=this.dataview.loadedrecords[t+this.dataview.pagesize*this.dataview.pagenum];if(n==undefined)break;e.push(n)}return e}if(this._startboundindex!=undefined&&this._endboundindex!=undefined){var e=[];for(var t=this._startvisibleindex;t<=this._endvisibleindex;t++){var n=this.dataview.loadedrecords[t];if(n==undefined)break;e.push(n)}return e}return this.dataview.loadedrecords},getrowid:function(e){e==undefined&&(e=0);if(this.virtualmode){var t=this.getrowvisibleindex(e),n=this.dataview.loadedrecords[t];if(n)return n.uid}else{var n=null,r=this.dataview.filters.length>0;if(e>=0&&e<this.dataview.bounditems.length&&!r){if(this.groupable&&this.groups.length>0)var t=this.getrowvisibleindex(e),n=this.dataview.loadedrecords[t];else var t=this.getrowvisibleindex(e),n=this.dataview.loadedrecords[t];if(n)return n.uid}if(this.dataview.filters.length>0){var n=this.getboundrows()[e];return n&&n.uid!=null?n.uid:null}}return null},_updateGridData:function(e){var t=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(t=!0),t?(this.dataview.refresh(),e=="updaterow"?(this._render(!0,!0,!1,!1,!1),this.invalidate()):this.render()):this.sortcolumn||this.groupable&&this.groups.length>0?(this.dataview.reloaddata(),this.render()):(this._cellscache=new Array,this._pagescache=new Array,this._renderrows(this.virtualsizeinfo)),this.showfilterrow&&this.filterable&&this.filterrow&&this._updatelistfilters(!0)},updaterow:function(t,n,r){if(t!=undefined&&n!=undefined){var i=this.that,s=!1;i._datachanged=!0;var o=function(t,n,i){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var s=!1;e.isArray(n)?(e.each(n,function(e,n){s=t.dataview.updaterow(this,i[e],!1)}),t.dataview.refresh()):s=t.dataview.updaterow(n,i);var o=t.vScrollInstance.value;(r==undefined||r==1)&&(t._updating==undefined||t._updating==0)&&t._updateGridData("updaterow"),t.showaggregates&&t._updatecolumnsaggregates&&t._updatecolumnsaggregates();if(t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata){var u=t.dataview.recordsbyid["id"+n],a=t.dataview.records.indexOf(u),f=t.source._source._localdata.get()[a];t.source.suspendKO=!0,t.source._source._localdata.replace(f,e.extend({},u)),t.source.suspendKO=!1}return t.vScrollInstance.setPosition(o),s};if(this.source.updaterow){var u=function(e){(e==1||e==undefined)&&o(i,t,n)};try{s=this.source.updaterow(t,n,u),s==undefined&&(s=!0)}catch(a){s=!1}}else s=o(i,t,n);return s}return!1},deleterow:function(t,n){if(t!=undefined){this._datachanged=!0;var r=!1,i=this.that,s=function(t,r){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var i=!1,s=t.vScrollInstance.value;if(!e.isArray(r))var i=t.dataview.deleterow(r);else e.each(r,function(){i=t.dataview.deleterow(this,!1)}),t.dataview.refresh();if(t._updating==undefined||t._updating==0)if(n==undefined||n==1)t._render(!0,!0,!1,!1),t.vScrollBar.css("visibility")!="visible"&&(t._arrange(),t._updatecolumnwidths(),t._updatecellwidths(),t._renderrows(t.virtualsizeinfo));return t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.pop(rowdata),t.source.suspendKO=!1),t.vScrollInstance.setPosition(s),i};if(this.source.deleterow){var o=function(e){(e==1||e==undefined)&&s(i,t)};try{this.source.deleterow(t,o),r==undefined&&(r=!0)}catch(u){r=!1}}else r=s(i,t);return r}return!1},addrow:function(t,n,r){if(n!=undefined){this._datachanged=!0,r==undefined&&(r="last");var i=!1,s=this.that;if(t==null){var o=this.dataview.filters&&this.dataview.filters.length>0,u=o?this.dataview.cachedrecords.length:this.dataview.totalrecords;if(!e.isArray(n)){t=this.dataview.getid(this.dataview.source.id,n,u);while(null!=this.dataview.recordsbyid["id"+t])t++}else{var a=new Array;e.each(n,function(e,t){var r=s.dataview.getid(s.dataview.source.id,n[e],u+e);a.push(r)}),t=a}}var f=function(t,n,r,i){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var s=t.vScrollInstance.value,o=!1;e.isArray(r)?(e.each(r,function(e,r){this.dataindex!=undefined&&delete this.dataindex;var s=null;n!=null&&n[e]!=null&&(s=n[e]),o=t.dataview.addrow(s,this,i,!1)}),t.dataview.refresh()):(r!=undefined&&r.dataindex!=undefined&&delete r.dataindex,o=t.dataview.addrow(n,r,i));if(t._updating==undefined||t._updating==0)t._render(!0,!0,!1,!1),t.invalidate();return t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.push(r),t.source.suspendKO=!1),t.scrollmode!="deferred"?t.vScrollInstance.setPosition(s):t.vScrollInstance.setPosition(0),o};if(this.source.addrow){var l=function(e,i){if(e==1||e==undefined)i!=undefined&&(t=i),f(s,t,n,r)};try{i=this.source.addrow(t,n,r,l),i==undefined&&(i=!0)}catch(c){i=!1}if(i==0)return!1}else f(this,t,n,r);return i}return!1},_findvisiblerow:function(e,t){e==undefined&&(e=parseInt(this.vScrollInstance.value));var n=0;if(t==undefined||t==null)t=this.rows.records;var r=t.length;while(n<=r){mid=parseInt((n+r)/2);var i=t[mid];if(i==undefined)break;if(i.top>e&&i.top+i.height>e)r=mid-1;else{if(!(i.top<e&&i.top+i.height<e))return mid;n=mid+1}}return-1},_updatecellwidths:function(){var e=this.virtualsizeinfo;if(!e)return;var t=this.that;if(this.gridcontent==undefined)return;this.table==undefined&&(this.table=this.gridcontent.find("#contenttable"+this.element.id));var n=this.groupable&&this.groups.length>0,r=0,i=e.visiblerecords;this.pageable&&(this.autoheight||this.autorowheight)&&(i=this.dataview.pagesize,this.groupable&&(this.dataview.updateview(),i=this.dataview.rows.length)),!this.groupable&&!this.pageable&&(this.autoheight||this.autorowheight)&&(i=this.dataview.totalrecords),this.rowdetails&&(i+=this.dataview.pagesize);if(!this.columns.records)return;var s=this.columns.records.length,o=this.table[0].rows;for(var u=0;u<i;u++){var a=o[u];if(!a)break;var f=a.cells,l=0;for(var c=0;c<s;c++){var h=this.columns.records[c],p=h.width,d=f[c];parseInt(d.style.left)!=l&&(d.style.left=l+"px"),parseInt(d.style.width)!=p&&(d.style.width=p+"px"),!h.hidden||!h.hideable?l+=parseInt(p):d.style.display="none"}r==0&&(this.table.width(parseInt(l)+2),r=l)}this.showaggregates&&this._updateaggregates&&this._updateaggregates(),this.showfilterrow&&this.filterable&&this._updatefilterrowui&&this._updatefilterrowui(),this._updatescrollbarsafterrowsprerender(),n&&this._renderrows(this.virtualsizeinfo)},_updatescrollbarsafterrowsprerender:function(){var e=this.hScrollBar[0].style.visibility,t=0,n=this.vScrollBar[0].style.visibility;n=="visible"&&(t=this.scrollbarsize+3);var r=this.element.style.width;r.toString().indexOf("%")>=0?r=this.host.width():r=parseInt(r);if(parseInt(this.table[0].style.width)-2>r-t){e!="visible"&&(this.autowidth||(this.hScrollBar[0].style.visibility="visible"),this._arrange());if(n=="visible")if(this.scrollmode!="deferred"&&!this.virtualmode){if(this.virtualsizeinfo){var i=this.virtualsizeinfo.virtualheight-this._gettableheight();!isNaN(i)&&i>0&&(e!="hidden"?this.vScrollBar.jqxScrollBar("max",i+this.scrollbarsize+4):this.vScrollBar.jqxScrollBar("max",i))}}else this._updatevscrollbarmax();else t=-2;this.hScrollBar.jqxScrollBar("max",t+this.table.width()-this.host.width())}else e!="hidden"&&(this.hScrollBar.css("visibility","hidden"),this._arrange());this._renderhorizontalscroll()},_prerenderrows:function(t){var n=this.that;if(this.prerenderrequired==1){this.prerenderrequired=!1,this.editable&&this._destroyeditors&&this._destroyeditors();if(this.gridcontent==undefined)return;this.gridcontent.find("#contenttable"+this.element.id).remove(),this.table!=null&&(this.table.remove(),this.table=null),this.table=e('<div id="contenttable'+this.element.id+'" style="overflow: hidden; position: relative;" height="100%"></div>'),this.gridcontent.addClass(this.toTP("jqx-grid-content")),this.gridcontent.addClass(this.toTP("jqx-widget-content")),this.gridcontent.append(this.table);var r=this.groupable&&this.groups.length>0,i=0;this.table[0].rows=new Array;var s=this.toTP("jqx-grid-cell");r&&(s=" "+this.toTP("jqx-grid-group-cell"));var o=t.visiblerecords;this.pageable&&(this.autoheight||this.autorowheight)&&(o=this.dataview.pagesize,this.groupable&&(this.dataview.updateview(),o=this.dataview.rows.length,o<this.dataview.pagesize&&(o=this.dataview.pagesize))),!this.pageable&&(this.autoheight||this.autorowheight)&&(o=this.dataview.totalrecords),this.groupable&&(this.autoheight||this.autorowheight)&&!this.pageable&&(o=this.dataview.rows.length),this.rowdetails&&(this.autoheight||this.autorowheight?o+=this.dataview.pagesize:o+=o);if(!this.columns.records)return;var u=this.columns.records.length;e.jqx.browser.msie&&e.jqx.browser.version>8&&this.table.css("opacity","0.99"),e.jqx.browser.mozilla&&this.table.css("opacity","0.99"),navigator.userAgent.indexOf("Safari")!=-1&&this.table.css("opacity","0.99");var a=e.jqx.browser.msie&&e.jqx.browser.version<8;a&&this.host.attr("hideFocus","true");var f=this.tableZIndex;o*u>f&&(f=o*u);var l=this.dataview.records.length==0,c=this.isTouchDevice(),h="";this._hiddencolumns=!1;for(var p=0;p<o;p++){var d='<div role="row" style="position: relative; height='+this.rowsheight+'px;" id="row'+p+this.element.id+'">';if(a){var d='<div role="row" style="position: relative; z-index: '+f+"; height:"+this.rowsheight+'px;" id="row'+p+this.element.id+'">';f--}var v=0;for(var m=0;m<u;m++){var g=this.columns.records[m],y=g.width;y<g.minwidth&&(y=g.minwidth),y>g.maxwidth&&(y=g.maxwidth);if(this.rtl){var b=f-u+2*m,w='<div role="gridcell" style="left: '+v+"px; z-index: "+b+"; width:"+y+"px;";f--}else var w='<div role="gridcell" style="left: '+v+"px; z-index: "+f-- +"; width:"+y+"px;";!g.hidden||!g.hideable?v+=y:(w+="display: none;",this._hiddencolumns=!0,f++),w+='" class="'+s+'"></div>',d+=w}i==0&&(this.table.width(parseInt(v)+2),i=v),d+="</div>",h+=d}n.WinJS?MSApp.execUnsafeLocalFunction(function(){n.table.html(h)}):n.table[0].innerHTML=h,this.table[0].rows=new Array;var E=this.table.children();for(var p=0;p<o;p++){var S=E[p];this.table[0].rows.push(S),S.cells=new Array;var x=e(S).children();for(var m=0;m<u;m++)S.cells.push(x[m])}if(o==0){var v=0;if(this.showemptyrow){var d=e('<div style="position: relative;" id="row0'+this.element.id+'"></div>');this.table.append(d),d.height(this.rowsheight),this.table[0].rows[0]=d[0],this.table[0].rows[0].cells=new Array}for(var m=0;m<u;m++){var g=this.columns.records[m],y=g.width;if(this.showemptyrow){var w=e('<div style="position: absolute; height: 100%; left: '+v+"px; z-index: "+f-- +"; width:"+y+'px;" class="'+s+'"></div>');w.height(this.rowsheight),d.append(w),this.table[0].rows[0].cells[m]=w[0]}y<g.minwidth&&(y=g.minwidth),y>g.maxwidth&&(y=g.maxwidth);if(!g.hidden||!g.hideable)v+=y}this.table.width(parseInt(v)+2),i=v}this._updatescrollbarsafterrowsprerender(),this.rendered&&this.rendered("rows"),this._addoverlayelement()}},_groupsheader:function(){return this.groupable&&this.showgroupsheader},_arrange:function(){var e=null,t=null;this.tableheight=null;var n=this.that,r=!1,i=!1;this.width!=null&&this.width.toString().indexOf("px")!=-1?e=this.width:this.width!=undefined&&!isNaN(this.width)&&(e=this.width),this.width!=null&&this.width.toString().indexOf("%")!=-1&&(e=this.width,r=!0);if(this.autowidth){var s=0;for(var o=0;o<this.columns.records.length;o++){var u=this.columns.records[o].width;u=="auto"?(u=this._measureElementWidth(this.columns.records[o].text),s+=u):s+=u}this.vScrollBar.css("visibility")!="hidden"&&(s+=this.scrollbarsize+4),e=s,this.width=e}this.height!=null&&this.height.toString().indexOf("px")!=-1?t=this.height:this.height!=undefined&&!isNaN(this.height)&&(t=this.height),this.height!=null&&this.height.toString().indexOf("%")!=-1&&(t=this.height,i=!0);var a=function(){var e=0,t=n.showheader?n.columnsheader!=null?n.columnsheader.height()+2:0:0;return e+=t,n.pageable&&(e+=n.pagerheight),n._groupsheader()&&(e+=n.groupsheaderheight),n.showtoolbar&&(e+=n.toolbarheight),n.showstatusbar&&(e+=n.statusbarheight),n.hScrollBar[0].style.visibility=="visible"&&(e+=20),e};if(this.autoheight&&this.virtualsizeinfo)if(this.pageable&&this.gotopage){var f=0;t=f+(this._pageviews[0]?this._pageviews[0].height:0),t+=a(),this.showemptyrow&&this.dataview.totalrecords==0&&(t+=this.rowsheight)}else{var f=this.host.height()-this._gettableheight();this._pageviews.length>0?(t=f+this._pageviews[this._pageviews.length-1].height+this._pageviews[this._pageviews.length-1].top,this.vScrollBar[0].style.visibility="hidden"):(t=a(),this.showemptyrow&&(t+=this.rowsheight))}else this.autoheight&&(t=this.dataview.totalrecords*this.rowsheight,this._loading&&(t=250,this.dataloadelement.height(t)),t+=a(),t>1e4&&(t=1e4));e!=null?(e=parseInt(e),r?this.element.style.width=this.width:this.element.style.width!=parseInt(this.width)+"px"&&(this.element.style.width=parseInt(this.width)+"px"),r&&(e=this.host.width(),e<=2&&(e=600,this.host.width(e)),this._oldWidth||(this._oldWidth=e))):this.host.width(250),t!=null?(i||(t=parseInt(t)),i?this.element.style.height=this.height:this.element.style.height!=parseInt(t)+"px"&&(this.element.style.height=parseInt(t)+"px"),i&&!this.autoheight&&(t=this.host.height(),t==0&&(t=400,this.host.height(t)),this._oldHeight||(this._oldHeight=t))):this.host.height(250),this.autoheight&&(this.tableheight=null,this._gettableheight());var l=0;this.showtoolbar?(this.toolbar.width(e),this.toolbar.height(this.toolbarheight-1),this.toolbar.css("top",0),l+=this.toolbarheight,t-=parseInt(this.toolbarheight)):this.toolbar[0].style.height="0px",this.showstatusbar?(this.showaggregates?this.statusbar.width(this.table?Math.max(e,this.table.width()):e):this.statusbar.width(e),this.statusbar.height(this.statusbarheight)):this.statusbar[0].style.height="0px";if(this._groupsheader()){this.groupsheader.width(e),this.groupsheader.height(this.groupsheaderheight),this.groupsheader.css("top",l);var c=this.groupsheader.height()+1;l+=c,t>c&&(t-=parseInt(c))}else{this.groupsheader[0].style.width!=e+"px"&&(this.groupsheader[0].style.width=parseInt(e)+"px"),this.groupsheader[0].style.height!=this.groupsheaderheight+"px"&&(this.groupsheader[0].style.height=parseInt(this.groupsheaderheight)+"px"),this.groupsheader[0].style.top!=l+"px"&&this.groupsheader.css("top",l);var c=this.showgroupsheader&&this.groupable?this.groupsheaderheight:0,h=l+c+"px";this.content[0].style.top!=h&&this.content.css("top",l+this.groupsheaderheight)}var p=this.scrollbarsize;isNaN(p)&&(p=parseInt(p),isNaN(p)?p="17px":p+="px"),p=parseInt(p);var d=4,v=2,m=0;this.vScrollBar[0].style.visibility=="visible"&&(m=p+d),this.hScrollBar[0].style.visibility=="visible"&&(v=p+d+2);var g=0;this.pageable&&(g=this.pagerheight,v+=this.pagerheight),this.showstatusbar&&(v+=this.statusbarheight,g+=this.statusbarheight),this.hScrollBar[0].style.height!=p+"px"&&(this.hScrollBar[0].style.height=parseInt(p)+"px"),(this.hScrollBar[0].style.top!=l+t-d-p-g+"px"||this.hScrollBar[0].style.left!="0px")&&this.hScrollBar.css({top:l+t-d-p-g+"px",left:"0px"});var y=this.hScrollBar[0].style.width,b=!1,w=!1;m==0?y!=e-2+"px"&&(this.hScrollBar.width(e-2),b=!0):y!=e-p-d+"px"&&(this.hScrollBar.width(e-p-d+"px"),b=!0),this.autoheight||(this.vScrollBar[0].style.width!=p+"px"&&(this.vScrollBar.width(p),w=!0),this.vScrollBar[0].style.height!=parseInt(t)-v+"px"&&(this.vScrollBar.height(parseInt(t)-v+"px"),w=!0),(this.vScrollBar[0].style.left!=parseInt(e)-parseInt(p)-d+"px"||this.vScrollBar[0].style.top!=l+"px")&&this.vScrollBar.css({left:parseInt(e)-parseInt(p)-d+"px",top:l})),this.rtl&&(this.vScrollBar.css({left:"0px",top:l}),this.vScrollBar.css("visibility")!="hidden"&&this.hScrollBar.css({left:p+2}));var E=this.vScrollInstance;E.disabled=this.disabled,this.autoheight||w&&E.refresh();var S=this.hScrollInstance;S.disabled=this.disabled,b&&S.refresh(),this.autowidth&&(this.hScrollBar[0].style.visibility="hidden"),this.statusbarheight=parseInt(this.statusbarheight),this.toolbarheight=parseInt(this.toolbarheight);var x=function(e){e.vScrollBar[0].style.visibility=="visible"&&e.hScrollBar[0].style.visibility=="visible"?(e.bottomRight[0].style.visibility="visible",e.bottomRight.css({left:1+parseInt(e.vScrollBar.css("left")),top:parseInt(e.hScrollBar.css("top"))}),e.rtl&&e.bottomRight.css("left","0px"),e.bottomRight.width(parseInt(p)+3),e.bottomRight.height(parseInt(p)+4),e.showaggregates&&(e.bottomRight.css("z-index",99),e.bottomRight.height(parseInt(p)+4+e.statusbarheight),e.bottomRight.css({top:parseInt(e.hScrollBar.css("top"))-e.statusbarheight}))):e.bottomRight[0].style.visibility="hidden"};x(this),this.content[0].style.width!=e-m+"px"&&this.content.width(e-m),this.content[0].style.height!=t-v+3+"px"&&this.content.height(t-v+3),this.content[0].style.top!=l+"px"&&this.content.css("top",l);if(this.rtl){this.content.css("left",m);if(this.table){var T=this.table.width();T<e-m&&this.content.css("left",e-T)}}this.showstatusbar&&(this.statusbar.css("top",l+t-this.statusbarheight-(this.pageable?this.pagerheight:0)),this.showaggregates&&(this.hScrollBar.css("visibility")=="visible"&&(this.hScrollBar.css({top:l+t-d-p-g+this.statusbarheight+"px"}),this.statusbar.css("top",1+l+t-p-5-this.statusbarheight-(this.pageable?this.pagerheight:0))),x(this)),this.rtl&&(this.hScrollBar.css("visibility")!="visible"?this.statusbar.css("left",this.content.css("left")):this.statusbar.css("left","0px"))),this.pageable?(this.pager.width(e),this.pager.height(this.pagerheight),this.pager.css("top",l+t-this.pagerheight-1)):this.pager[0].style.height="0px";if(this.table!=null){var N=-2;this.vScrollBar[0].style.visibility=="visible"&&(N=this.scrollbarsize+3);if(this.hScrollBar[0].style.visibility=="visible"){var C=N+this.table.width()-this.host.width();C>=0&&this.hScrollBar.jqxScrollBar("max",C),this.hScrollBar[0].style.visibility=="visible"&&C==0&&(this.hScrollBar[0].style.visibility="hidden",this._arrange())}}e!=parseInt(this.dataloadelement[0].style.width)&&(this.dataloadelement[0].style.width=this.element.style.width),t!=parseInt(this.dataloadelement[0].style.height)&&(this.dataloadelement[0].style.height=this.element.style.height),this._hostwidth=e},destroy:function(){delete e.jqx.dataFormat.datescache,delete this.gridlocalization,e.jqx.utilities.resize(this.host,null,!0);if(this.table&&this.table[0]){var t=this.table[0].rows.length;for(var n=0;n<t;n++){var r=this.table[0].rows[n],i=r.cells,s=i.length;for(var o=0;o<s;o++)e(r.cells[o]).remove(),r.cells[o]=null,delete r.cells[o];r.cells=null,r.cells&&delete r.cells,e(this.table[0].rows[n]).remove(),this.table[0].rows[n]=null}try{delete this.table[0].rows}catch(u){}this.table.remove(),delete this.table}if(this.columns&&this.columns.records){for(var n=0;n<this.columns.records.length;n++){var a=this.columns.records[n];this._removecolumnhandlers(this.columns.records[n]),a.element&&(e(a.element).remove(),e(a.sortasc).remove(),e(a.sortdesc).remove(),e(a.filtericon).remove(),e(a.menu).remove(),a.element=null,a.uielement=null,a.sortasc=null,a.sortdesc=null,a.filtericon=null,a.menu=null,delete a.element,delete a.uielement,delete a.sortasc,delete a.sortdesc,delete a.filtericon,delete a.menu,delete this.columnsrow[0].cells[n])}try{delete this.columnsrow[0].cells}catch(u){}delete this.columnsrow}jQuery.removeData(document.body,"contextmenu"+this.element.id),this.host.jqxDropDownList&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.editable&&this._destroyeditors&&this._destroyeditors(),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.host.jqxMenu&&this.gridmenu&&(this.removeHandler(e(document),"click.menu"+this.element.id),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu=null),this.pagershowrowscombo&&(this.pagershowrowscombo.jqxDropDownList("destroy"),this.pagershowrowscombo=null),this.pagerrightbutton&&(this.removeHandler(this.pagerrightbutton,"mousedown"),this.removeHandler(this.pagerrightbutton,"mouseup"),this.removeHandler(this.pagerrightbutton,"click"),this.pagerrightbutton.jqxButton("destroy"),this.pagerrightbutton=null),this.pagerleftbutton&&(this.removeHandler(this.pagerleftbutton,"mousedown"),this.removeHandler(this.pagerleftbutton,"mouseup"),this.removeHandler(this.pagerleftbutton,"click"),this.pagerleftbutton.jqxButton("destroy"),this.removeHandler(e(document),"mouseup.pagerbuttons"+this.element.id),this.pagerleftbutton=null),this.removeHandler(e(document),"selectstart."+this.element.id),this.removeHandler(e(document),"mousedown.resize"+this.element.id),this.removeHandler(e(document),"mouseup.resize"+this.element.id),this.removeHandler(e(document),"mousemove.resize"+this.element.id);if(this.isTouchDevice()){var f=e.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,l=e.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,c=e.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id;this.removeHandler(e(document),f),this.removeHandler(e(document),l),this.removeHandler(e(document),c)}this.removeHandler(e(document),"mousedown.reorder"+this.element.id),this.removeHandler(e(document),"mouseup.reorder"+this.element.id),this.removeHandler(e(document),"mousemove.reorder"+this.element.id);if(this.isTouchDevice()){var f=e.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,l=e.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,c=e.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id;this.removeHandler(e(document),f),this.removeHandler(e(document),l),this.removeHandler(e(document),c)}this.removeHandler(e(window),"resize."+this.element.id);if(this.groupable){var f="mousemove.grouping"+this.element.id,l="mousedown.grouping"+this.element.id,c="mouseup.grouping"+this.element.id;this.removeHandler(e(document),f),this.removeHandler(e(document),l),this.removeHandler(e(document),c)}if(this.columnsreorder){var f="mousemove.reorder"+this.element.id,l="mousedown.reorder"+this.element.id,c="mouseup.reorder"+this.element.id;this.removeHandler(e(document),f),this.removeHandler(e(document),l),this.removeHandler(e(document),c),delete this.columnsbounds}this.content&&(this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"scroll")),this._removeHandlers(),this.hScrollInstance.destroy(),this.vScrollInstance.destroy(),this.hScrollBar.remove(),this.vScrollBar.remove(),this._clearcaches(),delete this.hScrollInstance,delete this.vScrollInstance,delete this.visiblerows,delete this.hittestinfo,delete this.rows,delete this.columns,delete this.columnsbydatafield,delete this.pagescache,delete this.pageviews,delete this.cellscache,delete this.heights,delete this.hiddens,delete this.hiddenboundrows,delete this.heightboundrows,delete this.detailboundrows,delete this.details,delete this.expandedgroups,delete this._rowdetailscache,delete this._rowdetailselementscache,delete this.columnsmenu,this.columnsheader.remove(),delete this.columnsheader,this.selectionarea.remove(),delete this.selectionarea;if(this.menuitemsarray&&this.menuitemsarray.length){var h=this.menuitemsarray.length;for(var n=0;n<h;n++)e(this.menuitemsarray[n]).remove()}delete this.menuitemsarray,this.dataview._clearcaches(),this.content.removeClass(),this.content.remove(),this.content=null,delete this.content,this.vScrollBar=null,this.hScrollBar=null,delete this.hScrollBar,delete this.hScrollBar,this.gridcontent.remove(),delete this.gridcontent,this.gridmenu&&(this.gridmenu=null,delete this.gridmenu),delete this._mousemovefunc,delete this._mousewheelfunc,this.dataview.destroy(),delete this.dataview,this.bottomRight.remove(),delete this.bottomRight,this.wrapper.remove(),delete this.wrapper,this.pagerdiv&&(this.pagerdiv.remove(),delete this.pagerdiv),this.pagerpageinput&&(this.pagerpageinput.remove(),delete this.pagerpageinput),this.pagergoto&&(this.pagergoto.remove(),delete this.pagergoto),this.pagershowrows&&(this.pagershowrows.remove(),delete this.pagershowrows),this.pagerfirstbutton&&(this.pagerfirstbutton.remove(),delete this.pagerfirstbutton),this.pagerlastbutton&&(this.pagerlastbutton.remove(),delete this.pagerlastbutton),this.pagerbuttons&&(this.pagerbuttons.remove(),delete this.pagerbuttons),this.pagerdetails&&(this.pagerdetails.remove(),delete this.pagerdetails),this.pagergotoinput&&(this.pagergotoinput.remove(),delete this.pagergotoinput),this.pager.remove(),delete this.pager,this.groupsheader.remove(),delete this.groupsheader,this.dataloadelement.remove(),delete this.dataloadelement,this.toolbar.remove(),delete this.toolbar,this.statusbar.remove(),delete this.statusbar,this.host.removeData(),this.host.removeClass(),this.host.remove(),this.host=null,delete this.host,delete this.element,delete this.set,delete this.get,delete this.that,delete this.call},_initializeColumns:function(){var n=this.source?this.source.datafields:null;n==null&&this.source&&this.source._source&&(n=this.source._source.datafields);var r=n?n.length>0:!1;if(this.autogeneratecolumns){var i=new Array;if(n)e.each(n,function(){var e={datafield:this.name,text:this.text||this.name,cellsformat:this.format||""};i.push(e)});else if(this.source.records.length>0){var s=this.source.records[0];for(obj in s)if(obj!="uid"){var o={width:100,datafield:obj,text:obj};i.push(o)}}this.columns=i}if(this.columns&&this.columns.records)for(var u=0;u<this.columns.records.length;u++)this._removecolumnhandlers(this.columns.records[u]);var a=this.that,f=new e.jqx.collection(this.element),l=0;this._haspinned=!1,this._columns?this.columns=this._columns:this._columns=this.columns,this.groupable&&e.each(this.groups,function(e){var n=new t(a,this);n.visibleindex=l++,n.width=a.groupindentwidth,f.add(n),n.grouped=!0,n.filterable=!1,n.sortable=!1,n.editable=!1,n.resizable=!1,n.draggable=!1});if(this.rowdetails&&this.showrowdetailscolumn){var o=new t(a,this);o.visibleindex=l++,o.width=a.groupindentwidth,o.pinned=!0,o.editable=!1,o.filterable=!1,o.draggable=!1,o.groupable=!1,o.resizable=!1,f.add(o),a._haspinned=!0}if(this.selectionmode=="checkbox"){var o=new t(a,null);o.visibleindex=l++,o.width=a.groupindentwidth,o.checkboxcolumn=!0,o.editable=!1,o.columntype="checkbox",o.groupable=!1,o.draggable=!1,o.filterable=!1,o.resizable=!1,o.datafield="_checkboxcolumn",f.add(o)}var c=new Array;e.each(this.columns,function(e){if(a.columns[e]!=undefined){var n=new t(a,this);n.visibleindex=l++,this.dataField!=undefined&&(this.datafield=this.dataField),this.pinned&&(a._haspinned=!0);if(this.datafield==null)a.source&&a.source._source&&a.source._source.datatype=="array"&&(r||(a.source._source.datafields?a.source._source.datafields.push({name:e.toString()}):(a.source._source.datafields=new Array,a.source._source.datafields.push({name:e.toString()}))),this.datafield=e.toString(),this.displayfield=e.toString(),n.datafield=this.datafield,n.displayfield=this.displayfield);else{if(c[this.datafield])throw new Error("jqxGrid: Invalid column 'datafield' setting. jqxGrid's columns should be initialized with unique data fields.");c[this.datafield]=!0}f.add(n)}}),this.rtl&&f.records.reverse(),this.columns=f},_initializeRows:function(){var t=new e.jqx.collection(this.element);this.rows&&this.rows.clear(),this.rows=t},_raiseEvent:function(e,t){t==undefined&&(t={owner:null});if(this._trigger===!1)return;var n=this.events[e];this._camelCase||(n=n.toLowerCase()),args=t,args.owner=this;var r=new jQuery.Event(n);r.owner=this,r.args=args;var i=this.host.trigger(r);return t=r.args,i},wheel:function(e,t){if(t.autoheight&&t.hScrollBar.css("visibility")!="visible")return e.returnValue=!0,!0;var n=0;e||(e=window.event),e.originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?n=e.wheelDelta/120:e.detail&&(n=-e.detail/3);if(n){var r=t._handleDelta(n);return r&&(e.preventDefault&&e.preventDefault(),e.originalEvent!=null&&(e.originalEvent.mouseHandled=!0),e.stopPropagation!=undefined&&e.stopPropagation()),r?(r=!1,e.returnValue=r,r):!1}e.preventDefault&&e.preventDefault(),e.returnValue=!1},_handleDelta:function(e){if(this.vScrollBar.css("visibility")!="hidden"){var t=this.vScrollInstance.value;e<0?this.scrollDown():this.scrollUp();var n=this.vScrollInstance.value;if(t!=n)return!0}else if(this.hScrollBar.css("visibility")!="hidden"){var t=this.hScrollInstance.value;e>0?this.hScrollInstance.value>2*this.horizontalscrollbarstep?this.hScrollInstance.setPosition(this.hScrollInstance.value-2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(0):this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.setPosition(this.hScrollInstance.value+2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(this.hScrollInstance.max);var n=this.hScrollInstance.value;if(t!=n)return!0}return!1},scrollDown:function(){if(this.vScrollBar.css("visibility")=="hidden")return;var e=this.vScrollInstance;e.value+this.rowsheight<=e.max?e.setPosition(parseInt(e.value)+this.rowsheight):e.setPosition(e.max)},scrollUp:function(){if(this.vScrollBar.css("visibility")=="hidden")return;var e=this.vScrollInstance;e.value-this.rowsheight>=e.min?e.setPosition(parseInt(e.value)-this.rowsheight):e.setPosition(e.min)},_removeHandlers:function(){var t=this.that;this.removeHandler(this.vScrollBar,"valuechanged"),this.removeHandler(this.hScrollBar,"valuechanged"),this.vScrollInstance.valuechanged=null,this.hScrollInstance.valuechanged=null;var n="mousedown.jqxgrid";this.isTouchDevice()&&(n=e.jqx.mobile.getTouchEventName("touchend")),this.removeHandler(this.host,"dblclick.jqxgrid"),this.removeHandler(this.host,n),this.removeHandler(this.content,"mousemove",this._mousemovefunc),this.removeHandler(this.host,"mouseleave.jqxgrid"),this.removeHandler(this.content,"mouseenter"),this.removeHandler(this.content,"mouseleave"),this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"scroll"),this.removeHandler(this.content,"selectstart."+this.element.id),this.removeHandler(this.host,"dragstart."+this.element.id),this.removeHandler(this.host,"keydown.edit"+this.element.id),this.removeHandler(e(document),"keydown.edit"+this.element.id),this.removeHandler(e(document),"keyup.edit"+this.element.id),this._mousemovedocumentfunc&&this.removeHandler(e(document),"mousemove.selection"+this.element.id,this._mousemovedocumentfunc),this.removeHandler(e(document),"mouseup.selection"+this.element.id),this._mousewheelfunc&&this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this.editable&&this.removeHandler(e(document),"mousedown.gridedit"+this.element.id),this.host.off&&(this.content.off("mousemove"),this.host.off("mousewheel"))},_addHandlers:function(){var t=this.that,n=t.isTouchDevice();n||this.addHandler(this.host,"dragstart."+this.element.id,function(e){return!1}),this.editable&&this.addHandler(e(document),"mousedown.gridedit"+this.element.id,function(e){if(t.editable&&t.begincelledit&&t.editcell&&!t.vScrollInstance.isScrolling()&&!t.vScrollInstance.isScrolling()){var n=t.host.coord(),r=t.host.width(),i=t.host.height(),s=!1,o=!1,u=!1;if(e.pageY<n.top||e.pageY>n.top+i)s=!0,o=!0;if(e.pageX<n.left||e.pageX>n.left+r)s=!0,u=!0;if(s){var a=!1;if(t.editcell&&t.editcell.editor)switch(t.editcell.columntype){case"datetimeinput":if(t.editcell.editor.jqxDateTimeInput&&t.editcell.editor.jqxDateTimeInput("container")[0].style.display=="block"){var f=t.editcell.editor.jqxDateTimeInput("container").coord().top,l=t.editcell.editor.jqxDateTimeInput("container").coord().top+t.editcell.editor.jqxDateTimeInput("container").height();if(!o||!(e.pageY<f||e.pageY>l))return;s=!0,t.editcell.editor.jqxDateTimeInput("close")}break;case"combobox":if(t.editcell.editor.jqxComboBox&&t.editcell.editor.jqxComboBox("container")[0].style.display=="block"){var f=t.editcell.editor.jqxComboBox("container").coord().top,l=t.editcell.editor.jqxComboBox("container").coord().top+t.editcell.editor.jqxComboBox("container").height();if(!o||!(e.pageY<f||e.pageY>l))return;s=!0,t.editcell.editor.jqxComboBox("close")}break;case"dropdownlist":if(t.editcell.editor.jqxDropDownList&&t.editcell.editor.jqxDropDownList("container")[0].style.display=="block"){var f=t.editcell.editor.jqxDropDownList("container").coord().top,l=t.editcell.editor.jqxDropDownList("container").coord().top+t.editcell.editor.jqxDropDownList("container").height();if(!o||!(e.pageY<f||e.pageY>l))return;s=!0,t.editcell.editor.jqxDropDownList("close")}break;case"template":case"custom":var c=["jqxDropDownList","jqxComboBox","jqxDropDownButton","jqxDateTimeInput"],h=function(n){var r=t.editcell.editor.data();if(r[n]&&r[n].instance.container&&r[n].instance.container[0].style.display=="block"){var i=r[n].instance,u=i.container.coord().top,a=i.container.coord().top+i.container.height();return o&&(e.pageY<u||e.pageY>a)?(s=!0,i.close(),!0):!1}};for(var p=0;p<c.length;p++){var d=h(c[p]);if(d==0)return}}t.endcelledit(t.editcell.row,t.editcell.column,!1,!0)}}}),this.vScrollInstance.valuechanged=function(e){t.virtualsizeinfo&&(t._closemenu(),t.scrollmode!="physical"?(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=e.currentValue):t.currentScrollValue!=undefined&&Math.abs(t.currentScrollValue-e.currentValue)>=5?(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=e.currentValue):(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=e.currentValue),!t.pageable&&!t.groupable&&t.dataview.virtualmode&&(t.loadondemandupdate&&clearTimeout(t.loadondemandupdate),t.loadondemandupdate=setTimeout(function(){t.loadondemand=!0,t._renderrows(t.virtualsizeinfo)},100)),n&&(t._lastScroll=new Date))},this.hScrollInstance.valuechanged=function(r){if(t.virtualsizeinfo){t._closemenu();var i=function(){t._renderhorizontalscroll(),t._renderrows(t.virtualsizeinfo),t.editcell&&!t.editrow&&t._showcelleditor&&t.editcell.editing&&(t.hScrollInstance.isScrolling()||t._showcelleditor(t.editcell.row,t.getcolumn(t.editcell.column),t.editcell.element,t.editcell.init))},s=t._browser==undefined?t._isIE10():t._browser;navigator&&navigator.userAgent.indexOf("Safari")!=-1?(t._hScrollTimer&&clearTimeout(t._hScrollTimer),t._hScrollTimer=setTimeout(function(){i()},1)):e.jqx.browser.mozilla||e.jqx.browser.msie?(t._hScrollTimer&&clearTimeout(t._hScrollTimer),t._hScrollTimer=setTimeout(function(){i()},.01)):i(),n&&(t._lastScroll=new Date)}},this._mousewheelfunc=this._mousewheelfunc||function(e){if(!t.editcell&&t.enablemousewheel)return t.wheel(e,t),!1},this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"mousewheel",this._mousewheelfunc);var r="mousedown.jqxgrid";n&&(r=e.jqx.mobile.getTouchEventName("touchend")),this.addHandler(this.host,r,function(n){if(t.isTouchDevice()){t._newScroll=new Date;if(t._newScroll-t._lastScroll<500)return!1;if(e(n.target).ischildof(t.vScrollBar))return!1;if(e(n.target).ischildof(t.hScrollBar))return!1}t._mousedown=new Date;var r=t._handlemousedown(n,t);return t.isNestedGrid&&!t.resizablecolumn&&!t.columnsreorder&&n.stopPropagation(),t._lastmousedown=new Date,r}),n||(this.addHandler(this.host,"dblclick.jqxgrid",function(n){if(t.editable&&t.begincelledit&&t.editmode=="dblclick")t._handledblclick(n,t);else if(e.jqx.browser.msie&&e.jqx.browser.version<9)var r=t._handlemousedown(n,t);return t.mousecaptured=!1,t._lastmousedown=new Date,!0}),this._mousemovefunc=function(e){if(t._handlemousemove)return t._handlemousemove(e,t)},this.addHandler(this.content,"mousemove",this._mousemovefunc),t._handlemousemoveselection&&(this._mousemovedocumentfunc=function(e){if(t._handlemousemoveselection)return t._handlemousemoveselection(e,t)},this.addHandler(e(document),"mousemove.selection"+this.element.id,this._mousemovedocumentfunc)),this.addHandler(e(document),"mouseup.selection"+this.element.id,function(e){t._handlemouseupselection&&t._handlemouseupselection(e,t)}));try{if(document.referrer!=""||window.frameElement)if(window.top!=null&&window.top!=window.self){var i=null;window.parent&&document.referrer&&(i=document.referrer);if(i&&i.indexOf(document.location.host)!=-1){var s=function(e){t._handlemouseupselection&&t._handlemouseupselection(e,t)};window.top.document.addEventListener?window.top.document.addEventListener("mouseup",s,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",s)}}}catch(o){}this.focused=!1,n||(this.addHandler(this.content,"mouseenter",function(e){t.focused=!0,t.wrapper&&(t.wrapper.attr("tabindex",1),t.content.attr("tabindex",2)),t._overlayElement&&(t.vScrollInstance.isScrolling()||t.hScrollInstance.isScrolling()?t._overlayElement[0].style.visibility="visible":t._overlayElement[0].style.visibility="hidden")}),this.addHandler(this.content,"mouseleave",function(e){t._handlemousemove&&t.enablehover&&t._clearhoverstyle(),t._overlayElement&&(t._overlayElement[0].style.visibility="hidden"),t.focused=!1}),(this.groupable||this.columnsreorder)&&this.addHandler(e(document),"selectstart."+this.element.id,function(e){if(t.__drag===!0)return!1}),this.addHandler(this.content,"selectstart."+this.element.id,function(n){if(t.enablebrowserselection)return!0;if(t.showfilterrow&&e(n.target).ischildof(t.filterrow))return!0;if(!t.editcell)return!1}),this.addHandler(e(document),"keyup.edit"+this.element.id,function(e){t._keydown=!1}),this.addHandler(e(document),"keydown.edit"+this.element.id,function(n){t._keydown=!t.editcell;var r=n.charCode?n.charCode:n.keyCode?n.keyCode:0;if(t.handlekeyboardnavigation){var i=t.handlekeyboardnavigation(n);if(i==1)return!1}t.editable&&t.editcell&&(r==13||r==27)&&t._handleeditkeydown&&(s=t._handleeditkeydown(n,t)),r==27&&(t.mousecaptured=!1,t.selectionarea.css("visibility")=="visible"&&t.selectionarea.css("visibility","hidden"));if(e.jqx.browser.msie&&e.jqx.browser.version<8&&t.focused&&!t.isNestedGrid){if(r==13&&s==0)return s;var s=!0,r=n.charCode?n.charCode:n.keyCode?n.keyCode:0;!t.editcell&&t.editable&&t.editmode!="programmatic"&&t._handleeditkeydown&&(s=t._handleeditkeydown(n,t));if(s&&t.keyboardnavigation&&t._handlekeydown)return s=t._handlekeydown(n,t),s||(n.preventDefault&&n.preventDefault(),n.stopPropagation!=undefined&&n.stopPropagation()),s}return!0}),this.addHandler(this.host,"keydown.edit"+this.element.id,function(n){var r=!0;if(t.handlekeyboardnavigation){var i=t.handlekeyboardnavigation(n);if(i==1)return!1}return t.editable&&t.editmode!="programmatic"&&t._handleeditkeydown&&(r=t._handleeditkeydown(n,t)),e.jqx.browser.msie&&e.jqx.browser.version<8?t.isNestedGrid&&r&&t.keyboardnavigation&&t._handlekeydown&&(r=t._handlekeydown(n,t),n.stopPropagation()):r&&t.keyboardnavigation&&t._handlekeydown&&(r=t._handlekeydown(n,t),t.isNestedGrid&&n.stopPropagation()),r||(n.preventDefault&&n.preventDefault(),n.stopPropagation!=undefined&&n.stopPropagation()),r}))},_hittestrow:function(t,n){if(this.vScrollInstance==null||this.hScrollInstance==null)return;t==undefined&&(t=0),n==undefined&&n==0;var r=this.vScrollInstance,i=this.hScrollInstance,s=r.value;this.vScrollBar.css("visibility")!="visible"&&(s=0);var o=i.value;this.hScrollBar.css("visibility")!="visible"&&(o=0),this.scrollmode=="deferred"&&this._newmax!=null&&s>this._newmax&&(s=this._newmax);var u=parseInt(s)+n,a=parseInt(o)+t;if(this.visiblerows==null)return;if(this.visiblerows.length==0)return;var f=!1,l=this._findvisiblerow(u,this.visiblerows);if(l>=0){var c=this.visiblerows[l],h=this.rowdetails&&c.rowdetails,p=!c.rowdetailshidden;if(h){var d=this.visiblerows[l-1];d==c&&(c=d,l--);if(p){var v=e(this.hittestinfo[l].visualrow).position().top+parseInt(this.table.css("top")),m=e(this.hittestinfo[l].visualrow).height();n>=v&&n<=v+m||(l++,c=this.visiblerows[l],f=!0)}}}return{index:l,row:c,details:f}},getcellatposition:function(t,n){var r=this.that,i=this.showheader?this.columnsheader.height()+2:0,s=this._groupsheader()?this.groupsheader.height():0,o=this.showtoolbar?this.toolbarheight:0;s+=o;var u=this.host.coord();this.hasTransform&&(u=e.jqx.utilities.getOffset(this.host));var a=t-u.left,f=n-i-u.top-s,l=this._hittestrow(a,f),c=l.row,h=l.index,p=this.table[0].rows[h];if(this.dataview&&this.dataview.records.length==0){var d=this.table[0].rows,v=0;for(var m=0;m<d.length;m++){if(f>=v&&f<v+this.rowsheight){p=d[m];break}v+=this.rowsheight}c={boundindex:m}}if(p==null)return!0;var g=this.hScrollInstance,y=g.value,b=0,w=this.groupable?this.groups.length:0;for(var m=0;m<p.cells.length;m++){var E=parseInt(e(this.columnsrow[0].cells[m]).css("left")),t=E-y;r.columns.records[m].pinned&&(t=E);var S=t+e(this.columnsrow[0].cells[m]).width();if(S>=a&&a>=t){b=m;break}}if(c!=null){var x=this._getcolumnat(b);return{row:this.getboundindex(c),column:x.datafield,value:this.getcellvalue(this.getboundindex(c),x.datafield)}}return null},_handlemousedown:function(t,n){if(t.target==null)return!0;if(n.disabled)return!0;if(e(t.target).ischildof(this.columnsheader))return!0;var r;t.which?r=t.which==3:t.button&&(r=t.button==2);var i;t.which?i=t.which==2:t.button&&(i=t.button==1);if(i)return!0;if(this.showstatusbar){if(e(t.target).ischildof(this.statusbar))return!0;if(t.target==this.statusbar[0])return!0}if(this.showtoolbar){if(e(t.target).ischildof(this.toolbar))return!0;if(t.target==this.toolbar[0])return!0}if(this.pageable){if(e(t.target).ischildof(this.pager))return!0;if(t.target==this.pager[0])return!0}if(!this.columnsheader)return!0;if(!this.editcell&&this.pageable&&e(t.target).ischildof(this.pager))return!0;var s=this.showheader?this.columnsheader.height()+2:0,o=this._groupsheader()?this.groupsheader.height():0,u=this.showtoolbar?this.toolbarheight:0;o+=u;var a=this.host.coord();if(this.hasTransform){a=e.jqx.utilities.getOffset(this.host);var f=this._getBodyOffset();a.left-=f.left,a.top-=f.top}var l=parseInt(t.pageX),c=parseInt(t.pageY);if(this.isTouchDevice()){var h=n.getTouches(t),p=h[0];l=parseInt(p.pageX),c=parseInt(p.pageY),n.touchmode==1&&(l=parseInt(p._pageX),c=parseInt(p._pageY))}var d=l-a.left,v=c-s-a.top-o;if(this.pageable&&!this.autoheight&&this.gotopage){var m=this.pager.coord().top-a.top-o-s;if(v>m)return}var g=this._hittestrow(d,v);if(!g)return;if(g.details)return;var y=g.row,b=g.index,w=t.target.className,E=this.table[0].rows[b];if(E==null)return n.editable&&n.begincelledit&&n.editcell&&n.endcelledit(n.editcell.row,n.editcell.column,!1,!0),!0;n.mousecaptured=!0,n.mousecaptureposition={left:t.pageX,top:t.pageY-o,clickedrow:E};var S=this.hScrollInstance,x=S.value;this.rtl&&this.hScrollBar.css("visibility")!="hidden"&&(x=S.max-S.value);var T=-1,N=this.groupable?this.groups.length:0;this.rtl&&(this.vScrollBar[0].style.visibility!="hidden"&&(x-=this.scrollbarsize+4),this.hScrollBar[0].style.visibility=="hidden"&&(x=-parseInt(this.content.css("left"))));for(var C=0;C<E.cells.length;C++){var k=parseInt(e(this.columnsrow[0].cells[C]).css("left")),l=k-x;n.columns.records[C].pinned&&!n.rtl&&(l=k);var L=this._getcolumnat(C);if(L!=null&&L.hidden)continue;var A=l+e(this.columnsrow[0].cells[C]).width();if(A>=d&&d>=l){T=C,n.mousecaptureposition.clickedcell=C;break}}if(this.rtl&&this._haspinned)for(var C=E.cells.length-1;C>=0;C--){if(!n.columns.records[C].pinned)break;var k=e(this.columnsrow[0].cells[C]).coord().left-this.host.coord().left,l=k,L=this._getcolumnat(C);if(L!=null&&L.hidden)continue;var A=l+e(this.columnsrow[0].cells[C]).width();if(A>=d&&d>=l){T=C,n.mousecaptureposition.clickedcell=C;break}}if(y!=null&&T>=0){this._raiseEvent(1,{rowindex:this.getboundindex(y),visibleindex:y.visibleindex,group:y.group,rightclick:r,originalEvent:t});var L=this._getcolumnat(T),O=this.getcellvalue(this.getboundindex(y),L.datafield);this.editable&&this.editcell&&L.datafield==this.editcell.column&&this.getboundindex(y)==this.editcell.row&&(this.mousecaptured=!1),this._raiseEvent(8,{rowindex:this.getboundindex(y),column:L?L.getcolumnproperties():null,datafield:L?L.datafield:null,columnindex:T,value:O,rightclick:r,originalEvent:t});if(this.isTouchDevice())if(L.columntype=="checkbox"&&this.editable&&this._overlayElement){if(!this.editcell)return this._overlayElement.css("visibility","hidden"),this.editcell=this.getcell(b,L.datafield),!0}else if(L.columntype=="button"&&this._overlayElement)return L.buttonclick&&L.buttonclick(E.cells[T].buttonrow,t),!0;var M=!1;if(this._lastmousedown!=null&&this._mousedown-this._lastmousedown<300&&this._clickedrowindex==this.getboundindex(y)){this._raiseEvent(22,{rowindex:this.getboundindex(y),visibleindex:y.visibleindex,group:y.group,rightclick:r,originalEvent:t}),this._clickedcolumn==L.datafield&&this._raiseEvent(23,{rowindex:this.getboundindex(y),column:L?L.getcolumnproperties():null,datafield:L?L.datafield:null,columnindex:T,value:O,rightclick:r,originalEvent:t}),M=!0,this._clickedrowindex=-1,this._clickedcolumn=null;if(t.isPropagationStopped&&t.isPropagationStopped())return!1}if(r)return!0;M||(this._clickedrowindex=this.getboundindex(y),this._clickedcolumn=L.datafield);var _=e.jqx.utilities.getBrowser();_.browser=="msie"&&parseInt(_.version)<=7&&(T==0&&this.rowdetails&&(w="jqx-grid-group-collapse"),N>0&&T<=N&&(w="jqx-grid-group-collapse"));if(w.indexOf("jqx-grid-group-expand")!=-1||w.indexOf("jqx-grid-group-collapse")!=-1)this.rtl?N>0&&T>E.cells.length-N-1&&this._togglegroupstate?this._togglegroupstate(y.bounddata,!0):T==E.cells.length-1-N&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(y.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0):N>0&&T<N&&this._togglegroupstate?this._togglegroupstate(y.bounddata,!0):T==N&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(y.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0);else if(y.boundindex!=-1){var D=this.selectedrowindexes.slice(0),P=!1;if(n.selectionmode!="none"&&n.selectionmode!="checkbox"&&this._selectrowwithmouse){(n.selectionmode=="multiplecellsadvanced"||n.selectionmode=="multiplecellsextended"||n.selectionmode=="multiplerowsextended"||n.selectionmode=="multiplerowsadvanced")&&!t.ctrlKey&&!t.shiftKey&&(n.selectedrowindexes=new Array,n.selectedcells=new Array);var H=!1,B=this.getboundindex(y);if(n._oldselectedrow===B||n.selectionmode==="none")H=!0;if(n.selectionmode.indexOf("cell")==-1){if(n.selectionmode!="singlerow"||n.selectedrowindex!=B&&n.selectionmode=="singlerow")this._applyrowselection(B,!0,!1,null,L.datafield),this._selectrowwithmouse(n,g,D,L.datafield,t.ctrlKey,t.shiftKey)}else L.datafield!=null&&(this._selectrowwithmouse(n,g,D,L.datafield,t.ctrlKey,t.shiftKey),t.shiftKey||this._applycellselection(B,L.datafield,!0,!1));n._oldselectedcell&&n._oldselectedcell.datafield==n.selectedcell.datafield&&n._oldselectedcell.rowindex==n.selectedcell.rowindex&&(P=!0),n._oldselectedcell=n.selectedcell,n._oldselectedrow=B}n.autosavestate&&n.savestate&&n.savestate();if(n.editable&&n.begincelledit){if(t.isPropagationStopped&&t.isPropagationStopped())return!1;if(n.editmode=="selectedrow"){if(H&&!n.editcell){if(L.columntype!=="checkbox")var j=n.beginrowedit(this.getboundindex(y))}else if(n.editcell&&!H&&n.selectionmode!="none")var j=n.endrowedit(n.editcell.row)}else{var F=n.editmode=="click"||P&&n.editmode=="selectedcell";n.selectionmode.indexOf("cell")==-1&&n.editmode!="dblclick"&&(F=!0);if(F&&y.boundindex!=undefined&&L.editable){var j=n.begincelledit(this.getboundindex(y),L.datafield,L.defaulteditorvalue);n.selectionmode.indexOf("cell")!=-1&&n._applycellselection(B,L.datafield,!1,!1)}n.selectionmode.indexOf("cell")!=-1&&n.editmode=="selectedcell"&&!P&&n.editcell&&n.endcelledit(n.editcell.row,n.editcell.column,!1,!0)}return!0}}}return!0},_columnPropertyChanged:function(e,t,n,r){},_rowPropertyChanged:function(e,t,n,r){},_serializeObject:function(t){if(t==null)return"";var n="";return e.each(t,function(e){var t=this;e>0&&(n+=", "),n+="[";var r=0;for(obj in t)r>0&&(n+=", "),n+="{"+obj+":"+t[obj]+"}",r++;n+="]"}),n},propertyChangedHandler:function(t,n,r,i){if(this.isInitialized==undefined||this.isInitialized==0)return;n=n.toLowerCase();switch(n){case"enablebrowserselection":t.showfilterrow||(!t.showstatusbar&&!t.showtoolbar&&t.host.addClass("jqx-disableselect"),t.content.addClass("jqx-disableselect")),t.enablebrowserselection&&(t.content.removeClass("jqx-disableselect"),t.host.removeClass("jqx-disableselect"));break;case"columnsheight":(t.columnsheight!=25||t.columngroups)&&t._measureElement("column"),t._render(!0,!0,!0,!1,!1);break;case"rowsheight":i!=r&&(t.rowsheight!=25&&t._measureElement("cell"),t.virtualsizeinfo=null,t.rendergridcontent(!0,!1),t.refresh());break;case"scrollMode":t.vScrollInstance.thumbStep=t.rowsheight;break;case"showdefaultloadelement":t._builddataloadelement();break;case"showfiltermenuitems":case"showsortmenuitems":case"showgroupmenuitems":case"filtermode":t._initmenu();break;case"touchmode":r!=i&&(t._removeHandlers(),t.touchDevice=null,t.vScrollBar.jqxScrollBar({touchMode:i}),t.hScrollBar.jqxScrollBar({touchMode:i}),t._updateTouchScrolling(),t._arrange(),t._updatecolumnwidths(),t._updatecellwidths(),t._addHandlers());break;case"autoshowcolumnsmenubutton":r!=i&&t._rendercolumnheaders();break;case"rendergridrows":r!=i&&t.updatebounddata();break;case"editmode":r!=i&&(t._removeHandlers(),t._addHandlers());break;case"source":t.updatebounddata(),t.virtualmode&&!t._loading&&(t.loadondemand=!0,t._renderrows(t.virtualsizeinfo));break;case"horizontalscrollbarstep":case"verticalscrollbarstep":case"horizontalscrollbarlargestep":case"verticalscrollbarlargestep":this.vScrollBar.jqxScrollBar({step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep}),this.hScrollBar.jqxScrollBar({step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep});break;case"closeablegroups":t._initgroupsheader&&t._initgroupsheader();break;case"showgroupsheader":r!=i&&(t._arrange(),t._initgroupsheader&&t._initgroupsheader(),t._renderrows(t.virtualsizeinfo));break;case"theme":i!=r&&(t.pager&&(t.pager.removeClass(),t.pager.addClass(t.toTP("jqx-grid-pager")),t.pager.addClass(t.toTP("jqx-widget-header")),t.pageable&&t._updatepagertheme&&t._updatepagertheme()),t.groupsheader&&(t.groupsheader.removeClass(),t.groupsheader.addClass(t.toTP("jqx-grid-groups-header")),t.groupsheader.addClass(t.toTP("jqx-widget-header"))),t.toolbar.removeClass(),t.toolbar.addClass(t.toTP("jqx-grid-toolbar")),t.toolbar.addClass(t.toTP("jqx-widget-header")),t.statusbar.removeClass(),t.statusbar.addClass(t.toTP("jqx-grid-statusbar")),t.statusbar.addClass(t.toTP("jqx-widget-content")),t.vScrollBar.jqxScrollBar({theme:t.theme}),t.hScrollBar.jqxScrollBar({theme:t.theme}),t.host.removeClass(),t.host.addClass(t.toTP("jqx-grid")),t.host.addClass(t.toTP("jqx-reset")),t.host.addClass(t.toTP("jqx-rc-all")),t.host.addClass(t.toTP("jqx-widget")),t.host.addClass(t.toTP("jqx-widget-content")),t.bottomRight.removeClass(),t.bottomRight.addClass(t.toTP("jqx-grid-bottomright")),t.bottomRight.addClass(t.toTP("jqx-scrollbar-state-normal")),t.toolbar.addClass(t.toTP("jqx-grid-toolbar")),t.toolbar.addClass(t.toTP("jqx-widget-header")),t.statusbar.addClass(t.toTP("jqx-grid-statusbar")),t.statusbar.addClass(t.toTP("jqx-widget-header")),t.render());break;case"showtoolbar":case"toolbarheight":r!=i&&(t._arrange(),t.refresh());break;case"showstatusbar":r!=i&&(t.statusbar&&(i?t.statusbar.show():t.statusbar.hide()),t._arrange(),t.refresh());break;case"statusbarheight":r!=i&&(t._arrange(),t.refresh());break;case"filterable":case"showfilterrow":r!=i&&t.render();break;case"autoshowfiltericon":case"showfiltercolumnbackground":case"showpinnedcolumnbackground":case"showsortcolumnbackground":r!=i&&t.rendergridcontent();break;case"showrowdetailscolumn":r!=i&&t.render();break;case"scrollbarsize":r!=i&&t._arrange();break;case"width":case"height":r!=i&&(t._updatesize(!0,!0),t._resizeWindow(),t.virtualmode&&!t._loading&&t.vScrollInstance.setPosition(0));break;case"altrows":case"altstart":case"altstep":r!=i&&t._renderrows(t.virtualsizeinfo);break;case"groupsheaderheight":r!=i&&(t._arrange(),t._initgroupsheader&&t._initgroupsheader());break;case"pagerheight":r!=i&&t._initpager();break;case"selectedrowindex":t.selectrow(i);break;case"selectionmode":r!=i&&(i=="none"&&(t.selectedrowindexes=new Array,t.selectedcells=new Array,t.selectedrowindex=-1),t._renderrows(t.virtualsizeinfo));break;case"showheader":i?t.columnsheader.css("display","block"):t.columnsheader.css("display","none");break;case"virtualmode":r!=i&&(t.dataview.virtualmode=t.virtualmode,t.dataview.refresh(!1),t._render(!1,!1,!1));break;case"columnsmenu":r!=i&&t.render();break;case"columngroups":t._render(!0,!0,!0,!1,!1);break;case"columns":if(t._serializeObject(t._cachedcolumns)!==t._serializeObject(i)){var s=!1;t.filterable&&r&&r.records&&e.each(r.records,function(){this.filter&&(s=!0),t.dataview.removefilter(this.displayfield,this.filter)}),t._columns=null,t._filterrowcache=[],t.render(),s&&t.applyfilters(),t._cachedcolumns=t.columns,t.removesort&&t.removesort()}else t._initializeColumns();break;case"autoheight":r!=i&&t._render(!1,!1,!0);break;case"pagermode":case"pagerbuttonscount":r!=i&&t._initpager&&(t.pagershowrowscombo&&(t.pagershowrowscombo.jqxDropDownList("destroy"),t.pagershowrowscombo=null),t.pagerrightbutton&&(t.removeHandler(t.pagerrightbutton,"mousedown"),t.removeHandler(t.pagerrightbutton,"mouseup"),t.removeHandler(t.pagerrightbutton,"click"),t.pagerrightbutton.jqxButton("destroy"),t.pagerrightbutton=null),t.pagerleftbutton&&(t.removeHandler(t.pagerleftbutton,"mousedown"),t.removeHandler(t.pagerleftbutton,"mouseup"),t.removeHandler(t.pagerleftbutton,"click"),t.pagerleftbutton.jqxButton("destroy"),t.removeHandler(e(document),"mouseup.pagerbuttons"+t.element.id),t.pagerleftbutton=null),t.pagerdiv.remove(),t._initpager());break;case"pagesizeoptions":case"pageable":case"pagesize":if(r!=i){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);if(!t.host.jqxDropDownList||!t.host.jqxListBox){t._testmodules();return}if(t._initpager){if(n!="pageable"&&n!="pagermode"&&typeof i=="string"){var o="The expected value type is: Int.";if(n!="pagesize")var o="The expected value type is: Array of Int values.";throw new Error("Invalid Value for: "+n+". "+o)}t.dataview.pageable=t.pageable,t.dataview.pagenum=0,t.dataview.pagesize=t._getpagesize(),t.virtualmode&&t.updatebounddata(),t.dataview.refresh(!0),t._initpager(),n=="pagesizeoptions"&&i!=null&&i.length>0&&(t.pagesize=parseInt(i[0]),t.dataview.pagesize=parseInt(i[0]),t.prerenderrequired=!0,t._requiresupdate=!0,t.dataview.pagenum=-1,t.gotopage(0))}t._render(!1,!1,!1)}break;case"groups":t._serializeObject(r)!==t._serializeObject(i)&&(t.dataview.groups=i,t._refreshdataview(),t._render(!0,!0,!0,!1));break;case"groupable":r!=i&&(t.dataview.groupable=t.groupable,t.dataview.pagenum=0,t.dataview.refresh(!1),t._render(!1,!1,!0));break;case"renderstatusbar":i!=null&&t.renderstatusbar(t.statusbar);break;case"rendertoolbar":i!=null&&t.rendertoolbar(t.toolbar);break;case"disabled":i?t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")):t.host.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),e.jqx.aria(t,"aria-disabled",t.disabled),t.pageable&&t.pagerrightbutton&&(t.pagerrightbutton.jqxButton({disabled:i}),t.pagerleftbutton.jqxButton({disabled:i}),t.pagershowrowscombo.jqxDropDownList({disabled:i}),t.pagergotoinput.attr("disabled",i)),t.vScrollBar.jqxScrollBar({disabled:i}),t.hScrollBar.jqxScrollBar({disabled:i}),t.filterable&&t.showfilterrow&&t._updatefilterrowui(!0)}}}),e.jqx.collection=function(e){return this.records=new Array,this.owner=e,this.updating=!1,this.beginupdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this._raiseEvent=function(e){},this.clear=function(){this.records=new Array},this.replace=function(e,t){this.records[e]=t,this.updating||this._raiseEvent({type:"replace",element:t})},this.isempty=function(e){return this.records[e]==undefined?!0:!1},this.initialize=function(e){e<1&&(e=1),this.records[e-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(e){return this.records.indexOf(e)},this.add=function(e){return e==null?!1:(this.records[this.records.length]=e,this.updating||this._raiseEvent({type:"add",element:e}),!0)},this.insertAt=function(e,t){return e==null||e==undefined?!1:t==null?!1:e>=0?e<this.records.length?(this.records.splice(e,0,t),this.updating||this._raiseEvent({type:"insert",index:e,element:t}),!0):this.add(t):!1},this.remove=function(e){if(e==null||e==undefined)return!1;var t=this.records.indexOf(e);return t!=-1?(this.records.splice(t,1),this.updating||this._raiseEvent({type:"remove",element:e}),!0):!1},this.removeAt=function(e){if(e==null||e==undefined)return!1;if(e<0)return!1;if(e<this.records.length){var t=this.records[e];return this.records.splice(e,1),this.updating||this._raiseEvent({type:"removeAt",index:e,element:t}),!0}return!1},this},e.jqx.dataview=function(){return this.self=this,this.grid=null,this.uniqueId="id",this.records=[],this.rows=[],this.columns=[],this.groups=[],this.filters=new Array,this.updated=null,this.update=null,this.suspend=!1,this.pagesize=0,this.pagenum=0,this.totalrows=0,this.totalrecords=0,this.groupable=!0,this.loadedrecords=[],this.loadedrootgroups=[],this.loadedgroups=[],this.loadedgroupsByKey=[],this.virtualmode=!0,this._cachegrouppages=new Array,this.source=null,this.changedrecords=new Array,this.rowschangecallback=null,this.that=this,this.destroy=function(){delete this.self,delete this.grid,delete this.uniqueId,delete this.records,delete this.rows,delete this.columns,delete this.groups,delete this.filters,delete this.updated,delete this.update,delete this.suspend,delete this.pagesize,delete this.pagenum,delete this.totalrows,delete this.totalrecords,delete this.groupable,delete this.loadedrecords,delete this.loadedrootgroups,delete this.loadedgroups,delete this.loadedgroupsByKey,delete this.virtualmode,delete this._cachegrouppages,delete this.source,delete this.changedrecords,delete this.rowschangecallback,delete this.that},this.suspendupdate=function(){this.suspend=!0},this.isupdating=function(){return this.suspend},this.resumeupdate=function(e){this.suspend=!1,e==undefined&&(e=!0),this.refresh(e)},this.getrecords=function(){return this.records},this.clearrecords=function(){this.recordids=new Array},this.databind=function(t,n){var r=t._source?!0:!1,i=null;r?(i=t,t=t._source):i=new e.jqx.dataAdapter(t,{autoBind:!1});var s=function(e){i.recordids=[],i.records=new Array,i.cachedrecords=new Array,i.originaldata=new Array,i._options.virtualmode=e.virtualmode,i._options.totalrecords=e.totalrecords,i._options.originaldata=e.originaldata,i._options.recordids=e.recordids,i._options.cachedrecords=new Array,i._options.pagenum=e.pagenum,i._options.pageable=e.pageable,t.type!=undefined&&(i._options.type=t.type),t.formatdata!=undefined&&(i._options.formatData=t.formatdata),t.contenttype!=undefined&&(i._options.contentType=t.contenttype),t.async!=undefined&&(i._options.async=t.async),t.updaterow!=undefined&&(i._options.updaterow=t.updaterow),t.addrow!=undefined&&(i._options.addrow=t.addrow),t.deleterow!=undefined&&(i._options.deleterow=t.deleterow),e.pagesize==0&&(e.pagesize=10),i._options.pagesize=e.pagesize},o=function(n){n.totalrecords=i.totalrecords;if(!n.virtualmode)n.originaldata=i.originaldata,n.records=i.records,n.recordids=i.recordids,n.cachedrecords=i.cachedrecords;else{var r={startindex:n.pagenum*n.pagesize,endindex:n.pagenum*n.pagesize+n.pagesize};t.recordstartindex!=undefined&&(r.startindex=parseInt(t.recordstartindex)),t.recordendindex!=undefined?r.endindex=parseInt(t.recordendindex):n.grid.pageable||(r.endindex=r.startindex+100,n.grid.autoheight&&(r.endindex=r.startindex+n.totalrecords)),t.recordendindex||(n.grid.pageable?r={startindex:n.pagenum*n.pagesize,endindex:n.pagenum*n.pagesize+n.pagesize}:(r.endindex=r.startindex+100,n.grid.autoheight&&(r.endindex=r.startindex+n.totalrecords))),r.data=i.records;if(n.grid.rendergridrows&&n.totalrecords>0){var s=0;t.records=n.grid.rendergridrows(r),t.records.length&&(s=t.records.length);if(t.records&&!t.records[r.startindex]){var o=new Array,u=r.startindex;e.each(t.records,function(){o[u]=this,u++,s++}),t.records=o}s==0&&t.records&&e.each(t.records,function(){s++});if(s>0&&s<r.endindex-r.startindex&&!n.grid.groupable){var a=t.records[0];for(var f=0;f<r.endindex-r.startindex-s;f++){var l={};for(obj in a)l[obj]="";t.records.push&&t.records.push(l)}}}if(!t.records||n.totalrecords==0)t.records=new Array;n.originaldata=t.records,n.records=t.records,n.cachedrecords=t.records}};s(this),this.source=t,n!==undefined&&(uniqueId=n);var u=this.that;switch(t.datatype){case"local":case"array":default:t.localdata==null&&(t.localdata=[]);if(t.localdata!=null){i.unbindBindingUpdate(u.grid.element.id),i.dataBind();var a=function(n){if(n!=undefined&&n!=""){var r=i._changedrecords[0];if(r){var s=new Array;e.each(i._changedrecords,function(e){var t=this.index,r=this.record;u.grid._updateFromAdapter=!0;switch(n){case"update":var o=u.grid.getrowid(t);e==i._changedrecords.length-1?u.grid.updaterow(o,r):u.grid.updaterow(o,r,!1),u.grid._updateFromAdapter=!1;return;case"add":u.grid.addrow(null,r),u.grid._updateFromAdapter=!1;return;case"remove":var o=u.grid.getrowid(t);s.push(o);return}}),s.length>0&&(u.grid.deleterow(s,!1),u.grid._updateFromAdapter=!1)}if(n=="update")return}var a=u.totalrecords;o(u,n),n=="updateData"?(u.refresh(),u.grid._updateGridData()):(t.recordstartindex&&this.virtualmode?u.updateview(t.recordstartindex,t.recordstartindex+u.pagesize):u.refresh(),u.update(a!=u.totalrecords))};a(),i.bindBindingUpdate(u.grid.element.id,a)}break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(t.localdata!=null){i.unbindBindingUpdate(u.grid.element.id),i.dataBind();var a=function(e){var n=u.totalrecords;o(u),e=="updateData"?(u.refresh(),u.grid._updateGridData()):(t.recordstartindex?u.updateview(t.recordstartindex,t.recordstartindex+u.pagesize):u.refresh(),u.update(n!=u.totalrecords))};a(),i.bindBindingUpdate(u.grid.element.id,a);return}var f={},l=0,c={};for(var h=0;h<this.filters.length;h++){var p=this.filters[h].datafield,d=this.filters[h].filter,v=d.getfilters();c[p+"operator"]=d.operator;for(var m=0;m<v.length;m++){v[m].datafield=p;var g=v[m].value;if(v[m].type=="datefilter")if(v[m].value&&v[m].value.toLocaleString){var y=this.grid.getcolumn(v[m].datafield);if(y.cellsformat){var b=this.grid.source.formatDate(v[m].value,y.cellsformat,this.grid.gridlocalization);b?c["filtervalue"+l]=b:c["filtervalue"+l]=v[m].value.toLocaleString()}else c["filtervalue"+l]=g.toString()}else c["filtervalue"+l]=g.toString();else c["filtervalue"+l]=g.toString();c["filtercondition"+l]=v[m].condition,c["filteroperator"+l]=v[m].operator,c["filterdatafield"+l]=p,l++}}c.filterscount=l,c.groupscount=u.groups.length;for(var h=0;h<u.groups.length;h++)c["group"+h]=u.groups[h];t.recordstartindex==undefined&&(t.recordstartindex=0);if(t.recordendindex==undefined||t.recordendindex==0)u.grid.height&&u.grid.height.toString().indexOf("%")==-1?(t.recordendindex=parseInt(u.grid.height)/u.grid.rowsheight,t.recordendindex+=2):t.recordendindex=e(window).height()/u.grid.rowsheight,this.pageable&&(t.recordendindex=this.pagesize);e.extend(c,{sortdatafield:u.sortfield,sortorder:u.sortfielddirection,pagenum:u.pagenum,pagesize:u.grid.pagesize,recordstartindex:t.recordstartindex,recordendindex:t.recordendindex});var w=i._options.data;i._options.data?e.extend(i._options.data,c):(t.data&&e.extend(c,t.data),i._options.data=c);var a=function(){var n=e.jqx.browser.msie&&e.jqx.browser.version<9,r=function(){var e=u.totalrecords;o(u),t.recordstartindex?u.updateview(t.recordstartindex,t.recordstartindex+u.pagesize):u.refresh(),u.update(e!=u.totalrecords)};if(n)try{r()}catch(i){}else r()};i.unbindDownloadComplete(u.grid.element.id),i.bindDownloadComplete(u.grid.element.id,a),i.dataBind(),i._options.data=w}},this.getid=function(t,n,r){if(e(t,n).length>0)return e(t,n).text();if(t&&t.toString().length>0){var i=e(n).attr(t);if(i!=null&&i.toString().length>0)return i}return r},this.getvaluebytype=function(t,n){var r=t;if(n.type=="date"){var i=new Date(t);i.toString()=="NaN"||i.toString()=="Invalid Date"?e.jqx.dataFormat?t=e.jqx.dataFormat.tryparsedate(t):t=i:t=i,t==null&&(t=r)}else if(n.type=="float"){var t=parseFloat(t);isNaN(t)&&(t=r)}else if(n.type=="int"){var t=parseInt(t);isNaN(t)&&(t=r)}else n.type=="bool"&&(t!=null&&(t.toLowerCase()=="false"?t=!1:t.toLowerCase()=="true"&&(t=!0)),t==1?t=!0:t==0?t=!1:t="");return t},this.setpaging=function(e){e.pageSize!=undefined&&(this.pagesize=e.pageSize),e.pageNum!=undefined&&(this.pagenum=Math.min(e.pageNum,Math.ceil(this.totalrows/this.pagesize))),this.refresh()},this.getpagingdetails=function(){return{pageSize:this.pagesize,pageNum:this.pagenum,totalrows:this.totalrows}},this._clearcaches=function(){this.sortcache={},this.sortdata=null,this.changedrecords=new Array,this.records=new Array,this.rows=new Array,this.cacheddata=new Array,this.originaldata=new Array,this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this._cachegrouppages=new Array,this.recordsbyid=new Array,this.cachedrecords=new Array,this.recordids=new Array},this.addfilter=function(e,t){var n=-1;for(var r=0;r<this.filters.length;r++)if(this.filters[r].datafield==e){n=r;break}n==-1?this.filters[this.filters.length]={filter:t,datafield:e}:this.filters[n]={filter:t,datafield:e}},this.removefilter=function(e){for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==e){this.filters.splice(t,1);break}},this.getItemFromIndex=function(e){return this.records[e]},this.updaterow=function(e,t,n){var r=this.filters&&this.filters.length>0&&!this.virtualmode;if(!r&&t!=undefined&&e!=undefined){t.uid=e,t[this.source.id]||(t[this.source.id]=t.uid);var i=this.recordsbyid["id"+e],s=this.records.indexOf(i);return s==-1?!1:(this.records[s]=t,this.cachedrecords&&(this.cachedrecords[s]=t),(n==1||n==undefined)&&this.refresh(),this.changedrecords[t.uid]={Type:"Update",OldData:i,Data:t},!0)}if(this.filters&&this.filters.length>0){var o=this.cachedrecords,i=null,s=-1;for(var u=0;u<o.length;u++)if(o[u].uid==e){i=o[u],s=u;break}if(i){var a=this.that;for(var f in t)a.cachedrecords[s][f]=t[f];return(n==1||n==undefined)&&this.refresh(),!0}}return!1},this.addrow=function(e,t,n,r){if(t!=undefined){if(!e){t.uid=this.getid(this.source.id,t,this.totalrecords);var i=this.recordsbyid["id"+t.uid];while(i!=null){var s=Math.floor(Math.random()*1e4).toString();t.uid=s,i=this.recordsbyid["id"+s]}}else t.uid=e;return t[this.source.id]||this.source.id!=undefined&&(t[this.source.id]=t.uid),n=="last"?this.records.push(t):typeof n=="number"&&isFinite(n)?this.records.splice(n,0,t):this.records.splice(0,0,t),this.filters&&this.filters.length>0&&(n=="last"?this.cachedrecords.push(t):typeof n=="number"&&isFinite(n)?this.cachedrecords.splice(n,0,t):this.cachedrecords.splice(0,0,t)),this.totalrecords++,this.virtualmode&&(this.source.totalrecords=this.totalrecords),(r==1||r==undefined)&&this.refresh(),this.changedrecords[t.uid]={Type:"New",Data:t},!0}return!1},this.deleterow=function(e,t){if(e!=undefined){var n=this.filters&&this.filters.length>0;if(this.recordsbyid["id"+e]&&!n){var r=this.recordsbyid["id"+e],i=this.records.indexOf(r);return this.changedrecords[e]={Type:"Delete",Data:this.records[i]},this.records.splice(i,1),this.totalrecords--,this.virtualmode&&(this.source.totalrecords=this.totalrecords),(t==1||t==undefined)&&this.refresh(),!0}if(this.filters&&this.filters.length>0){var s=this.cachedrecords,r=null,i=-1;for(var o=0;o<s.length;o++)if(s[o].uid==e){r=s[o],i=o;break}if(r){this.cachedrecords.splice(i,1);if(t==1||t==undefined)this.totalrecords=0,this.records=this.cachedrecords,this.refresh();return!0}}return!1}return!1},this.reload=function(t,n,r,i,s,o,u){var a=this.that,f=new Array,l=t,c=n,h=r,p=i,d=c.length,v=0,m=0,g,y;this.columns=[],this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this._cachegrouppages=new Array,this.recordsbyid={};if(this.totalrecords==0){Object.size=function(e){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t};var b=Object.size(l);this.totalrecords=b,e.each(this.records,function(t){var n=this,r=0;return e.each(n,function(e,t){a.columns[r++]=e}),!1})}if(this.virtualmode){if(this.pageable){this.updateview();return}var o=0;if(!this.groupable){this.updateview();return}var u=this.totalrecords}else var o=0,u=this.totalrecords;if(this.groupable&&this.groups.length>0&&this.loadgrouprecords){var w=o;w=this.loadgrouprecords(0,o,u,h,m,p,c,d,f)}else v=this.loadflatrecords(o,u,h,m,p,c,d,f);return d>m&&c.splice(m,d-m),this.groups.length>0&&this.groupable?this.totalrows=w:this.totalrows=v,f},this.loadflatrecords=function(t,n,r,i,s,o,u,a){var f=this.that,l=t,c=t;n=Math.min(n,this.totalrecords);var h=this.sortdata!=null,p=this.source.id&&(this.source.datatype=="local"||this.source.datatype=="array"||this.source.datatype==""),d=h?this.sortdata:this.records;for(var v=t;v<n;v++){var m={};h?(m=e.extend({},d[v].value),id=m[f.uniqueId],m.boundindex=d[v].index,m.uid==undefined&&(m.uid=f.getid(f.source.id,m,m.boundindex)),f.recordsbyid["id"+m.uid]=d[v].value,f.loadedrecords[l]=m,m.uniqueid=f.generatekey(),f.bounditems[m.boundindex]=m):(m=e.extend({},d[v]),id=m[f.uniqueId],m.boundindex=l,f.loadedrecords[l]=m,m.uid==undefined&&(m.uid=f.getid(f.source.id,m,l)),f.recordsbyid["id"+m.uid]=d[v],m.uniqueid=f.generatekey(),f.bounditems[this.bounditems.length]=m);if(i>=u||id!=o[i][f.uniqueId]||s&&s[id])a[a.length]=i;o[i]=m,i++,m.visibleindex=c,c++,l++}if(f.grid.summaryrows){var g=l;e.each(f.grid.summaryrows,function(){var t=e.extend({},this);t.boundindex=n++,f.loadedrecords[g]=t,t.uniqueid=f.generatekey(),f.bounditems[f.bounditems.length]=t,o[i]=t,i++,t.visibleindex=c,c++,g++})}return c},this.updateview=function(e,t){var n=this.that,r=this.pagesize*this.pagenum,i=0,s=new Array,o=this.filters,u=this.updated,a=s.length;if(this.pageable){if(this.virtualmode)if(!this.groupable||this.groups.length==0)this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),o,i,u,s,a,[]),this.totalrows=s.length;else if(this.groupable&&this.groups.length>0&&this.loadgrouprecords){if(this._cachegrouppages[this.pagenum+"_"+this.pagesize]!=undefined){this.rows=this._cachegrouppages[this.pagenum+"_"+this.pagesize],this.totalrows=this.rows.length;return}var f=this.pagesize*(1+this.pagenum);f>this.totalrecords&&(f=this.totalrecords),this.loadgrouprecords(0,this.pagesize*this.pagenum,f,o,i,u,s,a,[]),this._cachegrouppages[this.pagenum+"_"+this.pagesize]=this.rows,this.totalrows=this.rows.length;return}}else if(this.virtualmode&&(!this.groupable||this.groups.length==0)){var l=this.pagesize;l==0&&(l=Math.min(100,this.totalrecords));var c=l*this.pagenum;this.loadedrecords.length==0&&(c=0),e!=null&&t!=null?this.loadflatrecords(e,t,o,i,u,s,a,[]):this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),o,i,u,s,a,[]),this.totalrows=this.loadedrecords.length,this.rows=s;if(s.length>=l)return}if(this.groupable&&this.pageable&&this.groups.length>0&&this._updategroupsinpage)s=this._updategroupsinpage(n,o,r,i,a,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum));else for(var h=this.pagesize*this.pagenum;h<this.pagesize*(1+this.pagenum);h++){var p=h<this.loadedrecords.length?this.loadedrecords[h]:null;if(p==null)continue;if(!this.pagesize||r>=this.pagesize*this.pagenum&&r<=this.pagesize*(this.pagenum+1))s[i]=p,i++;r++}if((s.length==0||s.length<this.pagesize)&&!this.pageable&&this.virtualmode){i=s.length;var d=s.length;for(var h=this.pagesize*this.pagenum;h<this.pagesize*(1+this.pagenum)-d;h++){var p={};p.boundindex=h+d,p.visibleindex=h+d,p.uniqueid=n.generatekey(),p.empty=!0,n.bounditems[h+d]=p,s[i]=p,i++}}this.rows=s},this.generatekey=function(){var e=function(){return(1+Math.random())*16|0};return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},this.reloaddata=function(){this.reload(this.records,this.rows,this.filter,this.updated,!0)},this.refresh=function(t){if(this.suspend)return;t==undefined&&(t=!0);var n=this.rows.length,r=this.totalrows;if(this.filters.length>0&&!this.virtualmode){var i="",s=this.cachedrecords.length,o=new Array;this.totalrecords=0;var u=this.cachedrecords;this._dataIndexToBoundIndex=new Array;var a=this.filters.length;if(this.source!=null&&this.source.filter!=undefined&&this.source.localdata!=undefined)o=this.source.filter(this.filters,u,s),o==undefined&&(o=new Array),this.records=o;else if(this.source.filter==null||this.source.filter==undefined){for(var f=0;f<s;f++){var l=u[f],c=undefined;for(var h=0;h<a;h++){var i=this.filters[h].filter,p=l[this.filters[h].datafield],d=i.evaluate(p);c==undefined?c=d:i.operator=="or"?c=c||d:c=c&&d}c?(o[o.length]=e.extend({dataindex:f},l),this._dataIndexToBoundIndex[f]={boundindex:o.length-1}):this._dataIndexToBoundIndex[f]=null}this.records=o}if(this.sortdata){var v=this.sortfield;if(this.sortcache[v]){this.sortdata=null;var m=this.sortcache[v].direction;this.sortcache[v]=null,this.sortby(this.sortfield,m);return}}}else if(this.filters.length==0&&!this.virtualmode&&this.cachedrecords){this.totalrecords=0;var u=this.cachedrecords;this.records=u;if(this.sortdata){var v=this.sortfield;if(this.sortcache[v]){this.sortdata=null;var m=this.sortcache[v].direction;this.sortcache[v]=null,this.sortby(this.sortfield,m);return}}}var g=this.reload(this.records,this.rows,this.filter,this.updated,t);this.updated=null,this.rowschangecallback!=null&&(r!=totalrows&&this.rowschangecallback({type:"PagingChanged",data:getpagingdetails()}),n!=rows.length&&this.rowschangecallback({type:"RowsCountChanged",data:{previous:n,current:rows.length}}),(g.length>0||n!=rows.length)&&this.rowschangecallback({type:"RowsChanged",data:{previous:n,current:rows.length,diff:g}}))},this}}(jQuery),function(e){e.extend(e.jqx._jqxGrid.prototype,{selectallrows:function(){this._trigger=!1;var e=this.virtualmode?this.dataview.totalrecords:this.getboundrows().length;this.selectedrowindexes=new Array;for(var t=0;t<e;t++)this.selectedrowindexes[t]=t;this.selectionmode=="checkbox"&&!this._checkboxcolumnupdating&&this._checkboxcolumn&&this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!0}),this._renderrows(this.virtualsizeinfo),this._trigger=!0,this.selectionmode=="checkbox"&&this._raiseEvent(2,{rowindex:this.selectedrowindexes})},selectrow:function(e,t){this._applyrowselection(e,!0,t),t!==!1&&this._updatecheckboxselection()},_updatecheckboxselection:function(){if(this.selectionmode=="checkbox"){var e=this.getrows();if(e&&this._checkboxcolumn){if(e.length===0){this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1});return}var t=e.length;this.virtualmode&&(t=this.source._source.totalrecords);var n=this.selectedrowindexes.length;n===t?this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!0}):n===0?this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1}):this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:null})}}},unselectrow:function(e,t){this._applyrowselection(e,!1,t),t!==!1&&this._updatecheckboxselection()},selectcell:function(e,t){this._applycellselection(e,t,!0)},unselectcell:function(e,t){this._applycellselection(e,t,!1)},clearselection:function(e,t){this._trigger=!1,this.selectedrowindex=-1;if(t!==!1)for(var n=0;n<this.selectedrowindexes.length;n++)this._raiseEvent(3,{rowindex:this.selectedrowindexes[n]});this.selectedrowindexes=new Array,this.selectedcells=new Array,this.selectionmode=="checkbox"&&!this._checkboxcolumnupdating&&this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1});if(!1===e){this._trigger=!0;return}this._renderrows(this.virtualsizeinfo),this._trigger=!0,this.selectionmode=="checkbox"&&this._raiseEvent(3,{rowindex:this.selectedrowindexes})},getselectedrowindex:function(){if(this.selectedrowindex==-1)for(var e=0;e<this.selectedrowindexes.length;e++)return this.selectedrowindexes[e];return this.selectedrowindex},getselectedrowindexes:function(){return this.selectedrowindexes},getselectedcell:function(){if(!this.selectedcell)return null;var e=this.selectedcell;return e.row=this.selectedcell.rowindex,e.column=this.selectedcell.datafield,e.value=this.getcellvalue(e.row,e.column),e},getselectedcells:function(){var e=new Array;for(obj in this.selectedcells)e[e.length]=this.selectedcells[obj];return e},_getcellsforcopypaste:function(){var e=new Array;if(this.selectionmode.indexOf("cell")==-1){var t=this.selectedrowindexes;for(var n=0;n<t.length;n++){var r=t[n];for(var i=0;i<this.columns.records.length;i++){var s=r+"_"+this.columns.records[i].datafield,o={rowindex:r,datafield:this.columns.records[i].datafield};e.push(o)}}}return e},deleteselection:function(){var e=this,t=e.getselectedcells();this.selectionmode.indexOf("cell")==-1&&(t=this._getcellsforcopypaste());if(t!=null&&t.length>0){for(var n=0;n<t.length;n++){var r=t[n],i=e.getcolumn(r.datafield),s=e.getcellvalue(r.rowindex,r.datafield);if(!i)continue;if(s!==""){var o=null;i.columntype=="checkbox"&&(i.threestatecheckbox||(o=!1)),e._raiseEvent(17,{rowindex:r.rowindex,datafield:r.datafield,value:s}),n==t.length-1?(e.setcellvalue(r.rowindex,r.datafield,o,!0),i.displayfield!=i.datafield&&e.setcellvalue(r.rowindex,i.displayfield,o,!0)):(e.setcellvalue(r.rowindex,r.datafield,o,!1),i.displayfield!=i.datafield&&e.setcellvalue(r.rowindex,i.displayfield,o,!0)),e._raiseEvent(18,{rowindex:r.rowindex,datafield:r.datafield,oldvalue:s,value:o})}}this.dataview.updateview(),this._renderrows(this.virtualsizeinfo)}},copyselection:function(){var t="",n=this;this.clipboardselection={},this._clipboardselection=[];var r=n.getselectedcells();this.selectionmode.indexOf("cell")==-1&&(r=this._getcellsforcopypaste());if(r!=null&&r.length>0){var i=999999999999999,s=-1;for(var o=0;o<r.length;o++){var u=r[o],a=n.getcolumn(u.datafield);if(a!=null){var f=n.getcelltext(u.rowindex,u.datafield);this.clipboardselection[u.rowindex]||(this.clipboardselection[u.rowindex]={}),this.clipboardselection[u.rowindex][u.datafield]=f,i=Math.min(i,u.rowindex),s=Math.max(s,u.rowindex)}}for(var l=i;l<=s;l++){var c=0;this._clipboardselection[this._clipboardselection.length]=new Array,this.clipboardselection[l]!=undefined&&e.each(this.clipboardselection[l],function(e,r){c>0&&(t+="	");var i=r;r==null&&(i=""),n._clipboardselection[n._clipboardselection.length-1][c]=i,c++,t+=i}),l<s&&(t+="\n")}}return this.clipboardselectedtext=t,t},pasteselection:function(){var e=this.getselectedcells();this.selectionmode.indexOf("cell")==-1&&(e=this._getcellsforcopypaste());if(e!=null&&e.length>0){var t=e[0].rowindex,n=e[0].datafield,r=this._getcolumnindex(n),i=0;this.selectedrowindexes=new Array,this.selectedcells=new Array;if(!this._clipboardselection)return;for(var s=0;s<this._clipboardselection.length;s++)for(var o=0;o<this._clipboardselection[s].length;o++){var u=this.getcolumnat(r+o);if(!u)continue;var a=this.getcell(t+s,u.datafield),f=null;f=this._clipboardselection[s][o];if(f!=null){if(u.cellsformat)if(u.cellsformat.indexOf("p")!=-1||u.cellsformat.indexOf("c")!=-1||u.cellsformat.indexOf("n")!=-1||u.cellsformat.indexOf("f")!=-1){f.indexOf(this.gridlocalization.currencysymbol)>-1&&(f=f.replace(this.gridlocalization.currencysymbol,""));var l=function(e,t,n){var r=e;if(t==n)return e;var i=r.indexOf(t);while(i!=-1)r=r.replace(t,n),i=r.indexOf(t);return r};f=l(f,this.gridlocalization.thousandsseparator,""),f=f.replace(this.gridlocalization.decimalseparator,"."),f.indexOf(this.gridlocalization.percentsymbol)>-1&&(f=f.replace(this.gridlocalization.percentsymbol,""));var c="";for(var h=0;h<f.length;h++){var p=f.substring(h,h+1);p==="-"&&(c+="-"),p==="."&&(c+="."),p.match(/^[0-9]+$/)!=null&&(c+=p)}f=c,f=f.replace(/ /g,""),f=new Number(f),isNaN(f)&&(f="")}this._raiseEvent(17,{rowindex:t+s,datafield:a.datafield,value:f}),this.setcellvalue(a.row,a.column,f,!1),this._raiseEvent(18,{rowindex:t+s,datafield:a.datafield,oldvalue:this.getcellvalue(a.rowindex,a.datafield),value:f}),this._applycellselection(t+s,a.datafield,!0,!1)}}this.dataview.updateview(),this._renderrows(this.virtualsizeinfo)}},_applyrowselection:function(e,t,n,r,i){if(e==null)return!1;var s=this.selectedrowindex;this.selectionmode=="singlerow"&&(t?this._raiseEvent(2,{rowindex:e,row:this.getrowdata(e)}):this._raiseEvent(3,{rowindex:e,row:this.getrowdata(e)}),this._raiseEvent(3,{rowindex:s}),this.selectedrowindexes=new Array,this.selectedcells=new Array),r==1&&(this.selectedrowindexes=new Array);if(this.dataview.filters.length>0){var o=this.getrowdata(e);o&&o.dataindex!==undefined?e=o.dataindex:o&&o.dataindex===undefined&&o.uid&&(e=this.getrowboundindexbyid(o.uid))}var u=this.selectedrowindexes.indexOf(e);if(t)this.selectedrowindex=e,u==-1?(this.selectedrowindexes.push(e),this.selectionmode!="singlerow"&&this._raiseEvent(2,{rowindex:e,row:this.getrowdata(e)})):this.selectionmode=="multiplerows"&&(this.selectedrowindexes.splice(u,1),this._raiseEvent(3,{rowindex:this.selectedrowindex,row:this.getrowdata(e)}),this.selectedrowindex=this.selectedrowindexes.length>0?this.selectedrowindexes[this.selectedrowindexes.length-1]:-1);else if(u>=0||this.selectionmode=="singlerow"||this.selectionmode=="multiplerowsextended"||this.selectionmode=="multiplerowsadvanced"){var a=this.selectedrowindexes[u];this.selectedrowindexes.splice(u,1),this._raiseEvent(3,{rowindex:a,row:this.getrowdata(e)}),this.selectedrowindex=-1}return(n==undefined||n)&&this._rendervisualrows(),!0},_applycellselection:function(e,t,n,r){if(e==null)return!1;if(t==null)return!1;var i=this.selectedrowindex;if(this.selectionmode=="singlecell"){var s=this.selectedcell;s!=null&&this._raiseEvent(16,{rowindex:s.rowindex,datafield:s.datafield}),this.selectedcells=new Array}if(this.selectionmode=="multiplecellsextended"||this.selectionmode=="multiplecellsadvanced"){var s=this.selectedcell;s!=null&&this._raiseEvent(16,{rowindex:s.rowindex,datafield:s.datafield})}var o=e+"_"+t;if(this.dataview.filters.length>0){var u=this.getrowdata(e);if(u&&u.dataindex!==undefined){e=u.dataindex;var o=e+"_"+t}else if(u&&u.dataindex===undefined&&u.uid){e=this.getrowboundindexbyid(u.uid);var o=e+"_"+t}}var a={rowindex:e,datafield:t};if(n){this.selectedcell=a;if(!this.selectedcells[o])this.selectedcells[o]=a,this.selectedcells.length++,this._raiseEvent(15,a);else if(this.selectionmode=="multiplecells"||this.selectionmode=="multiplecellsextended"||this.selectionmode=="multiplecellsadvanced")delete this.selectedcells[o],this.selectedcells.length>0&&this.selectedcells.length--,this._raiseEvent(16,a)}else delete this.selectedcells[o],this.selectedcells.length>0&&this.selectedcells.length--,this._raiseEvent(16,a);return(r==undefined||r)&&this._rendervisualrows(),!0},_getcellindex:function(t){var n=-1;return e.each(this.selectedcells,function(){n++;if(this[t])return!1}),n},_clearhoverstyle:function(){if(undefined==this.hoveredrow||this.hoveredrow==-1)return;if(this.vScrollInstance.isScrolling())return;if(this.hScrollInstance.isScrolling())return;var e=this.table.find(".jqx-grid-cell-hover");e.length>0&&(e.removeClass(this.toTP("jqx-grid-cell-hover")),e.removeClass(this.toTP("jqx-fill-state-hover"))),this.hoveredrow=-1},_clearselectstyle:function(){var t=this.table[0].rows.length,n=this.table[0].rows,r=this.toTP("jqx-grid-cell-selected"),i=this.toTP("jqx-fill-state-pressed"),s=this.toTP("jqx-grid-cell-hover"),o=this.toTP("jqx-fill-state-hover");for(var u=0;u<t;u++){var a=n[u],f=a.cells.length,l=a.cells;for(var c=0;c<f;c++){var h=l[c],p=e(h);h.className.indexOf("jqx-grid-cell-selected")!=-1&&(p.removeClass(r),p.removeClass(i)),h.className.indexOf("jqx-grid-cell-hover")!=-1&&(p.removeClass(s),p.removeClass(o))}}},_selectpath:function(e,t){var n=this,r=this._lastClickedCell?Math.min(this._lastClickedCell.row,e):0,i=this._lastClickedCell?Math.max(this._lastClickedCell.row,e):0;if(r<=i){var s=this._getcolumnindex(this._lastClickedCell.column),o=this._getcolumnindex(t),u=Math.min(s,o),a=Math.max(s,o);this.selectedcells=new Array;var f=this.dataview.loadedrecords;for(var l=r;l<=i;l++)for(var c=u;c<=a;c++){var e=f[l];this._applycellselection(n.getboundindex(e),n._getcolumnat(c).datafield,!0,!1)}this._rendervisualrows()}},_selectrowpath:function(e){if(this.selectionmode=="multiplerowsextended"){var t=this,n=this._lastClickedCell?Math.min(this._lastClickedCell.row,e):0,r=this._lastClickedCell?Math.max(this._lastClickedCell.row,e):0,i=this.dataview.loadedrecords;if(n<=r){this.selectedrowindexes=new Array;for(var s=n;s<=r;s++){var e=i[s],o=this.getrowboundindex(s);this._applyrowselection(o,!0,!1)}this._rendervisualrows()}}},_selectrowwithmouse:function(e,t,n,r,i,s){var o=t.row;if(o==undefined)return;var u=t.index;if(this.hittestinfo[u]==undefined)return;var a=this.hittestinfo[u].visualrow;if(this.hittestinfo[u].details)return;var f=a.cells[0].className;if(o.group)return;if(this.selectionmode=="multiplerows"||this.selectionmode=="multiplecells"||this.selectionmode=="checkbox"||this.selectionmode.indexOf("multiple")!=-1&&(s==1||i==1)){var l=this.getboundindex(o);if(this.dataview.filters.length>0){var c=this.getrowdata(l);if(c){l=c.dataindex;if(l==undefined)var l=this.getboundindex(o)}}var h=n.indexOf(l)!=-1,p=this.getboundindex(o)+"_"+r;if(this.selectionmode.indexOf("cell")!=-1){var d=this.selectedcells[p]!=undefined;this.selectedcells[p]!=undefined&&d?this._selectcellwithstyle(e,!1,u,r,a):this._selectcellwithstyle(e,!0,u,r,a);if(s&&this._lastClickedCell==undefined){var v=this.getselectedcells();v&&v.length>0&&(this._lastClickedCell={row:v[0].rowindex,column:v[0].datafield})}s&&this._lastClickedCell&&(this._selectpath(o.visibleindex,r),this.mousecaptured=!1,this.selectionarea.css("visibility")=="visible"&&this.selectionarea.css("visibility","hidden"))}else{h?i?this._applyrowselection(this.getboundindex(o),!1):this._selectrowwithstyle(e,a,!1,r):this._selectrowwithstyle(e,a,!0,r);if(s&&this._lastClickedCell==undefined){var m=this.getselectedrowindexes();m&&m.length>0&&(this._lastClickedCell={row:m[0],column:r})}if(s&&this._lastClickedCell){this.selectedrowindexes=new Array;var g=this._lastClickedCell?Math.min(this._lastClickedCell.row,o.visibleindex):0,y=this._lastClickedCell?Math.max(this._lastClickedCell.row,o.visibleindex):0,b=this.dataview.loadedrecords;for(var w=g;w<=y;w++){var o=b[w];this._applyrowselection(this.getboundindex(o),!0,!1,!1)}this._rendervisualrows()}}}else this._clearselectstyle(),this._selectrowwithstyle(e,a,!0,r),this.selectionmode.indexOf("cell")!=-1&&this._selectcellwithstyle(e,!0,u,r,a);s||(this._lastClickedCell={row:o.visibleindex,column:r})},_selectcellwithstyle:function(t,n,r,i,s){var o=e(s.cells[t._getcolumnindex(i)]);o.removeClass(this.toTP("jqx-grid-cell-hover")),o.removeClass(this.toTP("jqx-fill-state-hover")),n?(o.addClass(this.toTP("jqx-grid-cell-selected")),o.addClass(this.toTP("jqx-fill-state-pressed"))):(o.removeClass(this.toTP("jqx-grid-cell-selected")),o.removeClass(this.toTP("jqx-fill-state-pressed")))},_selectrowwithstyle:function(t,n,r,i){var s=n.cells.length,o=0;t.rowdetails&&t.showrowdetailscolumn?this.rtl?(s-=1,s-=this.groups.length):o=1+this.groups.length:this.groupable&&(this.rtl?s-=this.groups.length:o=this.groups.length);for(var u=o;u<s;u++){var a=n.cells[u];r?(e(a).removeClass(this.toTP("jqx-grid-cell-hover")),e(a).removeClass(this.toTP("jqx-fill-state-hover")),t.selectionmode.indexOf("cell")==-1&&(e(a).addClass(this.toTP("jqx-grid-cell-selected")),e(a).addClass(this.toTP("jqx-fill-state-pressed")))):(e(a).removeClass(this.toTP("jqx-grid-cell-hover")),e(a).removeClass(this.toTP("jqx-grid-cell-selected")),e(a).removeClass(this.toTP("jqx-fill-state-hover")),e(a).removeClass(this.toTP("jqx-fill-state-pressed")))}},_handlemousemoveselection:function(t,n){if((n.selectionmode=="multiplerowsextended"||n.selectionmode=="multiplecellsextended"||n.selectionmode=="multiplecellsadvanced")&&n.mousecaptured){if(n.multipleselectionbegins){var r=n.multipleselectionbegins(t);if(r===!1)return!0}var i=this.showheader?this.columnsheader.height()+2:0,s=this._groupsheader()?this.groupsheader.height():0,o=this.showtoolbar?this.toolbarheight:0;s+=o;var u=this.host.coord();if(this.hasTransform){u=e.jqx.utilities.getOffset(this.host);var a=this._getBodyOffset();u.left-=a.left,u.top-=a.top}var f=t.pageX,l=t.pageY-s;if(Math.abs(this.mousecaptureposition.left-f)>3||Math.abs(this.mousecaptureposition.top-l)>3){var c=parseInt(this.columnsheader.coord().top);this.hasTransform&&(c=e.jqx.utilities.getOffset(this.columnsheader).top),f<u.left&&(f=u.left),f>u.left+this.host.width()&&(f=u.left+this.host.width());var h=u.top+i;l<h&&(l=h+5);var p=parseInt(Math.min(n.mousecaptureposition.left,f)),d=-5+parseInt(Math.min(n.mousecaptureposition.top,l)),v=parseInt(Math.abs(n.mousecaptureposition.left-f)),m=parseInt(Math.abs(n.mousecaptureposition.top-l));p-=u.left,d-=u.top,this.selectionarea.css("visibility","visible");if(n.selectionmode=="multiplecellsadvanced"){var f=p,g=f+v,y=f,b=n.hScrollInstance,w=b.value;this.rtl&&(this.hScrollBar.css("visibility")!="hidden"&&(w=b.max-b.value),this.vScrollBar[0].style.visibility!="hidden");var E=n.table[0].rows[0],S=0,x=n.mousecaptureposition.clickedcell,T=x,N=!1,C=0,k=E.cells.length;n.mousecaptureposition.left<=t.pageX&&(C=x);for(var L=C;L<k;L++){var A=parseInt(e(this.columnsrow[0].cells[L]).css("left")),O=A-w;if(n.columns.records[L].pinned){O=A;continue}var M=this._getcolumnat(L);if(M!=null&&M.hidden)continue;if(n.groupable&&n.groups.length>0&&L<n.groups.length)continue;var _=O+e(this.columnsrow[0].cells[L]).width();if(n.mousecaptureposition.left>t.pageX){if(_>=f&&f>=O){T=L,N=!0;break}}else if(_>=g&&g>=O){T=L,N=!0;break}}if(!N)if(n.mousecaptureposition.left>t.pageX)e.each(this.columns.records,function(e,t){if(n.groupable&&n.groups.length>0&&e<n.groups.length)return!0;if(!this.pinned&&!this.hidden)return T=e,!1});else if(!n.groupable||n.groupable&&!n.groups.length>0)T=E.cells.length-1;var D=x;x=Math.min(x,T),T=Math.max(D,T),d+=5,d+=s;var P=n.table[0].rows.indexOf(n.mousecaptureposition.clickedrow),H=0,B=-1,j=-1,F=0;for(var L=0;L<n.table[0].rows.length;L++){var I=e(n.table[0].rows[L]);L==0&&(F=I.coord().top);var q=I.height(),R=F-u.top;if(B==-1&&R+q>=d){var U=!1;for(var z=0;z<n.groups.length;z++){var W=I[0].cells[z].className;if(W.indexOf("jqx-grid-group-collapse")!=-1||W.indexOf("jqx-grid-group-expand")!=-1){U=!0;break}}if(U)continue;B=L}F+=q;if(n.groupable&&n.groups.length>0){var U=!1;for(var z=0;z<n.groups.length;z++){var W=I[0].cells[z].className;if(W.indexOf("jqx-grid-group-collapse")!=-1||W.indexOf("jqx-grid-group-expand")!=-1){U=!0;break}}if(U)continue;var S=0;for(var X=n.groups.length;X<I[0].cells.length;X++){var V=I[0].cells[X];e(V).html()==""&&S++}if(S==I[0].cells.length-n.groups.length)continue}B!=-1&&(H+=q);if(R+q>d+m){j=L;break}}if(B!=-1){d=e(n.table[0].rows[B]).coord().top-u.top-s-2;var J=0;this.filterable&&this.showfilterrow&&(J=this.filterrowheight),parseInt(n.table[0].style.top)<0&&d<this.rowsheight+J&&(d-=parseInt(n.table[0].style.top),H+=parseInt(n.table[0].style.top)),m=H;var K=e(this.columnsrow[0].cells[x]),Q=e(this.columnsrow[0].cells[T]);p=parseInt(K.css("left")),v=parseInt(Q.css("left"))-parseInt(p)+Q.width()-2,p-=w;if(n.editcell&&n.editable&&n.endcelledit&&(x!=T||B!=j)){if(n.editcell.validated==0)return;n.endcelledit(n.editcell.row,n.editcell.column,!0,!0)}}}this.selectionarea.width(v),this.selectionarea.height(m),this.selectionarea.css("left",p),this.selectionarea.css("top",d)}}},_handlemouseupselection:function(t,n){if(!this.selectionarea)return;if(this.selectionarea.css("visibility")!="visible")return n.mousecaptured=!1,!0;if(n.mousecaptured&&(n.selectionmode=="multiplerowsextended"||n.selectionmode=="multiplerowsadvanced"||n.selectionmode=="multiplecellsextended"||n.selectionmode=="multiplecellsadvanced")){n.mousecaptured=!1;if(this.selectionarea.css("visibility")=="visible"){this.selectionarea.css("visibility","hidden");var r=this.showheader?this.columnsheader.height()+2:0,i=this._groupsheader()?this.groupsheader.height():0,s=this.showtoolbar?this.toolbarheight:0;i+=s;var o=this.selectionarea.coord(),u=this.host.coord();this.hasTransform&&(u=e.jqx.utilities.getOffset(this.host),o=e.jqx.utilities.getOffset(this.selectionarea));var a=o.left-u.left,f=o.top-r-u.top-i,l=f,c=a+this.selectionarea.width(),h=a,p=new Array,d=new Array;if(n.selectionmode=="multiplerowsextended"){while(f<l+this.selectionarea.height()){var v=this._hittestrow(a,f),m=v.row,g=v.index;g!=-1&&(d[g]||(d[g]=!0,p[p.length]=v)),f+=20}var l=0;e.each(p,function(){var e=this,r=this.row;n.selectionmode!="none"&&n._selectrowwithmouse&&(t.ctrlKey?n._applyrowselection(n.getboundindex(r),!0,!1,!1):l==0?n._applyrowselection(n.getboundindex(r),!0,!1,!0):n._applyrowselection(n.getboundindex(r),!0,!1,!1),l++)})}else{n.selectionmode=="multiplecellsadvanced"&&(f+=2);var y=n.hScrollInstance,b=y.value;this.rtl&&(this.hScrollBar.css("visibility")!="hidden"&&(b=y.max-y.value),this.vScrollBar[0].style.visibility!="hidden"&&(b-=this.scrollbarsize+4));var w=n.table[0].rows[0],E=n.selectionarea.height();!t.ctrlKey&&E>0&&(n.selectedcells=new Array);var S=E;while(f<l+S){var v=n._hittestrow(a,f);if(!v){f+=5;continue}var m=v.row,g=v.index;if(g!=-1&&!d[g]){d[g]=!0;for(var x=0;x<w.cells.length;x++){var T=parseInt(e(n.columnsrow[0].cells[x]).css("left"))-b,N=T+e(n.columnsrow[0].cells[x]).width();(h>=T&&h<=N||c>=T&&c<=N||T>=h&&T<=c)&&n._applycellselection(n.getboundindex(m),n._getcolumnat(x).datafield,!0,!1)}}f+=5}}n.autosavestate&&n.savestate&&n.savestate(),n._renderrows(n.virtualsizeinfo)}}},selectprevcell:function(e,t){var n=this._getcolumnindex(t),r=this.columns.records.length,i=this._getprevvisiblecolumn(n);i!=null&&(this.clearselection(),this.selectcell(e,i.datafield))},selectnextcell:function(e,t){var n=this._getcolumnindex(t),r=this.columns.records.length,i=this._getnextvisiblecolumn(n);i!=null&&(this.clearselection(),this.selectcell(e,i.datafield))},_getfirstvisiblecolumn:function(){var e=this,t=this.columns.records.length;for(var n=0;n<t;n++){var r=this.columns.records[n];if(!r.hidden&&r.datafield!=null)return r}return null},_getlastvisiblecolumn:function(){var e=this,t=this.columns.records.length;for(var n=t-1;n>=0;n--){var r=this.columns.records[n];if(!r.hidden&&r.datafield!=null)return r}return null},_handlekeydown:function(t,n){if(n.groupable&&n.groups.length>0)return!0;if(n.disabled)return!1;var r=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(n.editcell&&n.selectionmode!="multiplecellsadvanced")return!0;if(n.editcell&&n.selectionmode=="multiplecellsadvanced"){if(!(r>=33&&r<=40))return!0;if(!!t.altKey)return n._cancelkeydown=!1,!0;if(n._cancelkeydown!=undefined&&n._cancelkeydown!=0)return n._cancelkeydown=!1,!0;if(n.editmode==="selectedrow")return!0;n.endcelledit(n.editcell.row,n.editcell.column,!1,!0),n._cancelkeydown=!1;if(n.editcell&&!n.editcell.validated)return n._rendervisualrows(),n.endcelledit(n.editcell.row,n.editcell.column,!1,!0),!1}if(n.selectionmode=="none")return!0;if(n.showfilterrow&&n.filterable&&this.filterrow&&e(t.target).ischildof(this.filterrow))return!0;if(n.pageable&&e(t.target).ischildof(this.pager))return!0;if(this.showtoolbar&&e(t.target).ischildof(this.toolbar))return!0;if(this.showstatusbar&&e(t.target).ischildof(this.statusbar))return!0;var i=!1;if(t.altKey)return!0;if(t.ctrlKey&&this.clipboard){var s=String.fromCharCode(r).toLowerCase();if(s=="c"||s=="x"){var o=this.copyselection();if(window.clipboardData)window.clipboardData.setData("Text",o);else{var u=e('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>');u.val(o),e("body").append(u),u.select(),setTimeout(function(){document.designMode="off",u.select(),u.remove()},100)}}else if(s=="v")if(window.clipboardData&&this._clipboardselection&&this._clipboardselection.length>0)this.pasteselection();else{var a=e('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>');e("body").append(a),a.select();var f=this;setTimeout(function(){f._clipboardselection=new Array;var e=a.val(),t=e.split("\n");for(var n=0;n<t.length;n++)if(t[n].split("	").length>0){var r=t[n].split("	");if(r.length==1&&n==t.length-1&&r[0]=="")continue;r.length>0&&f._clipboardselection.push(r)}f.pasteselection(),a.remove()},100)}s=="x"&&this.deleteselection()}var l=Math.round(n._gettableheight()),c=Math.round(l/n.rowsheight),h=n.getdatainformation();switch(n.selectionmode){case"singlecell":case"multiplecells":case"multiplecellsextended":case"multiplecellsadvanced":var p=n.getselectedcell();if(p!=null){var d=this.getrowvisibleindex(p.rowindex),v=d,m=p.datafield,g=n._getcolumnindex(m),y=n.columns.records.length,b=function(e,s,o){var u=function(e,t){var r=n.dataview.loadedrecords[e];if(r!=undefined&&t!=null){(o||o==undefined)&&n.clearselection();var s=n.getboundindex(r);return n.selectcell(s,t),n._oldselectedcell=n.selectedcell,i=!0,n.ensurecellvisible(e,t),!0}return!1};u(e,s)||(n.ensurecellvisible(e,s),u(e,s),n.virtualmode&&n.host.focus());if(t.shiftKey&&r!=9){if(n.selectionmode=="multiplecellsextended"||n.selectionmode=="multiplecellsadvanced")if(n._lastClickedCell){n._selectpath(e,s),n.selectedcell={rowindex:e,datafield:s};return}}else t.shiftKey||(n._lastClickedCell={row:e,column:s})},w=t.shiftKey&&n.selectionmode!="singlecell"&&n.selectionmode!="multiplecells",E=function(){b(0,m,!w)},S=function(){var e=h.rowscount-1;b(e,m,!w)},x=r==9&&!t.shiftKey,T=r==9&&t.shiftKey;if(x||T)w=!1;var N=t.ctrlKey;if(N&&r==37){var C=n._getfirstvisiblecolumn(g);C!=null&&b(v,C.datafield)}else if(N&&r==39){var k=n._getlastvisiblecolumn(g);k!=null&&b(v,k.datafield)}else if(r==39||x){var L=n._getnextvisiblecolumn(g);L!=null?b(v,L.datafield,!w):x||(i=!0)}else if(r==37||T){var C=n._getprevvisiblecolumn(g);C!=null?b(v,C.datafield,!w):T||(i=!0)}else if(r==36)E();else if(r==35)S();else if(r==33)if(v-c>=0){var A=v-c;b(A,m,!w)}else E();else if(r==34)if(h.rowscount>v+c){var A=v+c;b(A,m,!w)}else S();else r==38?N?E():v>0?b(v-1,m,!w):i=!0:r==40&&(N?S():h.rowscount>v+1?b(v+1,m,!w):i=!0)}break;case"singlerow":case"multiplerows":case"multiplerowsextended":case"multiplerowsadvanced":var v=n.getselectedrowindex();if(v==null||v==-1)return!0;v=this.getrowvisibleindex(v);var O=function(e,s){var o=function(e){var t=n.dataview.loadedrecords[e];if(t!=undefined){var r=n.getboundindex(t),o=n.selectedrowindex;(s||s==undefined)&&n.clearselection(),n.selectedrowindex=o,n.selectrow(r,!1);var u=n.ensurerowvisible(e);return(!u||n.autoheight||n.groupable)&&n._rendervisualrows(),i=!0,!0}return!1};o(e)||(n.ensurerowvisible(e),o(e,s),n.virtualmode&&n.host.focus());if(t.shiftKey&&r!=9){if(n.selectionmode=="multiplerowsextended"&&n._lastClickedCell){n._selectrowpath(e),n.selectedrowindex=n.getrowboundindex(e);return}}else t.shiftKey||(n._lastClickedCell={row:e},n.selectedrowindex=n.getrowboundindex(e))},w=t.shiftKey&&n.selectionmode!="singlerow"&&n.selectionmode!="multiplerows",E=function(){O(0,!w)},S=function(){var e=h.rowscount-1;O(e,!w)},N=t.ctrlKey;if(r==36||N&&r==38)E();else if(r==35||N&&r==40)S();else if(r==33)if(v-c>=0){var A=v-c;O(A,!w)}else E();else if(r==34)if(h.rowscount>v+c){var A=v+c;O(A,!w)}else S();else r==38?v>0?O(v-1,!w):i=!0:r==40&&(h.rowscount>v+1?O(v+1,!w):i=!0)}return i?(n.autosavestate&&n.savestate&&n.savestate(),!1):!0},_handlemousemove:function(t,n){if(n.vScrollInstance.isScrolling())return;if(n.hScrollInstance.isScrolling())return;var r,i,s,o,u;if(n.enablehover||n.selectionmode=="multiplerows"){r=this.showheader?this.columnsheader.height()+2:0,i=this._groupsheader()?this.groupsheader.height():0;var a=this.showtoolbar?this.toolbarheight:0;i+=a,s=this.host.coord();if(this.hasTransform){s=e.jqx.utilities.getOffset(this.host);var f=this._getBodyOffset();s.left-=f.left,s.top-=f.top}o=t.pageX-s.left,u=t.pageY-r-s.top-i}if(n.selectionmode=="multiplerowsextended"||n.selectionmode=="multiplecellsextended"||n.selectionmode=="multiplecellsadvanced")if(n.mousecaptured==1)return;if(!n.enablehover)return!0;if(n.disabled)return;if(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())return;var l=this._hittestrow(o,u);if(!l)return;var c=l.row,h=l.index;if(this.hoveredrow!=-1&&h!=-1&&this.hoveredrow==h&&this.selectionmode.indexOf("cell")==-1&&this.selectionmode!="checkbox")return;this._clearhoverstyle();if(h==-1||c==undefined)return;var p=this.hittestinfo[h].visualrow;if(p==null)return;if(this.hittestinfo[h].details)return;if(t.clientX>e(p).width()+e(p).coord().left)return;var d=0,v=p.cells.length;n.rowdetails&&n.showrowdetailscolumn?this.rtl?(v-=1,v-=this.groups.length):d=1+this.groups.length:this.groupable&&(this.rtl?v-=this.groups.length:d=this.groups.length);if(p.cells.length==0)return;var m=p.cells[d].className;if(c.group||this.selectionmode.indexOf("row")>=0&&m.indexOf("jqx-grid-cell-selected")!=-1)return;this.hoveredrow=h;if(this.selectionmode.indexOf("cell")!=-1||this.selectionmode=="checkbox"){var g=-1,y=this.hScrollInstance,b=y.value;this.rtl&&this.hScrollBar.css("visibility")!="hidden"&&(b=y.max-y.value);for(var w=d;w<v;w++){var E=parseInt(e(this.columnsrow[0].cells[w]).css("left"))-b,S=E+e(this.columnsrow[0].cells[w]).width();if(S>=o&&o>=E){g=w;break}}if(g!=-1){var x=p.cells[g];if(x.className.indexOf("jqx-grid-cell-selected")==-1){if(this.editcell){var T=this._getcolumnat(g);if(T&&this.editcell.row==h&&this.editcell.column==T.datafield)return}e(x).addClass(this.toTP("jqx-grid-cell-hover")),e(x).addClass(this.toTP("jqx-fill-state-hover")),this.cellhover&&this.cellhover(x,t.pageX,t.pageY)}}return}for(var w=d;w<v;w++){var x=p.cells[w];e(x).addClass(this.toTP("jqx-grid-cell-hover")),e(x).addClass(this.toTP("jqx-fill-state-hover")),this.cellhover&&this.cellhover(x,t.pageX,t.pageY)}}})}(jQuery),function(e){e.extend(e.jqx._jqxGrid.prototype,{autoresizecolumns:function(t,n){t!="cells"&&t!="all"&&t!="column"&&(t="all");var r=this.that,i=this.getrows();this.pageable&&(i=this.dataview.rows,this.groupable&&(i=this.dataview.records)),n==undefined?n=0:n=parseInt(n);var s=i.length;if(s==undefined&&i!=undefined){var o=new Array;e.each(i,function(e){o.push(this)}),i=o,s=i.length}var u=e("<span></span>");u.addClass(this.toThemeProperty("jqx-widget")),u.addClass(this.toThemeProperty("jqx-grid-cell")),e(document.body).append(u);var a=[],f=[],l=[],c=[],h=r.host.width();r.vScrollBar[0].style.visibility!="hidden"&&(h-=this.scrollbarsize+5),h<0&&(h=0);for(var p=0;p<s;p++){var d=i[p];for(var v=0;v<this.columns.records.length;v++){var m=this.columns.records[v];if(m.hidden)continue;f[m.displayfield]==undefined&&(f[m.displayfield]=0),l[m.displayfield]==undefined&&(l[m.displayfield]="");var g=d[m.displayfield];if(m.cellsformat!="")e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(g)?g=e.jqx.dataFormat.formatdate(g,m.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(g)&&(g=e.jqx.dataFormat.formatnumber(g,m.cellsformat,this.gridlocalization)));else if(m.cellsrenderer){var y=r._defaultcellsrenderer(g,m),b=m.cellsrenderer(p,m.datafield,g,y,m.getcolumnproperties(),d);b!=undefined&&(g=e(b).text())}if(t==undefined||t=="cells"||t=="all")if(g!=null){var a=g.toString().length,w=g.toString(),E=w.replace(/[^A-Z]/g,"").length;a>f[m.displayfield]&&(f[m.displayfield]=a,l[m.displayfield]=g,c[m.displayfield]=E);if(a>0&&a>=E){var S=E*20+(a-E)*15,x=c[m.displayfield]*20+(f[m.displayfield]-c[m.displayfield])*15;S>x&&S>0&&x>0&&(f[m.displayfield]=a,l[m.displayfield]=g,c[m.displayfield]=E)}}if(t=="column"||t=="all"){if(m.text.toString().length>f[m.displayfield]){l[m.displayfield]=m.text,f[m.displayfield]=m.text.length;var w=m.text.toString(),E=w.replace(/[^A-Z]/g,"").length;c[m.displayfield]=E}var g=m.text,a=g.toString().length,w=g.toString(),E=w.replace(/[^A-Z]/g,"").length;if(a>0&&a>=E){var S=E*20+(a-E)*15,x=c[m.displayfield]*20+(f[m.displayfield]-c[m.displayfield])*15;S>x&&S>0&&x>0&&(f[m.displayfield]=a,l[m.displayfield]=g,c[m.displayfield]=E)}}}}if(!this.columns.records)return;for(var v=0;v<this.columns.records.length;v++){var m=this.columns.records[v];l[m.displayfield]==undefined&&(l[m.displayfield]=m.text),u[0].innerHTML=l[m.displayfield].toString();var T=u.outerWidth()+10;u.children().length>0&&(T=u.children().outerWidth()+10),e.jqx.browser.msie&&e.jqx.browser.version<8&&(T+=10),this.filterable&&this.showfilterrow&&(T+=5),T+=n,T>m.maxwidth&&(T=m.maxwidth),m._width!=undefined&&(m.__width=m._width),m._width=null;if(m.maxwidth=="auto"||T<=m.maxwidth){var N=m.width;T<m.minwidth&&(T=m.minwidth),m.width=T,m._percentagewidth!=undefined&&(m._percentagewidth=null),this._raiseEvent(14,{columntext:m.text,column:m.getcolumnproperties(),datafield:m.datafield,displayfield:m.displayfield,oldwidth:N,newwidth:T})}}u.remove(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo);for(var v=0;v<this.columns.records.length;v++){var m=this.columns.records[v];m.__width!=undefined&&(m._width=m.__width)}},autoresizecolumn:function(t,n,r){n!="cells"&&n!="all"&&n!="column"&&(n="all");if(t==undefined)return!1;var i=this.getrows();this.pageable&&(i=this.dataview.rows,this.groupable&&(i=this.dataview.records));var s=this.getcolumn(t);if(s==undefined)return!1;r==undefined?r=0:r=parseInt(r);var o=i.length,u=e("<span></span>");u.addClass(this.toThemeProperty("jqx-widget")),u.addClass(this.toThemeProperty("jqx-grid-cell")),e(document.body).append(u);var a=0,f="",l=0,c=this.that,h=c.host.width();c.vScrollBar[0].style.visibility!="hidden"&&(h-=this.scrollbarsize+5),h<0&&(h=0);if(n==undefined||n=="cells"||n=="all")for(var p=0;p<o;p++){var d=i[p][s.displayfield];if(s.cellsformat!="")e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(d)?d=e.jqx.dataFormat.formatdate(d,s.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(d)&&(d=e.jqx.dataFormat.formatnumber(d,s.cellsformat,this.gridlocalization)));else if(s.cellsrenderer){var v=s.cellsrenderer(p,s,d);v!=undefined&&(d=e(v).text())}if(d!=null){var m=d.toString().length,g=d.toString(),y=g.replace(/[^A-Z]/g,"").length;m>a&&(a=m,f=d,l=y);if(m>0&&m>=y){var b=y*20+(m-y)*15,w=l*20+(a-l)*15;b>w&&b>0&&w>0&&(a=m,f=d,l=y)}}}if(n=="column"||n=="all"){s.text.toString().length>a&&(f=s.text);var d=s.text.toString(),m=d.toString().length,g=d.toString(),y=g.replace(/[^A-Z]/g,"").length;if(m>0&&m>=y){var b=y*20+(m-y)*15,w=l*20+(a-l)*15;b>w&&b>0&&w>0&&(a=m,f=d,l=y)}}f==undefined&&(f=s.text),u[0].innerHTML=f;var E=u.outerWidth()+10;e.jqx.browser.msie&&e.jqx.browser.version<8&&(E+=5),this.filterable&&this.showfilterrow&&(E+=5),E+=r,u.remove(),E>s.maxwidth&&(E=s.maxwidth);if(s.maxwidth=="auto"||E<=s.maxwidth){var S=s.width;E<s.minwidth&&(E=s.minwidth),s.width=E,s._width!=undefined&&(s.__width=s._width),s._width=null,s._percentagewidth!=undefined&&(s._percentagewidth=null),this._updatecolumnwidths(),this._updatecellwidths(),this._raiseEvent(14,{columntext:s.text,column:s.getcolumnproperties(),datafield:t,displayfield:s.displayfield,oldwidth:S,newwidth:E}),this._renderrows(this.virtualsizeinfo),s._width!=undefined&&(s._width=s.__width)}},_handlecolumnsresize:function(){var t=this.that;if(this.columnsresize){var n=!1;t.isTouchDevice()&&t.touchmode!==!0&&(n=!0);var r="mousemove.resize"+this.element.id,i="mousedown.resize"+this.element.id,s="mouseup.resize"+this.element.id;if(n)var r=e.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,i=e.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,s=e.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id;this.removeHandler(e(document),r),this.addHandler(e(document),r,function(r){var i=e.data(document.body,"contextmenu"+t.element.id);if(i!=null&&t.autoshowcolumnsmenubutton)return!0;if(t.resizablecolumn!=null&&!t.disabled&&t.resizing&&t.resizeline!=null){var s=t.resizablecolumn.columnelement,o=t.host.coord(),u=parseInt(t.resizestartline.coord().left),a=u-t._startcolumnwidth,f=t.resizablecolumn.column.minwidth;f=="auto"?f=0:f=parseInt(f);var l=t.resizablecolumn.column.maxwidth;l=="auto"?l=0:l=parseInt(l);var c=r.pageX;if(n){var h=t.getTouches(r),p=h[0];c=p.pageX}a+=f;var d=l>0?u+l:0,v=l==0?!0:t._startcolumnwidth+c-u<l?!0:!1;if(t.rtl)var v=!0;if(v)if(!t.rtl){if(c>=o.left&&c>=a){d!=0&&r.pageX<d?t.resizeline.css("left",c):d==0&&t.resizeline.css("left",c);if(n)return!1}}else if(c>=o.left&&c<=o.left+t.host.width()){t.resizeline.css("left",c);if(n)return!1}}if(!n&&t.resizablecolumn!=null)return!1}),this.removeHandler(e(document),i),this.addHandler(e(document),i,function(n){var r=e.data(document.body,"contextmenu"+t.element.id);if(r!=null&&t.autoshowcolumnsmenubutton)return!0;if(t.resizablecolumn!=null&&!t.disabled){var i=t.resizablecolumn.columnelement;if(i.coord().top+i.height()+5<n.pageY){t.resizablecolumn=null;return}if(i.coord().top-5>n.pageY){t.resizablecolumn=null;return}t._startcolumnwidth=t.resizablecolumn.column.width,t.resizablecolumn.column._width=null,e(document.body).addClass("jqx-disableselect"),e(document.body).addClass("jqx-position-reset"),t.host.addClass("jqx-disableselect"),t.content.addClass("jqx-disableselect"),t._mouseDownResize=new Date,t.resizing=!0,t._resizecolumn=t.resizablecolumn.column,t.resizeline=t.resizeline||e('<div style="position: absolute;"></div>'),t.resizestartline=t.resizestartline||e('<div style="position: absolute;"></div>'),t.resizebackground=t.resizebackground||e('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>'),t.resizebackground.css("opacity",.01),t.resizebackground.css("cursor","col-resize"),t.resizeline.css("cursor","col-resize"),t.resizestartline.css("cursor","col-resize"),t.resizeline.addClass(t.toThemeProperty("jqx-grid-column-resizeline")),t.resizestartline.addClass(t.toThemeProperty("jqx-grid-column-resizestartline")),e(document.body).append(t.resizeline),e(document.body).append(t.resizestartline),e(document.body).append(t.resizebackground);var s=t.resizablecolumn.columnelement.coord();t.resizebackground.css("left",t.host.coord().left),t.resizebackground.css("top",t.host.coord().top),t.resizebackground.width(t.host.width()),t.resizebackground.height(t.host.height()),t.resizebackground.css("z-index",9999);var o=function(e){t.rtl?e.css("left",parseInt(s.left)):e.css("left",parseInt(s.left)+t._startcolumnwidth);var n=t._groupsheader(),r=n?t.groupsheader.height():0,i=t.showtoolbar?t.toolbarheight:0;r+=i;var o=t.showstatusbar?t.statusbarheight:0;r+=o;var u=0;t.pageable&&(u=t.pagerheight);var a=t.hScrollBar.css("visibility")=="visible"?17:0;e.css("top",parseInt(s.top)),e.css("z-index",99999),t.columngroups?e.height(t.host.height()+t.resizablecolumn.columnelement.height()-u-r-a-t.columngroupslevel*t.columnsheight):e.height(t.host.height()-u-r-a),t.enableanimations?e.show("fast"):e.show()};o(t.resizeline),o(t.resizestartline),t.dragmousedown=null}});var o=function(){e(document.body).removeClass("jqx-disableselect"),e(document.body).removeClass("jqx-position-reset");if(t.showfilterrow||t.showstatusbar||t.showtoolbar||t.enablebrowserselection)t.host.removeClass("jqx-disableselect"),t.content.removeClass("jqx-disableselect");if(!t.resizing)return;t._mouseUpResize=new Date;var n=t._mouseUpResize-t._mouseDownResize;if(n<200){t.resizing=!1,t._resizecolumn!=null&&t.resizeline!=null&&t.resizeline.css("display")=="block"&&(t._resizecolumn=null,t.resizeline.hide(),t.resizestartline.hide(),t.resizebackground.remove());return}t.resizing=!1;if(t.disabled)return;var r=t.host.width();t.vScrollBar[0].style.visibility!="hidden"&&(r-=20),r<0&&(r=0);if(t._resizecolumn!=null&&t.resizeline!=null&&t.resizeline.css("display")=="block"){var i=parseInt(t.resizeline.css("left")),s=parseInt(t.resizestartline.css("left")),o=t._startcolumnwidth+i-s;if(t.rtl)var o=t._startcolumnwidth-i+s;var u=t._resizecolumn.width;t._closemenu(),t._resizecolumn.width=o,t._resizecolumn._percentagewidth!=undefined&&(t._resizecolumn._percentagewidth=o/r*100);for(var a=0;a<t._columns.length;a++)if(t._columns[a].datafield===t._resizecolumn.datafield){t._columns[a].width=t._resizecolumn.width;break}var f=t.hScrollBar[0].style.visibility;t._updatecolumnwidths(),t._updatecellwidths(),t._raiseEvent(14,{columntext:t._resizecolumn.text,column:t._resizecolumn.getcolumnproperties(),datafield:t._resizecolumn.datafield,oldwidth:u,newwidth:o}),t._renderrows(t.virtualsizeinfo),t.autosavestate&&t.savestate&&t.savestate(),f!=t.hScrollBar[0].style.visibility&&t.hScrollInstance.setPosition(0),t.rtl&&t._arrange(),t._resizecolumn=null,t.resizeline.hide(),t.resizestartline.hide(),t.resizebackground.remove(),t.resizablecolumn=null}else t.resizablecolumn=null};try{if(document.referrer!=""||window.frameElement){var u=null;window.top!=null&&window.top!=window.self&&window.parent&&document.referrer&&(u=document.referrer);if(u&&u.indexOf(document.location.host)!=-1){var a=function(e){o()};window.top.document.addEventListener?window.top.document.addEventListener("mouseup",a,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",a)}}}catch(f){}this.removeHandler(e(document),s),this.addHandler(e(document),s,function(n){var r=e.data(document.body,"contextmenu"+t.element.id);if(r!=null&&t.autoshowcolumnsmenubutton)return!0;o()})}}})}(jQuery),function(e){e.extend(e.jqx._jqxGrid.prototype,{_updatefilterrowui:function(t){var n=this.columns.records.length,r=0,i=this;for(var s=0;s<n;s++){var o=this.columns.records[s],u=o.width;u<o.minwidth&&(u=o.minwidth),u>o.maxwidth&&(u=o.maxwidth);var a=e(this.filterrow[0].cells[s]);a.css("left",r);var f=!0;a.width()==u&&(f=!1),t&&(f=!0),a.width(u),a[0].left=r,!o.hidden||!o.hideable?r+=u:a.css("display","none");if(!f)continue;if(o.createfilterwidget&&o.filtertype=="custom")o.createfilterwidget(o,a);else if(o.filterable){var l=function(t,n){var r=e(n.children()[0]);r.width(u-10),r.attr("disabled",t.disabled)};switch(o.filtertype){case"number":e(a.children()[0]).width(u),a.find("input").width(u-30),a.find("input").attr("disabled",i.disabled),e(a.find(".jqx-dropdownlist-state-normal")).jqxDropDownList({disabled:i.disabled});break;case"date":this.host.jqxDateTimeInput?e(a.children()[0]).jqxDateTimeInput({disabled:i.disabled,width:u-10}):l(this,a);break;case"textbox":case"default":l(this,a);break;case"list":case"checkedlist":this.host.jqxDropDownList?e(a.children()[0]).jqxDropDownList({disabled:i.disabled,width:u-10}):l(this,a);break;case"bool":case"boolean":this.host.jqxCheckBox?e(a.children()[0]).jqxCheckBox({disabled:i.disabled}):l(this,a)}}}var c=e(this.filterrow.children()[0]);c.width(parseInt(r)+2),c.height(this.filterrowheight)},clearfilterrow:function(){this._disablefilterrow=!0;if(!this.columns.records)return;var t=this.columns.records.length,n=0;for(var r=0;r<t;r++){var i=this.columns.records[r],s=e(this.filterrow[0].cells[r]);if(i.filterable){var o=function(t,n){var r=e(n.children()[0]);r.val(""),r[0]&&(t["_oldWriteText"+r[0].id]="")};switch(i.filtertype){case"number":s.find("input").val("");break;case"date":this.host.jqxDateTimeInput?e(s.children()[0]).jqxDateTimeInput("setDate",null):o(this,s);break;case"textbox":case"default":o(this,s);break;case"list":this.host.jqxDropDownList?e(s.children()[0]).jqxDropDownList("clearSelection"):o(this,s);break;case"checkedlist":this.host.jqxDropDownList?e(s.children()[0]).jqxDropDownList("checkAll",!1):o(this,s);break;case"bool":case"boolean":this.host.jqxCheckBox?e(s.children()[0]).jqxCheckBox({checked:null}):o(this,s)}}}this._disablefilterrow=!1},_applyfilterfromfilterrow:function(){if(this._disablefilterrow==1)return;if(this.disabled)return;var t=this.columns.records.length,n=this.that;for(var r=0;r<t;r++){var i=new e.jqx.filter,s=this.columns.records[r];if(!s.filterable)continue;if(s.datafield===null)continue;var o=n._getcolumntypebydatafield(s),u=n._getfiltertype(o),a=1,f=!0,l=s.filtertype,c=function(e,t,r){var i=!0;if(e._filterwidget){var s=e._filterwidget.val();if(s!=""){var o="equal";if(t=="stringfilter")var o="contains";t=="numericfilter"&&n.gridlocalization.decimalseparator==","&&s.indexOf(n.gridlocalization.decimalseparator)>=0&&(s=s.replace(n.gridlocalization.decimalseparator,"."));if(t!="stringfilter"){var u=0;s.indexOf(">")!=-1&&(o="greater_than",u=1),s.indexOf("<")!=-1&&(o="less_than",u=1),s.indexOf("=")!=-1&&(o=="greater_than"?(o="greater_than_or_equal",u=2):o=="less_than"?(o="less_than_or_equal",u=2):(o="equal",u=1));if(u!=0){s=s.substring(u);if(s.length<1)return!1}}e.filtercondition!=undefined&&(o=e.filtercondition);if(t=="datefilter")var f=r.createfilter(t,s,o,null,e.cellsformat,n.gridlocalization);else var f=r.createfilter(t,s,o);r.addfilter(a,f)}else i=!1}return i};switch(s.filtertype){case"date":if(s._filterwidget.jqxDateTimeInput){var h=s._filterwidget.jqxDateTimeInput("getRange");if(h!=null&&h.from!=null&&h.to!=null){var p="GREATER_THAN_OR_EQUAL",d=new Date(0);d.setHours(0),d.setFullYear(h.from.getFullYear(),h.from.getMonth(),h.from.getDate());var v=new Date(0);v.setHours(0),v.setFullYear(h.to.getFullYear(),h.to.getMonth(),h.to.getDate()),v.setHours(h.to.getHours()),v.setMinutes(h.to.getMinutes()),v.setSeconds(h.to.getSeconds());var m=i.createfilter(u,d,p);i.addfilter(0,m);var g="LESS_THAN_OR_EQUAL",y=i.createfilter(u,v,g);i.addfilter(0,y)}else f=!1}else f=c(s,u,i);break;case"number":if(s._filterwidget){var h=s._filterwidget.find("input").val();n.gridlocalization.decimalseparator==","&&h.indexOf(n.gridlocalization.decimalseparator)>=0&&(h=h.replace(n.gridlocalization.decimalseparator,"."));var b=s._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),w=i.getoperatorsbyfiltertype(u)[b];if(n.updatefilterconditions){var E=n.updatefilterconditions(u,i.getoperatorsbyfiltertype(u));E!=undefined&&i.setoperatorsbyfiltertype(u,E);var w=i.getoperatorsbyfiltertype(u)[b]}var S=w=="NULL"||w=="NOT_NULL",x=w=="EMPTY"||w=="NOT_EMPTY";h!=undefined&&h.length>0||S||x?(m=i.createfilter(u,new Number(h),w,null,s.cellsformat,n.gridlocalization),i.addfilter(0,m)):f=!1}else f=!1;break;case"textbox":case"default":f=c(s,u,i);break;case"bool":case"boolean":if(s._filterwidget.jqxCheckBox){var h=s._filterwidget.jqxCheckBox("checked");if(h!=null){var p="equal",T=i.createfilter(u,h,p);i.addfilter(a,T)}else f=!1}else f=c(s,u,i);break;case"list":var N=s._filterwidget.jqxDropDownList("listBox");if(N.selectedIndex>0){var C=N.getItem(N.selectedIndex),h=C.label,p="equal";h===""&&(p="NULL");var T=i.createfilter(u,h,p);i.addfilter(a,T)}else f=!1;break;case"checkedlist":if(s._filterwidget.jqxDropDownList){var N=s._filterwidget.jqxDropDownList("listBox"),k=N.getCheckedItems();if(k.length==0){for(var L=1;L<N.items.length;L++){var h=N.items[L].label,p="not_equal";h===""&&(p="NULL");var T=i.createfilter(u,h,p);i.addfilter(0,T)}f=!0}else if(k.length!=N.items.length)for(var L=0;L<k.length;L++){var h=k[L].label,p="equal";h===""&&(p="NULL");var T=i.createfilter(u,h,p);i.addfilter(a,T)}else f=!1}else f=c(s,u,i)}this._loading||(f?this.addfilter(s.displayfield,i,!1):this.removefilter(s.displayfield,!1))}this._loading||this.applyfilters("filterrow")},_updatefilterrow:function(){var t=e('<div style="position: relative;" id="row00'+this.element.id+'"></div>'),n=0,r=this.columns.records.length,i=this.toThemeProperty("jqx-grid-cell");i+=" "+this.toThemeProperty("jqx-grid-cell-pinned"),i+=" "+this.toThemeProperty("jqx-grid-cell-filter-row");var s=r+10,o=new Array,u=this.that;this.filterrow[0].cells=o,t.height(this.filterrowheight),this.filterrow.children().detach(),this.filterrow.append(t),this._filterrowcache||(this._filterrowcache=new Array),this._initcolumntypes();var a=!1,f=new Array;for(var l=0;l<r;l++){var c=this.columns.records[l],h=c.width;h<c.minwidth&&(h=c.minwidth),h>c.maxwidth&&(h=c.maxwidth);var p=e('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+i+'"></div>');t.append(p),p.css("left",n),this.rtl?(p.css("z-index",s++),p.css("border-left-width","1px")):p.css("z-index",s--),p.width(h),p[0].left=n,!c.hidden||!c.hideable?n+=h:p.css("display","none"),o[o.length]=p[0];var d=!0;if(!this.rtl){if(this.groupable){var v=this.showrowdetailscolumn&&this.rowdetails?1:0;this.groups.length+v>l&&(d=!1)}this.showrowdetailscolumn&&this.rowdetails&&l==0&&(d=!1)}else{if(this.groupable){var v=this.showrowdetailscolumn&&this.rowdetails?1:0;this.groups.length+v+l>r-1&&(d=!1)}this.showrowdetailscolumn&&this.rowdetails&&l==r-1&&(d=!1)}if(d)if(c.filtertype=="custom"&&c.createfilterwidget){var m=function(){u._applyfilterfromfilterrow()};c.createfilterwidget(c,p,m)}else c.filterable&&(this._filterrowcache[c.datafield]?(a=!0,p.append(this._filterrowcache[c.datafield]),c._filterwidget=this._filterrowcache[c.datafield]):(this._addfilterwidget(c,p,h),f[c.datafield]=c._filterwidget))}this._filterrowcache=f,e.jqx.browser.msie&&e.jqx.browser.version<8&&t.css("z-index",s--),t.width(parseInt(n)+2),this.filterrow.addClass(i),this.filterrow.css("border-top-width","1px"),this.filterrow.css("border-right-width","0px"),a&&this._updatefilterrowui(!0)},_addfilterwidget:function(t,n,r){var i=this.that,s="";for(var o=0;o<i.dataview.filters.length;o++){var u=i.dataview.filters[o];if(u.datafield&&u.datafield==t.datafield){s=u.filter.getfilters()[0].value;break}}var a=function(n,i){var o=e('<input autocomplete="off" type="textarea"/>');o[0].id=e.jqx.utilities.createId(),o.addClass(n.toThemeProperty("jqx-widget")),o.addClass(n.toThemeProperty("jqx-input")),o.addClass(n.toThemeProperty("jqx-rc-all")),o.addClass(n.toThemeProperty("jqx-widget-content")),n.rtl&&o.css("direction","rtl"),n.disabled&&o.attr("disabled",!0),o.attr("disabled",!1),o.appendTo(i),o.width(r-10),o.height(n.filterrowheight-10),o.css("margin","4px"),t.createfilterwidget&&t.createfilterwidget(t,i,o),t._filterwidget=o,o.focus(function(){return n.content[0].scrollLeft=0,setTimeout(function(){n.content[0].scrollLeft=0},10),n.focusedfilter=o,o.addClass(n.toThemeProperty("jqx-fill-state-focus")),!1}),o.blur(function(){o.removeClass(n.toThemeProperty("jqx-fill-state-focus"))}),o.keydown(function(e){e.keyCode=="13"&&n._applyfilterfromfilterrow(),o[0]._writeTimer&&clearTimeout(o[0]._writeTimer),o[0]._writeTimer=setTimeout(function(){n._loading||n["_oldWriteText"+o[0].id]!=o.val()&&(n._applyfilterfromfilterrow(),n["_oldWriteText"+o[0].id]=o.val())},800),n.focusedfilter=o}),n.host.removeClass("jqx-disableselect"),n.content.removeClass("jqx-disableselect"),o.val(s)};t.datatype!=null&&(t.filtertype=="number"&&(t.datatype=="string"||t.datatype=="date"||t.datatype=="bool")&&(t.filtertype="textbox"),t.filtertype=="date"&&(t.datatype=="string"||t.datatype=="number"||t.datatype=="bool")&&(t.filtertype="textbox"),t.filtertype=="bool"&&(t.datatype=="string"||t.datatype=="number"||t.datatype=="date")&&(t.filtertype="textbox"));switch(t.filtertype){case"number":var f=e("<div></div>");f.width(n.width()),f.height(this.filterrowheight),n.append(f);var r=n.width()-20,l=function(t,n,r){var o=e('<input style="float: left;" autocomplete="off" type="textarea"/>');return i.rtl&&(o.css("float","right"),o.css("direction","rtl")),o[0].id=e.jqx.utilities.createId(),o.addClass(i.toThemeProperty("jqx-widget")),o.addClass(i.toThemeProperty("jqx-input")),o.addClass(i.toThemeProperty("jqx-rc-all")),o.addClass(i.toThemeProperty("jqx-widget-content")),o.appendTo(t),o.width(n-10),i.disabled&&o.attr("disabled",!0),o.attr("disabled",!1),o.height(i.filterrowheight-10),o.css("margin","4px"),o.css("margin-right","2px"),o.focus(function(){i.focusedfilter=o,o.addClass(i.toThemeProperty("jqx-fill-state-focus"))}),o.blur(function(){o.removeClass(i.toThemeProperty("jqx-fill-state-focus"))}),o.keydown(function(e){e.keyCode=="13"&&i._applyfilterfromfilterrow(),o[0]._writeTimer&&clearTimeout(o[0]._writeTimer),o[0]._writeTimer=setTimeout(function(){i._loading||i["_oldWriteText"+o[0].id]!=o.val()&&(i._applyfilterfromfilterrow(),i["_oldWriteText"+o[0].id]=o.val())},800),i.focusedfilter=o}),o.val(s),o};l(f,r);var c=i._getfiltersbytype("number"),h=e("<div class='filter' style='float: left;'></div>");h.css("margin-top","4px"),h.appendTo(f),i.rtl&&h.css("float","right");var p=0;if(t.filtercondition!=null){var d=c.indexOf(t.filtercondition);d!=-1&&(p=d)}h.jqxDropDownList({disabled:i.disabled,touchMode:i.touchmode,rtl:i.rtl,dropDownHorizontalAlignment:"right",enableBrowserBoundsDetection:!0,selectedIndex:p,width:18,height:21,dropDownHeight:150,dropDownWidth:170,source:c,theme:i.theme}),h.jqxDropDownList({selectionRenderer:function(e){return""}}),h.jqxDropDownList("setContent",""),h.find(".jqx-dropdownlist-content").hide(),t.createfilterwidget&&t.createfilterwidget(t,n,f),t._filterwidget=f;var v=null;this.addHandler(h,"select",function(){var e=h.jqxDropDownList("getSelectedItem").label;t._filterwidget.find("input").val().length>0&&!i.refreshingfilter?i._applyfilterfromfilterrow():t._filterwidget.find("input").val().length==0&&!i.refreshingfilter&&(v=="null"||v=="not null"||e=="null"||e=="not null")&&i._applyfilterfromfilterrow(),v=e});break;case"textbox":case"default":default:a(this,n);break;case"none":break;case"date":if(this.host.jqxDateTimeInput){var m=e("<div></div>");m.css("margin","4px"),m.appendTo(n);var g={calendar:this.gridlocalization,todayString:this.gridlocalization.todaystring,clearString:this.gridlocalization.clearstring};m.jqxDateTimeInput({disabled:i.disabled,localization:g,rtl:i.rtl,showFooter:!0,formatString:t.cellsformat,selectionMode:"range",value:null,theme:this.theme,width:r-10,height:this.filterrowheight-10}),t.createfilterwidget&&t.createfilterwidget(t,n,m),t._filterwidget=m,this.addHandler(m,"valuechanged",function(e){i.refreshingfilter||(i._applyfilterfromfilterrow(),i.focusedfilter=null)})}else a(this,n);break;case"list":case"checkedlist":if(this.host.jqxDropDownList){var y=this._getfilterdataadapter(t),b=!1,h=e("<div></div>");h.css("margin","4px");var w=t.datafield,E=t.filtertype=="checkedlist"?!0:!1,S=r<150?220:"auto";y.dataBind();var x=y.records,T=x.length<8?!0:!1;b=T,h.appendTo(n),h.jqxDropDownList({disabled:i.disabled,touchMode:i.touchmode,rtl:i.rtl,checkboxes:E,dropDownWidth:S,source:y.records,autoDropDownHeight:T,theme:this.theme,width:r-10,height:this.filterrowheight-10,displayMember:t.displayfield,valueMember:w});var N=h.jqxDropDownList("listBox");if(E){h.jqxDropDownList({selectionRenderer:function(){return i.gridlocalization.filterselectstring}});var C=e('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+i.gridlocalization.filterselectstring+"</span>");C.addClass(this.toThemeProperty("jqx-item"));if(N!=undefined){b||N.host.height(200),N.insertAt(i.gridlocalization.filterselectallstring,0),h.jqxDropDownList("setContent",C);var k=!0,L=new Array;N.checkAll(!1),i.addHandler(N.host,"checkChange",function(e){h[0]._selectionChanged=!0;if(!k)return;if(e.args.label!=i.gridlocalization.filterselectallstring){k=!1,N.host.jqxListBox("checkIndex",0,!0,!1);var t=N.host.jqxListBox("getCheckedItems"),n=N.host.jqxListBox("getItems");t.length==1?N.host.jqxListBox("uncheckIndex",0,!0,!1):n.length!=t.length&&N.host.jqxListBox("indeterminateIndex",0,!0,!1),k=!0}else k=!1,e.args.checked?N.host.jqxListBox("checkAll",!1):N.host.jqxListBox("uncheckAll",!1),k=!0})}}else N.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),h.jqxDropDownList({selectedIndex:0});t.createfilterwidget&&t.createfilterwidget(t,n,h),t._filterwidget=h;var A=h.jqxDropDownList("dropdownlistWrapper");t.filtertype=="list"?this.addHandler(h,"select",function(e){i.refreshingfilter||e.args&&e.args.type!="none"&&(i._applyfilterfromfilterrow(),i.focusedfilter=null)}):this.addHandler(h,"close",function(e){h[0]._selectionChanged&&(i._applyfilterfromfilterrow(),i.focusedfilter=null,h[0]._selectionChanged=!1)})}else a(this,n);break;case"bool":case"boolean":if(this.host.jqxCheckBox){var O=e('<div tabIndex=0 style="opacity: 0.99; position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"></div>');O.appendTo(n),O.jqxCheckBox({disabled:i.disabled,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,hasThreeStates:!0,theme:this.theme,checked:null}),t.createfilterwidget&&t.createfilterwidget(t,n,O),s===!0||s=="true"?O.jqxCheckBox({checked:!0}):(s===!1||s=="false")&&O.jqxCheckBox({checked:!1}),t._filterwidget=O,this.addHandler(O,"change",function(e){i.refreshingfilter||e.args&&(i.focusedfilter=null,i._applyfilterfromfilterrow())})}else a(this,n)}},_getfilterdataadapter:function(t){var n=this.source._source?!0:!1;if(!n)dataadapter=new e.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[t.displayfield],autoSort:!0,autoSortField:t.displayfield,async:!1});else{var r={localdata:this.source.records,datatype:this.source.datatype,async:!1},i=this;dataadapter=new e.jqx.dataAdapter(r,{autoBind:!1,autoSort:!0,autoSortField:t.displayfield,async:!1,uniqueDataFields:[t.displayfield],beforeLoadComplete:function(e){var n=new Array;if(t.cellsformat){var r=i._getcolumntypebydatafield(t);for(var s=0;s<e.length;s++){n.push(e[s]);var o=e[s][t.displayfield];e[s][t.displayfield+"JQValue"]=o;if(r==="date")e[s][t.displayfield]=dataadapter.formatDate(o,t.cellsformat,i.gridlocalization);else if(r==="number"||r==="float"||r==="int")e[s][t.displayfield]=dataadapter.formatNumber(o,t.cellsformat,i.gridlocalization)}return n}return e}})}if(t.filteritems&&t.filteritems.length>0){var r={localdata:t.filteritems,datatype:this.source.datatype,async:!1};dataadapter=new e.jqx.dataAdapter(r,{autoBind:!1,async:!1})}else if(t.filteritems){if(t.filteritems._source)return t.filteritems._options.autoBind=!1,t.filteritems._options.async=!1,t.filteritems;if(e.isFunction(t.filteritems))return t.filteritems()}return dataadapter},refreshfilterrow:function(){if(!this.showfilterrow)return;this.refreshingfilter=!0,this._updatefilterrowui(),this._updatelistfilters(!0,!0);var t=this.that,n=this.columns.records.length;for(var r=0;r<n;r++){var i=this.columns.records[r];if(i.filterable&&i.filter){var s=i.filter.getfilters();if(s.length>0){var o=s[0].value,u=i._filterwidget,a=i._filterwidget.parent();if(u!=null)switch(i.filtertype){case"number":a.find("input").val(o);if(this.host.jqxDropDownList){var f=i.filter.getoperatorsbyfiltertype("numericfilter");u.find(".filter").jqxDropDownList("selectIndex",f.indexOf(s[0].condition))}break;case"date":if(this.host.jqxDateTimeInput){var o=i.filter.getfilterat(0).filtervalue;if(o!=undefined){if(i.filter.getfilterat(1))var l=i.filter.getfilterat(1).filtervalue;else l=o;e(a.children()[0]).jqxDateTimeInput("setRange",new Date(o),new Date(l))}}else u.val(o);break;case"textbox":case"default":u.val(o),t["_oldWriteText"+u[0].id]=o;break;case"bool":case"boolean":this.host.jqxCheckBox?e(a.children()[0]).jqxCheckBox({checked:o}):u.val(o)}}}}this.refreshingfilter=!1},_destroyedfilters:function(){var t=this.that,n=this.columns.records.length;for(var r=0;r<n;r++){var i=this.columns.records[r];if(i.filterable){var s=i._filterwidget;if(i.filtertype=="list"||i.filtertype=="checkedlist")this.removeHandler(s,"select"),this.removeHandler(s,"close"),s.jqxDropDownList("destroy");else if(i.filtertype=="date")this.removeHandler(s,"valuechanged"),s.jqxDateTimeInput("destroy");else if(i.filtertype=="bool")this.removeHandler(s,"change"),s.jqxCheckBox("destroy");else if(i.filtertype=="number"){var o=s.find(".jqx-input");this.removeHandler(o,"keydown");var u=e(s.children()[1]);u.jqxDropDownList("destroy")}else this.removeHandler(s,"keydown");s.remove()}}},_updatelistfilters:function(t,n){var r=this.that,i=this.columns.records.length;for(var s=0;s<i;s++){var o=this.columns.records[s];if(o.filterable)if(o.filtertype=="list"||o.filtertype=="checkedlist"){var u=o._filterwidget;if(!t){if(o.filter==undefined){u.jqxDropDownList("renderSelection");continue}}else{var a=this._getfilterdataadapter(o);u.jqxDropDownList({source:a});var f=u.jqxDropDownList("getItems"),l=!0;f.length!=a.records.length+1&&(l=!1);if(l)for(var c=1;c<f.length;c++)if(f[c].label!=a.records[c-1][o.displayfield]){l=!1;break}if(l&&!n)continue}var h=o.filtertype=="checkedlist"?!0:!1,f=u.jqxDropDownList("getItems"),p=u.jqxDropDownList("listBox");u.jqxDropDownList("dataBind");if(h){u.jqxDropDownList({selectionRenderer:function(){return r.gridlocalization.filterselectstring}}),p.insertAt(this.gridlocalization.filterselectallstring,0),u.jqxDropDownList("setContent",this.gridlocalization.filterselectstring),p.checkAll(!1);if(o.filter){var d=o.filter.getfilters();for(var c=0;c<p.items.length;c++){var v=p.items[c].label;e.each(d,function(){this.condition=="NOT_EQUAL"?v==this.value?p.uncheckIndex(c,!1,!1):p.checkIndex(c,!1,!1):this.condition=="EQUAL"&&(v==this.value?p.checkIndex(c,!1,!1):p.uncheckIndex(c,!1,!1))})}p._updateCheckedItems();var m=p.getCheckedItems().length;p.items.length!=m&&m>0&&p.host.jqxListBox("indeterminateIndex",0,!0,!1)}}else{p.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),u.jqxDropDownList({selectedIndex:0});if(o.filter){var d=o.filter.getfilters(),g=-1;for(var c=0;c<p.items.length;c++){var v=p.items[c].label;e.each(d,function(){if(this.condition=="NOT_EQUAL")return!0;if(v==this.value)return g=c,!1})}g!=-1&&p.selectIndex(g)}}f.length<8?u.jqxDropDownList("autoDropDownHeight",!0):u.jqxDropDownList("autoDropDownHeight",!1)}}},_renderfiltercolumn:function(){var t=this.that;this.filterable&&e.each(this.columns.records,function(n,r){var i=!1;t.autoshowfiltericon?this.filter?(e(this.filtericon).show(),i=!0):e(this.filtericon).hide():this.filterable&&(e(this.filtericon).show(),i=!0),this.align=="right"&&!this.renderer&&(i?this.element.firstChild.firstChild.style.marginRight="18px":this.element.firstChild.firstChild.style.marginRight="2px")})},_initcolumntypes:function(){if(this.columns&&this.columns.records){var t=this.source._source.datafields;if(t)for(var n=0;n<this.columns.records.length;n++){var r=this.columns.records[n];if(r.datatype)continue;var i="";e.each(t,function(){if(this.name==r.displayfield)return this.type&&(i=this.type),!1}),i!=""?r.datatype=i:r.datatype=""}}},_getcolumntypebydatafield:function(t){var n=this.that,r="string",i=n.source.datafields||(n.source._source?n.source._source.datafields:null);if(i){var s="";e.each(i,function(){if(this.name==t.displayfield)return this.type&&(s=this.type),!1});if(s)return s}if(t!=null){if(this.dataview.cachedrecords==undefined)return r;var o=null;if(!this.virtualmode){if(this.dataview.cachedrecords.length==0)return r;o=this.dataview.cachedrecords[0][t.displayfield];if(o!=null&&o.toString()=="")return"string"}else e.each(this.dataview.cachedrecords,function(){return o=this[t.displayfield],!1});if(o!=null)if(typeof o=="boolean")r="boolean";else if(e.jqx.dataFormat.isNumber(o))r="number";else{var u=new Date(o);if(u.toString()=="NaN"||u.toString()=="Invalid Date")if(e.jqx.dataFormat){u=e.jqx.dataFormat.tryparsedate(o);if(u!=null){if(u&&u.getFullYear()&&u.getFullYear()==1970&&u.getMonth()==0&&u.getDate()==1){var a=new Number(o);return isNaN(a)?"string":"number"}return"date"}r="string"}else r="string";else r="date"}}return r},_getfiltersbytype:function(e){var t=this.that,n="";switch(e){case"number":case"float":case"int":n=t.gridlocalization.filternumericcomparisonoperators;break;case"date":n=t.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":n=t.gridlocalization.filterbooleancomparisonoperators;break;case"string":default:n=t.gridlocalization.filterstringcomparisonoperators}return n},_updatefilterpanel:function(t,n,r){if(t==null||t==undefined)t=this;var i=t._getcolumntypebydatafield(r),s=t._getfiltersbytype(i);if(!t.host.jqxDropDownList)throw new Error("jqxGrid: Missing reference to jqxdropdownlist.js.");var o=e(n),u=o.find("#filterclearbutton"+t.element.id),a=o.find("#filterbutton"+t.element.id),f=o.find("#filter1"+t.element.id),l=o.find("#filter2"+t.element.id),c=o.find("#filter3"+t.element.id),h=o.find(".filtertext1"+t.element.id),p=o.find(".filtertext2"+t.element.id);h.val(""),p.val(""),this.removeHandler(a,"click"),this.addHandler(a,"click",function(){t._buildfilter(t,n,r),t._closemenu()}),this.removeHandler(u,"click"),this.addHandler(u,"click",function(){t._clearfilter(t,n,r),t._closemenu()});if(this.filtermode==="default"){f.jqxDropDownList("source")!=s&&(f.jqxDropDownList({enableBrowserBoundsDetection:!1,source:s}),c.jqxDropDownList({enableBrowserBoundsDetection:!1,source:s}));if(i=="boolean"||i=="bool")f.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0}),c.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0});else{var d=!1;s&&s.length&&s.length<5&&(d=!0),f.jqxDropDownList({autoDropDownHeight:d,selectedIndex:2}),c.jqxDropDownList({autoDropDownHeight:d,selectedIndex:2})}l.jqxDropDownList({selectedIndex:0});var v=r.filter,m=new e.jqx.filter,g="";switch(i){case"number":case"int":case"float":case"decimal":g="numericfilter",E=m.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":g="booleanfilter",E=m.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":g="datefilter",E=m.getoperatorsbyfiltertype("datefilter");break;case"string":g="stringfilter",E=m.getoperatorsbyfiltertype("stringfilter")}if(v!=null){var y=v.getfilterat(0),b=v.getfilterat(1),w=v.getoperatorat(0);if(t.updatefilterconditions){var E=[],S=t.updatefilterconditions(g,E);if(S!=undefined){for(var x=0;x<S.length;x++)S[x]=S[x].toUpperCase();v.setoperatorsbyfiltertype(g,S),E=S}}var T=this.enableanimations?"default":"none";if(y!=null){var N=E.indexOf(y.comparisonoperator),C=y.filtervalue;h.val(C),f.jqxDropDownList({selectedIndex:N,animationType:T})}if(b!=null){var k=E.indexOf(b.comparisonoperator),L=b.filtervalue;p.val(L),c.jqxDropDownList({selectedIndex:k,animationType:T})}v.getoperatorat(0)==undefined?l.jqxDropDownList({selectedIndex:0,animationType:T}):v.getoperatorat(0)=="and"||v.getoperatorat(0)==0?l.jqxDropDownList({selectedIndex:0}):l.jqxDropDownList({selectedIndex:1})}t.updatefilterpanel&&t.updatefilterpanel(f,c,l,h,p,a,u,v,g,E),h.focus(),setTimeout(function(){h.focus()},10)}else{var A=t._getfilterdataadapter(r),g=t._getfiltertype(i);r.cellsformat?f.jqxListBox({displayMember:r.displayfield,valueMember:r.displayfield+"JQValue",source:A}):f.jqxListBox({displayMember:r.displayfield,valueMember:r.displayfield,source:A}),f.jqxListBox("insertAt",t.gridlocalization.filterselectallstring,0);var O=f.data().jqxListBox.instance;O.checkAll(!1);var M=this;if(r.filter){O.uncheckAll(!1);var _=r.filter.getfilters();for(var D=0;D<O.items.length;D++){var P=O.items[D].value;e.each(_,function(){if(this.condition=="NOT_EQUAL"){if(P!=this.value)return O.uncheckIndex(D,!1,!1),!1}else if(this.condition=="EQUAL"&&P==this.value)return O.checkIndex(D,!1,!1),!1})}O._updateCheckedItems();var H=O.getCheckedItems().length;O.items.length!=H&&H>0&&O.host.jqxListBox("indeterminateIndex",0,!0,!1),H===O.items.length-1&&O.host.jqxListBox("checkIndex",0,!0,!1)}}},_getfiltertype:function(e){var t="stringfilter";switch(e){case"number":case"int":case"float":case"decimal":t="numericfilter";break;case"boolean":case"bool":t="booleanfilter";break;case"date":case"time":t="datefilter";break;case"string":t="stringfilter"}return t},_buildfilter:function(t,n,r){var i=e(n).find("#filter1"+t.element.id),s=e(n).find("#filter2"+t.element.id),o=e(n).find("#filter3"+t.element.id),u=e(n).find(".filtertext1"+t.element.id),a=e(n).find(".filtertext2"+t.element.id),f=u.val(),l=a.val(),c=t._getcolumntypebydatafield(r),h=t._getfiltersbytype(c),p=new e.jqx.filter,d=t._getfiltertype(c);if(t.filtermode==="default"){var v=i.jqxDropDownList("selectedIndex"),m=s.jqxDropDownList("selectedIndex"),g=o.jqxDropDownList("selectedIndex"),y=null,b=null;if(t.updatefilterconditions){var w=t.updatefilterconditions(d,p.getoperatorsbyfiltertype(d));w!=undefined&&p.setoperatorsbyfiltertype(d,w)}var E=!1,S=p.getoperatorsbyfiltertype(d)[v],o=p.getoperatorsbyfiltertype(d)[g],x=S=="NULL"||S=="NOT_NULL",T=S=="EMPTY"||S=="NOT_EMPTY";S==undefined&&(S=p.getoperatorsbyfiltertype(d)[0]),o==undefined&&(o=p.getoperatorsbyfiltertype(d)[0]);if(f.length>0||x||T)y=p.createfilter(d,f,S,null,r.cellsformat,t.gridlocalization),p.addfilter(m,y),E=!0;var N=o=="NULL"||o=="NOT_NULL",C=o=="EMPTY"||o=="NOT_EMPTY";if(l.length>0||N||C)b=p.createfilter(d,l,o,null,r.cellsformat,t.gridlocalization),p.addfilter(m,b),E=!0;if(E){var k=r.displayfield;this.addfilter(k,p,!0)}else this._clearfilter(t,n,r)}else{var L=this,A=!1,O=i.data().jqxListBox.instance,M=O.getCheckedItems();if(M.length==0){for(var _=1;_<O.items.length;_++){var D=O.items[_].value,P="not_equal",H=p.createfilter(d,D,P,null);p.addfilter(0,H)}A=!0}else if(M.length!=O.items.length){A=!0;for(var _=0;_<M.length;_++){if(t.gridlocalization.filterselectallstring===M[_].value)continue;var D=M[_].value,P="equal",H=p.createfilter(d,D,P,null),B=1;p.addfilter(B,H)}}else A=!1;if(A){var k=r.displayfield;this.addfilter(k,p,!0)}else{var k=r.displayfield;this.removefilter(k,!0)}}},_clearfilter:function(e,t,n){var r=n.displayfield;this.removefilter(r,!0)},addfilter:function(e,t,n){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var r=this.getcolumn(e),i=this._getcolumn(e);if(r==undefined||r==null)return;r.filter=t,i.filter=t,this.dataview.addfilter(e,t),n==1&&n!=undefined&&this.applyfilters("add")},removefilter:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var n=this.getcolumn(e),r=this._getcolumn(e);if(n==undefined||n==null)return;if(n.filter==null)return;this.dataview.removefilter(e,n.filter),n.filter=null,r.filter=null,(t==1||t!==!1)&&this.applyfilters("remove")},applyfilters:function(t){var n=!1;if(this.dataview.filters.length>=0&&(this.virtualmode||!this.source.localdata)&&this.source!=null&&this.source.filter){var r=-1;this.pageable?(r=this.dataview.pagenum,this.dataview.pagenum=0):(this.vScrollInstance.setPosition(0),this.loadondemand=!0,this._renderrows(this.virtualsizeinfo)),this.pageable&&this.virtualmode&&(this.dataview.pagenum=0),this.source.filter(this.dataview.filters,this.dataview.records,this.dataview.records.length),this.pageable&&!this.virtualmode&&(this.dataview.pagenum=r)}this.dataview.clearsortdata&&this.dataview.clearsortdata();if(!!this.virtualmode){this.pageable&&(this.dataview.updateview(),this.gotopage&&this.gotopage(0)),this.rendergridcontent(!1,!1),this.showfilterrow&&typeof t!="string"&&e.isEmptyObject(t)&&this.refreshfilterrow(),this._raiseEvent(13,{filters:this.dataview.filters});return}var i=this.selectedrowindexes,s=this.that;this.dataview.refresh();if(this.dataview.clearsortdata&&this.sortcolumn&&this.sortdirection){var o=this.sortdirection.ascending?"asc":"desc";this._loading?this.sortby(this.sortcolumn,o,null,!1,!1):this.sortby(this.sortcolumn,o,null,!1)}this.pageable&&(this.dataview.updateview(),this.gotopage&&(this.gotopage(0),this.updatepagerdetails())),this._updaterowsproperties(),!this.groupable||this.groupable&&this.groups.length==0?(this._rowdetailscache=new Array,this.virtualsizeinfo=null,this._pagescache=new Array,this.columns&&this.columns.records&&this.columns.records.length>0&&!this.columns.records[0].filtericon&&(this.prerenderrequired=!0),this.rendergridcontent(!0,!1),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates()):(this._rowdetailscache=new Array,this._render(!0,!0,!1,!1,!1),this.showfilterrow&&this._updatefocusedfilter(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)),this.showfilterrow&&typeof t!="string"&&e.isEmptyObject(t)&&this.refreshfilterrow(),this._raiseEvent(13,{filters:this.dataview.filters})},getfilterinformation:function(){var e=new Array;for(var t=0;t<this.dataview.filters.length;t++){var n=this.getcolumn(this.dataview.filters[t].datafield);e[t]={filter:this.dataview.filters[t].filter,filtercolumn:n.datafield,filtercolumntext:n.text}}return e},clearfilters:function(t){var n=this.that;this.showfilterrow&&this.clearfilterrow();if(this.columns.records){var r=t==1||t!==!1;e.each(this.columns.records,function(){n.removefilter(this.displayfield,!r)})}if(t===!1)return;(t==1||t!==!1)&&this.applyfilters("clear")},_destroyfilterpanel:function(){var t=e(e.find("#filterclearbutton"+this.element.id)),n=e(e.find("#filterbutton"+this.element.id)),r=e(e.find("#filter1"+this.element.id)),i=e(e.find("#filter2"+this.element.id)),s=e(e.find("#filter3"+this.element.id)),o=e(e.find(".filtertext1"+this.element.id)),u=e(e.find(".filtertext2"+this.element.id));o.length>0&&u.length>0&&(o.removeClass(),u.removeClass(),o.remove(),u.remove()),t.length>0&&(t.jqxButton("destroy"),n.jqxButton("destroy"),this.removeHandler(t,"click"),this.removeHandler(n,"click")),r.length>0&&r.jqxDropDownList("destroy"),i.length>0&&i.jqxDropDownList("destroy"),s.length>0&&s.jqxDropDownList("destroy")},_initfilterpanel:function(t,n,r,i){if(t==null||t==undefined)t=this;n[0].innerHTML="";var s=e("<div class='filter' style='margin-left: 7px;'></div>");n.append(s);var o=e("<div class='filter' style='margin-top: 3px; margin-bottom: 3px;'></div>");o.text(t.gridlocalization.filtershowrowstring);var u=e("<div class='filter' id='filter1"+t.element.id+"'></div>"),a=e("<div class='filter' id='filter2"+t.element.id+"' style='margin-bottom: 3px;'></div>"),f=e("<div class='filter' id='filter3"+t.element.id+"'></div>"),l=t._getcolumntypebydatafield(r);if(!u.jqxDropDownList)throw new Error("jqxGrid: jqxdropdownlist.js is not loaded.");var c=t._getfiltersbytype(l),h=e("<div class='filter'><input class='filtertext1"+t.element.id+"' style='height: 20px; margin-top: 3px; margin-bottom: 3px;' type='text'></input></div>"),p=h.find("input");p.addClass(this.toThemeProperty("jqx-input")),p.addClass(this.toThemeProperty("jqx-widget-content")),p.addClass(this.toThemeProperty("jqx-rc-all")),p.width(i-15);var d=e("<div class='filter'><input class='filtertext2"+t.element.id+"' style='height: 20px; margin-top: 3px;' type='text'></input></div>"),v=d.find("input");v.addClass(this.toThemeProperty("jqx-input")),v.addClass(this.toThemeProperty("jqx-widget-content")),v.addClass(this.toThemeProperty("jqx-rc-all")),v.width(i-15),t.rtl&&(p.css("direction","rtl"),v.css("direction","rtl"));var m=e("<div class='filter' style='height: 25px; margin-left: 20px; margin-top: 7px;'></div>"),g=e('<span tabIndex=0 id="filterbutton'+t.element.id+'" class="filterbutton" style="padding: 4px 12px; margin-left: 2px;">'+t.gridlocalization.filterstring+"</span>");m.append(g);var y=e('<span tabIndex=0 id="filterclearbutton'+t.element.id+'" class="filterclearbutton" style="padding: 4px 12px; margin-left: 5px;">'+t.gridlocalization.filterclearstring+"</span>");m.append(y),g.jqxButton({height:20,theme:t.theme}),y.jqxButton({height:20,theme:t.theme});var b=function(e){if(e){if(e.text().indexOf("case sensitive")!=-1){var n=e.text();n=n.replace("case sensitive","match case"),e.text(n)}return e.css("font-family",t.host.css("font-family")),e.css("font-size",t.host.css("font-size")),e}return""};if(this.filtermode==="default"){s.append(o),s.append(u),u.jqxDropDownList({_checkForHiddenParent:!1,rtl:t.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:i-15,height:20,dropDownHeight:150,dropDownWidth:i-15,selectionRenderer:b,source:c,theme:t.theme}),s.append(h);var w=new Array;w[0]=t.gridlocalization.filterandconditionstring,w[1]=t.gridlocalization.filterorconditionstring,a.jqxDropDownList({_checkForHiddenParent:!1,rtl:t.rtl,enableBrowserBoundsDetection:!1,autoDropDownHeight:!0,selectedIndex:0,width:60,height:20,source:w,selectionRenderer:b,theme:t.theme}),s.append(a),f.jqxDropDownList({_checkForHiddenParent:!1,rtl:t.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:i-15,height:20,dropDownHeight:150,dropDownWidth:i-15,selectionRenderer:b,source:c,theme:t.theme}),s.append(f),s.append(d)}else{s.append(o),s.append(u),u.jqxListBox({rtl:t.rtl,_checkForHiddenParent:!1,checkboxes:!0,selectedIndex:2,width:i-15,height:120,theme:t.theme});var E=!0;t.addHandler(u,"checkChange",function(e){if(!E)return;if(e.args.label!=t.gridlocalization.filterselectallstring){E=!1,u.jqxListBox("checkIndex",0,!0,!1);var n=u.jqxListBox("getCheckedItems"),r=u.jqxListBox("getItems");n.length==1?u.jqxListBox("uncheckIndex",0,!0,!1):r.length!=n.length&&u.jqxListBox("indeterminateIndex",0,!0,!1),E=!0}else E=!1,e.args.checked?u.jqxListBox("checkAll",!1):u.jqxListBox("uncheckAll",!1),E=!0})}s.append(m),t.updatefilterpanel&&t.updatefilterpanel(u,f,a,h,d,g,y,null,null,c)}})}(jQuery),function(e){e.jqx.dataview.sort=function(){this.sortby=function(t,n,r){var i=Object.prototype.toString;if(n==null){this.sortdata=null,this.refresh();return}n==undefined&&(n=!0),n=="a"||n=="asc"||n=="ascending"||n==1?n=!0:n=!1;var s=t;this.sortfield=t,this.sortfielddirection=n?"asc":"desc",this.sortcache==undefined&&(this.sortcache={}),this.sortdata=[];var o=[],u=!1;s=="constructor"&&(s="");if(!this.virtualmode&&this.sortcache[s]!=null){var a=this.sortcache[s];o=a._sortdata,a.direction==n?o.reverse():(!a.direction&&n&&o.reverse(),u=!0),o.length<this.totalrecords&&(this.sortcache={},u=!1,o=[])}Object.prototype.toString=typeof t=="function"?t:function(){return this[t]};var f=this.records,l=this.that,c="";this.source.datafields&&e.each(this.source.datafields,function(){if(this.name==t)return this.type&&(c=this.type),!1});if(o.length==0)if(f.length){var h=f.length;for(var p=0;p<h;p++){var d=f[p];if(d!=null){var v=d,m=v.toString();o.push({sortkey:m,value:v,index:p})}}}else{var g=!1;for(obj in f){var d=f[obj];if(d==undefined){g=!0;break}var v=d;o.push({sortkey:v.toString(),value:v,index:obj})}g&&e.each(f,function(e,t){o.push({sortkey:t.toString(),value:t,index:e})})}if(!u)if(r==null){this._sortcolumntype=c;var y=this;o.sort(function(e,t){return y._compare(e,t,c)})}else o.sort(r);n||o.reverse(),Object.prototype.toString=i,this.sortdata=o,this.sortcache[s]={_sortdata:o,direction:n},this.reload(this.records,this.rows,this.filters,this.updated,!0)},this.clearsortdata=function(){this.sortcache={},this.sortdata=null},this._compare=function(t,n,r){var t=t.sortkey,n=n.sortkey;t===undefined&&(t=null),n===undefined&&(n=null);if(t===null&&n===null)return 0;if(t===null&&n!==null)return-1;if(t!==null&&n===null)return 1;if(e.jqx.dataFormat)if(r&&r!="")switch(r){case"number":case"int":case"float":if(t<n)return-1;if(t>n)return 1;return 0;case"date":case"time":if(t<n)return-1;if(t>n)return 1;return 0;case"string":case"text":t=String(t).toLowerCase(),n=String(n).toLowerCase()}else{if(e.jqx.dataFormat.isNumber(t)&&e.jqx.dataFormat.isNumber(n))return t<n?-1:t>n?1:0;if(e.jqx.dataFormat.isDate(t)&&e.jqx.dataFormat.isDate(n))return t<n?-1:t>n?1:0;!e.jqx.dataFormat.isNumber(t)&&!e.jqx.dataFormat.isNumber(n)&&(t=String(t).toLowerCase(),n=String(n).toLowerCase())}try{if(t<n)return-1;if(t>n)return 1}catch(i){var s=i}return 0},this._equals=function(e,t){return this._compare(e,t)===0}},e.extend(e.jqx._jqxGrid.prototype,{_rendersortcolumn:function(){var t=this.that,n=this.getsortcolumn();if(this.sortdirection){var r=function(n,r){var i=t.getcolumn(n);i&&(r.ascending?e.jqx.aria(i.element,"aria-sort","ascending"):r.descending?e.jqx.aria(i.element,"aria-sort","descending"):e.jqx.aria(i.element,"aria-sort","none"))};this._oldsortinfo&&this._oldsortinfo.column&&r(this._oldsortinfo.column,{ascending:!1,descending:!1}),r(n,this.sortdirection)}this._oldsortinfo={column:n,direction:this.sortdirection},this.sortdirection&&e.each(this.columns.records,function(r,i){var s=e.data(document.body,"groupsortelements"+this.displayfield);n==null||this.displayfield!=n?(e(this.sortasc).hide(),e(this.sortdesc).hide(),s!=null&&(s.sortasc.hide(),s.sortdesc.hide())):t.sortdirection.ascending?(e(this.sortasc).show(),e(this.sortdesc).hide(),s!=null&&(s.sortasc.show(),s.sortdesc.hide())):(e(this.sortasc).hide(),e(this.sortdesc).show(),s!=null&&(s.sortasc.hide(),s.sortdesc.show()))})},getsortcolumn:function(){return this.sortcolumn!=undefined?this.sortcolumn:null},removesort:function(){this.sortby(null)},sortby:function(e,t,n,r,i){if(this._loading&&i!==!1)throw new Error("jqxGrid: "+this.loadingerrormessage);e==null&&(t=null,e=this.sortcolumn);if(e!=undefined){var s=this.that;n==undefined&&s.source.sortcomparer!=null&&(n=s.source.sortcomparer),t=="a"||t=="asc"||t=="ascending"||t==1?ascending=!0:ascending=!1,t!=null?s.sortdirection={ascending:ascending,descending:!ascending}:s.sortdirection={ascending:!1,descending:!1},t!=null?s.sortcolumn=e:s.sortcolumn=null;if(s.source.sort||s.virtualmode){s.dataview.sortfield=e,t==null?s.dataview.sortfielddirection="":s.dataview.sortfielddirection=ascending?"asc":"desc";if(s.source.sort&&!this._loading){s.source.sort(e,t),s._raiseEvent(6,{sortinformation:s.getsortinformation()});return}}else s.dataview.sortby(e,t,n);if(r===!1)return;s.groupable&&s.groups.length>0?(s._render(!0,!1,!1),s._updategroupheadersbounds&&s.showgroupsheader&&s._updategroupheadersbounds()):(s.pageable&&s.dataview.updateview(),s._updaterowsproperties(),s.rendergridcontent(!0)),s._raiseEvent(6,{sortinformation:s.getsortinformation()})}},_togglesort:function(e){var t=this.that;if(this.disabled)return;if(e.sortable&&t.sortable){var n=t.getsortinformation(),r=null;n.sortcolumn!=null&&n.sortcolumn==e.displayfield?(r=n.sortdirection.ascending,t.sorttogglestates>1?r==1?r=!1:r=null:r=!r):r=!0,t.sortby(e.displayfield,r,null)}}})}(jQuery),function(e){e.extend(e.jqx._jqxGrid.prototype,{_initpager:function(){var t=this.that,n=this.gridlocalization.pagergotopagestring,r=this.gridlocalization.pagerrangestring,i=this.gridlocalization.pagershowrowsstring,s=(this.pagerheight-17)/2;this.pagerdiv=this.pagerdiv||e('<div style="width: 100%; height: 100%; position: relative;"></div>');if(!this.pageable){this.pagerdiv.remove(),this.vScrollBar.jqxScrollBar({thumbSize:0});return}if(!this.pagerrenderer){this.pagerdiv.css("top",s),this.pager.append(this.pagerdiv),this.pagergotoinput=this.pagergotoinput||e('<div style="margin-right: 7px; width: 27px; height: 17px; float: right;"><input style="margin-top: 0px; text-align: right; width: 27px;" type="text"/></div>'),this.pagergoto=this.pagergoto||e('<div style="float: right; margin-right: 7px;"></div>'),this.pagerrightbutton=this.pagerrightbutton||e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),this.pagerleftbutton=this.pagerleftbutton||e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),this.pagerdetails=this.pagerdetails||e('<div style="margin-right: 7px; float: right;"></div>'),this.pagershowrows=this.pagershowrows||e('<div style="margin-right: 7px; float: right;"></div>'),this.pagerbuttons=e('<div style="margin-right: 3px; float: right;"></div>'),this.pagershowrowscombo&&this.pagershowrowscombo.jqxDropDownList&&(this.pagershowrowscombo.remove(),this.pagershowrowscombo=null),this.pagergotoinput.attr("disabled",this.disabled),this.pagerfirstbutton=e('<div type="button" style="padding: 0px; margin-top: 0px; margin-left: 3px; margin-right: 3px; width: 27px; float: right;"></div>'),this.pagerlastbutton=e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),this.pagershowrowscombo=this.pagershowrowscombo||e('<div id="gridpagerlist" style="margin-top: 0px; margin-right: 7px; float: right;"></div>'),this.pagerdiv.children().remove(),this.pagershowrowscombo[0].id="gridpagerlist"+this.element.id,this.removeHandler(this.pagerrightbutton,"mousedown"),this.removeHandler(this.pagerrightbutton,"mouseup"),this.removeHandler(this.pagerrightbutton,"click"),this.removeHandler(this.pagerleftbutton,"mousedown"),this.removeHandler(this.pagerleftbutton,"mouseup"),this.removeHandler(this.pagerleftbutton,"click"),this.removeHandler(this.pagerfirstbutton,"mousedown"),this.removeHandler(this.pagerfirstbutton,"mouseup"),this.removeHandler(this.pagerfirstbutton,"click"),this.removeHandler(this.pagerlastbutton,"mousedown"),this.removeHandler(this.pagerlastbutton,"mouseup"),this.removeHandler(this.pagerlastbutton,"click"),this.pagerleftbutton.attr("title",this.gridlocalization.pagerpreviousbuttonstring),this.pagerrightbutton.attr("title",this.gridlocalization.pagernextbuttonstring);if(this.pagermode=="simple"){e.jqx.browser.msie&&e.jqx.browser.version<8&&(this.pagerbuttons.css("overflow","visible"),this.pagerbuttons.css("padding","3px")),this.pagerfirstbutton.attr("title",this.gridlocalization.pagerfirstbuttonstring),this.pagerlastbutton.attr("title",this.gridlocalization.pagerlastbuttonstring);var o=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");o.addClass(this.toThemeProperty("jqx-icon-arrow-first")),this.pagerfirstbutton.wrapInner(o);var u=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");u.addClass(this.toThemeProperty("jqx-icon-arrow-last")),this.pagerlastbutton.wrapInner(u),this.rtl?(this.pagerdiv.append(this.pagerlastbutton),this.pagerdiv.append(this.pagerrightbutton),this.pagerdiv.append(this.pagerbuttons),this.pagerdiv.append(this.pagerleftbutton),this.pagerdiv.append(this.pagerfirstbutton)):(this.pagerdiv.append(this.pagerfirstbutton),this.pagerdiv.append(this.pagerleftbutton),this.pagerdiv.append(this.pagerbuttons),this.pagerdiv.append(this.pagerrightbutton),this.pagerdiv.append(this.pagerlastbutton)),this.pagerlastbutton.jqxButton({cursor:"pointer",disabled:this.disabled,theme:this.theme}),this.pagerfirstbutton.jqxButton({cursor:"pointer",disabled:this.disabled,theme:this.theme});var a=this.rtl?"right":"left";this.pagerbuttons.css("float",a),this.pagerlastbutton.css("float",a),this.pagerfirstbutton.css("float",a),this.pagerrightbutton.css("float",a),this.pagerleftbutton.css("float",a),this.pagerdetails.css("float",this.rtl?"left":"right"),this.rtl?(this.pagerdetails.css("margin-left","7px"),this.pagerdetails.css("margin-right","0px")):(this.pagerdetails.css("margin-left","0px"),this.pagerdetails.css("margin-right","7px")),this.pagergotoinput.hide(),this.pagershowrowscombo.hide(),this.pagergoto.hide(),this.pagershowrows.hide()}else this.pagergotoinput.show(),this.pagershowrowscombo.show(),this.pagergoto.show(),this.pagershowrows.show(),this.rtl||(this.pagerdiv.append(this.pagerrightbutton),this.pagerdiv.append(this.pagerleftbutton));this.pagerrightbutton.jqxButton({cursor:"pointer",disabled:this.disabled,theme:this.theme}),this.pagerleftbutton.jqxButton({cursor:"pointer",disabled:this.disabled,theme:this.theme}),this.pagerleftbutton.find(".jqx-icon-arrow-left").remove(),this.pagerrightbutton.find(".jqx-icon-arrow-right").remove();var f=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");f.addClass(this.toThemeProperty("jqx-icon-arrow-left")),this.pagerleftbutton.wrapInner(f);var l=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");l.addClass(this.toThemeProperty("jqx-icon-arrow-right")),this.pagerrightbutton.wrapInner(l),this.rtl||this.pagerdiv.append(this.pagerdetails),this.pagermode!="simple"&&(this.rtl?(this.pagerdiv.append(this.pagergoto),this.pagerdiv.append(this.pagergotoinput),this.pagerdiv.append(this.pagershowrows),this.pagerdiv.append(this.pagershowrowscombo),this.pagerdiv.append(this.pagerdetails),this.pagerdiv.append(this.pagerrightbutton),this.pagerdiv.append(this.pagerleftbutton)):(this.pagerdiv.append(this.pagershowrowscombo),this.pagerdiv.append(this.pagershowrows),this.pagerdiv.append(this.pagergotoinput),this.pagerdiv.append(this.pagergoto)));var c=this.pagesizeoptions;if(!this.pagershowrowscombo.jqxDropDownList)throw new Error("jqxGrid: jqxdropdownlist.js is not loaded.");this.pagershowrowscombo.jqxDropDownList({rtl:this.rtl,disabled:this.disabled,source:c,enableBrowserBoundsDetection:!0,keyboardSelection:!1,autoDropDownHeight:!0,width:"auto",height:16,theme:this.theme});var h=0;for(var p=0;p<c.length;p++)this.pagesize>=c[p]&&(h=p);this.pagershowrows[0].innerHTML=i,this.pagergoto[0].innerHTML=n,this.updatepagerdetails(),this.pagershowrowscombo.jqxDropDownList({selectedIndex:h}),this.pagerpageinput=this.pagergotoinput.find("input"),this.pagerpageinput.addClass(this.toThemeProperty("jqx-input")),this.pagerpageinput.addClass(this.toThemeProperty("jqx-widget-content")),this.rtl&&this.pagerpageinput.css("direction","rtl");var t=this.that;this.removeHandler(this.pagershowrowscombo,"select"),this.addHandler(this.pagershowrowscombo,"select",function(e){if(e.args){t.vScrollInstance&&t.vScrollInstance.setPosition(0),t.editcell!=null&&t.endcelledit&&t.endcelledit(t.editcell.row,t.editcell.column,!0,!1);var n=e.args.index,r=t.dataview.pagenum*t.dataview.pagesize,i=c[n],s=t.pagesize;t.pagesize=parseInt(i),isNaN(t.pagesize)&&(t.pagesize=10),i>=100?t.pagershowrowscombo.jqxDropDownList({width:"auto"}):t.pagershowrowscombo.jqxDropDownList({width:44}),t.dataview.pagesize=t.pagesize;var o=Math.floor(r/t.dataview.pagesize);t.prerenderrequired=!0,t._requiresupdate=!0,t._raiseEvent(10,{pagenum:o,oldpagesize:s,pagesize:t.dataview.pagesize}),t.gotopage(o),t.autoheight&&t._updatesizeonwindowresize&&(t._updatesize(!0),setTimeout(function(){t._updatesize(!0)},500))}});var d=this.pagergotoinput.find("input");d.addClass(this.toThemeProperty("jqx-grid-pager-input")),d.addClass(this.toThemeProperty("jqx-rc-all")),this.removeHandler(d,"keydown"),this.removeHandler(d,"change"),this.addHandler(d,"keydown",function(e){if(e.keyCode>=65&&e.keyCode<=90)return!1;if(e.keyCode=="13"){var n=d.val();return n=parseInt(n),isNaN(n)||t.gotopage(n-1),!1}}),this.addHandler(d,"change",function(){var e=d.val();e=parseInt(e),isNaN(e)||t.gotopage(e-1)}),this.addHandler(this.pagerrightbutton,"mouseenter",function(){l.addClass(t.toThemeProperty("jqx-icon-arrow-right-hover"))}),this.addHandler(this.pagerleftbutton,"mouseenter",function(){f.addClass(t.toThemeProperty("jqx-icon-arrow-left-hover"))}),this.addHandler(this.pagerrightbutton,"mouseleave",function(){l.removeClass(t.toThemeProperty("jqx-icon-arrow-right-hover"))}),this.addHandler(this.pagerleftbutton,"mouseleave",function(){f.removeClass(t.toThemeProperty("jqx-icon-arrow-left-hover"))}),this.addHandler(this.pagerrightbutton,"mousedown",function(){l.addClass(t.toThemeProperty("jqx-icon-arrow-right-selected"))}),this.addHandler(this.pagerrightbutton,"mouseup",function(){l.removeClass(t.toThemeProperty("jqx-icon-arrow-right-selected"))}),this.addHandler(this.pagerleftbutton,"mousedown",function(){f.addClass(t.toThemeProperty("jqx-icon-arrow-left-selected"))}),this.addHandler(this.pagerleftbutton,"mouseup",function(){f.removeClass(t.toThemeProperty("jqx-icon-arrow-left-selected"))}),this.addHandler(e(document),"mouseup.pagerbuttons"+this.element.id,function(){l.removeClass(t.toThemeProperty("jqx-icon-arrow-right-selected")),f.removeClass(t.toThemeProperty("jqx-icon-arrow-left-selected"))}),this.addHandler(this.pagerrightbutton,"click",function(){t.pagerrightbutton.jqxButton("disabled")||(t.rtl?t.gotoprevpage():t.gotonextpage())}),this.addHandler(this.pagerleftbutton,"click",function(){t.pagerleftbutton.jqxButton("disabled")||(t.rtl?t.gotonextpage():t.gotoprevpage())});var v=this;if(this.pagermode==="simple"){var m=this.pagerfirstbutton,g=this.pagerlastbutton;this.addHandler(g,"mouseenter",function(){u.addClass(v.toThemeProperty("jqx-icon-arrow-last-hover"))}),this.addHandler(m,"mouseenter",function(){o.addClass(v.toThemeProperty("jqx-icon-arrow-first-hover"))}),this.addHandler(g,"mouseleave",function(){u.removeClass(v.toThemeProperty("jqx-icon-arrow-last-hover"))}),this.addHandler(m,"mouseleave",function(){o.removeClass(v.toThemeProperty("jqx-icon-arrow-first-hover"))}),this.addHandler(g,"mousedown",function(){u.addClass(v.toThemeProperty("jqx-icon-arrow-last-selected"))}),this.addHandler(m,"mousedown",function(){o.addClass(v.toThemeProperty("jqx-icon-arrow-first-selected"))}),this.addHandler(g,"mouseup",function(){u.removeClass(v.toThemeProperty("jqx-icon-arrow-last-selected"))}),this.addHandler(m,"mouseup",function(){o.removeClass(v.toThemeProperty("jqx-icon-arrow-first-selected"))}),this.addHandler(e(document),"mouseup.pagerbuttons"+name+this.element.id,function(){l.removeClass(v.toThemeProperty("jqx-icon-arrow-right-selected")),f.removeClass(v.toThemeProperty("jqx-icon-arrow-left-selected")),u&&(u.removeClass(v.toThemeProperty("jqx-icon-arrow-last-selected")),o.removeClass(v.toThemeProperty("jqx-icon-arrow-first-selected")))}),this.addHandler(m,"click",function(){if(!m.jqxButton("disabled"))if(!v.rtl)v.gotopage(0);else{var e=v.dataview.totalrecords,t=Math.ceil(e/v.pagesize);v.gotopage(t-1)}}),this.addHandler(g,"click",function(){if(!g.jqxButton("disabled"))if(!v.rtl){var e=v.dataview.totalrecords,t=Math.ceil(e/v.pagesize);v.gotopage(t-1)}else v.gotopage(0)})}}else{this.pagerdiv.children().remove();var y=this.pagerrenderer();y!=null&&this.pagerdiv.append(e(y)),this.pager.append(this.pagerdiv)}this.vScrollBar.jqxScrollBar("refresh"),this._arrange()},_updatepagertheme:function(){if(this.pagershowrowscombo==null)return;this.pagershowrowscombo.jqxDropDownList({theme:this.theme}),this.pagerrightbutton.jqxButton({theme:this.theme}),this.pagerleftbutton.jqxButton({theme:this.theme}),this.pagerpageinput.removeClass();var t=this.pagergotoinput.find("input");t.removeClass(),t.addClass(this.toThemeProperty("jqx-grid-pager-input")),t.addClass(this.toThemeProperty("jqx-rc-all")),this.pagerpageinput.addClass(this.toThemeProperty("jqx-input")),this.pagerpageinput.addClass(this.toThemeProperty("jqx-widget-content")),this.pagerleftbutton.find(".jqx-icon-arrow-left").remove(),this.pagerrightbutton.find(".jqx-icon-arrow-right").remove();var n=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");n.addClass(this.toThemeProperty("jqx-icon-arrow-left")),this.pagerleftbutton.wrapInner(n);var r=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");r.addClass(this.toThemeProperty("jqx-icon-arrow-right")),this.pagerrightbutton.wrapInner(r);if(this.pagermode=="simple"){e.jqx.browser.msie&&e.jqx.browser.version<8&&(this.pagerbuttons.css("overflow","visible"),this.pagerbuttons.css("padding","3px")),this.pagerfirstbutton.attr("title",this.gridlocalization.pagerfirstbuttonstring),this.pagerlastbutton.attr("title",this.gridlocalization.pagerlastbuttonstring);var i=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");i.addClass(this.toThemeProperty("jqx-icon-arrow-first")),this.pagerfirstbutton.wrapInner(i);var s=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");s.addClass(this.toThemeProperty("jqx-icon-arrow-last")),this.pagerlastbutton.wrapInner(s),this.pagerdiv.append(this.pagerfirstbutton),this.pagerdiv.append(this.pagerleftbutton),this.pagerdiv.append(this.pagerbuttons),this.pagerdiv.append(this.pagerrightbutton),this.pagerdiv.append(this.pagerlastbutton),this.pagerlastbutton.jqxButton({cursor:"pointer",disabled:this.disabled,theme:this.theme}),this.pagerfirstbutton.jqxButton({cursor:"pointer",disabled:this.disabled,theme:this.theme}),this.pagerbuttons.css("float","left"),this.pagerlastbutton.css("float","left"),this.pagerfirstbutton.css("float","left"),this.pagerrightbutton.css("float","left"),this.pagerleftbutton.css("float","left"),this.pagergotoinput.hide(),this.pagershowrowscombo.hide(),this.pagergoto.hide(),this.pagershowrows.hide()}else this.pagergotoinput.show(),this.pagershowrowscombo.show(),this.pagergoto.show(),this.pagershowrows.show();var o=function(e,t){e.removeHandler(t,"mouseenter"),e.removeHandler(t,"mouseleave"),e.removeHandler(t,"mousedown"),e.removeHandler(t,"mouseup")};o(this,this.pagerrightbutton),o(this,this.pagerleftbutton);var u=this.that;this.addHandler(this.pagerrightbutton,"mouseenter",function(){r.addClass(u.toThemeProperty("jqx-icon-arrow-right-hover"))}),this.addHandler(this.pagerleftbutton,"mouseenter",function(){n.addClass(u.toThemeProperty("jqx-icon-arrow-left-hover"))}),this.addHandler(this.pagerrightbutton,"mouseleave",function(){r.removeClass(u.toThemeProperty("jqx-icon-arrow-right-hover"))}),this.addHandler(this.pagerleftbutton,"mouseleave",function(){n.removeClass(u.toThemeProperty("jqx-icon-arrow-left-hover"))}),this.addHandler(this.pagerrightbutton,"mousedown",function(){r.addClass(u.toThemeProperty("jqx-icon-arrow-right-selected"))}),this.addHandler(this.pagerrightbutton,"mouseup",function(){r.removeClass(u.toThemeProperty("jqx-icon-arrow-right-selected"))}),this.addHandler(this.pagerleftbutton,"mousedown",function(){n.addClass(u.toThemeProperty("jqx-icon-arrow-left-selected"))}),this.addHandler(this.pagerleftbutton,"mouseup",function(){n.removeClass(u.toThemeProperty("jqx-icon-arrow-left-selected"))})},gotopage:function(e){if(e==null||e==undefined)e=0;e==-1&&(e=0);if(e<0)return;var t=this.dataview.totalrecords;this.summaryrows&&(t+=this.summaryrows.length);var n=this.pagenum;this._raiseEvent(25,{oldpagenum:this.dataview.pagenum,pagenum:e,pagesize:this.dataview.pagesize});var r=Math.ceil(t/this.pagesize);e>=r&&(this.dataview.totalrecords==0&&(this.dataview.pagenum=0,this.updatepagerdetails()),e>0&&(e=r-1));if(this.dataview.pagenum!=e||this._requiresupdate)if(this.pageable){this.source.pager&&this.source.pager(e,this.dataview.pagesize,this.dataview.pagenum),this.dataview.pagenum=e;if(this.virtualmode){this.hiddens=new Array,this.expandedgroups=new Array;if(this.rendergridrows){var i=e*this.dataview.pagesize,s=i+this.dataview.pagesize;if(i!=null&&s!=null){this.pagerrightbutton&&(this.pagerrightbutton.jqxButton({disabled:!0}),this.pagerleftbutton.jqxButton({disabled:!0}),this.pagershowrowscombo.jqxDropDownList({disabled:!0})),this.updatebounddata("pagechanged"),this._raiseEvent(9,{pagenum:e,oldpagenum:n,pagesize:this.dataview.pagesize}),this.updatepagerdetails(),this.autosavestate&&this.savestate&&this.savestate();return}}}else this.dataview.updateview();this._loadrows(),this._updatepageviews(),this.tableheight=null,this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this.updatepagerdetails();if(this.autoheight||this.autorowheight){var o=this.host.height()-this._gettableheight();height=o+this._pageviews[0].height,height!=this.host.height()&&(this._arrange(),this._updatepageviews(),this.autorowheight&&this._renderrows(this.virtualsizeinfo))}this.editcell!=null&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!1),this._raiseEvent(9,{pagenum:e,oldpagenum:n,pagesize:this.dataview.pagesize}),this.autosavestate&&this.savestate&&this.savestate()}},gotoprevpage:function(){if(this.dataview.pagenum>0)this.gotopage(this.dataview.pagenum-1);else if(this.pagermode!="simple"){var e=this.dataview.totalrecords;this.summaryrows&&(e+=this.summaryrows.length);var t=Math.ceil(e/this.pagesize);this.gotopage(t-1)}},gotonextpage:function(){var e=this.dataview.totalrecords;this.summaryrows&&(e+=this.summaryrows.length);var t=Math.ceil(e/this.pagesize);this.dataview.pagenum<t-1?this.gotopage(this.dataview.pagenum+1):this.pagermode!="simple"&&this.gotopage(0)},updatepagerdetails:function(){if(this.pagerdetails!=null&&this.pagerdetails.length>0){var t=this.dataview.pagenum*this.pagesize,n=(this.dataview.pagenum+1)*this.pagesize;n>=this.dataview.totalrecords&&(n=this.dataview.totalrecords);var r=this.dataview.totalrecords;this.summaryrows&&(r+=this.summaryrows.length,(this.dataview.pagenum+1)*this.pagesize>this.dataview.totalrecords&&(n=r)),t++;var i=Math.ceil(r/this.dataview.pagesize);i>=1&&i--,i++;if(this.pagermode!=="simple"){var s=this.pagergotoinput.find("input");s.val(this.dataview.pagenum+1)}else{var o="",u=this.pagerbuttonscount;if(u==0||!u)u=5;var a=0;this.rtl&&(a=u-1);while(this.rtl&&a>=0||!this.rtl&&a<u){var f=1+a,l=this.dataview.pagenum/u,c=Math.floor(l);f+=c*u;var h=this.toTP("jqx-grid-pager-number");h+=" "+this.toTP("jqx-rc-all");if(f>i)break;this.rtl||a==0&&f>u&&(o+="<a class='"+h+"' tabindex=-1 href='javascript:;' data-page='"+(-1+f)+"'>"+"..."+"</a>"),this.dataview.pagenum===f-1&&(h+=" "+this.toTP("jqx-fill-state-pressed"));if(!this.rtl){o+="<a class='"+h+"' tabindex=-1 href='javascript:;' data-page='"+f+"'>"+f+"</a>";if(a===u-1){var h=this.toTP("jqx-grid-pager-number");i>=1+f&&(o+="<a class='"+h+"' tabindex=-1 href='javascript:;' data-page='"+(1+f)+"'>"+"..."+"</a>")}}else{if(a===u-1){var h=this.toTP("jqx-grid-pager-number");i>=1+f&&(o+="<a class='"+h+"' tabindex=-1 href='javascript:;' data-page='"+(1+f)+"'>"+"..."+"</a>")}this.dataview.pagenum===f-1&&(h+=" "+this.toTP("jqx-fill-state-pressed")),o+="<a class='"+h+"' tabindex=-1 href='javascript:;' data-page='"+f+"'>"+f+"</a>"}if(this.rtl){var h=this.toTP("jqx-grid-pager-number");a==0&&f>u&&(o+="<a class='"+h+"' tabindex=-1 href='javascript:;' data-page='"+(-1+f)+"'>"+"..."+"</a>")}this.rtl?a--:a++}var p=this.pagerbuttons.find("a");this.removeHandler(p,"click"),this.removeHandler(p,"mouseenter"),this.removeHandler(p,"mouseleave"),this.pagerbuttons[0].innerHTML=o;var d=this,v=function(){d.addHandler(p,"click",function(t){var n=e(t.target).attr("data-page");return d.gotopage(parseInt(n)-1),!1}),d.addHandler(p,"mouseenter",function(t){e(t.target).addClass(d.toTP("jqx-fill-state-hover"))}),d.addHandler(p,"mouseleave",function(t){e(t.target).removeClass(d.toTP("jqx-fill-state-hover"))})},p=this.pagerbuttons.find("a");v(p)}this.pagergotoinput.attr("title","1 - "+i),n==0&&n<t&&(t=0),this.rtl?this.pagerdetails[0].innerHTML=r+this.gridlocalization.pagerrangestring+n+"-"+t:this.pagerdetails[0].innerHTML=t+"-"+n+this.gridlocalization.pagerrangestring+r,t>n&&this.gotoprevpage()}},_updatepagedview:function(e,t,n){var r=this.that;this.dataview.rows.length!=this.dataview.pagesize&&this.dataview.updateview();var i=this.dataview.rows.length;for(var s=0;s<i;s++){var o=this.dataview.rows[s].visibleindex,u={index:o,height:this.heights[o],hidden:this.hiddens[o],details:this.details[o]};this.heights[o]==undefined&&(this.heights[o]=this.rowsheight,u.height=this.rowsheight),this.hiddens[o]==undefined&&(this.hiddens[o]=!1,u.hidden=!1),this.details[o]==undefined&&(this.details[o]=null),u.height!=r.rowsheight&&(t-=r.rowsheight,t+=u.height);if(u.hidden)t-=u.height;else{n+=u.height;var a=0;this.rowdetails&&u.details&&u.details.rowdetails&&!u.details.rowdetailshidden&&(a=u.details.rowdetailsheight,n+=a,t+=a)}}return this._pageviews[0]={top:0,height:n},t}})}(jQuery),function(e){e.extend(e.jqx._jqxGrid.prototype,{_handledblclick:function(t,n){if(t.target==null)return;if(n.disabled)return;if(e(t.target).ischildof(this.columnsheader))return;var r;t.which?r=t.which==3:t.button&&(r=t.button==2);if(r)return;var i;t.which?i=t.which==2:t.button&&(i=t.button==1);if(i)return;var s=this.showheader?this.columnsheader.height()+2:0,o=this._groupsheader()?this.groupsheader.height():0,u=this.showtoolbar?this.toolbarheight:0;o+=u;var a=this.host.offset(),f=t.pageX-a.left,l=t.pageY-s-a.top-o,c=this._hittestrow(f,l),h=c.row,p=c.index,d=t.target.className,v=this.table[0].rows[p];if(v==null)return;n.mousecaptured=!0,n.mousecaptureposition={left:t.pageX,top:t.pageY-o};var m=this.hScrollInstance,g=m.value,y=0,b=this.groupable?this.groups.length:0;for(var w=0;w<v.cells.length;w++){var E=parseInt(e(this.columnsrow[0].cells[w]).css("left")),S=E-g;n.columns.records[w].pinned&&(S=E);var x=this._getcolumnat(w);if(x!=null&&x.hidden)continue;var T=S+e(this.columnsrow[0].cells[w]).width();if(T>=f&&f>=S){y=w;break}}if(h!=null){var x=this._getcolumnat(y);d.indexOf("jqx-grid-group-expand")==-1&&d.indexOf("jqx-grid-group-collapse")==-1&&h.boundindex!=-1&&n.begincelledit(n.getboundindex(h),x.datafield,x.defaulteditorvalue)}},_getpreveditablecolumn:function(e){var t=this;while(e>0){e--;var n=t.getcolumnat(e);if(!n)return null;if(!n.editable)continue;if(!n.hidden)return n}return null},_getnexteditablecolumn:function(e){var t=this;while(e<this.columns.records.length){e++;var n=t.getcolumnat(e);if(!n)return null;if(!n.editable)continue;if(!n.hidden)return n}return null},_handleeditkeydown:function(t,n){if(n.handlekeyboardnavigation){var r=n.handlekeyboardnavigation(t);if(r==1)return!0}var i=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(n.showfilterrow&&n.filterable&&this.filterrow&&e(t.target).ischildof(this.filterrow))return!0;if(n.pageable&&e(t.target).ischildof(this.pager))return!0;if(this.showtoolbar&&e(t.target).ischildof(this.toolbar))return!0;if(this.showstatusbar&&e(t.target).ischildof(this.statusbar))return!0;if(this.rowdetails&&e(t.target).ischildof(this.content.find("[role='rowgroup']")))return!0;if(this.editcell){if(this.editmode==="selectedrow")return i===13?this.endrowedit(this.editcell.row,!1):i===27&&this.endrowedit(this.editcell.row,!0),i===9?!1:!0;if(this.editcell.columntype==null||this.editcell.columntype=="textbox"||this.editcell.columntype=="numberinput"||this.editcell.columntype=="combobox"||this.editcell.columntype=="datetimeinput"){if(i>=33&&i<=40&&n.selectionmode=="multiplecellsadvanced"){var s=this.editcell.columntype=="textbox"||this.editcell.columntype==null?this.editcell.editor:this.editcell.editor.find("input"),o=n._selection(s),u=s.val().length;o.length>0&&this.editcell.columntype!="datetimeinput"&&(n._cancelkeydown=!0),o.start>0&&i==37&&(n._cancelkeydown=!0),o.start<u&&i==39&&this.editcell.columntype!="datetimeinput"&&(n._cancelkeydown=!0),this.editcell.columntype=="datetimeinput"&&i==39&&o.start+o.length<u&&(n._cancelkeydown=!0)}}else if(this.editcell.columntype=="dropdownlist"){if(i==37||i==39&&n.selectionmode=="multiplecellsadvanced")n._cancelkeydown=!1}else this.selectionmode=="multiplecellsadvanced"&&this.editcell.columntype!="textbox"&&this.editcell.columntype!="numberinput"&&(n._cancelkeydown=!0);if(i==32&&n.editcell.columntype=="checkbox"){var a=n.getcolumn(n.editcell.datafield);if(a.editable){var f=!n.getcellvalue(n.editcell.row,n.editcell.column);if(a.cellbeginedit){var l=a.cellbeginedit(n.editcell.row,a.datafield,a.columntype,!f);if(l==0)return!1}return n.setcellvalue(n.editcell.row,n.editcell.column,f,!0),n._raiseEvent(18,{rowindex:n.editcell.row,datafield:n.editcell.column,oldvalue:!f,value:f,columntype:"checkbox"}),!1}}if(i==9){var c=this.editcell.row,h=this.editcell.column,p=h,d=n._getcolumnindex(h),v=!1,m=n.getrowvisibleindex(c);this.editchar="";if(this.editcell.validated!=0){if(t.shiftKey){var a=n._getpreveditablecolumn(d);a&&(h=a.datafield,v=!0,n.selectionmode.indexOf("cell")!=-1&&(n.selectprevcell(c,p),setTimeout(function(){n.ensurecellvisible(m,h)},10)))}else{var a=n._getnexteditablecolumn(d);a&&(h=a.datafield,v=!0,n.selectionmode.indexOf("cell")!=-1&&(n.selectnextcell(c,p),n._oldselectedcell=n.selectedcell,setTimeout(function(){n.ensurecellvisible(m,h)},10)))}if(!v)return this.editcell!=null&&(n.endcelledit(c,h,!1),this._renderrows(this.virtualsizeinfo)),!0;n.begincelledit(c,h),this.editcell!=null&&this.editcell.columntype=="checkbox"&&this._renderrows(this.virtualsizeinfo)}return!1}if(i==13){var g=this.selectedcell;if(g)var y=this.getrowvisibleindex(g.rowindex);this.endcelledit(this.editcell.row,this.editcell.column,!1,!0);if(this.selectionmode=="multiplecellsadvanced"){var b=n.getselectedcell();if(b!=null&&n.selectcell&&this.editcell==null&&b.rowindex+1<this.dataview.totalrecords)if(this.sortcolumn!=b.datafield){var m=this.getrowvisibleindex(b.rowindex),w=this.dataview.loadedrecords[m+1];if(w)if(!this.pageable||this.pageable&&m+1<(this.dataview.pagenum+1)*this.pagesize){this.clearselection(!1),this.selectcell(this.getboundindex(w),b.datafield);var b=this.getselectedcell();this.ensurecellvisible(w.visibleindex,b.datafield)}}else if(g!=null){var E=this.dataview.loadedrecords[y+1];if(E)if(!this.pageable||this.pageable&&y+1<this.pagesize)this.clearselection(!1),this.selectcell(this.getboundindex(E),b.datafield);else if(this.pageable&&y+1>=this.pagesize){this.clearselection(!1);var E=this.dataview.loadedrecords[y];this.selectcell(this.getboundindex(E),b.datafield)}}}return!1}if(i==27)return this.endcelledit(this.editcell.row,this.editcell.column,!0,!0),!1}else{var S=!1;i==113&&(S=!0);if(!t.ctrlKey&&!t.altKey){i>=48&&i<=57&&(this.editchar=String.fromCharCode(i),S=!0);if(i>=65&&i<=90){this.editchar=String.fromCharCode(i);var x=!1;t.shiftKey?x=t.shiftKey:t.modifiers&&(x=!!(t.modifiers&4)),x||(this.editchar=this.editchar.toLowerCase()),S=!0}else i>=96&&i<=105&&(this.editchar=i-96,this.editchar=this.editchar.toString(),S=!0);var T=e(".jqx-grid").length;S=S&&(T==1||T>1&&n.focused);var N=e.data(document.body,"jqxgrid.edit");if(N!==undefined&&N!==""&&(i===13||S)&&N!=n.element.id)return!0}if(i==13||S)if(n.getselectedrowindex){var c=n.getselectedrowindex();switch(n.selectionmode){case"singlerow":case"multiplerows":case"multiplerowsextended":if(c>=0){var h="";for(var C=0;C<n.columns.records.length;C++){var a=n.getcolumnat(C);if(a.editable){h=a.datafield;break}}n.begincelledit(c,h)}break;case"singlecell":case"multiplecells":case"multiplecellsextended":var b=n.getselectedcell();if(b!=null){var a=n._getcolumnbydatafield(b.datafield);a.columntype!="checkbox"&&n.begincelledit(b.rowindex,b.datafield)}break;case"multiplecellsadvanced":var b=n.getselectedcell();if(b!=null)if(i==13){if(n.selectcell&&b.rowindex+1<n.dataview.totalrecords){var m=this.getrowvisibleindex(b.rowindex),w=this.dataview.loadedrecords[m+1];if(w){this.clearselection(!1),this.selectcell(this.getboundindex(w),b.datafield);var b=this.getselectedcell();this.ensurecellvisible(w.visibleindex,b.datafield)}}}else n.editmode!=="selectedrow"&&n.begincelledit(b.rowindex,b.datafield)}return!1}if(i==46){var k=n.getselectedcells();n.selectionmode.indexOf("cell")==-1&&n._getcellsforcopypaste&&(k=n._getcellsforcopypaste());if(k!=null&&k.length>0){for(var L=0;L<k.length;L++){var b=k[L];if(!b.datafield)continue;var a=n.getcolumn(b.datafield),A=n.getcellvalue(b.rowindex,b.datafield);if(A!==""&&a.editable&&n.enablekeyboarddelete){var O=null;a.columntype=="checkbox"&&(a.threestatecheckbox||(O=!1));if(a.cellbeginedit){var l=a.cellbeginedit(b.rowindex,a.datafield,a.columntype,O);if(l==0)return!1}n._raiseEvent(17,{rowindex:b.rowindex,datafield:b.datafield,value:A}),L==k.length-1?(n.setcellvalue(b.rowindex,b.datafield,O,!0),a.displayfield!=a.datafield&&n.setcellvalue(b.rowindex,a.displayfield,O,!0)):(n.setcellvalue(b.rowindex,b.datafield,O,!1),a.displayfield!=a.datafield&&n.setcellvalue(b.rowindex,a.displayfield,O,!0));if(a.cellendedit)var M=a.cellendedit(b.rowindex,a.datafield,a.columntype,O);n._raiseEvent(18,{rowindex:b.rowindex,datafield:b.datafield,oldvalue:A,value:O})}}return this.dataview.updateview(),this._renderrows(this.virtualsizeinfo),!1}}if(i==32){var b=n.getselectedcell();if(b!=null){var a=n.getcolumn(b.datafield);if(a.columntype=="checkbox"&&a.editable){var f=!n.getcellvalue(b.rowindex,b.datafield);if(a.cellbeginedit){var l=a.cellbeginedit(b.rowindex,a.datafield,a.columntype,!f);if(l==0)return!1}return n._raiseEvent(17,{rowindex:b.rowindex,datafield:b.datafield,value:!f,columntype:"checkbox"}),n.setcellvalue(b.rowindex,b.datafield,f,!0),n._raiseEvent(18,{rowindex:b.rowindex,datafield:b.datafield,oldvalue:!f,value:f,columntype:"checkbox"}),!1}}}}return!0},begincelledit:function(t,n,r,i,s){var o=this.getcolumn(n);this._cellscache=new Array;if(n==null)return;if(o.columntype=="number"||o.columntype=="button")return;if(this.groupable){if(this.groups.indexOf(n)>=0)return;if(this.groups.indexOf(o.displayfield)>=0)return}if(this.editrow!=undefined)return;if(this.editcell){if(this.editcell.row==t&&this.editcell.column==n)return!0;if(this.editmode==="selectedrow"&&this.editcell.row==t)return;var u=this.endcelledit(this.editcell.row,this.editcell.column,!1,!0,!1);if(0==u)return}var a=o.columntype=="checkbox"||o.columntype=="button";this.host.removeClass("jqx-disableselect"),this.content.removeClass("jqx-disableselect");if(o.editable){if(o.cellbeginedit){var f=this.getcell(t,n),l=o.cellbeginedit(t,n,o.columntype,f!=null?f.value:null);if(l==0)return}var c=this.getrowvisibleindex(t);this.editcell=this.getcell(t,n);if(this.editcell){this.editcell.visiblerowindex=c;if(!this.editcell.editing){a||(this.editcell.editing=!0),this.editcell.columntype=o.columntype,this.editcell.defaultvalue=r,o.defaultvalue!=undefined&&(this.editcell.defaultvalue=o.defaultvalue),this.editcell.init=!0,o.columntype!="checkbox"&&this.editmode!="selectedrow"&&this._raiseEvent(17,{rowindex:t,datafield:o.datafield,value:this.editcell.value,columntype:o.columntype}),e.data(document.body,"jqxgrid.edit",this.element.id);if(!a){var h=this.getrowvisibleindex(t);i!==!1&&this.ensurecellvisible(h,o.datafield),s!==!1&&this._renderrows(this.virtualsizeinfo)}if(this.editcell)return this.editcell.init=!1,!0}}}else{if(!this.editcell)return;this.editcell.editor=null,this.editcell.editing=!1,s!==!1&&this._renderrows(this.virtualsizeinfo),this.editcell=null}},getScrollTop:function(){if(this._py)return pageYOffset;this._py=typeof pageYOffset!="undefined";if(this._py)return pageYOffset;var e=document.body,t=document.documentElement;return t=t.clientHeight?t:e,t.scrollTop},getScrollLeft:function(){if(typeof pageXOffset!="undefined")return pageXOffset;var e=document.body,t=document.documentElement;return t=t.clientHeight?t:e,t.scrollLeft},endcelledit:function(t,n,r,i,s){if(t==undefined||n==undefined)this.editcell&&(t=this.editcell.row,n=this.editcell.column),r==undefined&&(r=!0);if(!this.editcell)return;var o=this.getcolumn(n),u=this;if(u.editmode==="selectedrow"){this.endrowedit(t,r);return}var a=function(){if(s!=0){if(u.isTouchDevice())return;if(!u.isNestedGrid){var e=u.getScrollTop(),t=u.getScrollLeft();try{u.element.focus(),u.content.focus(),e!=u.getScrollTop()&&window.scrollTo(t,e),setTimeout(function(){u.element.focus(),u.content.focus(),e!=u.getScrollTop()&&window.scrollTo(t,e)},10)}catch(n){}}}};if(o.columntype=="checkbox"||o.columntype=="button")return this.editcell&&(this.editcell.editor=null,this.editcell.editing=!1,this.editcell=null),!0;var f=this._geteditorvalue(o),l=function(e){e._hidecelleditor(),o.cellendedit&&o.cellendedit(t,n,o.columntype,e.editcell.value,f),e.editchar=null;if(o.displayfield!=o.datafield){var r=e.getcellvalue(e.editcell.row,o.displayfield),s=e.editcell.value;oldvalue={value:s,label:r}}else oldvalue=e.editcell.value;e._raiseEvent(18,{rowindex:t,datafield:n,displayfield:o.displayfield,oldvalue:f,value:f,columntype:o.columntype}),e.editcell.editor=null,e.editcell.editing=!1,e.editcell=null,(i||i==undefined)&&e._renderrows(e.virtualsizeinfo),a(),e.enablebrowserselection||(e.host.addClass("jqx-disableselect"),e.content.addClass("jqx-disableselect"))};if(r)return l(this),!1;this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide());if(o.cellvaluechanging){var c=o.cellvaluechanging(t,n,o.columntype,this.editcell.value,f);c!=undefined&&(f=c)}if(o.validation){var h=this.getcell(t,n);try{var p=o.validation(h,f),d=this.gridlocalization.validationstring;p.message!=undefined&&(d=p.message);var v=typeof p=="boolean"?p:p.result;if(!v)return(p.showmessage==undefined||p.showmessage==1)&&this._showvalidationpopup(t,n,d),this.editcell.validated=!1,!1}catch(m){return this._showvalidationpopup(t,n,this.gridlocalization.validationstring),this.editcell.validated=!1,!1}}if(o.displayfield!=o.datafield){var g=this.getcellvalue(this.editcell.row,o.displayfield),y=this.editcell.value;oldvalue={value:y,label:g}}else oldvalue=this.editcell.value;if(o.cellendedit){var b=o.cellendedit(t,n,o.columntype,this.editcell.value,f);if(b==0)return this._raiseEvent(18,{rowindex:t,datafield:n,displayfield:o.displayfield,oldvalue:oldvalue,value:oldvalue,columntype:o.columntype}),l(this),!1}return this._raiseEvent(18,{rowindex:t,datafield:n,displayfield:o.displayfield,oldvalue:oldvalue,value:f,columntype:o.columntype}),this._hidecelleditor(!1),this.editcell!=undefined&&(this.editcell.editor=null,this.editcell.editing=!1),this.editcell=null,this.editchar=null,this.setcellvalue(t,n,f,i),this.enablebrowserselection||(this.host.addClass("jqx-disableselect"),this.content.addClass("jqx-disableselect")),a(),e.data(document.body,"jqxgrid.edit",""),!0},beginrowedit:function(t){var n=this,r=-1;n._oldselectedrow=t,this._cellscache=new Array,e.each(this.columns.records,function(e,r){if(n.editable&&this.editable){var i=n.getcell(t,this.datafield);n.begincelledit(t,this.datafield,null,!1,!1),n._raiseEvent(17,{rowindex:t,datafield:this.datafield,value:i.value,columntype:this.columntype})}}),n.editcell&&(n.editcell.init=!0),this._renderrows(this.virtualsizeinfo)},endrowedit:function(t,n){var r=this;if(!this.editcell)return!1;if(this.editcell.editor==undefined)return!1;var i=function(){if(focus!=0){if(r.isTouchDevice())return;if(!r.isNestedGrid){var e=r.getScrollTop(),t=r.getScrollLeft();try{r.element.focus(),r.content.focus(),e!=r.getScrollTop()&&window.scrollTo(t,e),setTimeout(function(){r.element.focus(),r.content.focus(),e!=r.getScrollTop()&&window.scrollTo(t,e)},10)}catch(n){}}}},s=!1,o={};this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide());for(var u=0;u<this.columns.records.length;u++){var a=this.columns.records[u];if(!a.editable)continue;if(a.columntype=="checkbox")continue;var f=this._geteditorvalue(a),l=function(e){e._hidecelleditor();var n=e.getcellvalue(e.editcell.row,a.displayfield);a.cellendedit&&a.cellendedit(t,p,a.columntype,n,f),e.editchar=null;if(a.displayfield!=a.datafield){var r=e.getcellvalue(e.editcell.row,a.displayfield),i=n;c={value:i,label:r}}else c=n;e._raiseEvent(18,{rowindex:t,datafield:p,displayfield:a.displayfield,oldvalue:n,value:n,columntype:a.columntype}),e.editcell.editing=!1};if(n){l(this);continue}if(a.cellvaluechanging){var c=this.getcellvalue(this.editcell.row,a.displayfield),h=a.cellvaluechanging(t,p,a.columntype,c,f);h!=undefined&&(f=h)}var p=a.datafield;if(a.validation){var d=this.getcell(t,a.datafield);try{var v=a.validation(d,f),m=this.gridlocalization.validationstring;v.message!=undefined&&(m=v.message);var g=typeof v=="boolean"?v:v.result;if(!g){(v.showmessage==undefined||v.showmessage==1)&&this._showvalidationpopup(t,p,m),s=!0,this.editcell[a.datafield].validated=!1;continue}}catch(y){this._showvalidationpopup(t,p,this.gridlocalization.validationstring),this.editcell[a.datafield].validated=!1,s=!0;continue}}if(a.displayfield!=a.datafield){var b=this.getcellvalue(this.editcell.row,a.displayfield),w=this.editcell.value;c={value:w,label:b}}else c=this.getcellvalue(this.editcell.row,a.displayfield);o[a.datafield]={newvalue:f,oldvalue:c}}var E={};if(!s){this._hidecelleditor(!1);for(var u=0;u<this.columns.records.length;u++){var a=this.columns.records[u],p=a.datafield;if(!a.editable)continue;if(a.columntype=="checkbox"){var f=this.getcellvalue(t,a.displayfield);this._raiseEvent(18,{rowindex:t,datafield:a.datafield,displayfield:a.displayfield,oldvalue:f,value:f,columntype:a.columntype});continue}if(!o[a.datafield])continue;var f=o[a.datafield].newvalue,c=o[a.datafield].oldvalue;if(a.cellendedit){var S=a.cellendedit(t,p,a.columntype,c,f);if(S==0){this._raiseEvent(18,{rowindex:t,datafield:p,displayfield:a.displayfield,oldvalue:c,value:c,columntype:a.columntype}),l(this);continue}}this._raiseEvent(18,{rowindex:t,datafield:a.datafield,displayfield:a.displayfield,oldvalue:c,value:f,columntype:a.columntype}),E[a.datafield]=f}var x=this.getrowid(t),T=this.getrowdata(t);e.each(E,function(e,t){if(t&&t.label!=undefined){var n=r.getcolumn(e);T[n.displayfield]=t.label,T[n.datafield]=t.value}else T[e]=t}),this.enablebrowserselection||(this.host.addClass("jqx-disableselect"),this.content.addClass("jqx-disableselect")),e.data(document.body,"jqxgrid.edit",""),this.editcell=null,this.editchar=null,this.updaterow(x,T)}return s},_selection:function(e){if("selectionStart"in e[0]){var t=e[0],n=t.selectionEnd-t.selectionStart;return{start:t.selectionStart,end:t.selectionEnd,length:n,text:t.value}}var r=document.selection.createRange();if(r==null)return{start:0,end:t.value.length,length:0};var i=e[0].createTextRange(),s=i.duplicate();i.moveToBookmark(r.getBookmark()),s.setEndPoint("EndToStart",i);var n=r.text.length;return{start:s.text.length,end:s.text.length+r.text.length,length:n,text:r.text}},_setSelection:function(e,t,n){if("selectionStart"in n[0])n[0].focus(),n[0].setSelectionRange(e,t);else{var r=n[0].createTextRange();r.collapse(!0),r.moveEnd("character",t),r.moveStart("character",e),r.select()}},findRecordIndex:function(e,t,n){var n=n;if(t){var r=n.length;for(var i=0;i<r;i++){var s=n[i],o=s.label;if(e==o)return i}}return-1},_destroyeditors:function(){var t=this;e.each(this.columns.records,function(n,r){var i=e.trim(this.datafield).split(" ").join("");switch(this.columntype){case"dropdownlist":var s=t.editors["dropdownlist_"+i];s&&(s.jqxDropDownList("destroy"),t.editors["dropdownlist_"+i]=null);break;case"combobox":var o=t.editors["combobox_"+i];o&&(o.jqxComboBox("destroy"),t.editors["combobox_"+i]=null);break;case"datetimeinput":var u=t.editors["datetimeinput_"+this.datafield];u&&(u.jqxDateTimeInput("destroy"),t.editors["datetimeinput_"+i]=null);break;case"numberinput":var a=t.editors["numberinput_"+i];a&&(a.jqxNumberInput("destroy"),t.editors["numberinput_"+i]=null);break;case"custom":case"template":this.destroycustomeditor&&(this.destroycustomeditor(t.editors["customeditor_"+i]),t.editors["customeditor_"+i]=null);if(this.destrotemplateeditor){var f=t.getrows.length();for(var l=0;l<f;l++)this.destrotemplateeditor(t.editors["templateeditor_"+i+"_"+l]),t.editors["templateeditor_"+i+"_"+l]=null}break;case"textbox":default:var c=t.editors["textboxeditor_"+i];c&&(t.removeHandler(c,"keydown"),t.editors["textbox_"+i]=null)}}),t.editors=new Array},_showcelleditor:function(t,n,r,i,s){if(r==undefined)return;if(this.editcell==null)return;if(n.columntype=="checkbox"&&n.editable)return;s==undefined&&(s=!0),this.editmode=="selectedrow"&&(this.editchar="",s=!1);var o=n.datafield,u=e(r),a=this,f=this.editcell.editor,l=this.getcellvalue(t,o),c=this.getcelltext(t,o),h=this.hScrollInstance,p=h.value,d=parseInt(p),v=this.columns.records.indexOf(n);this.editcell.element=r,this.editcell.validated==0&&this._showvalidationpopup();var m=function(e){if(a.hScrollInstance.isScrolling()||a.vScrollInstance.isScrolling())return;if(!s)return;if(a.isTouchDevice())return;a.isNestedGrid||e.focus(),a.gridcontent[0].scrollTop!=0&&(a.scrolltop(Math.abs(a.gridcontent[0].scrollTop)),a.gridcontent[0].scrollTop=0),a.gridcontent[0].scrollLeft!=0&&(a.gridcontent[0].scrollLeft=0)};switch(n.columntype){case"dropdownlist":if(this.host.jqxDropDownList){r.innerHTML="";var g=e.trim(n.datafield).split(" ").join(""),y=e.trim(n.displayfield).split(" ").join("");g.indexOf(".")!=-1&&(g=g.replace(".","")),y.indexOf(".")!=-1&&(y=y.replace(".",""));var b=this.editors["dropdownlist_"+g];f=b==undefined?e("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='dropdownlisteditor'></div>"):b,f.css("top",e(r).parent().position().top),this.oldhscroll?f.css("left",-d+parseInt(e(r).position().left)):f.css("left",parseInt(e(r).position().left)),n.pinned&&f.css("left",d+parseInt(e(r).position().left));if(b==undefined){f.prependTo(this.table),f[0].id="dropdownlisteditor"+this.element.id+g;var w=this.source._source?!0:!1,E=null;if(!w)E=new e.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[y],async:!1,autoSort:!0,autoSortField:y});else{var S={localdata:this.source.records,datatype:this.source.datatype,async:!1};E=new e.jqx.dataAdapter(S,{autoBind:!1,async:!1,uniqueDataFields:[y],autoSort:!0,autoSortField:y})}var x=n.createeditor?!1:!0;f.jqxDropDownList({enableBrowserBoundsDetection:!0,keyboardSelection:!1,source:E,rtl:this.rtl,autoDropDownHeight:x,theme:this.theme,width:u.width()-2,height:u.height()-2,displayMember:y,valueMember:o}),this.editors["dropdownlist_"+g]=f,n.createeditor&&n.createeditor(t,l,f)}n._requirewidthupdate&&f.jqxDropDownList({width:u.width()-2});var T=f.jqxDropDownList("listBox").visibleItems;n.createeditor||(T.length<8?f.jqxDropDownList("autoDropDownHeight",!0):f.jqxDropDownList("autoDropDownHeight",!1));var l=this.getcellvalue(t,y),N=this.findRecordIndex(l,y,T);i&&(l!=""?f.jqxDropDownList("selectIndex",N,!0):f.jqxDropDownList("selectIndex",-1)),this.editcell.defaultvalue!=undefined&&f.jqxDropDownList("selectIndex",this.editcell.defaultvalue,!0),s&&f.jqxDropDownList("focus")}break;case"combobox":if(this.host.jqxComboBox){r.innerHTML="";var g=e.trim(n.datafield).split(" ").join(""),y=e.trim(n.displayfield).split(" ").join("");g.indexOf(".")!=-1&&(g=g.replace(".","")),y.indexOf(".")!=-1&&(y=y.replace(".",""));var C=this.editors["combobox_"+g];f=C==undefined?e("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='comboboxeditor'></div>"):C,f.css("top",e(r).parent().position().top),this.oldhscroll?f.css("left",-d+parseInt(e(r).position().left)):f.css("left",parseInt(e(r).position().left)),n.pinned&&f.css("left",d+parseInt(e(r).position().left));if(C==undefined){f.prependTo(this.table),f[0].id="comboboxeditor"+this.element.id+g;var w=this.source._source?!0:!1,E=null;if(!w)E=new e.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[y],async:!1,autoSort:!0,autoSortField:y});else{var S={localdata:this.source.records,datatype:this.source.datatype,async:!1};E=new e.jqx.dataAdapter(S,{autoBind:!1,async:!1,uniqueDataFields:[y],autoSort:!0,autoSortField:y})}var x=n.createeditor?!1:!0;f.jqxComboBox({enableBrowserBoundsDetection:!0,keyboardSelection:!1,source:E,rtl:this.rtl,autoDropDownHeight:x,theme:this.theme,width:u.width()-2,height:u.height()-2,displayMember:y,valueMember:o}),f.removeAttr("tabindex"),f.find("div").removeAttr("tabindex"),this.editors["combobox_"+g]=f,n.createeditor&&n.createeditor(t,l,f)}n._requirewidthupdate&&f.jqxComboBox({width:u.width()-2});var T=f.jqxComboBox("listBox").visibleItems;n.createeditor||(T.length<8?f.jqxComboBox("autoDropDownHeight",!0):f.jqxComboBox("autoDropDownHeight",!1));var l=this.getcellvalue(t,y),N=this.findRecordIndex(l,y,T);i&&(l!=""?(f.jqxComboBox("selectIndex",N,!0),f.jqxComboBox("val",l)):(f.jqxComboBox("selectIndex",-1),f.jqxComboBox("val",l))),this.editcell.defaultvalue!=undefined&&f.jqxComboBox("selectIndex",this.editcell.defaultvalue,!0),this.editchar&&this.editchar.length>0&&f.jqxComboBox("input").val(this.editchar),s&&setTimeout(function(){m(f.jqxComboBox("input")),f.jqxComboBox("_setSelection",0,0);if(a.editchar)f.jqxComboBox("_setSelection",1,1),a.editchar=null;else{var e=f.jqxComboBox("input").val();f.jqxComboBox("_setSelection",0,e.length)}},10)}break;case"datetimeinput":if(this.host.jqxDateTimeInput){r.innerHTML="";var g=e.trim(n.datafield).split(" ").join("");g.indexOf(".")!=-1&&(g=g.replace(".",""));var k=this.editors["datetimeinput_"+g];f=k==undefined?e("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='datetimeeditor'></div>"):k,f.show(),f.css("top",e(r).parent().position().top),this.oldhscroll?f.css("left",-d+parseInt(e(r).position().left)):f.css("left",parseInt(e(r).position().left)),n.pinned&&f.css("left",d+parseInt(e(r).position().left));if(k==undefined){f.prependTo(this.table),f[0].id="datetimeeditor"+this.element.id+g;var L={calendar:this.gridlocalization};f.jqxDateTimeInput({enableBrowserBoundsDetection:!0,localization:L,_editor:!0,theme:this.theme,rtl:this.rtl,width:u.width(),height:u.height(),formatString:n.cellsformat}),this.editors["datetimeinput_"+g]=f,n.createeditor&&n.createeditor(t,l,f)}n._requirewidthupdate&&f.jqxDateTimeInput({width:u.width()-2});if(i){if(l!=""&&l!=null){var A=new Date(l);A=="Invalid Date"&&this.source.getvaluebytype&&(A=this.source.getvaluebytype(l,{name:n.datafield,type:"date"})),f.jqxDateTimeInput("setDate",A)}else f.jqxDateTimeInput("setDate",null);this.editcell.defaultvalue!=undefined&&f.jqxDateTimeInput("setDate",this.editcell.defaultvalue)}s&&setTimeout(function(){m(f.jqxDateTimeInput("dateTimeInput"))},10)}break;case"numberinput":if(this.host.jqxNumberInput){r.innerHTML="";var g=e.trim(n.datafield).split(" ").join("");g.indexOf(".")!=-1&&(g=g.replace(".",""));var O=this.editors["numberinput_"+g];f=O==undefined?e("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='numbereditor'></div>"):O,f.show(),f.css("top",e(r).parent().position().top),this.oldhscroll?f.css("left",-d+parseInt(e(r).position().left)):f.css("left",parseInt(e(r).position().left)),n.pinned&&f.css("left",d+parseInt(e(r).position().left));if(O==undefined){f.prependTo(this.table),f[0].id="numbereditor"+this.element.id+g;var M="",_="left",D=2;n.cellsformat?n.cellsformat.indexOf("c")!=-1?(M=this.gridlocalization.currencysymbol,_=this.gridlocalization.currencysymbolposition,_=="before"?_="left":_="right",n.cellsformat.length>1&&(D=parseInt(n.cellsformat.substring(1),10))):n.cellsformat.indexOf("p")!=-1&&(M=this.gridlocalization.percentsymbol,_="right",n.cellsformat.length>1&&(D=parseInt(n.cellsformat.substring(1),10))):D=0,f.jqxNumberInput({decimalSeparator:this.gridlocalization.decimalseparator,decimalDigits:D,inputMode:"simple",theme:this.theme,rtl:this.rtl,width:u.width()-1,height:u.height()-1,spinButtons:!0,symbol:M,symbolPosition:_}),this.editors["numberinput_"+g]=f,n.createeditor&&n.createeditor(t,l,f)}n._requirewidthupdate&&f.jqxNumberInput({width:u.width()-2});if(i){if(l!=""&&l!=null){var P=l;f.jqxNumberInput("setDecimal",P)}else f.jqxNumberInput("setDecimal",0);this.editcell.defaultvalue!=undefined&&f.jqxNumberInput("setDecimal",this.editcell.defaultvalue);if(this.editchar&&this.editchar.length>0){var H=parseInt(this.editchar);isNaN(H)||f.jqxNumberInput("setDecimal",H)}s&&setTimeout(function(){m(f.jqxNumberInput("numberInput")),f.jqxNumberInput("_setSelectionStart",0);if(a.editchar)n.cellsformat.length>0?f.jqxNumberInput("_setSelectionStart",2):f.jqxNumberInput("_setSelectionStart",1),a.editchar=null;else{var e=f.jqxNumberInput("spinButtons");if(e){var t=f.jqxNumberInput("numberInput").val();a._setSelection(f.jqxNumberInput("numberInput")[0],t.length,t.length)}else{var t=f.jqxNumberInput("numberInput").val();a._setSelection(f.jqxNumberInput("numberInput")[0],0,t.length)}}},10)}}break;case"custom":r.innerHTML="";var g=e.trim(n.datafield).split(" ").join("");g.indexOf(".")!=-1&&(g=g.replace(".",""));var B=this.editors["customeditor_"+g+"_"+t];f=B==undefined?e("<div style='overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='customeditor'></div>"):B,f.show(),f.css("top",e(r).parent().position().top),this.oldhscroll?f.css("left",-d+parseInt(e(r).position().left)):f.css("left",parseInt(e(r).position().left)),n.pinned&&f.css("left",d+parseInt(e(r).position().left));if(B==undefined){f.prependTo(this.table),f[0].id="customeditor"+this.element.id+g+"_"+t,this.editors["customeditor_"+g+"_"+t]=f;var j=u.width()-1,F=u.height()-1;f.width(j),f.height(F),n.createeditor&&n.createeditor(t,l,f,c,j,F,this.editchar)}n._requirewidthupdate&&f.width(u.width()-2);break;case"template":r.innerHTML="";var g=e.trim(n.datafield).split(" ").join("");g.indexOf(".")!=-1&&(g=g.replace(".",""));var I=this.editors["templateeditor_"+g];f=I==undefined?e("<div style='overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='templateeditor'></div>"):I,f.show(),f.css("top",e(r).parent().position().top),this.oldhscroll?f.css("left",-d+parseInt(e(r).position().left)):f.css("left",parseInt(e(r).position().left)),n.pinned&&f.css("left",d+parseInt(e(r).position().left));if(I==undefined){f.prependTo(this.table),f[0].id="templateeditor"+this.element.id+g,this.editors["templateeditor_"+g]=f;var j=u.width()-1,F=u.height()-1;f.width(j),f.height(F),n.createeditor&&n.createeditor(t,l,f,c,j,F,this.editchar)}n._requirewidthupdate&&f.width(u.width()-2);break;case"textbox":default:r.innerHTML="",f=this.editors["textboxeditor_"+n.datafield]||e("<input autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='textbox' id='textboxeditor'/>"),f[0].id="textboxeditor"+this.element.id+n.datafield,f.appendTo(u),this.rtl&&f.css("direction","rtl");if(i||f[0].className=="")f.addClass(this.toThemeProperty("jqx-input")),f.addClass(this.toThemeProperty("jqx-widget-content")),this.editchar&&this.editchar.length>0?f.val(this.editchar):(n.cellsformat!=""&&(l=this.getcelltext(t,o)),l==undefined&&(l=""),f.val(l)),this.editcell.defaultvalue!=undefined&&f.val(this.editcell.defaultvalue),f.width(u.width()+1),f.height(u.height()+1),n.createeditor&&n.createeditor(t,l,f),n.cellsformat!=""&&(n.cellsformat.indexOf("p")!=-1||n.cellsformat.indexOf("c")!=-1||n.cellsformat.indexOf("n")!=-1||n.cellsformat.indexOf("f")!=-1)&&(this.editors["textboxeditor_"+n.datafield]||f.keydown(function(e){var t=e.charCode?e.charCode:e.keyCode?e.keyCode:0,r=String.fromCharCode(t),i=parseInt(r);if(isNaN(i))return!0;if(a._selection(f).length>0)return!0;var s="",o=f.val();if(n.cellsformat.length>1){var u=parseInt(n.cellsformat.substring(1));isNaN(u)&&(u=0)}else var u=0;if(u>0&&o.indexOf(a.gridlocalization.decimalseparator)!=-1&&a._selection(f).start>o.indexOf(a.gridlocalization.decimalseparator))return!0;for(var l=0;l<o.length-u;l++){var c=o.substring(l,l+1);c.match(/^[0-9]+$/)!=null&&(s+=c)}if(s.length>=11)return!1}));this.editors["textboxeditor_"+n.datafield]=f,i&&s&&setTimeout(function(){m(f),a.editchar?(a._setSelection(f[0],1,1),a.editchar=null):a._setSelection(f[0],0,f.val().length)},25)}i&&n.initeditor&&n.initeditor(t,l,f,c,this.editchar),f&&(f[0].style.zIndex=1+r.style.zIndex,e.jqx.browser.msie&&e.jqx.browser.version<8&&(f[0].style.zIndex=1+this.columns.records.length+r.style.zIndex),f.css("display","block"),this.editcell.editor=f,this.editcell[o]?this.editcell[o].editor=f:(this.editcell[o]={},this.editcell[o].editor=f));if(a.isTouchDevice())return;setTimeout(function(){a.content&&(a.content[0].scrollTop=0,a.content[0].scrollLeft=0),a.gridcontent&&(a.gridcontent[0].scrollLeft=0,a.gridcontent[0].scrollTop=0)},10)},_setSelection:function(e,t,n){try{if("selectionStart"in e)e.setSelectionRange(t,n);else{var r=e.createTextRange();r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r.select()}}catch(i){var s=i}},_hideeditors:function(){if(this.editcells!=null){var e=this;for(var t in this.editcells)e.editcell=e.editcells[t],e._hidecelleditor()}},_hidecelleditor:function(e){if(!this.editcell)return;if(this.editmode==="selectedrow"){for(var t=0;t<this.columns.records.length;t++){var n=this.columns.records[t];if(this.editcell[n.datafield]&&this.editcell[n.datafield].editor){this.editcell[n.datafield].editor.hide();var r=this.editcell[n.datafield].editor;switch(n.columntype){case"dropdownlist":r.jqxDropDownList({closeDelay:0}),r.jqxDropDownList("hideListBox"),r.jqxDropDownList({closeDelay:300});break;case"combobox":r.jqxComboBox({closeDelay:0}),r.jqxComboBox("hideListBox"),r.jqxComboBox({closeDelay:300});break;case"datetimeinput":r.jqxDateTimeInput("isOpened")&&(r.jqxDateTimeInput({closeDelay:0}),r.jqxDateTimeInput("hideCalendar"),r.jqxDateTimeInput({closeDelay:300}))}}}this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide());return}if(this.editcell.columntype=="checkbox")return;if(this.editcell.editor){this.editcell.editor.hide();switch(this.editcell.columntype){case"dropdownlist":this.editcell.editor.jqxDropDownList({closeDelay:0}),this.editcell.editor.jqxDropDownList("hideListBox"),this.editcell.editor.jqxDropDownList({closeDelay:300});break;case"combobox":this.editcell.editor.jqxComboBox({closeDelay:0}),this.editcell.editor.jqxComboBox("hideListBox"),this.editcell.editor.jqxComboBox({closeDelay:300});break;case"datetimeinput":var i=this.editcell.editor;i.jqxDateTimeInput("isOpened")&&(i.jqxDateTimeInput({closeDelay:0}),i.jqxDateTimeInput("hideCalendar"),i.jqxDateTimeInput({closeDelay:300}))}}this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide()),this.isNestedGrid||e!=0&&this.element.focus()},_geteditorvalue:function(t){var n=new String;if(!this.editcell)return null;var r=this.editcell.editor;if(this.editmode=="selectedrow"&&this.editcell[t.datafield])var r=this.editcell[t.datafield].editor;if(r){switch(t.columntype){case"textbox":default:n=r.val();if(t.cellsformat!=""){var i="string",s=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(s){var o="";e.each(s,function(){if(this.name==t.displayfield)return this.type&&(o=this.type),!1}),o&&(i=o)}var u=i==="number"||i==="float"||i==="int"||i==="integer",a=i==="date"||i==="time";if(u||i==="string"&&(t.cellsformat.indexOf("p")!=-1||t.cellsformat.indexOf("c")!=-1||t.cellsformat.indexOf("n")!=-1||t.cellsformat.indexOf("f")!=-1)){if(n===""&&t.nullable)return"";n.indexOf(this.gridlocalization.currencysymbol)>-1&&(n=n.replace(this.gridlocalization.currencysymbol,""));var f=function(e,t,n){var r=e;if(t==n)return e;var i=r.indexOf(t);while(i!=-1)r=r.replace(t,n),i=r.indexOf(t);return r};n=f(n,this.gridlocalization.thousandsseparator,""),n=n.replace(this.gridlocalization.decimalseparator,"."),n.indexOf(this.gridlocalization.percentsymbol)>-1&&(n=n.replace(this.gridlocalization.percentsymbol,""));var l="";for(var c=0;c<n.length;c++){var h=n.substring(c,c+1);h==="-"&&(l+="-"),h==="."&&(l+="."),h.match(/^[0-9]+$/)!=null&&(l+=h)}n=l,n=n.replace(/ /g,""),n=new Number(n),isNaN(n)&&(n="")}if(a||i==="string"&&(t.cellsformat.indexOf("H")!=-1||t.cellsformat.indexOf("m")!=-1||t.cellsformat.indexOf("M")!=-1||t.cellsformat.indexOf("y")!=-1||t.cellsformat.indexOf("h")!=-1||t.cellsformat.indexOf("d")!=-1)){if(n===""&&t.nullable)return"";var p=n;n=new Date(n);if(n=="Invalid Date"||n==null){e.jqx.dataFormat&&(n=e.jqx.dataFormat.tryparsedate(p,this.gridlocalization));if(n=="Invalid Date"||n==null)n=""}}}t.displayfield!=t.datafield&&(n={label:n,value:n});break;case"checkbox":r.jqxCheckBox&&(n=r.jqxCheckBox("checked"));break;case"datetimeinput":if(r.jqxDateTimeInput){r.jqxDateTimeInput({isEditing:!1}),r.jqxDateTimeInput("_validateValue"),n=r.jqxDateTimeInput("getDate");if(n==null)return null;n=new Date(n.toString()),t.displayfield!=t.datafield&&(n={label:n,value:n})}break;case"dropdownlist":if(r.jqxDropDownList){var d=r.jqxDropDownList("selectedIndex"),v=r.jqxDropDownList("listBox").getVisibleItem(d);t.displayfield!=t.datafield?v?n={label:v.label,value:v.value}:n="":v?n=v.label:n="",n==null&&(n="")}break;case"combobox":if(r.jqxComboBox){n=r.jqxComboBox("val");if(t.displayfield!=t.datafield){var v=r.jqxComboBox("getSelectedItem");v!=null&&(n={label:v.label,value:v.value})}n==null&&(n="")}break;case"numberinput":if(r.jqxNumberInput){this.touchdevice&&r.jqxNumberInput("_doTouchHandling");var m=r.jqxNumberInput("getDecimal");n=new Number(m),n=parseFloat(n),isNaN(n)&&(n=0),t.displayfield!=t.datafield&&(n={label:n,value:n})}}t.geteditorvalue&&(this.editmode=="selectedrow"?n=t.geteditorvalue(this.editcell.row,this.getcellvalue(this.editcell.row,t.datafield),r):n=t.geteditorvalue(this.editcell.row,this.editcell.value,r))}return n},hidevalidationpopups:function(){this.popups&&(e.each(this.popups,function(){this.validation.remove(),this.validationrow.remove()}),this.popups=new Array),this.validationpopup&&(this.validationpopuparrow.hide(),this.validationpopup.hide())},showvalidationpopup:function(t,n,r){if(r==undefined)var r=this.gridlocalization.validationstring;var i=e("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"),s=e("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>");i.html(r),s.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),i.addClass(this.toThemeProperty("jqx-grid-validation")),i.addClass(this.toThemeProperty("jqx-rc-all")),i.prependTo(this.table),s.prependTo(this.table);var o=this.hScrollInstance,u=o.value,a=parseInt(u),f=this.getcolumn(n).uielement,l=e(this.hittestinfo[t].visualrow);i.css("top",parseInt(l.position().top)+30+"px");var c=parseInt(i.css("top"));s.css("top",c-12),s.removeClass(),s.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));var h=!1;c>=this._gettableheight()&&(s.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),s.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),c=parseInt(l.position().top)-this.rowsheight-5,c<0&&(c=0,this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),h=!0),i.css("top",c+"px"),s.css("top",c+i.outerHeight()-9));var p=-a+parseInt(e(f).position().left);s.css("left",a+p+30);var d=i.width();if(d+p>this.host.width()-20){var v=d+p-this.host.width()+40;p-=v}h?i.css("left",a+parseInt(e(f).position().left)-i.outerWidth()):i.css("left",a+p),i.show(),s.show(),this.popups||(this.popups=new Array),this.popups[this.popups.length]={validation:i,validationrow:s}},_showvalidationpopup:function(t,n,r){var i=this.editcell.editor;if(this.editmode=="selectedrow"){var s=this.editcell[n];s&&s.editor&&(i=s.editor,s.element=i)}if(!i)return;if(this.validationpopup&&e.jqx.isHidden(this.validationpopup)){this.validationpopup.remove&&(this.validationpopup.remove(),this.validationpopuparrow.remove()),this.validationpopup=null,this.validationpopuparrow=null;if(n===undefined&&r===undefined&&this.editors&&this.editors.length===0)return}if(!this.validationpopup){var o=e("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"),u=e("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>");o.html(r),u.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),o.addClass(this.toThemeProperty("jqx-grid-validation")),o.addClass(this.toThemeProperty("jqx-rc-all")),o.prependTo(this.table),u.prependTo(this.table),this.validationpopup=o,this.validationpopuparrow=u}else this.validationpopup.html(r);var a=this.hScrollInstance,f=a.value,l=parseInt(f);this.validationpopup.css("top",parseInt(e(this.editcell.element).parent().position().top)+(this.rowsheight+5)+"px");var c=parseInt(this.validationpopup.css("top"));this.validationpopuparrow.css("top",c-12),this.validationpopuparrow.removeClass(),this.validationpopuparrow.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));var h=this._gettableheight(),p=!1;c>=h&&(this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),this.validationpopuparrow.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),c=parseInt(e(this.editcell.element).parent().position().top)-this.rowsheight-5,c<0&&(c=0,this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),p=!0),this.validationpopup.css("top",c+"px"),this.validationpopuparrow.css("top",c+this.validationpopup.outerHeight()-9));var d=-l+parseInt(e(this.editcell.element).position().left);this.validationpopuparrow.css("left",l+d+30);var v=this.validationpopup.width();if(v+d>this.host.width()-20){var m=v+d-this.host.width()+40;d-=m}p?this.validationpopup.css("left",l+parseInt(e(this.editcell.element).position().left)-this.validationpopup.outerWidth()):this.validationpopup.css("left",l+d),this.validationpopup.show(),this.validationpopuparrow.show()}})}(jQuery),function(e){e.jqx.dataview.grouping=function(){this.loadgrouprecords=function(t,n,r,i,s,o,u,a,f){var l=t,c=this,h=new Array;for(var p=0;p<c.groups.length;p++)h[p]=c.generatekey();var d=new Array,v=0,h=h,m=new Array,g=n,y=n,b=c.groups.length;this.loadedrecords=new Array,this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this.sortedgroups=new Array;var w=this.sortdata!=null,E=w?this.sortdata:this.records;if(this.pageable){var S=Object.prototype.toString,x=this.groups[0];Object.prototype.toString=typeof x=="function"?x:function(){return this[x]};var T=new Array,N=0;e.each(E,function(){T[n+N++]=this}),E=T,w?E.sort(function(t,n){var t=t.value,n=n.value;t===undefined&&(t=null),n===undefined&&(n=null);if(t===null&&n===null)return 0;if(t===null&&n!==null)return 1;if(t!==null&&n===null)return-1;if(e.jqx.dataFormat.isNumber(t)&&e.jqx.dataFormat.isNumber(n))return t<n?-1:t>n?1:0;if(e.jqx.dataFormat.isDate(t)&&e.jqx.dataFormat.isDate(n))return t<n?-1:t>n?1:0;!e.jqx.dataFormat.isNumber(t)&&!e.jqx.dataFormat.isNumber(n)&&(t=String(t).toLowerCase(),n=String(n).toLowerCase());try{if(t<n)return-1;if(t>n)return 1}catch(r){var i=r}return 0}):E.sort(function(t,n){t===undefined&&(t=null),n===undefined&&(n=null);if(t===null&&n===null)return 0;if(t===null&&n!==null)return 1;if(t!==null&&n===null)return-1;t=t.toString(),n=n.toString();if(e.jqx.dataFormat.isNumber(t)&&e.jqx.dataFormat.isNumber(n))return t<n?-1:t>n?1:0;if(e.jqx.dataFormat.isDate(t)&&e.jqx.dataFormat.isDate(n))return t<n?-1:t>n?1:0;!e.jqx.dataFormat.isNumber(t)&&!e.jqx.dataFormat.isNumber(n)&&(t=String(t).toLowerCase(),n=String(n).toLowerCase());try{if(t<n)return-1;if(t>n)return 1}catch(r){var i=r}return 0}),Object.prototype.toString=S}if(this.virtualmode){var T=new Array,N=0;for(var g=0;g<r-n;g++)T[n+N++]=E[g];g=0,E=T}for(var C=n;C<r;C++){var k={};w?k=e.extend({},E[C].value):k=e.extend({},E[C]),id=k[c.uniqueId];if(s>=a||id!=u[s][c.uniqueId]||o&&o[id])f[f.length]=s;var L=new Array,A=0;for(var p=0;p<b;p++){var O=c.groups[p],M=k[O];M==null&&(M=""),L[A++]={value:M,hash:h[p]}}if(L.length!=b)break;var _=null,D="",P=-1;for(var H=0;H<L.length;H++){P++;var B=L[H].value,j=L[H].hash;D=D+"_"+j+"_"+B;if(m[D]!=undefined&&m[D]!=null){_=m[D];continue}if(_==null)_={group:B,subItems:new Array,subGroups:new Array,level:0},d[v++]=_,_.uniqueid=c.generatekey(),c.loadedgroupsByKey[B]=_;else{var F={group:B,subItems:new Array,subGroups:new Array,parentItem:_,level:_.level+1};c.loadedgroupsByKey[_.uniqueid+"_"+B]=F,F.uniqueid=c.generatekey(),_.subGroups[_.subGroups.length++]=F,_=F}m[D]=_}_!=null?(k.uid||(k.uid=this.getid(this.source.id,k,g)),w?(k.boundindex=E[C].index,this.recordsbyid["id"+k.uid]=E[C].value):(k.boundindex=g,this.recordsbyid["id"+k.uid]=E[C]),this.bounditems[k.boundindex]=k,this.sortedgroups[g]=k,k.uniqueid=c.generatekey(),k.parentItem=_,k.level=_.level+1,_.subItems[_.subItems.length++]=k):(k.uid||(k.uid=this.getid(this.source.id,k,g)),w?(k.boundindex=E[C].index,this.recordsbyid["id"+k.uid]=E[C].value):(k.boundindex=g,this.recordsbyid["id"+k.uid]=E[C]),this.sortedgroups[g]=k,this.bounditems[k.boundindex]=k,k.uniqueid=c.generatekey()),s++,g++,y++}var I=function(e,n,r){for(var i=0;i<n.subItems.length;i++)n.subItems[i].visibleindex=t+r,e.rows[r]=n.subItems[i],e.loadedrecords[r]=n.subItems[i],r++;return r},q=function(e,n,r){var i=function(n){if(e.aggregates==1){var i=n,s={};i!=null&&(s.level=i.level,s.visibleindex=t+r,s.uniqueid=e.generatekey(),e.rows[r]=s,e.loadedrecords[r++]=s,s.totalsrow=!0,n.subItems.length>0?(i=n.subItems[n.subItems.length-1],s.parentItem=i.parentItem,s.parentItem.subItems&&(s.parentItem.subItems[s.parentItem.subItems.length]=s)):n.subGroups.length>0&&(i=n.subGroups[n.subGroups.length-1],s.level=i.level,s.parentItem=n,n.subGroups[n.subGroups.length]=s))}};for(subGroup in n.subGroups){var s=n.subGroups[subGroup];s.subGroups&&(e.loadedgroups[e.loadedgroups.length]=s,s.visibleindex=t+r,e.rows[r]=s,e.loadedrecords[r]=s,r++,s.subGroups.length>0?r=q(e,s,r):s.subItems.length>0&&(r=I(e,s,r)),i(s))}return n.subItems.length>0&&(r=I(e,n,r)),i(n),r},R=d.length;this.loadedgroups=new Array,this.rows=new Array;var l=0;for(var g=0;g<R;g++){var O=d[g];this.loadedrootgroups[g]=O,this.loadedgroups[this.loadedgroups.length]=O,O.visibleindex=t+l,this.rows[l]=O,this.loadedrecords[l]=O,l++,l=q(this,O,l)}return l},this._updategroupsinpage=function(t,n,r,i,s,o,u){var a=new Array,f=[];if(this.groupable&&this.groups.length>0){var l=0,c=new Array,h=new Array;for(var p=0;p<t.groups.length;p++)h[p]=t.generatekey();var d=0,v=new Array,m=0;u>this.totalrecords&&(u=this.totalrecords);for(var g=o;g<u;g++){var y=e.extend({},t.sortedgroups[g]);id=y[t.uniqueId];if(!t.pagesize||r>=t.pagesize*t.pagenum&&r<t.pagesize*(t.pagenum+1)){if(i>=s||id!=a[i][t.uniqueId]||updated&&updated[id])f[f.length]=i;var b=new Array,w=0;for(var p=0;p<t.groups.length;p++){var E=t.groups[p],S=y[E];null==S&&(S=""),b[w++]={value:S,hash:h[p]}}if(b.length!=t.groups.length)break;var x=null,T="",N=-1;for(var C=0;C<b.length;C++){N++;var k=b[C].value,L=b[C].hash;T=T+"_"+L+"_"+k;if(c[T]!=undefined&&c[T]!=null){x=c[T];continue}if(x==null){x={group:k,subItems:new Array,subGroups:new Array,level:0},v[m++]=x;var A=t.loadedgroupsByKey[k];A!=undefined&&(x.visibleindex=A.visibleindex,x.uniqueid=A.uniqueid)}else{var O={group:k,subItems:new Array,subGroups:new Array,parentItem:x,level:x.level+1},A=t.loadedgroupsByKey[x.uniqueid+"_"+k];O.visibleindex=A.visibleindex,O.uniqueid=A.uniqueid,x.subGroups[x.subGroups.length++]=O,x=O}c[T]=x}x!=null&&(y.parentItem=x,y.level=x.level+1,x.subItems[x.subItems.length++]=y),i++}d++,r++}var M=function(t,n,r){for(var i=0;i<n.subItems.length;i++)a[r]=e.extend({},n.subItems[i]),r++;return r},_=function(e){var t=!1;for(subGroup in e.subGroups){var n=e.subGroups[subGroup];if(n.subGroups){if(n.subGroups.length>0){var r=_(n);if(r)return t=!0,!0}if(n.subItems.length>0)return t=!0,!0}}return e.subItems.length>0?(t=!0,!0):t},D=function(e,t,n){for(subGroup in t.subGroups){var r=t.subGroups[subGroup];r.subGroups&&_(r)&&(a[n]=r,n++,r.subGroups.length>0?n=D(e,r,n):r.subItems.length>0&&(n=M(e,r,n)))}return t.subItems.length>0&&(n=M(e,t,n)),n},P=0;for(var d=0;d<v.length;d++){var E=v[d];_(E)&&(a[l]=E,l++,l=D(this,E,l))}}return a}},e.extend(e.jqx._jqxGrid.prototype,{_initgroupsheader:function(){this.groupsheader.css("visibility","hidden");if(this._groupsheader()){this.groupsheader.css("visibility","inherit");var t=this,n=this.gridlocalization.groupsheaderstring;this.groupsheaderdiv=this.groupsheaderdiv||e('<div style="width: 100%; position: relative;"></div>'),this.groupsheaderdiv.height(this.groupsheaderheight),this.groupsheaderdiv.css("top",0),this.groupsheader.append(this.groupsheaderdiv),this.groupheadersbounds=new Array;var r=this.groups.length;this.groupsheaderdiv.children().remove(),this.groupsheaderdiv[0].innerHTML="";var i=new Array;if(r>0)e.each(this.groups,function(n){var s=this,o=t._getColumnText(this),u=o.label,a=t._rendergroupcolumn(u,s);a.addClass(t.toThemeProperty("jqx-grid-group-column")),t.groupsheaderdiv.append(a);if(t.closeablegroups){var f=e(a.find(".jqx-icon-close"));t.isTouchDevice()&&t.touchmode!==!0?t.addHandler(f,"touchstart",function(){return t.removegroupat(n),!1}):t.addHandler(f,"click",function(){return t.removegroupat(n),!1})}t.sortable&&t.addHandler(a,"click",function(){var e=t.getcolumn(s);return e!=null&&t._togglesort(e),!1}),i[i.length]=a,t._handlegroupstocolumnsdragdrop(this,a);if(n<r-1){var l=a.height(),c=e('<div style="float: left; position: relative;"></div>');t.rtl&&c.css("float","right"),c.width(t.groupindentwidth/3),c.height(1),c.css("top",l/2),c.addClass(t.toThemeProperty("jqx-grid-group-column-line")),t.groupsheaderdiv.append(c)}});else{var s=e('<div style="position: relative;">'+n+"</div>");this.groupsheaderdiv.append(s),this.rtl&&s.addClass(this.toThemeProperty("jqx-rtl"))}this._groupheaders=i,this._updategroupheadersbounds()}},_updategroupheadersbounds:function(){var t=this,n=this.groupsheaderdiv.children().outerHeight(),r=(this.groupsheader.height()-n)/2;this.groupsheaderdiv.css("top",r),this.rtl?this.groupsheaderdiv.css("right",r):this.groupsheaderdiv.css("left",r),this.rtl&&this._groupheaders.reverse(),e.each(this._groupheaders,function(e){var n=this.coord();t.groupheadersbounds[e]={left:n.left,top:n.top,width:this.outerWidth(),height:this.outerHeight(),index:e}})},addgroup:function(e){if(e){var t=this;t.groups!==t.dataview.groups&&(t.dataview.groups=t.groups),t.groups[t.groups.length]=e,t.refreshgroups(),this._raiseEvent(12,{type:"Add",index:t.groups[t.groups.length],groups:t.groups})}},insertgroup:function(e,t){if(e!=undefined&&e!=null&&e>=0&&e<=this.groups.length&&t){var n=this;n.groups!==n.dataview.groups&&(n.dataview.groups=n.groups),n.groups.splice(e,0,t.toString()),n.refreshgroups(),this._raiseEvent(12,{type:"Insert",index:e,groups:n.groups})}},refreshgroups:function(){this._refreshdataview(),this._render(!0,!0,!0,!1)},_insertaftergroup:function(e,t){var n=this._getGroupIndexByDataField(e);this.insertgroup(n+1,t)},_insertbeforegroup:function(e,t){var n=this._getGroupIndexByDataField(e);this.insertgroup(n,t)},removegroupat:function(e){if(e>=0&&e!=null&&e!=undefined){var t=this;return t.groups!==t.dataview.groups&&(t.dataview.groups=t.groups),t.groups.splice(e,1),t.refreshgroups(),t.virtualmode&&t.updatebounddata(),this._raiseEvent(12,{type:"Remove",index:e,groups:t.groups}),!0}return!1},cleargroups:function(){var e=this;return e.groups=[],e.dataview.groups=e.groups,e.refreshgroups(),this._raiseEvent(12,{type:"Clear",groups:e.groups}),!0},removegroup:function(e){if(e==null)return!1;var t=this.groups.indexOf(e.toString());return this.removegroupat(t)},getrootgroupscount:function(){var e=this.dataview.loadedrootgroups.length;return e},collapsegroup:function(e){return this._setrootgroupstate(e,!1)},expandgroup:function(e){return this._setrootgroupstate(e,!0)},collapseallgroups:function(e){this._setbatchgroupstate(!1,e)},expandallgroups:function(e){this._setbatchgroupstate(!0,e)},getgroup:function(t){var n=this.dataview.loadedrootgroups[t];if(n==null)return null;var r=this.expandedgroups[n.uniqueid].expanded,i=n.group,s=n.level,o=new Array;this._getsubgroups(o,n);var u=this,a={group:i,level:s,expanded:r,subgroups:o};if(n.subItems){var f=new Array;e.each(n.subItems,function(){var e=this.boundindex;f[f.length]=u.getrowdata(e)}),f.length>0&&(a.subrows=f)}return a},getrootgroups:function(){var e=this.dataview.loadedrootgroups.length,t=new Array;for(var n=0;n<e;n++)t[n]=this.getgroup(n);return t},_getsubgroups:function(t,n){var r=this;for(obj in n.subGroups){var i=n.subGroups[obj],s=r.expandedgroups[i.uniqueid].expanded,o=i.group,u=i.level;t[t.length]={group:o,level:u,expanded:s};if(i.subItems){var a=new Array;e.each(i.subItems,function(){var e=this.boundindex;a[a.length]=r.getrowdata(e)}),t[t.length-1].subrows=a}if(i.subGroups){var f=new Array;r._getsubgroups(f,i)}}return t},_setbatchgroupstate:function(e,t){var n=this;for(obj in this.dataview.loadedrootgroups)n._setrootgroupstate(obj,e,!1,!0);if(t==0)return n._requiresupdate=!0,n._renderrows(n.virtualsizeinfo),!0;var r=this.vScrollBar[0].style.visibility;this.rendergridcontent(!0,!1);if(r!=this.vScrollBar[0].style.visibility||this._hiddencolumns)this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo);return!0},_setrootgroupstate:function(e,t,n,r){if(e==undefined||e==null||e<0)return!1;if(!this.groupable||this.groups.length==0)return!1;var i=n!=undefined?n:!0;if(e>=0&&e<this.dataview.loadedrootgroups.length){var s=this.dataview.loadedrootgroups[e];if(this.pageable){var o=new Array;for(var u=0;u<this.dataview.rows.length;u++)this.dataview.rows[u].group!=null&&this.dataview.rows[u].level===0&&o.push(this.dataview.rows[u]);s=o[e];if(!s)return}return this._setgroupstate(s,t,i,r)}return!1},_togglegroupstate:function(e,t){if(e==null||e==undefined)return!1;var n=this.vScrollInstance.value,r=this.expandedgroups[e.uniqueid];r==undefined?r=!1:r=r.expanded,r=!r;var i=this._setgroupstate(e,r,t);return n!==0&&this.vScrollBar.css("visibility")!=="hidden"&&(n<=this.vScrollInstance.max?this.vScrollInstance.setPosition(n):this.vScrollInstance.setPosition(this.vScrollInstance.max)),i},_setgroupstate:function(e,t,n,r){if(e==null||e==undefined)return!1;var i=!1;this.editable&&this.editcell&&this.endcelledit(this.editcell.row,this.editcell.column,!1,!1);var s=this.expandedgroups[e.uniqueid];s==undefined&&(s={expanded:!1},i=!0),s.expanded!=t&&(i=!0);if(i){this.expandedgroups[e.uniqueid]={expanded:t,group:e},this._setsubgroupsvisibility(this,e,!t,r);if(n){var o=this.vScrollBar[0].style.visibility;this.rendergridcontent(!0,!1);if(o!=this.vScrollBar[0].style.visibility||this._hiddencolumns)this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)}if(undefined==this.suspendgroupevents||this.suspendgroupevents==0)t?this._raiseEvent(4,{group:e.group,parentgroup:e.parentItem?e.parentItem.group:null,level:e.level,visibleindex:e.visibleindex}):this._raiseEvent(5,{group:e.group,parentgroup:e.parentItem?e.parentItem.group:null,level:e.level,visibleindex:e.visibleindex});return!0}return!1},_setgroupitemsvisibility:function(e,t,n){for(var r=0;r<t.subItems.length;r++)e._setrowvisibility(t.subItems[r].visibleindex,n,!1)},_setsubgroupsvisibility:function(e,t,n,r){if(t.parentItem!=null){if(this.hiddens[t.parentItem.visibleindex])return}else if(t.parentItem==null&&this.hiddens[t.visibleindex])return;for(subGroup in t.subGroups){var i=t.subGroups[subGroup];n||e._setrowvisibility(i.visibleindex,n,!1);var s=!n;r?this.expandedgroups[i.uniqueid]={expanded:s,group:i}:e.expandedgroups[i.uniqueid]==undefined?s=!1:s=e.expandedgroups[i.uniqueid].expanded,i.subGroups&&(i.subGroups.length>0?e._setsubgroupsvisibility(e,i,!s||n,r):i.subItems.length>0&&e._setgroupitemsvisibility(e,i,!s||n)),n&&e._setrowvisibility(i.visibleindex,n,!1)}t.subItems&&t.subItems.length>0&&e._setgroupitemsvisibility(e,t,n)},_handlecolumnsdragdrop:function(){var t=this,n=-1,r=!1;if(!t.groupable)return;var i="mousemove.grouping"+this.element.id,s="mousedown.grouping"+this.element.id,o="mouseup.grouping"+this.element.id,u=!1;this.isTouchDevice()&&this.touchmode!==!0&&(u=!0,i=e.jqx.mobile.getTouchEventName("touchmove")+".grouping"+this.element.id,s=e.jqx.mobile.getTouchEventName("touchstart")+".grouping"+this.element.id,o=e.jqx.mobile.getTouchEventName("touchend")+".grouping"+this.element.id),this.removeHandler(e(document),i),this.addHandler(e(document),i,function(i){if(!t.showgroupsheader)return!0;if(t.dragcolumn!=null){var s=parseInt(i.pageX),o=parseInt(i.pageY);if(u){var a=t.getTouches(i),f=a[0];s=parseInt(f.pageX),o=parseInt(f.pageY)}var l=t.host.coord(),c=parseInt(l.left),h=parseInt(l.top);if(t.dragmousedownoffset==undefined||t.dragmousedownoffset==null)t.dragmousedownoffset={left:0,top:0};var p=parseInt(s)-parseInt(t.dragmousedownoffset.left),d=parseInt(o)-parseInt(t.dragmousedownoffset.top);t.dragcolumn.css({left:p+"px",top:d+"px"}),r=!1,s>=c&&s<=c+t.host.width()&&o>=h&&o<=h+t.host.height()&&(r=!0),n=-1;if(r){t.dragcolumnicon.removeClass(t.toThemeProperty("jqx-grid-dragcancel-icon")),t.dragcolumnicon.addClass(t.toThemeProperty("jqx-grid-drag-icon"));var v=t.groupsheader.coord(),m=v.top+t.groupsheader.height(),g=e.data(t.dragcolumn[0],"datarecord");if(g)var y=t.groups.indexOf(g.toString());else var y=-1;var b=y==-1||t.groups.length>1&&y>-1;t.dropline!=null&&(o>=v.top&&o<=m?b&&(n=t._handlegroupdroplines(s)):t.dropline.fadeOut("slow"))}else t.dropline!=null&&t.dropline.fadeOut("slow"),t.dragcolumnicon.removeClass(t.toThemeProperty("jqx-grid-drag-icon")),t.dragcolumnicon.addClass(t.toThemeProperty("jqx-grid-dragcancel-icon"));if(u)return i.preventDefault(),i.stopPropagation(),!1}}),this.removeHandler(e(document),o),this.addHandler(e(document),o,function(i){if(!t.showgroupsheader)return!0;t.__drag=!1,e(document.body).removeClass("jqx-disableselect");var s=parseInt(i.pageX),o=parseInt(i.pageY);if(u){var a=t.getTouches(i),f=a[0];s=parseInt(f.pageX),o=parseInt(f.pageY)}var l=t.host.coord(),c=parseInt(l.left),h=parseInt(l.top),p=t.groupsheader.height();t.showtoolbar&&(h+=t.toolbarheight),t.dragstarted=!1,t.dragmousedown=null;if(t.dragcolumn!=null){var d=e.data(t.dragcolumn[0],"datarecord");t.dragcolumn.remove(),t.dragcolumn=null;if(d!=null){if(!t.getcolumn(d).groupable){t.dropline!=null&&(t.dropline.remove(),t.dropline=null);return}if(r)if(n!=-1){var v=n.index,m=t.groups[v],g=t._getGroupIndexByDataField(d);g!=v&&(g!=undefined&&g>=0&&t.groups.splice(g,1),n.position=="before"?t.rtl?t._insertaftergroup(m,d):t._insertbeforegroup(m,d):t.rtl?t._insertbeforegroup(m,d):t._insertaftergroup(m,d))}else if(t.groups.length==0)o>h&&o<=h+p&&t.addgroup(d);else if(o>h+p){var g=t._getGroupIndexByDataField(d);t.removegroupat(g)}t.dropline!=null&&(t.dropline.remove(),t.dropline=null)}}})},_getGroupIndexByDataField:function(e){for(var t=0;t<this.groups.length;t++)if(this.groups[t]==e)return t;return-1},_isColumnInGroups:function(e){for(var t=0;t<this.groups.length;t++)if(this.groups[t]==e)return!0;return!1},_handlegroupdroplines:function(t){var n=this,r=-1;return e.each(n.groupheadersbounds,function(e){if(t<=this.left+this.width/2){var i=this.left-3;return e>0&&(i=this.left-1-n.groupindentwidth/6),n.dropline.css("left",i),n.dropline.css("top",this.top),n.dropline.height(this.height),n.dropline.fadeIn("slow"),r={index:e,position:"before"},n.rtl&&(r={index:n.groupheadersbounds.length-1-e,position:"before"}),!1}t>=this.left+this.width/2&&(n.dropline.css("left",1+this.left+this.width),n.dropline.css("top",this.top),n.dropline.height(this.height),n.dropline.fadeIn("slow"),r={index:e,position:"after"},n.rtl&&(r={index:n.groupheadersbounds.length-1-e,position:"after"}))}),r},_handlegroupstocolumnsdragdrop:function(t,n){this.dragmousedown=null,this.dragmousedownoffset=null,this.dragstarted=!1,this.dragcolumn=null;var r=this,i,s="mousedown",o="mousemove",u=!1;this.isTouchDevice()&&this.touchmode!==!0&&(u=!0,s=e.jqx.mobile.getTouchEventName("touchstart"),o=e.jqx.mobile.getTouchEventName("touchmove")),this.addHandler(n,"dragstart",function(e){return!1}),this.addHandler(n,s,function(t){if(!r.showgroupsheader)return!0;var n=t.pageX,i=t.pageY;r.__drag=!0,r.dragmousedown={left:n,top:i};if(u){var s=r.getTouches(t),o=s[0];n=o.pageX,i=o.pageY,r.dragmousedown={left:n,top:i},t.preventDefault&&t.preventDefault()}var a=e(t.target).coord();r.dragmousedownoffset={left:parseInt(n)-parseInt(a.left),top:parseInt(i-a.top)}}),this.addHandler(n,o,function(s){if(!r.showgroupsheader)return!0;if(r.dragmousedown){i={left:s.pageX,top:s.pageY};if(u){var o=r.getTouches(s),a=o[0];i={left:a.pageX,top:a.pageY}}if(!r.dragstarted&&r.dragcolumn==null){var f=Math.abs(i.left-r.dragmousedown.left),l=Math.abs(i.top-r.dragmousedown.top);if(f>3||l>3)r._createdragcolumn(n,i,!0),e(document.body).addClass("jqx-disableselect"),e.data(r.dragcolumn[0],"datarecord",t),s.preventDefault&&s.preventDefault()}}})},_createdragcolumn:function(t,n,r){var i=this,s=n;i.dragcolumn=e("<div></div>");var o=t.clone();i.dragcolumn.css("z-index",999999),o.css("border-width","1px"),o.css("opacity","0.4");var u=e(o.find("."+i.toThemeProperty("jqx-grid-column-menubutton")));u.length>0&&u.css("display","none");var a=e(o.find(".jqx-icon-close"));a.length>0&&a.css("display","none"),i.dragcolumnicon=e('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>'),i.dragcolumnicon.addClass(i.toThemeProperty("jqx-grid-drag-icon")),i.dragcolumn.css("float","left"),i.dragcolumn.css("position","absolute");var f=i.host.coord();o.width(t.width()+16),i.dragcolumn.append(o),i.dragcolumn.height(t.height()),i.dragcolumn.width(o.width()),i.dragcolumn.append(i.dragcolumnicon),e(document.body).append(i.dragcolumn),o.css("margin-left",0),o.css("left",0),o.css("top",0),i.dragcolumn.css("left",s.left+i.dragmousedown.left),i.dragcolumn.css("top",s.top+i.dragmousedown.top),r!=undefined&&r&&(i.dropline=e('<div style="display: none; position: absolute;"></div>'),i.dropline.width(2),i.dropline.addClass(i.toThemeProperty("jqx-grid-group-drag-line")),e(document.body).append(i.dropline))},iscolumngroupable:function(e){return this._getcolumnproperty(e,"groupable")},_handlecolumnstogroupsdragdrop:function(t,n){this.dragmousedown=null,this.dragmousedownoffset=null,this.dragstarted=!1,this.dragcolumn=null;var r=this,i,s=!1;this.isTouchDevice()&&this.touchmode!==!0&&(s=!0);var o="mousedown.drag",i="mousemove.drag";s?(o=e.jqx.mobile.getTouchEventName("touchstart")+".drag",i=e.jqx.mobile.getTouchEventName("touchmove")+".drag"):this.addHandler(n,"dragstart",function(e){return!1}),this.addHandler(n,o,function(i){if(!r.showgroupsheader)return!0;r.__drag=!0;if(r._isColumnInGroups(t.displayfield))return n.css("cursor")!="col-resize"?!0:!0;if(0==t.groupable)return!0;var o=i.pageX,u=i.pageY;if(s){var a=r.getTouches(i),f=a[0];o=f.pageX,u=f.pageY}r.dragmousedown={left:o,top:u},s&&i.preventDefault&&i.preventDefault();var l=e(i.target).coord();r.dragmousedownoffset={left:parseInt(o)-parseInt(l.left),top:parseInt(u-l.top)}}),this.addHandler(n,i,function(o){if(!r.showgroupsheader)return!0;if(r._isColumnInGroups(t.displayfield))return n.css("cursor")!="col-resize"?!0:!0;if(r.dragmousedown){var u=o.pageX,a=o.pageY;if(s){var f=r.getTouches(o),l=f[0];u=l.pageX,a=l.pageY}i={left:u,top:a};if(!r.dragstarted&&r.dragcolumn==null){var c=Math.abs(i.left-r.dragmousedown.left),h=Math.abs(i.top-r.dragmousedown.top);if(c>3||h>3)r._createdragcolumn(n,i,!0),e.data(r.dragcolumn[0],"datarecord",t.displayfield),o.preventDefault&&o.preventDefault()}}})},_rendergroupcolumn:function(t,n){var r=e('<div style="float: left; position: relative;"></div>');this.rtl&&r.css("float","right"),this.groupcolumnrenderer!=null&&(r[0].innerHTML=this.groupcolumnrenderer(t),r.addClass(this.toThemeProperty("jqx-grid-group-column")),r.addClass(this.toThemeProperty("jqx-fill-state-normal")));if(this.closeablegroups){r[0].innerHTML==""&&(r[0].innerHTML='<a style="float: left;" href="#">'+t+"</a>"),this.rtl&&(r[0].innerHTML='<a style="float: right;" href="#">'+t+"</a>");var i=this.rtl?"left":"right",s='<div style="float: '+i+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-icon-close")+'"></div></div>';e.jqx.browser.msie&&e.jqx.browser.version<8&&(s='<div style="float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-icon-close")+'"></div></div>');if(this.rtl){var s='<div style="float: '+i+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-icon-close")+'"></div></div>';e.jqx.browser.msie&&e.jqx.browser.version<8&&(s='<div style="float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-icon-close")+'"></div></div>')}r[0].innerHTML+=s}else r[0].innerHTML==""&&(r[0].innerHTML='<a href="#">'+t+"</a>");if(this.sortable){var o=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>'),u=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>');if(this.closeablegroups)var o=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -32px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>'),u=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -32px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>');if(this.rtl){var o=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 0px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>'),u=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 0px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>');if(this.closeablegroups)var o=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>'),u=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>')}o.css("display","none"),u.css("display","none"),e.jqx.browser.msie&&e.jqx.browser.version<8&&(o.css("float","left"),u.css("float","left")),r.append(o),r.append(u),e.data(document.body,"groupsortelements"+n,{sortasc:o,sortdesc:u})}return r.addClass(this.toThemeProperty("jqx-fill-state-normal")),r.addClass(this.toThemeProperty("jqx-grid-group-column")),r},_rendergroup:function(t,n,r,i,s,o,u){var a=n,f=n.cells[r.level];this.rtl&&(f=n.cells[n.cells.length-1-r.level]);var l=this._findgroupstate(r.uniqueid);if(r.bounddata.subGroups.length>0||r.bounddata.subItems.length>0){var c=this.rtl?"-rtl":"",h=this.toThemeProperty("jqx-icon-arrow-right");c&&(h=this.toThemeProperty("jqx-icon-arrow-left")),l?f.className+=" "+this.toThemeProperty("jqx-grid-group-expand"+c)+" "+this.toThemeProperty("jqx-icon-arrow-down"):f.className+=" "+this.toThemeProperty("jqx-grid-group-collapse"+c)+" "+h}var p=this._getColumnText(this.groups[r.level]).label,d=this.groupindentwidth,v=this.rowdetails&&this.showrowdetailscolumn?(1+t)*d:t*d,m=u-v,g=r.level+1;this.rtl&&(g=0);var y=a.cells[g],b=2;while(y!=undefined&&y.style.display=="none"&&b<a.cells.length-1)y=a.cells[g+b-1],b++;var w=e(y);if(!y)return;y.style.width=parseInt(m)+"px",y.className.indexOf("jqx-grid-cell-filter")!=-1&&w.removeClass(this.toThemeProperty("jqx-grid-cell-filter")),y.className.indexOf("jqx-grid-cell-sort")!=-1&&w.removeClass(this.toThemeProperty("jqx-grid-cell-sort")),y.className.indexOf("jqx-grid-cell-pinned")!=-1&&w.removeClass(this.toThemeProperty("jqx-grid-cell-pinned"));if(this.groupsrenderer!=null){var E={group:r.group,level:r.level,parent:r.bounddata.parentItem,subGroups:r.bounddata.subGroups,subItems:r.bounddata.subItems,groupcolumn:this._getColumnText(this.groups[r.level]).column},S=this.groupsrenderer(p+": "+r.group,r.group,l,E);if(S)y.innerHTML=S;else{var x=r.bounddata.subItems.length>0?r.bounddata.subItems.length:r.bounddata.subGroups.length;y.innerHTML='<div class="'+this.toThemeProperty("jqx-grid-groups-row")+'" style="position: absolute;"><span>'+p+": </span>"+'<span class="'+this.toThemeProperty("jqx-grid-groups-row-details")+'">'+r.group+" ("+x+")"+"</span></div>"}}else{var T=this._getcolumnbydatafield(this.groups[r.level]),N=r.group;if(T==null)throw new Error("jqxGrid: Unable to find '"+this.groups[r.level]+"' group in the Grid's columns collection.");T.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(N)?N=e.jqx.dataFormat.formatdate(N,T.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(N)&&(N=e.jqx.dataFormat.formatnumber(N,T.cellsformat,this.gridlocalization)));var x=r.bounddata.subItems.length>0?r.bounddata.subItems.length:r.bounddata.subGroups.length;y.innerHTML='<div class="'+this.toThemeProperty("jqx-grid-groups-row")+'" style="position: absolute;"><span>'+p+": </span>"+'<span class="'+this.toThemeProperty("jqx-grid-groups-row-details")+'">'+N+" ("+x+")"+"</span></div>"}if(this.rtl){T||(T=this._getcolumnbydatafield(this.groups[r.level]));var C=this.hScrollBar.css("visibility")=="hidden"?0:this.hScrollInstance.max-this.hScrollInstance.value,k=this.vScrollBar.css("visibility")=="hidden"?0:this.scrollbarsize+6,v=this.rowdetails&&this.showrowdetailscolumn?(2+r.level)*d:(1+r.level)*d;y.style.width=u+parseInt(C)-v-k+"px",w.addClass(this.toThemeProperty("jqx-rtl"));var L=e(n.cells[n.cells.length-1]).css("z-index");w.css("z-index",L);var A=w.find("div"),m=A.width();A.css("left","100%");var O=this.columns.records[n.cells.length-2-r.level]!=null?this.columns.records[n.cells.length-2-r.level].pinned:!1;this.table.width()<u&&(u=this.table.width(),this.vScrollBar.css("visibility")!="hidden"&&(u+=this.vScrollBar.outerWidth()));if(T.pinned||O)this.rowdetails&&this.showrowdetailscolumn&&(u+=30),A.css("margin-left",-m),y.style.width=u+C-v-k+"px";else{var C=this.hScrollBar.css("visibility")=="hidden"?0:this.hScrollInstance.max;y.style.width=u+C-v-k+"px";var m=A.width();A.css("margin-left",-m)}}}})}(jQuery),function(e){e.extend(e.jqx._jqxGrid.prototype,{_calculateaggregate:function(t,n,r,i){var s=t.aggregates;s||(s=n);if(s){var o=new Array;for(var u=0;u<s.length;u++){if(s[u]=="count")continue;o[o.length]=t.cellsformat}if(this.source&&this.source.getAggregatedData){i==undefined&&(i=this.getrows());if(this.virtualmode){var i=new Array;e.each(this.source._source.records,function(){i.push(this)})}if(r==undefined||r==1){var a=this.source.getAggregatedData([{name:t.datafield,aggregates:s,formatStrings:o}],this.gridlocalization,i);return a}var a=this.source.getAggregatedData([{name:t.datafield,aggregates:s}],this.gridlocalization,i);return a}}return null},getcolumnaggregateddata:function(e,t,n,r){var i=this.getcolumn(e),s=n==undefined||n==0?!1:n;if(t==null)return"";var o=i.aggregates;i.aggregates=null;var u=this._calculateaggregate(i,t,s,r),a={};return u&&(a=u[e]),i.aggregates=o,a},refreshaggregates:function(){this._updatecolumnsaggregates()},renderaggregates:function(){this._updateaggregates()},_updatecolumnaggregates:function(t,n,r){var i=this;if(!n){r.children().remove(),r.html("");if(t.aggregatesrenderer){var s={};t.aggregates&&(s=this.getcolumnaggregateddata(t.datafield,t.aggregates));var o=t.aggregatesrenderer({},t,r,null);r.html(o)}return}r.children().remove(),r.html("");if(t.aggregatesrenderer){if(n){var o=t.aggregatesrenderer(n[t.datafield],t,r,this.getcolumnaggregateddata(t.datafield,n[t.datafield]));r.html(o)}}else e.each(n,function(){var t=this;for(s in t){var n=e('<div style="position: relative; margin: 4px; overflow: hidden;"></div>'),o=s;o=i._getaggregatename(o),n.html(o+":"+t[s]),i.rtl&&n.addClass(i.toThemeProperty("jqx-rtl")),r.append(n)}})},_getaggregatetype:function(e){switch(e){case"min":case"max":case"count":case"avg":case"product":case"var":case"varp":case"stdev":case"stdevp":case"sum":return e}var t=e;for(var n in e){t=n;break}return t},_getaggregatename:function(e){var t=e;switch(e){case"min":t="Min";break;case"max":t="Max";break;case"count":t="Count";break;case"avg":t="Avg";break;case"product":t="Product";break;case"var":t="Var";break;case"stdevp":t="StDevP";break;case"stdev":t="StDev";break;case"varp":t="VarP";case"sum":t="Sum"}if(e===t&&typeof t!="string")for(var n in e){t=n;break}return t},_updatecolumnsaggregates:function(){var t=this.getrows(),n=this.columns.records.length;if(undefined!=this.statusbar[0].cells)for(var r=0;r<n;r++){var i=e(this.statusbar[0].cells[r]),s=this.columns.records[r],o=this._calculateaggregate(s,null,!0,t);this._updatecolumnaggregates(s,o,i)}},_updateaggregates:function(){var t=e('<div style="position: relative;" id="statusrow'+this.element.id+'"></div>'),n=0,r=this.columns.records.length,i=this.toThemeProperty("jqx-grid-cell");this.rtl&&(i+=" "+this.toThemeProperty("jqx-grid-cell-rtl"),n=-1),i+=" "+this.toThemeProperty("jqx-grid-cell-pinned");var s=r+10,o=new Array;this.statusbar[0].cells=o;for(var u=0;u<r;u++){var a=this.columns.records[u],f=this._calculateaggregate(a),l=a.width;l<a.minwidth&&(l=a.minwidth),l>a.maxwidth&&(l=a.maxwidth);var c=i;a.cellsalign&&(c+=" "+this.toThemeProperty("jqx-"+a.cellsalign+"-align"));var h=e('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+c+'"></div>');t.append(h),h.css("left",n),this.rtl?h.css("z-index",s++):h.css("z-index",s--),h.width(l),h[0].left=n,!a.hidden||!a.hideable?n+=l:h.css("display","none"),o[o.length]=h[0],this._updatecolumnaggregates(a,f,h)}e.jqx.browser.msie&&e.jqx.browser.version<8&&t.css("z-index",s--),t.width(parseInt(n)+2),t.height(this.statusbarheight),this.statusbar.children().remove(),this.statusbar.append(t),this.statusbar.removeClass(this.toThemeProperty("jqx-widget-header")),this.statusbar.addClass(i),this.statusbar.css("border-bottom-color","transparent"),this.statusbar.css("border-top-width","1px"),this.rtl&&this.hScrollBar.css("visibility")!="hidden"&&this._renderhorizontalscroll()}})}(jQuery),function(e){e.extend(e.jqx._jqxGrid.prototype,{getcolumnindex:function(e){var t=this.getcolumn(e),n=this.columns.records.indexOf(t);return n},setcolumnindex:function(t,n,r){var i=this.getcolumn(t);if(i.pinned)return;if(i.hidden)return;if(i.checkboxcolumn)return;if(i.grouped)return;var s=this.columns.records.indexOf(i);this.columns.records.splice(s,1),this.columns.records.splice(n,0,i);var o=0,u=this.headerZIndex;this.columnsrow.children().detach();var a=this.toThemeProperty("jqx-grid-cell");a+=" "+this.toThemeProperty("jqx-grid-cell-pinned"),this.filterrow&&(e(this.filterrow.children()[0]).children().detach(),this.filterrow[0].cells=[]);var f=this,l=null;if(f.filterrow!=undefined)var l=e(f.filterrow.children()[0]);this.columnsrow[0].cells=[];var c=!1;e.each(this.columns.records,function(t,n){var r=this.uielement;f.columnsrow.append(r),f.rtl?r.css("z-index",u++):r.css("z-index",u--);var i=this.width;r.css("left",o),f.columnsrow[0].cells[f.columnsrow[0].cells.length]=r[0];if(f.filterrow){var s=e('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+a+'"></div>');l.append(s),s.css("left",o),s.css("z-index",u+1),s.width(this.width),s[0].left=o,s.append(this._filterwidget),f.filterrow[0].cells[f.filterrow[0].cells.length]=s[0]}this.hidden&&(c=!0);if(!this.hidden||!this.hideable)o+=i});if(this.groupable){var h=this.groups.length;h>0&&s-h>=0&&(s-=h,n-=h)}this.rowdetails&&s-1>=0&&(s--,n--),this.selectionmode=="checkbox"&&s-1>=0&&(s--,n--);var i=this._columns[s];this._columns.splice(s,1),this._columns.splice(n,0,i),this._raiseEvent(24,{columntext:i.text,datafield:i.datafield,oldindex:s,newindex:n});if(r==0)return;c||i.columntype=="checkbox"?(this.prerenderrequired=!0,this.rendergridcontent(!0,!1),this._updatecolumnwidths(),this._updatecellwidths()):(this._updatecolumnwidths(),this._updatecellwidths()),this._updatefilterrowui&&this.filterable&&this.showfilterrow&&this._updatefilterrowui(),this._rendercolumngroups(),this._renderrows(this.virtualsizeinfo)},_pinnedColumnsLength:function(){var t=0;return e.each(this.columns.records,function(){this.pinned&&t++,this.grouped&&t++}),this.selectionmode=="checkbox"&&t++,t},_handlecolumnsreorder:function(){var t=this,n=-1,r=!1;if(!t.columnsreorder)return;var i="mousemove.reorder"+this.element.id,s="mousedown.reorder"+this.element.id,o="mouseup.reorder"+this.element.id,u=!1;this.isTouchDevice()&&this.touchmode!==!0&&(u=!0,i=e.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,s=e.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,o=e.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id),this.removeHandler(e(document),i),this.addHandler(e(document),i,function(e){if(t.resizing)return!0;if(t.reordercolumn!=null){var i=parseInt(e.pageX),s=parseInt(e.pageY);if(u){var o=t.getTouches(e),a=o[0];a!=undefined&&(i=parseInt(a.pageX),s=parseInt(a.pageY))}var f=t.host.coord(),l=parseInt(f.left),c=parseInt(f.top);if(t.dragmousedownoffset==undefined||t.dragmousedownoffset==null)t.dragmousedownoffset={left:0,top:0};var h=parseInt(i)-parseInt(t.dragmousedownoffset.left),p=parseInt(s)-parseInt(t.dragmousedownoffset.top);t.reordercolumn.css({left:h+"px",top:p+"px"}),r=!1,i>=l&&i<=l+t.host.width()&&s>=c&&s<=c+t.host.height()&&(r=!0),n=-1;if(r){t.reordercolumnicon.removeClass(t.toThemeProperty("jqx-grid-dragcancel-icon")),t.reordercolumnicon.addClass(t.toThemeProperty("jqx-grid-drag-icon"));var d=t.columnsheader.coord(),v=d.top+t.columnsheader.height();t.columnsdropline!=null&&(s>=d.top&&s<=v?n=t._handlereordercolumnsdroplines(i):t.columnsdropline.fadeOut("slow"))}else t.columnsdropline!=null&&t.columnsdropline.fadeOut("slow"),t.reordercolumnicon.removeClass(t.toThemeProperty("jqx-grid-drag-icon")),t.reordercolumnicon.addClass(t.toThemeProperty("jqx-grid-dragcancel-icon"));if(u)return e.preventDefault(),e.stopPropagation(),!1}}),this.columnsbounds=new Array,this.removeHandler(e(document),s),this.addHandler(e(document),s,function(n){if(t.resizing)return!0;t.columnsbounds=new Array;var r=t.host.coord().left,i=t.host.coord().top;t.showtoolbar&&(i+=t.toolbarheight),t.groupable&&t.showgroupsheader&&(i+=t.groupsheaderheight);var s=0;e.each(t.columns.records,function(n){var o=this;if(o.hidden)return t.columnsbounds[t.columnsbounds.length]={top:i,column:o,left:r,width:0,height:2+t.rowsheight},!0;s==0&&(t.rtl?r=parseInt(t.host.coord().left)-t.hScrollInstance.max+t.hScrollInstance.value:r=parseInt(t.host.coord().left)-t.hScrollInstance.value),s++;var u=2+t.columnsheight;t.columnshierarchy&&(i=e(o.uielement).coord().top,u=e(o.uielement).height()),t.columnsbounds[t.columnsbounds.length]={top:i,column:o,left:r,width:o.width,height:u},r+=o.width})}),this.removeHandler(e(document),o),this.addHandler(e(document),o,function(i){if(t.resizing)return!0;t.__drag=!1,e(document.body).removeClass("jqx-disableselect");var s=parseInt(i.pageX),o=parseInt(i.pageY);if(u){var a=t.getTouches(i),f=a[0];s=parseInt(f.pageX),o=parseInt(f.pageY)}var l=t.host.coord(),c=parseInt(l.left),h=parseInt(l.top),p=t.groupsheader.height();t.showtoolbar&&(h+=t.toolbarheight),t.columndragstarted=!1,t.dragmousedown=null;if(t.reordercolumn!=null){var d=e.data(t.reordercolumn[0],"reorderrecord"),v=t.columns.records.indexOf(t.getcolumn(d));t.reordercolumn.remove(),t.reordercolumn=null;var m=0;m+=t._pinnedColumnsLength();if(d!=null){if(r&&n!=-1){var g=n.index;if(g>=m){var y=t.columns.records[g];if(y!=undefined){var b=t.columns.records.indexOf(t.getcolumn(y.datafield));if(y.datafield==null)var b=t.columns.records.indexOf(t.getcolumnbytext(y.text));if(t.columngroups){var w=y;v<b&&n.position=="before"&&(w=t.columns.records[b-1]);if(w.columngroup!=t.getcolumn(d).columngroup){t.columnsdropline!=null&&(t.columnsdropline.remove(),t.columnsdropline=null);return}}v<b?n.position=="before"?t.setcolumnindex(d,b-1):t.setcolumnindex(d,b):v>b&&t.setcolumnindex(d,b),t.autosavestate&&t.savestate&&t.savestate()}}}t.columnsdropline!=null&&(t.columnsdropline.remove(),t.columnsdropline=null)}}})},getcolumnbytext:function(t){var n=null;return this.columns.records&&e.each(this.columns.records,function(){if(this.text==t)return n=this,!1}),n},_handlereordercolumnsdroplines:function(t){var n=this,r=-1,i=n._pinnedColumnsLength(),s=parseInt(n.host.coord().left),o=s+n.host.width(),u=n.vScrollBar.css("visibility")!="hidden"?19:0;return n.rtl||(u=0),e.each(n.columnsbounds,function(e){if(e>=i){if(this.width==0)return!0;if(t<=this.left+this.width/2)return t>o?(n.columnsdropline.fadeOut(),!1):(n.columnsdropline.css("left",u+parseInt(this.left)+"px"),n.columnsdropline.css("top",parseInt(this.top)+"px"),n.columnsdropline.height(this.height),n.columnsdropline.fadeIn("slow"),r={index:e,position:"before"},!1);if(t>=this.left+this.width/2){if(this.left+this.width>o)return n.columnsdropline.fadeOut(),!1;n.columnsdropline.css("left",u+1+this.left+this.width),n.columnsdropline.css("top",this.top),n.columnsdropline.height(this.height),n.columnsdropline.fadeIn("slow"),r={index:e,position:"after"}}}}),r},_createreordercolumn:function(t,n,r){var i=this,s=n;i.reordercolumn&&i.reordercolumn.remove(),i.columnsdropline&&i.columnsdropline.remove(),i.reordercolumn=e("<div></div>");var o=t.clone();i.reordercolumn.css("z-index",999999),o.css("border-width","1px"),o.css("opacity","0.4");var u=e(o.find("."+i.toThemeProperty("jqx-grid-column-menubutton")));u.length>0&&u.css("display","none");var a=e(o.find(".jqx-icon-close"));a.length>0&&a.css("display","none"),i.reordercolumnicon=e('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>'),i.reordercolumnicon.addClass(i.toThemeProperty("jqx-grid-drag-icon")),i.reordercolumn.css("float","left"),i.reordercolumn.css("position","absolute");var f=i.host.coord();o.width(t.width()+16),i.reordercolumn.append(o),i.reordercolumn.height(t.height()),i.reordercolumn.width(o.width()),i.reordercolumn.append(i.reordercolumnicon),e(document.body).append(i.reordercolumn),o.css("margin-left",0),o.css("left",0),o.css("top",0),i.reordercolumn.css("left",s.left+i.dragmousedown.left),i.reordercolumn.css("top",s.top+i.dragmousedown.top),r!=undefined&&r&&(i.columnsdropline=e('<div style="z-index: 9999; display: none; position: absolute;"></div>'),i.columnsdropline.width(2),i.columnsdropline.addClass(i.toThemeProperty("jqx-grid-group-drag-line")),e(document.body).append(i.columnsdropline))},_handlecolumnsdragreorder:function(t,n){this.reordercolumn&&this.reordercolumn.remove(),this.columnsdropline&&this.columnsdropline.remove(),this.dragmousedown=null,this.dragmousedownoffset=null,this.columndragstarted=!1,this.reordercolumn=null;var r=this,i,s=!1;this.isTouchDevice()&&this.touchmode!==!0&&(s=!0);var o="mousedown.drag",i="mousemove.drag";s?(o=e.jqx.mobile.getTouchEventName("touchstart")+".drag",i=e.jqx.mobile.getTouchEventName("touchmove")+".drag"):this.addHandler(n,"dragstart",function(e){return!1}),this.addHandler(n,o,function(n){if(0==t.draggable)return!0;if(r.resizing)return!0;r.__drag=!0;var i=n.pageX,o=n.pageY;if(s){var u=r.getTouches(n),a=u[0];i=a.pageX,o=a.pageY}r.dragmousedown={left:i,top:o};var f=e(n.target).coord();return r.dragmousedownoffset={left:parseInt(i)-parseInt(f.left),top:parseInt(o-f.top)},!0}),this.addHandler(n,i,function(o){if(!t.draggable)return!0;if(undefined==t.datafield)return!0;if(t.pinned)return!0;if(r.resizing)return!0;if(r.dragmousedown){var u=o.pageX,a=o.pageY;if(s){var f=r.getTouches(o),l=f[0];l!=undefined&&(u=l.pageX,a=l.pageY)}i={left:u,top:a};if(!r.columndragstarted&&r.reordercolumn==null){var c=Math.abs(i.left-r.dragmousedown.left),h=Math.abs(i.top-r.dragmousedown.top);if(c>3||h>3)r._createreordercolumn(n,i,!0),e(document.body).addClass("jqx-disableselect"),e.data(r.reordercolumn[0],"reorderrecord",t.datafield)}}})}})}(jQuery),function(e){e.extend(e.jqx._jqxGrid.prototype,{exportdata:function(t,n,r,i,s,o,u){if(!e.jqx.dataAdapter.ArrayExporter)throw"jqxGrid: Missing reference to jqxdata.export.js!";r==undefined&&(r=!0);var a=this;if(i==undefined){var i=this.getrows();if(i.length==0)throw"No data to export."}this.exporting=!0,this.pageable||(this.loadondemand=!0),this.altrows&&this._renderrows(this.virtualsizeinfo);var f=s!=undefined?s:!1,l={},c={},h=[],p=this.host.find(".jqx-grid-cell:first"),d=this.host.find(".jqx-grid-cell-alt:first");p.removeClass(this.toThemeProperty("jqx-grid-cell-selected")),p.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),d.removeClass(this.toThemeProperty("jqx-grid-cell-selected")),d.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),p.removeClass(this.toThemeProperty("jqx-grid-cell-hover")),p.removeClass(this.toThemeProperty("jqx-fill-state-hover")),d.removeClass(this.toThemeProperty("jqx-grid-cell-hover")),d.removeClass(this.toThemeProperty("jqx-fill-state-hover"));var v="cell",m=1,g="column",y=1,b=[];for(var w=0;w<this.columns.records.length;w++){var E=this.columns.records[w];if(E.cellclassname!=""){E.customCellStyles=new Array;if(typeof E.cellclassname=="string")for(var S=0;S<i.length;S++)E.customCellStyles[S]=E.cellclassname;else for(var S=0;S<i.length;S++){var x=this.getrowboundindex(S),T=E.cellclassname(x,E.displayfield,i[S][E.displayfield],i[S]);T&&(E.customCellStyles[S]=T)}}}e.each(this.columns.records,function(n){var s=e(a.table[0].rows[0].cells[n]);if(a.table[0].rows.length>1)var o=e(a.table[0].rows[1].cells[n]);var u=this,h=function(e){e.removeClass(a.toThemeProperty("jqx-grid-cell-selected")),e.removeClass(a.toThemeProperty("jqx-fill-state-pressed")),e.removeClass(a.toThemeProperty("jqx-grid-cell-hover")),e.removeClass(a.toThemeProperty("jqx-fill-state-hover"));if(u.customCellStyles)for(var t in u.customCellStyles)e.removeClass(u.customCellStyles[t])};h(s),o&&h(o);if(this.displayfield==null)return!0;a.showaggregates&&a.getcolumnaggregateddata&&b.push(a.getcolumnaggregateddata(this.displayfield,this.aggregates,!0,i));var p=a._getexportcolumntype(this);this.exportable&&(!this.hidden||f)&&(l[this.displayfield]={},l[this.displayfield].text=this.text,l[this.displayfield].width=parseInt(this.width),isNaN(l[this.displayfield].width)&&(l[this.displayfield].width=60),l[this.displayfield].formatString=this.cellsformat,l[this.displayfield].localization=a.gridlocalization,l[this.displayfield].type=p,l[this.displayfield].cellsAlign=this.cellsalign,l[this.displayfield].hidden=!r),v="cell"+m;var d=e(this.element);this.element==undefined&&(d=e(this.uielement)),g="column"+y;if(t=="html"||t=="xls"||t=="pdf"){var w=function(e,n,r,i,s,o,u,a,h){c[e]={},c[e]["font-size"]=n.css("font-size"),c[e]["font-weight"]=n.css("font-weight"),c[e]["font-style"]=n.css("font-style"),c[e]["background-color"]=o._getexportcolor(n.css("background-color")),c[e].color=o._getexportcolor(n.css("color")),c[e]["border-color"]=o._getexportcolor(n.css("border-top-color")),r?c[e]["text-align"]=s.align:(c[e]["text-align"]=s.cellsalign,c[e].formatString=s.cellsformat,c[e].dataType=p);if(t=="html"||t=="pdf")c[e]["border-top-width"]=n.css("border-top-width"),c[e]["border-left-width"]=n.css("border-left-width"),c[e]["border-right-width"]=n.css("border-right-width"),c[e]["border-bottom-width"]=n.css("border-bottom-width"),c[e]["border-top-style"]=n.css("border-top-style"),c[e]["border-left-style"]=n.css("border-left-style"),c[e]["border-right-style"]=n.css("border-right-style"),c[e]["border-bottom-style"]=n.css("border-bottom-style"),r?(u==0&&(c[e]["border-left-width"]=n.css("border-right-width")),c[e]["border-top-width"]=n.css("border-right-width"),c[e]["border-bottom-width"]=n.css("border-bottom-width")):u==0&&(c[e]["border-left-width"]=n.css("border-right-width")),c[e].height=n.css("height");s.exportable&&(!s.hidden||f)&&(a==1?(l[s.displayfield].customCellStyles||(l[s.displayfield].customCellStyles=new Array),l[s.displayfield].customCellStyles[h]=e):r?l[s.displayfield].style=e:i?l[s.displayfield].cellAltStyle=e:l[s.displayfield].cellStyle=e)};w(g,d,!0,!1,this,a,n),y++,w(v,s,!1,!1,this,a,n),a.altrows&&(v="cellalt"+m,w(v,o,!1,!0,this,a,n));if(this.customCellStyles){for(var E in u.customCellStyles)s.removeClass(u.customCellStyles[E]);for(var E in u.customCellStyles)s.addClass(u.customCellStyles[E]),w(v+u.customCellStyles[E],s,!1,!1,this,a,n,!0,E),s.removeClass(u.customCellStyles[E])}m++}});if(this.showaggregates){var N=[],C=t=="xls"?"AG":"",k=this.groupable?this.groups.length:0;this.rowdetails&&k++,b.length>0&&(e.each(this.columns.records,function(e){if(this.aggregates)for(var t=0;t<this.aggregates.length;t++){N[t]||(N[t]={});if(N[t]){var n=a._getaggregatename(this.aggregates[t]),r=a._getaggregatetype(this.aggregates[t]),i=b[e-k];i&&(N[t][this.displayfield]=C+n+": "+i[r])}}}),e.each(this.columns.records,function(e){for(var t=0;t<N.length;t++)N[t][this.displayfield]==undefined&&(N[t][this.displayfield]=C)})),e.each(N,function(){i.push(this)})}var L=this,A=e.jqx.dataAdapter.ArrayExporter(i,l,c);if(n==undefined){this._renderrows(this.virtualsizeinfo);var O=A.exportTo(t);return this.showaggregates&&e.each(N,function(){i.pop(this)}),setTimeout(function(){L.exporting=!1},50),O}A.exportToFile(t,n,o,u),this.showaggregates&&e.each(N,function(){i.pop(this)}),this._renderrows(this.virtualsizeinfo),setTimeout(function(){L.exporting=!1},50)},_getexportcolor:function(e){var t=e;e=="transparent"&&(t="#FFFFFF");if(!t||!t.toString())t="#FFFFFF";if(t.toString().indexOf("rgb")!=-1){var n=t.split(",");if(t.toString().indexOf("rgba")!=-1){var r=parseInt(n[0].substring(5)),i=parseInt(n[1]),s=parseInt(n[2]),o=parseInt(n[3].substring(1,4)),u={r:r,g:i,b:s},a=this._rgbToHex(u);return r==0&&i==0&&s==0&&o==0?"#ffffff":"#"+a}var r=parseInt(n[0].substring(4)),i=parseInt(n[1]),s=parseInt(n[2].substring(1,4)),u={r:r,g:i,b:s},a=this._rgbToHex(u);return"#"+a}if(t.toString().indexOf("#")!=-1&&t.toString().length==4){var f=t.toString().substring(1,4);t+=f}return t},_rgbToHex:function(e){return this._intToHex(e.r)+this._intToHex(e.g)+this._intToHex(e.b)},_intToHex:function(e){var t=parseInt(e).toString(16);return t.length==1&&(t="0"+t),t.toUpperCase()},_getexportcolumntype:function(t){var n=this,r="string",i=n.source.datafields||(n.source._source?n.source._source.datafields:null);if(i){var s="";e.each(i,function(){if(this.name==t.displayfield)return this.type&&(s=this.type),!1});if(s)return s}if(t!=null){if(this.dataview.cachedrecords==undefined)return r;var o=null;if(!this.virtualmode){if(this.dataview.cachedrecords.length==0)return r;o=this.dataview.cachedrecords[0][t.displayfield];if(o!=null&&o.toString()=="")return"string"}else e.each(this.dataview.cachedrecords,function(){return o=this[t.displayfield],!1});if(o!=null){if(t.cellsformat.indexOf("c")!=-1)return"number";if(t.cellsformat.indexOf("n")!=-1)return"number";if(t.cellsformat.indexOf("p")!=-1)return"number";if(t.cellsformat.indexOf("d")!=-1)return"date";if(t.cellsformat.indexOf("y")!=-1)return"date";if(t.cellsformat.indexOf("M")!=-1)return"date";if(t.cellsformat.indexOf("m")!=-1)return"date";if(t.cellsformat.indexOf("t")!=-1)return"date";if(typeof o=="boolean")r="boolean";else if(e.jqx.dataFormat.isNumber(o))r="number";else{var u=new Date(o);if(u.toString()=="NaN"||u.toString()=="Invalid Date")if(e.jqx.dataFormat){u=e.jqx.dataFormat.tryparsedate(o);if(u!=null){if(u&&u.getFullYear()&&u.getFullYear()==1970&&u.getMonth()==0&&u.getDate()==1){var a=new Number(o);return isNaN(a)?"string":"number"}return"date"}r="string"}else r="string";else r="date"}}}return r}})}(jQuery),function(e){e.extend(e.jqx._jqxGrid.prototype,{savestate:function(t){var n=this.getstate();return t!==undefined&&!e.isEmptyObject(t)&&(t.indexOf("sort")==-1&&(delete n.sortcolumn,delete n.sortdirection),t.indexOf("pager")==-1&&(delete n.pagenum,delete n.pagesizeoptions,delete n.pagesize),t.indexOf("selection")==-1&&(delete n.selectedcells,delete n.selectedrowindexes,delete n.selectedrowindex),t.indexOf("grouping")==-1&&delete n.groups,t.indexOf("filter")==-1&&delete n.filters,e.each(this.columns.records,function(e){var r=n.columns[this.datafield];t.indexOf("hidden_columns")==-1&&delete r.hidden,t.indexOf("reorder")==-1&&delete r.index,t.indexOf("columns_width")==-1&&delete r.width,t.indexOf("columns_text")==-1&&delete r.text,t.indexOf("alignment")==-1&&(delete r.align,delete r.cellsalign)})),window.localStorage&&(window.localStorage["jqxGrid"+this.element.id]=this._stringify(n)),this._savedstate=n,n},loadstate:function(t,n){var r="";if(t!=undefined&&t.width!=undefined)r=t;else if(window.localStorage){var i=window.localStorage["jqxGrid"+this.element.id];if(i)var r=e.parseJSON(window.localStorage["jqxGrid"+this.element.id])}else if(this._savedstate)var r=this._savedstate;if(r!=null&&r!==""){(this.virtualmode||this.source._source.url&&this.source._source.url!="")&&this.source.beginUpdate();var s=r;s.width!==undefined&&(this.width=s.width),s.height!==undefined&&(this.height=s.height);if(this.pageable){s.pagesize!=undefined&&(this.pagesize=s.pagesize,this.dataview.pagesize=s.pagesize),s.pagenum!=undefined&&(this.dataview.pagenum=s.pagenum),s.pagesizeoptions!=undefined&&(this.pagesizeoptions=s.pagesizeoptions);if(this.pagesizeoptions){var o=0;for(var u=0;u<this.pagesizeoptions.length;u++)this.pagesize>=this.pagesizeoptions[u]&&(o=u);this.pagershowrowscombo&&this.pagershowrowscombo.jqxDropDownList({selectedIndex:o})}}if(this.sortable)if(s.sortdirection){if(s.sortdirection.ascending||s.sortdirection.descending){this.dataview.sortfield=s.sortcolumn;var a=s.sortdirection.ascending?"asc":"desc";this.dataview.sortfielddirection=a,this.source.sortcolumn=s.sortcolumn,this.source.sortdirection=a,this.sortby(s.sortcolumn,a)}}else this.dataview.sortfield!=null&&(this.dataview.sortfielddirection=="asc"||this.dataview.sortfielddirection=="desc")&&this.sortby(this.dataview.sortfield,null);this.groupable&&s.groups&&(this.dataview.groups=s.groups,this.groups=s.groups),this.loadingstate=!0,this.virtualsizeinfo&&this._loadselectionandcolumnwidths(s),this.loadingstate=!1;if(this.virtualmode||this.source._source.url&&this.source._source.url!="")n==1?this.source.endUpdate(!1):(this.source.endUpdate(!1),(this.virtualmode||this.source._source.filter||this.source._source.sort)&&this.updatebounddata("state"))}},_loadselectionandcolumnwidths:function(t){this.loadingstate=!0;var n="";if(t!=undefined&&t.width!=undefined)n=t;else if(window.localStorage){if(window.localStorage["jqxGrid"+this.element.id])var n=e.parseJSON(window.localStorage["jqxGrid"+this.element.id])}else if(this._savedstate)var n=this._savedstate;if(n!=null&&n!=""){var r=this._loading;this._loading=!1;var i=n,s=this,o=!1,u=[];u.length=0;var a=[];e.each(this.columns.records,function(e){var t=i.columns[this.datafield];if(t!=undefined){this.text!=t.text&&(o=!0),this.hidden!=t.hidden&&(o=!0),t.width!==undefined&&(this.width=t.width,this._width&&(this._width=null),this._percentagewidth&&(this._percentagewidth=null)),t.hidden!==undefined&&(this.hidden=t.hidden),t.pinned!==undefined&&(this.pinned=t.pinned),t.groupable!==undefined&&(this.groupable=t.groupable),t.resizable!==undefined&&(this.resizable=t.resizable),this.draggable=t.draggable,t.text!==undefined&&(this.text=t.text),t.align!==undefined&&(this.align=t.align),t.cellsalign!==undefined&&(this.cellsalign=t.cellsalign);if(s._columns)for(var n=0;n<s._columns.length;n++)s._columns[n].datafield==this.datafield&&(t.hidden!==undefined&&(s._columns[n].hidden=t.hidden),t.width!==undefined&&s._columns[n]["width"]!=undefined&&(s._columns[n].width=t.width));t.index!==undefined&&(u[this.datafield]=t.index,u.length++)}});if(u.length>0){if(this.setcolumnindex){var f=this.rowdetails?1:0;f+=this.groupable?this.groups.length:0;var l=new Array;for(var c=0;c<this.columns.records.length;c++)l.push(this.columns.records[c]);var h=0;for(var c=0;c<l.length;c++){var p=l[c],d=u[p.datafield];if(this.groupable&&p.grouped){h++;continue}if(c==0&&this.rowdetails){h++;continue}(c!==d||this.groupable||this.rowdetails)&&s.setcolumnindex(p.datafield,h+d,!1)}}this.prerenderrequired=!0,this.groupable&&this._refreshdataview(),this.rendergridcontent(!0),this._updatefilterrowui&&this.filterable&&this.showfilterrow&&this._updatefilterrowui(),this._renderrows(this.virtualsizeinfo)}if(this.filterable&&i.filters!==undefined){this.clearfilters&&(this._loading=!1,this.clearfilters(!1));var v="",m=new e.jqx.filter;for(var c=0;c<i.filters.filterscount;c++){var g=i.filters["filtercondition"+c],y=i.filters["filterdatafield"+c],p=this.getcolumn(y);y!=v&&(m=new e.jqx.filter),v=y;if(p&&p.filterable){var b=i.filters["filtervalue"+c],w=i.filters["filteroperator"+c],E=i.filters["filtertype"+c];if(E=="datefilter")var S=m.createfilter(E,b,g,null,p.cellsformat,this.gridlocalization);else var S=m.createfilter(E,b,g);m.addfilter(w,S);if(this.showfilterrow){var x=p._filterwidget,T=p._filterwidget.parent();if(x!=null)switch(p.filtertype){case"number":T.find("input").val(b);if(this.host.jqxDropDownList){var N=m.getoperatorsbyfiltertype("numericfilter");x.find(".filter").jqxDropDownList("selectIndex",N.indexOf(g))}break;case"date":if(this.host.jqxDateTimeInput){var C=i.filters["filtervalue"+(c+1)],E=i.filters["filtertype"+c],S=m.createfilter(E,C,"LESS_THAN_OR_EQUAL");m.addfilter(w,S);var k=new Date(b),L=new Date(C);isNaN(k)&&(k=e.jqx.dataFormat.tryparsedate(b)),isNaN(L)&&(L=e.jqx.dataFormat.tryparsedate(b)),e(T.children()[0]).jqxDateTimeInput("setRange",k,L),c++}else x.val(b);break;case"textbox":case"default":x.val(b),s["_oldWriteText"+x[0].id]=b;break;case"list":if(this.host.jqxDropDownList){var A=e(T.children()[0]).jqxDropDownList("getItems"),d=-1;e.each(A,function(e){if(this.value==b)return d=e,!1}),e(T.children()[0]).jqxDropDownList("selectIndex",d)}else x.val(b);break;case"checkedlist":this.host.jqxDropDownList||x.val(b);break;case"bool":case"boolean":this.host.jqxCheckBox?e(T.children()[0]).jqxCheckBox({checked:b}):x.val(b)}}this.addfilter(y,m)}}i.filters&&i.filters.filterscount>0&&(this.applyfilters(),this.showfilterrow&&e.each(this.columns.records,function(){if(this.filtertype=="checkedlist"&&this.filterable&&s.host.jqxDropDownList){var t=this,n=t._filterwidget,r=n.jqxDropDownList("getItems"),i=n.jqxDropDownList("listBox");i.checkAll(!1);if(t.filter){i.uncheckAll(!1);var o=t.filter.getfilters();for(var u=0;u<i.items.length;u++){var a=i.items[u].label;e.each(o,function(){if(this.condition=="NOT_EQUAL")return!0;a==this.value&&i.checkIndex(u,!1,!1)})}i._updateCheckedItems();var f=i.getCheckedItems().length;i.items.length!=f&&f>0&&i.host.jqxListBox("indeterminateIndex",0,!0,!1)}}})),this.pageable&&i.pagenum!==undefined&&(this.gotopage&&!this.virtualmode?(this.dataview.pagenum=-1,this.gotopage(i.pagenum)):this.gotopage&&this.virtualmode&&this.gotopage(i.pagenum))}i.selectedrowindexes&&i.selectedrowindexes&&i.selectedrowindexes.length>0&&(this.selectedrowindexes=i.selectedrowindexes,this.selectedrowindex=i.selectedrowindex,this.selectionmode==="checkbox"&&this._updatecheckboxselection()),i.selectedcells&&this._applycellselection&&e.each(i.selectedcells,function(){s._applycellselection(this.rowindex,this.datafield,!0,!1)});if(this.groupable&&i.groups!==undefined){this._refreshdataview(),this.render(),this._loading=r,this.loadingstate=!1;return}if(o){this.prerenderrequired=!0,this.rendergridcontent(!0),this._loading=r,this.loadingstate=!1;if(this.updating())return!1}else this._loading=r,this._updatecolumnwidths(),this._updatecellwidths(),this.loadingstate=!1;this.loadingstate=!1,this._loading=r,this._renderrows(this.virtualsizeinfo)}this.loadingstate=!1},getstate:function(){var t=this.getdatainformation(),n={};n.width=this.width,n.height=this.height,n.pagenum=t.paginginformation.pagenum,n.pagesize=t.paginginformation.pagesize,n.pagesizeoptions=this.pagesizeoptions,n.sortcolumn=t.sortinformation.sortcolumn,n.sortdirection=t.sortinformation.sortdirection;if(this.selectionmode!=null&&this.getselectedcells)if(this.selectionmode.toString().indexOf("cell")!=-1){var r=this.getselectedcells(),i=new Array;e.each(r,function(){i.push({datafield:this.datafield,rowindex:this.rowindex})}),n.selectedcells=i}else{var s=this.getselectedrowindexes();n.selectedrowindexes=s,n.selectedrowindex=this.selectedrowindex}var o={},u=0;if(this.dataview.filters)for(var a=0;a<this.dataview.filters.length;a++){var f=this.dataview.filters[a].datafield,l=this.dataview.filters[a].filter,c=l.getfilters();o[f+"operator"]=l.operator;for(var h=0;h<c.length;h++){c[h].datafield=f;if(c[h].type=="datefilter")if(c[h].value&&c[h].value.toLocaleString){var p=this.getcolumn(c[h].datafield);if(p.cellsformat){var d=this.source.formatDate(c[h].value,p.cellsformat,this.gridlocalization);d?o["filtervalue"+u]=d:o["filtervalue"+u]=c[h].value.toLocaleString()}else o["filtervalue"+u]=c[h].value.toLocaleString()}else o["filtervalue"+u]=c[h].value;else o["filtervalue"+u]=c[h].value;o["filtercondition"+u]=c[h].condition,o["filteroperator"+u]=c[h].operator,o["filterdatafield"+u]=f,o["filtertype"+u]=c[h].type,u++}}o.filterscount=u,n.filters=o,n.groups=this.groups,n.columns={};var v=0;return this.columns.records&&e.each(this.columns.records,function(e,t){if(!this.datafield)return!0;var r={};r.width=this.width,r.hidden=this.hidden,r.pinned=this.pinned,r.groupable=this.groupable,r.resizable=this.resizable,r.draggable=this.draggable,r.text=this.text,r.align=this.align,r.cellsalign=this.cellsalign,r.index=v++,n.columns[this.datafield]=r}),n},_stringify:function(e){if(window.JSON&&typeof window.JSON.stringify=="function"){var t=this,n="";try{n=window.JSON.stringify(e)}catch(r){return t._str("",{"":e})}return n}var n=this._str("",{"":e});return n},_quote:function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return'"'+e.replace(t,function(e){var t=n[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"'},_stringifyArray:function(e){var t=e.length,n=[],r;for(var r=0;r<t;r++)n.push(this._str(r,e)||"null");return"["+n.join(",")+"]"},_stringifyObject:function(e){var t=[],n,r,i=this;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r=i._str(n,e),r&&t.push(i._quote(n)+":"+r));return"{"+t.join(",")+"}"},_stringifyReference:function(e){switch(Object.prototype.toString.call(e)){case"[object Array]":return this._stringifyArray(e)}return this._stringifyObject(e)},_stringifyPrimitive:function(e,t){switch(t){case"string":return this._quote(e);case"number":return isFinite(e)?e:"null";case"boolean":return e}return"null"},_str:function(e,t){var n=t[e],r=typeof n;return n&&typeof n=="object"&&typeof n.toJSON=="function"&&(n=n.toJSON(e),r=typeof n),/(number|string|boolean)/.test(r)||!n&&r==="object"?this._stringifyPrimitive(n,r):this._stringifyReference(n)}})}(jQuery),function(e){e.jqx.jqxWidget("jqxCheckBox","",{}),e.extend(e.jqx._jqxCheckBox.prototype,{defineInstance:function(){this.animationShowDelay=300,this.animationHideDelay=300,this.width=null,this.height=null,this.boxSize="13px",this.checked=!1,this.hasThreeStates=!1,this.disabled=!1,this.enableContainerClick=!0,this.locked=!1,this.groupName="",this.keyboardCheck=!0,this.enableHover=!0,this.hasInput=!0,this.rtl=!1,this.updated=null,this.disabledContainer=!1,this._canFocus=!0,this.aria={"aria-checked":{name:"checked",type:"boolean"},"aria-disabled":{name:"disabled",type:"boolean"}},this.events=["checked","unchecked","indeterminate","change"]},createInstance:function(e){this.render()},_addInput:function(){if(this.hasInput){this.input&&this.input.remove();var t=this.host.attr("name");t||(t=this.element.id),this.input=e("<input type='hidden'/>"),this.host.append(this.input),this.input.attr("name",t),this.input.val(this.checked),this.host.attr("role","checkbox"),e.jqx.aria(this)}},render:function(){this.init=!0;var t=this;this.setSize(),this.propertyChangeMap.width=function(e,n,r,i){t.setSize()},this.propertyChangeMap.height=function(e,n,r,i){t.setSize()},this._removeHandlers(),this.checkbox&&(this.checkbox.remove(),this.checkbox=null),this.checkMark&&(this.checkMark.remove(),this.checkMark=null),this.box&&(this.box.remove(),this.box=null),this.clear&&(this.clear.remove(),this.clear=null),this.boxSize==null&&(this.boxSize=13);var n=parseInt(this.boxSize)+"px";this.checkbox=e('<div><div style="width: '+n+"; height: "+n+';"><span style="width: '+n+"; height: "+n+';"></span></div></div>'),this.host.prepend(this.checkbox),this.disabledContainer||(this.host.attr("tabIndex")||this.host.attr("tabIndex",0),this.clear=e('<div style="clear: both;"></div>'),this.host.append(this.clear)),this.checkMark=e(this.checkbox[0].firstChild.firstChild),this.box=this.checkbox,this.box.addClass(this.toThemeProperty("jqx-checkbox-default")+" "+this.toThemeProperty("jqx-fill-state-normal")+" "+this.toThemeProperty("jqx-rc-all")),this.disabled&&this.disable(),this.disabledContainer||(this.host.addClass(this.toThemeProperty("jqx-widget")),this.host.addClass(this.toThemeProperty("jqx-checkbox"))),this.locked&&!this.disabledContainer&&this.host.css("cursor","auto");var r=this.element.getAttribute("checked");if(r=="checked"||r=="true"||r==1)this.checked=!0;this._addInput(),this._render(),this._addHandlers(),this.init=!1},refresh:function(e){e||(this.setSize(),this._render())},resize:function(e,t){this.width=e,this.height=t,this.refresh()},setSize:function(){this.width!=null&&this.width.toString().indexOf("px")!=-1?this.host.width(this.width):this.width!=undefined&&!isNaN(this.width)&&this.host.width(this.width),this.height!=null&&this.height.toString().indexOf("px")!=-1?this.host.height(this.height):this.height!=undefined&&!isNaN(this.height)&&this.host.height(this.height)},_addHandlers:function(){var t=this,n=e.jqx.mobile.isTouchDevice(),r="mousedown";n&&(r=e.jqx.mobile.getTouchEventName("touchend")),this.addHandler(this.box,r,function(e){if(!t.disabled&&!t.enableContainerClick&&!t.locked)return t.toggle(),t.updated&&(e.owner=t,t.updated(e,t.checked,t.oldChecked)),e.preventDefault&&e.preventDefault(),!1}),this.disabledContainer||(this.addHandler(this.host,"keydown",function(e){if(!t.disabled&&!t.locked&&t.keyboardCheck&&e.keyCode==32)return t._canFocus?(t.toggle(),t.updated&&(e.owner=t,t.updated(e,t.checked,t.oldChecked)),e.preventDefault&&e.preventDefault(),!1):!0}),this.addHandler(this.host,r,function(e){if(!t.disabled&&t.enableContainerClick&&!t.locked)return t.toggle(),e.preventDefault&&e.preventDefault(),!1}),this.addHandler(this.host,"selectstart",function(e){if(!t.disabled&&t.enableContainerClick)return e.preventDefault&&e.preventDefault(),!1}),this.addHandler(this.host,"mouseup",function(e){!t.disabled&&t.enableContainerClick&&e.preventDefault&&e.preventDefault()}),this.addHandler(this.host,"focus",function(e){if(!t.disabled&&!t.locked)return t._canFocus?(t.enableHover&&t.box.addClass(t.toThemeProperty("jqx-checkbox-hover")),t.box.addClass(t.toThemeProperty("jqx-fill-state-focus")),e.preventDefault&&e.preventDefault(),t.hovered=!0,!1):!0}),this.addHandler(this.host,"blur",function(e){if(!t.disabled&&!t.locked)return t._canFocus?(t.enableHover&&t.box.removeClass(t.toThemeProperty("jqx-checkbox-hover")),t.box.removeClass(t.toThemeProperty("jqx-fill-state-focus")),e.preventDefault&&e.preventDefault(),t.hovered=!1,!1):!0}),this.addHandler(this.host,"mouseenter",function(e){t.locked&&t.host.css("cursor","arrow");if(t.enableHover&&!t.disabled&&t.enableContainerClick&&!t.locked)return t.box.addClass(t.toThemeProperty("jqx-checkbox-hover")),t.box.addClass(t.toThemeProperty("jqx-fill-state-hover")),e.preventDefault&&e.preventDefault(),t.hovered=!0,!1}),this.addHandler(this.host,"mouseleave",function(e){if(t.enableHover&&!t.disabled&&t.enableContainerClick&&!t.locked)return t.box.removeClass(t.toThemeProperty("jqx-checkbox-hover")),t.box.removeClass(t.toThemeProperty("jqx-fill-state-hover")),e.preventDefault&&e.preventDefault(),t.hovered=!1,!1}),this.addHandler(this.box,"mouseenter",function(){if(t.locked)return;!t.disabled&&!t.enableContainerClick&&(t.box.addClass(t.toThemeProperty("jqx-checkbox-hover")),t.box.addClass(t.toThemeProperty("jqx-fill-state-hover")))}),this.addHandler(this.box,"mouseleave",function(){!t.disabled&&!t.enableContainerClick&&(t.box.removeClass(t.toThemeProperty("jqx-checkbox-hover")),t.box.removeClass(t.toThemeProperty("jqx-fill-state-hover")))}))},focus:function(){try{this.host.focus()}catch(e){}},_removeHandlers:function(){var t=e.jqx.mobile.isTouchDevice(),n="mousedown";t&&(n="touchend"),this.box&&(this.removeHandler(this.box,n),this.removeHandler(this.box,"mouseenter"),this.removeHandler(this.box,"mouseleave")),this.removeHandler(this.host,n),this.removeHandler(this.host,"mouseup"),this.removeHandler(this.host,"selectstart"),this.removeHandler(this.host,"mouseenter"),this.removeHandler(this.host,"mouseleave"),this.removeHandler(this.host,"keydown"),this.removeHandler(this.host,"blur"),this.removeHandler(this.host,"focus")},_render:function(){this.disabled?this.disable():this.enableContainerClick?this.host.css("cursor","pointer"):this.init||this.host.css("cursor","auto"),this.rtl&&(this.box.addClass(this.toThemeProperty("jqx-checkbox-rtl")),this.host.addClass(this.toThemeProperty("jqx-rtl"))),this.updateStates()},_setState:function(e){this.checked!=e&&(this.checked=e,this.checked?this.checkMark[0].className=this.toThemeProperty("jqx-checkbox-check-checked"):this.checked==null?this.checkMark[0].className=this.toThemeProperty("jqx-checkbox-check-indeterminate"):this.checkMark[0].className="")},val:function(e){return arguments.length==0||e!=null&&typeof e=="object"?this.checked:(typeof e=="string"?(e=="true"&&this.check(),e=="false"&&this.uncheck(),e==""&&this.indeterminate()):(e==1&&this.check(),e==0&&this.uncheck(),e==null&&this.indeterminate()),this.checked)},check:function(){this.checked=!0;var t=this;this.checkMark.removeClass(),e.jqx.browser.msie||this.animationShowDelay==0?this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-checked")):(this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-checked")),this.checkMark.css("opacity",0),this.checkMark.stop().animate({opacity:1},this.animationShowDelay,function(){}));if(this.groupName!=null&&this.groupName.length>0){var n=e.find(this.toThemeProperty(".jqx-checkbox",!0));e.each(n,function(){var n=e(this).jqxCheckBox("groupName");n==t.groupName&&this!=t.element&&e(this).jqxCheckBox("uncheck")})}this._raiseEvent("0",!0),this._raiseEvent("3",{checked:!0}),this.input!=undefined&&(this.input.val(this.checked),e.jqx.aria(this,"aria-checked",this.checked))},uncheck:function(){this.checked=!1;var t=this;e.jqx.browser.msie||this.animationHideDelay==0?t.checkMark[0].className!=""&&(t.checkMark[0].className=""):(this.checkMark.css("opacity",1),this.checkMark.stop().animate({opacity:0},this.animationHideDelay,function(){t.checkMark[0].className!=""&&(t.checkMark[0].className="")})),this._raiseEvent("1"),this._raiseEvent("3",{checked:!1}),this.input!=undefined&&(this.input.val(this.checked),e.jqx.aria(this,"aria-checked",this.checked))},indeterminate:function(){this.checked=null,this.checkMark.removeClass(),e.jqx.browser.msie||this.animationShowDelay==0?this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-indeterminate")):(this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-indeterminate")),this.checkMark.css("opacity",0),this.checkMark.stop().animate({opacity:1},this.animationShowDelay,function(){})),this._raiseEvent("2"),this._raiseEvent("3",{checked:null}),this.input!=undefined&&(this.input.val(this.checked),e.jqx.aria(this,"aria-checked","undefined"))},toggle:function(){if(this.disabled)return;if(this.locked)return;if(this.groupName!=null&&this.groupName.length>0){this.checked!=1&&(this.checked=!0,this.updateStates());return}this.oldChecked=this.checked,this.checked==1?this.checked=this.hasThreeStates?null:!1:this.checked=this.checked!=null,this.updateStates(),this.input!=undefined&&this.input.val(this.checked)},updateStates:function(){this.checked?this.check():this.checked==0?this.uncheck():this.checked==null&&this.indeterminate()},disable:function(){this.disabled=!0,this.checked==1?this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-disabled")):this.checked==null&&this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-indeterminate-disabled")),this.box.addClass(this.toThemeProperty("jqx-checkbox-disabled-box")),this.host.addClass(this.toThemeProperty("jqx-checkbox-disabled")),this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this.box.addClass(this.toThemeProperty("jqx-checkbox-disabled")),e.jqx.aria(this,"aria-disabled",this.disabled)},enable:function(){this.checked==1?this.checkMark.removeClass(this.toThemeProperty("jqx-checkbox-check-disabled")):this.checked==null&&this.checkMark.removeClass(this.toThemeProperty("jqx-checkbox-check-indeterminate-disabled")),this.box.removeClass(this.toThemeProperty("jqx-checkbox-disabled-box")),this.host.removeClass(this.toThemeProperty("jqx-checkbox-disabled")),this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),this.box.removeClass(this.toThemeProperty("jqx-checkbox-disabled")),this.disabled=!1,e.jqx.aria(this,"aria-disabled",this.disabled)},destroy:function(){this.host.remove()},_raiseEvent:function(e,t){if(this.init)return;var n=this.events[e],r=new jQuery.Event(n);r.owner=this,r.args=t;try{var i=this.host.trigger(r)}catch(s){}return i},propertyChangedHandler:function(t,n,r,i){if(this.isInitialized==undefined||this.isInitialized==0)return;n==t.enableContainerClick&&!t.disabled&&!t.locked&&(i?t.host.css("cursor","pointer"):t.host.css("cursor","auto")),n=="rtl"&&(i?(t.box.addClass(t.toThemeProperty("jqx-checkbox-rtl")),t.host.addClass(t.toThemeProperty("jqx-rtl"))):(t.box.removeClass(t.toThemeProperty("jqx-checkbox-rtl")),t.host.removeClass(t.toThemeProperty("jqx-rtl")))),n=="boxSize"&&t.render(),n=="theme"&&e.jqx.utilities.setTheme(r,i,t.host);if(n=="checked"&&i!=r)switch(i){case!0:t.check();break;case!1:t.uncheck();break;case null:t.indeterminate()}n=="disabled"&&i!=r&&(i?t.disable():t.enable())}})}(jQuery),define("$model/UI2/system/components/designerCommon/grid/js/grid-base",function(){}),define("$model/UI2/system/components/designerCommon/grid/grid",["require","jquery","$UI/system/lib/justep","$UI/system/components/justep/data/data","css!./css/base","./js/grid-base"],function(e){var t=e("jquery"),n=e("$UI/system/lib/justep"),r=e("$UI/system/components/justep/data/data");e("css!./css/base").load(),e("./js/grid-base");var i=e.normalizeName("./grid"),s=n.ViewComponent.extend({constructor:function(e){this.callParent(e)},buildTemplate:function(e){if(e){var t=e.parentNode;delete e.parentNode;var r=n.Bind.utils.stringifyJson(e);return e.parentNode=t,"<div component='"+i+"' config='"+r+"'/>"}},init:function(e,i){this.callParent(e,i);var s=t(this.domNode),o=s.attr("config");if(o){var u=t.parseJSON(o);if(u){var a=function(e,t,n){e.createeditor=function(r,i,s){n.fireEvent("onCreateEditor_"+t,{source:n,config:e,row:r,value:i,editor:s})},e.cellvaluechanging=function(r,i,s,o,u){var a={source:n,config:e,row:r,column:i,type:s,oldValue:o,newValue:u};return n.fireEvent("onCellValueChanging_"+t,a),a.newvalue}};for(var f=0;f<u.columns.length;f++){var l=u.columns[f],c=l.dataField;a(l,c,this)}this.fireEvent("onCreate",{source:this,config:u});var h=u.dataXID,p=r.$(this.getModel(),h);if(!p){var d=new n.Message(n.Message.JUSTEP230062,h);throw n.Error.create(d)}delete u.dataXID,u.source=new t.jqx.dataAdapter({localdata:p.datas,datatype:"observablearray"}),s.jqxGrid(u);var v=t.data(this.domNode).jqxGrid.instance,m=p.getRowByID();v.host.jqxGrid("selectrow",p.datas.indexOf(m)),p.currentRow.subscribe(function(e){v["data-updating"]||v.host.jqxGrid("selectrow",p.datas.indexOf(e))}),t(this.domNode).on("rowselect",function(e){if(!v["data-updating"]){v["data-updating"]=!0;try{var t=e.args,n=p.getRowByID(),r=p.datas.get()[t.rowindex];n!==r&&(p.to(r),n=p.getRowByID(),n!==r&&v.host.jqxGrid("selectrow",p.datas.indexOf(n)))}finally{v["data-updating"]=!1}}}),p.readonly.subscribe(function(e){v.host.jqxGrid({disabled:e})});var g=function(e,t,n,r){if(p.getReadonly(t,p.datas.get()[e]))return!1};for(f=0;f<u.columns.length;f++)v.host.jqxGrid("setcolumnproperty",u.columns[f].dataField,"cellbeginedit",g)}}},update:function(e,t){},getGrid:function(){return t.data(this.domNode).jqxGrid.instance}});return n.Component.register(i,s),s});